{"nick":"retrofox","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T00:13:10.743Z","type":"quit"}
{"nick":"retrofox","date":"2012-11-26T00:28:28.389Z","type":"join"}
{"nick":"coderarizzz","new_nick":"coderarity","date":"2012-11-26T00:29:15.723Z","type":"nick"}
{"nick":"generalissimo","date":"2012-11-26T00:30:50.298Z","type":"join"}
{"nick":"st_luke","date":"2012-11-26T00:37:42.629Z","type":"join"}
{"nick":"joshsmith","reason":"Quit: joshsmith","date":"2012-11-26T00:38:42.728Z","type":"quit"}
{"nick":"intabulas","reason":"Remote host closed the connection","date":"2012-11-26T00:52:26.026Z","type":"quit"}
{"nick":"intabulas","date":"2012-11-26T00:52:52.867Z","type":"join"}
{"nick":"motiooon","date":"2012-11-26T01:02:01.620Z","type":"join"}
{"nick":"joshsmith","date":"2012-11-26T01:03:12.793Z","type":"join"}
{"nick":"retrofox","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T01:08:50.006Z","type":"quit"}
{"nick":"swaagie","reason":"Quit: Leaving","date":"2012-11-26T01:12:09.057Z","type":"quit"}
{"nick":"konklone","date":"2012-11-26T01:14:08.935Z","type":"part"}
{"nick":"konklone","date":"2012-11-26T01:14:38.974Z","type":"join"}
{"nick":"eldios","reason":"Quit: bye =)","date":"2012-11-26T01:16:39.600Z","type":"quit"}
{"nick":"konklone","message":"huh - could someone check if my drone is dead or hanging? username: konklone, app: sockets","date":"2012-11-26T01:16:46.808Z","type":"message"}
{"nick":"konklone","message":"getting an 8s response time again","date":"2012-11-26T01:16:50.635Z","type":"message"}
{"nick":"konklone","message":"I am gonna look at switching from socket.io to sockjs","date":"2012-11-26T01:17:02.159Z","type":"message"}
{"nick":"konklone","message":"if this is indeed a memory leak","date":"2012-11-26T01:17:06.640Z","type":"message"}
{"nick":"coderarity","message":"alright","date":"2012-11-26T01:17:14.445Z","type":"message"}
{"nick":"konklone","message":"I have 2 drones behind it","date":"2012-11-26T01:17:26.357Z","type":"message"}
{"nick":"coderarity","message":"yeah, they're slow, that's for sure :P","date":"2012-11-26T01:18:38.720Z","type":"message"}
{"nick":"konklone","message":"both of them?","date":"2012-11-26T01:18:55.028Z","type":"message"}
{"nick":"switz","reason":"\"Linkinus - http://linkinus.com\"","date":"2012-11-26T01:19:00.553Z","type":"part"}
{"nick":"coderarity","message":"yeah, let me see if i can figure out why","date":"2012-11-26T01:19:04.604Z","type":"message"}
{"nick":"konklone","message":"thank you ","date":"2012-11-26T01:19:07.720Z","type":"message"}
{"nick":"clarkfischer","reason":"Ping timeout: 252 seconds","date":"2012-11-26T01:20:54.500Z","type":"quit"}
{"nick":"InspiredJW","date":"2012-11-26T01:23:06.270Z","type":"join"}
{"nick":"mdedetrich","message":"I am back","date":"2012-11-26T01:24:20.398Z","type":"message"}
{"nick":"clarkfischer","date":"2012-11-26T01:28:15.301Z","type":"join"}
{"nick":"generalissimo","reason":"Remote host closed the connection","date":"2012-11-26T01:31:15.936Z","type":"quit"}
{"nick":"coderarity","message":"konklone: it seems to be using a ton of memory, and then crashing and restarting","date":"2012-11-26T01:36:50.729Z","type":"message"}
{"nick":"coderarity","message":"you might have a ton of traffic, or maybe you're right and it's a memory leak","date":"2012-11-26T01:37:22.242Z","type":"message"}
{"nick":"coderarity","message":"konklone: this is happening on both of your drones","date":"2012-11-26T01:39:37.611Z","type":"message"}
{"nick":"konklone","message":"coderarity: I do in general have a ton of traffic","date":"2012-11-26T01:39:59.155Z","type":"message"}
{"nick":"konklone","message":"~200 concurrents most days","date":"2012-11-26T01:40:04.974Z","type":"message"}
{"nick":"konklone","message":"not all of those connect to the streaming server","date":"2012-11-26T01:40:09.549Z","type":"message"}
{"nick":"konklone","message":"it looks like ~80/200 do","date":"2012-11-26T01:40:16.025Z","type":"message"}
{"nick":"konklone","message":"80 concurrents really isn't that much though, right? and only a fraction of those 80 are actually sending much traffic right now","date":"2012-11-26T01:40:33.284Z","type":"message"}
{"nick":"konklone","message":"so not a ton of traffic in regards to these drones","date":"2012-11-26T01:40:50.633Z","type":"message"}
{"nick":"konklone","message":"coderarity: the restarting is a cycle? can you see how long it takes for them to build up memory and crash and restar?","date":"2012-11-26T01:41:15.738Z","type":"message"}
{"nick":"konklone","message":"*restart","date":"2012-11-26T01:41:18.498Z","type":"message"}
{"nick":"coderarity","message":"no, but maybe you can with `jitsu logs`","date":"2012-11-26T01:42:20.218Z","type":"message"}
{"nick":"konklone","message":"wow","date":"2012-11-26T01:47:26.399Z","type":"message"}
{"nick":"konklone","message":"looks like every 30 minutes","date":"2012-11-26T01:47:29.212Z","type":"message"}
{"nick":"konklone","message":"or even as fast as every 18 minutes","date":"2012-11-26T01:47:52.148Z","type":"message"}
{"nick":"konklone","message":"holy crap","date":"2012-11-26T01:47:53.314Z","type":"message"}
{"nick":"konklone","message":"or even as fast every 6 minutes in some cases.","date":"2012-11-26T01:49:35.711Z","type":"message"}
{"nick":"konklone","message":"well.","date":"2012-11-26T01:49:37.600Z","type":"message"}
{"nick":"konklone","message":"so this is basically terrible","date":"2012-11-26T01:49:47.996Z","type":"message"}
{"nick":"coderarity","message":"konklone: added another drone for you to help you keep up, it could be the load","date":"2012-11-26T01:50:22.163Z","type":"message"}
{"nick":"konklone","message":"thanks","date":"2012-11-26T01:50:43.695Z","type":"message"}
{"nick":"konklone","message":"still, this is only a very small fraction of the number of concurrent connections I expect to have on launch","date":"2012-11-26T01:50:58.352Z","type":"message"}
{"nick":"konklone","message":"I'm already planning on switching to the automatic plan and revving up a lot of drones, but","date":"2012-11-26T01:51:22.875Z","type":"message"}
{"nick":"konklone","message":"something tells me this memory usage is not going to be sustainable","date":"2012-11-26T01:51:28.215Z","type":"message"}
{"nick":"konklone","message":"I'm gonna try switching to Node 0.6.2 and see if, as someone said on one of the mem leak tickets I was looking at, that helps things","date":"2012-11-26T01:51:53.594Z","type":"message"}
{"nick":"benv_","date":"2012-11-26T01:52:41.213Z","type":"join"}
{"nick":"konklone","message":"and I'm gonna switch it back down to 2 drones, so I can do an even comparison","date":"2012-11-26T01:53:59.302Z","type":"message"}
{"nick":"konklone","message":"thank you for that though","date":"2012-11-26T01:54:02.159Z","type":"message"}
{"nick":"AvianFlu","message":"konklone: 0.6.2 is really old, that seems like weird advice","date":"2012-11-26T01:54:15.245Z","type":"message"}
{"nick":"AvianFlu","message":"we don't have earlier than about 0.6.19 or 0.6.20 on the drones anymore","date":"2012-11-26T01:54:26.713Z","type":"message"}
{"nick":"coderarity","message":"konklone: i think that your app was using lke 80 MB of memory after it restarted one time, seems like a lot to me","date":"2012-11-26T01:54:27.285Z","type":"message"}
{"nick":"konklone","message":"seems like a lot to me too, though I'm not doing anything special","date":"2012-11-26T01:55:31.082Z","type":"message"}
{"nick":"konklone","message":"socket.io + redis-store + websockets","date":"2012-11-26T01:55:40.488Z","type":"message"}
{"nick":"coderarity","message":"it was at like 345 MB when I checked before it crashed, and i saw about 50 connections - that puts it at 265/50 which is about 5 MB per connection, seems like a lot too","date":"2012-11-26T01:55:52.856Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T01:56:03.982Z","type":"message"}
{"nick":"konklone","message":"this is the server code as deployed: https://github.com/isitchristmas/sockets/blob/master/app.js","date":"2012-11-26T01:56:10.340Z","type":"message"}
{"nick":"konklone","message":"just auths a redis server, hands it off to socket.io, and handles new connections and broadcasts a bunch of events","date":"2012-11-26T01:56:33.048Z","type":"message"}
{"nick":"konklone","message":"the only events though, are \"I'm here\" and \"my mouse position\"","date":"2012-11-26T01:56:40.307Z","type":"message"}
{"nick":"konklone","message":"there are, however, a large number of memory leak threads on the socket.io ticket tracker","date":"2012-11-26T01:56:58.541Z","type":"message"}
{"nick":"konklone","message":"and a lot of built up frustration about it not being dealt with","date":"2012-11-26T01:57:04.897Z","type":"message"}
{"nick":"konklone","message":"so I suspect it's not 5MB/connection","date":"2012-11-26T01:57:30.736Z","type":"message"}
{"nick":"konklone","message":"but that old connections are leaving memory behind after they leave","date":"2012-11-26T01:57:40.088Z","type":"message"}
{"nick":"coderarity","message":"alright","date":"2012-11-26T01:57:46.634Z","type":"message"}
{"nick":"AvianFlu","message":"it's quite possible","date":"2012-11-26T01:58:29.587Z","type":"message"}
{"nick":"coderarity","message":"that must be a lot of memory left behind for 6 minutes :P","date":"2012-11-26T01:58:51.898Z","type":"message"}
{"nick":"konklone","message":"...yeah","date":"2012-11-26T01:59:15.672Z","type":"message"}
{"nick":"coderarity","message":"konklone: if you want to spawn a test app I can watch the memory while you add and remove connections, and we can see if there's a leak","date":"2012-11-26T01:59:32.811Z","type":"message"}
{"nick":"konklone","message":"okay - what's the easiest way to do a test app for it?","date":"2012-11-26T01:59:56.001Z","type":"message"}
{"nick":"coderarity","message":"just change the subdomain/appname and `jitsu deploy`","date":"2012-11-26T02:00:08.021Z","type":"message"}
{"nick":"konklone","message":"oh right, server-side test app, sure","date":"2012-11-26T02:00:29.235Z","type":"message"}
{"nick":"joshontheweb","date":"2012-11-26T02:01:01.344Z","type":"join"}
{"nick":"stagas","reason":"Ping timeout: 252 seconds","date":"2012-11-26T02:03:06.528Z","type":"quit"}
{"nick":"konklone","message":"okay","date":"2012-11-26T02:03:27.012Z","type":"message"}
{"nick":"konklone","message":"I have an app called sockets-test","date":"2012-11-26T02:03:35.371Z","type":"message"}
{"nick":"konklone","message":"at http://iic_sockets_test.jit.su/","date":"2012-11-26T02:03:36.932Z","type":"message"}
{"nick":"konklone","message":"username konklone","date":"2012-11-26T02:03:38.870Z","type":"message"}
{"nick":"konklone","message":"I have two clients connected, both from my own IP (separate tabs in my browser)","date":"2012-11-26T02:03:50.230Z","type":"message"}
{"nick":"coderarity","message":"okay, lemme ssh in","date":"2012-11-26T02:04:01.915Z","type":"message"}
{"nick":"brianloveswords","reason":"Ping timeout: 252 seconds","date":"2012-11-26T02:04:25.484Z","type":"quit"}
{"nick":"coderarity","message":"26 MB right now","date":"2012-11-26T02:04:58.468Z","type":"message"}
{"nick":"konklone","message":"that's from 2 connections current, 4 connections total (I re-connected them both)","date":"2012-11-26T02:05:41.348Z","type":"message"}
{"nick":"AvianFlu","message":"how about now","date":"2012-11-26T02:05:44.852Z","type":"message"}
{"nick":"coderarity","message":"25.8 MB","date":"2012-11-26T02:06:08.907Z","type":"message"}
{"nick":"konklone","message":"okay, I'm gonna reconnect 10 times","date":"2012-11-26T02:06:17.919Z","type":"message"}
{"nick":"konklone","message":"okay that was 10 re-connections","date":"2012-11-26T02:06:39.454Z","type":"message"}
{"nick":"coderarity","message":"25,948KB","date":"2012-11-26T02:07:10.612Z","type":"message"}
{"nick":"brianloveswords","date":"2012-11-26T02:07:31.194Z","type":"join"}
{"nick":"konklone","message":"incidentally, if either of you want to connect, if you visit http://isitchristmas.com/?streaming=iic_sockets_test.jit.su:80&visible=1 it will connect you to this test instance","date":"2012-11-26T02:07:35.190Z","type":"message"}
{"nick":"konklone","message":"okay now I'm going to move my mouse a lot","date":"2012-11-26T02:07:46.157Z","type":"message"}
{"nick":"konklone","message":"this generates a lot of throughput","date":"2012-11-26T02:07:59.066Z","type":"message"}
{"nick":"AvianFlu","message":"likewise","date":"2012-11-26T02:08:08.130Z","type":"message"}
{"nick":"AvianFlu","message":"check it now, coderarity","date":"2012-11-26T02:08:10.333Z","type":"message"}
{"nick":"coderarity","message":"i mean, 25372KB","date":"2012-11-26T02:08:31.375Z","type":"message"}
{"nick":"coderarity","message":"it was at 26224KV for a second","date":"2012-11-26T02:08:50.012Z","type":"message"}
{"nick":"konklone","message":"and that's even with several more concurrents, since others joined in","date":"2012-11-26T02:08:53.999Z","type":"message"}
{"nick":"coderarity","message":"hmm, just saw it at 27480KB","date":"2012-11-26T02:09:15.014Z","type":"message"}
{"nick":"AvianFlu","message":"strange","date":"2012-11-26T02:09:20.667Z","type":"message"}
{"nick":"konklone","message":"that's remarkably constant","date":"2012-11-26T02:09:37.390Z","type":"message"}
{"nick":"coderarity","message":"now it's back at 2536 KB","date":"2012-11-26T02:09:39.431Z","type":"message"}
{"nick":"coderarity","message":"25136*","date":"2012-11-26T02:09:47.791Z","type":"message"}
{"nick":"coderarity","message":"maybe we should get a ton of concurrent connections going, and then disconnect them all at once","date":"2012-11-26T02:10:22.750Z","type":"message"}
{"nick":"coderarity","message":"just to see how much memory it gets up to with ~50 connections","date":"2012-11-26T02:10:43.233Z","type":"message"}
{"nick":"konklone","message":"okay - I'll open up, let's say 60 tabs with that URL","date":"2012-11-26T02:10:51.249Z","type":"message"}
{"nick":"konklone","message":"and then close the whole window at aonce","date":"2012-11-26T02:11:00.130Z","type":"message"}
{"nick":"AvianFlu","message":"konklone: watch out for browser pipelining","date":"2012-11-26T02:11:29.510Z","type":"message"}
{"nick":"AvianFlu","message":"it might not load them all actually","date":"2012-11-26T02:11:34.276Z","type":"message"}
{"nick":"konklone","message":"browsers will pipeline websockets?","date":"2012-11-26T02:11:42.129Z","type":"message"}
{"nick":"konklone","message":"the only connection that matters is the one to the websocket server, not to the web server at isitchristmas.com","date":"2012-11-26T02:12:06.360Z","type":"message"}
{"nick":"konklone","message":"I wouldn't expect a browser to silently multiplex all the websockets throughput for various tabs","date":"2012-11-26T02:12:26.308Z","type":"message"}
{"nick":"AvianFlu","message":"yeah but as I understand it, the pages don't load if oyu just open a lot of tabs quickly","date":"2012-11-26T02:13:01.137Z","type":"message"}
{"nick":"AvianFlu","message":"it doesn't even send the stuff yet","date":"2012-11-26T02:13:07.246Z","type":"message"}
{"nick":"coderarity","message":"yeah, you have to let each tab load","date":"2012-11-26T02:13:15.228Z","type":"message"}
{"nick":"AvianFlu","message":"okay","date":"2012-11-26T02:13:18.909Z","type":"message"}
{"nick":"coderarity","message":"it might be better to use some command line socket.io client thing, if there is one","date":"2012-11-26T02:13:36.270Z","type":"message"}
{"nick":"konklone","message":"well, I've got all the concurrent connections","date":"2012-11-26T02:14:20.912Z","type":"message"}
{"nick":"konklone","message":"if you open up the Chrome dev console on http://isitchristmas.com/?streaming=iic_sockets_test.jit.su:80&visible=1","date":"2012-11-26T02:14:32.691Z","type":"message"}
{"nick":"konklone","message":"it mass-joins all the concurrents, you can see them all","date":"2012-11-26T02:14:39.950Z","type":"message"}
{"nick":"coderarity","message":"do you have them up right now?","date":"2012-11-26T02:15:03.896Z","type":"message"}
{"nick":"konklone","message":"yeah","date":"2012-11-26T02:15:06.859Z","type":"message"}
{"nick":"coderarity","message":"-_-","date":"2012-11-26T02:15:12.940Z","type":"message"}
{"nick":"konklone","message":"they're not generating a lot of activity besides the occasional heartbeat","date":"2012-11-26T02:15:16.161Z","type":"message"}
{"nick":"coderarity","message":"28524 MB","date":"2012-11-26T02:15:19.212Z","type":"message"}
{"nick":"coderarity","message":"we must be missing something :O","date":"2012-11-26T02:15:33.684Z","type":"message"}
{"nick":"sorensen","reason":"Ping timeout: 246 seconds","date":"2012-11-26T02:15:34.875Z","type":"quit"}
{"nick":"konklone","message":"hmm","date":"2012-11-26T02:15:42.016Z","type":"message"}
{"nick":"konklone","message":"it's using the same Redis URL as the production server was (though the production server is off, so it's got the Redis client to itself)","date":"2012-11-26T02:15:57.609Z","type":"message"}
{"nick":"coderarity","message":"let me see if the connections are open with netstat -a","date":"2012-11-26T02:15:58.680Z","type":"message"}
{"nick":"konklone","message":"maybe it's the Redis activity","date":"2012-11-26T02:16:09.627Z","type":"message"}
{"nick":"coderarity","message":"oh yeah, they are :P","date":"2012-11-26T02:16:15.450Z","type":"message"}
{"nick":"coderarity","message":"konklone: i am going to add more drones to the main one, i made it so i can go past the limit temporarily","date":"2012-11-26T02:17:20.889Z","type":"message"}
{"nick":"konklone","message":"okay","date":"2012-11-26T02:17:47.958Z","type":"message"}
{"nick":"coderarity","message":"we'll see what happens","date":"2012-11-26T02:17:57.326Z","type":"message"}
{"nick":"konklone","message":"btw - I'm gonna do the mass shut off of the 60 connections now","date":"2012-11-26T02:18:03.954Z","type":"message"}
{"nick":"konklone","message":"shut the tabs","date":"2012-11-26T02:18:27.597Z","type":"message"}
{"nick":"coderarity","message":"okay","date":"2012-11-26T02:18:28.795Z","type":"message"}
{"nick":"coderarity","message":"ah, still at 28832 MV","date":"2012-11-26T02:18:41.491Z","type":"message"}
{"nick":"coderarity","message":"I mean, KB","date":"2012-11-26T02:19:01.394Z","type":"message"}
{"nick":"Sly","message":"lol @ mv","date":"2012-11-26T02:19:07.761Z","type":"message"}
{"nick":"coderarity","message":"dropped to 23680 KB, must have been garbage collector taking time :P","date":"2012-11-26T02:19:45.355Z","type":"message"}
{"nick":"konklone","message":"huh, wow","date":"2012-11-26T02:19:54.013Z","type":"message"}
{"nick":"konklone","message":"I wonder if the garbage collector is prevented from running so long as there's at least one connection...?","date":"2012-11-26T02:20:19.411Z","type":"message"}
{"nick":"konklone","message":"it is pretty heartening to see 60 connections not impact memory very much","date":"2012-11-26T02:20:44.500Z","type":"message"}
{"nick":"coderarity","message":"like, if evey connection held a reference to every other connection, so when only 1 was left there was still those references?","date":"2012-11-26T02:21:37.834Z","type":"message"}
{"nick":"konklone","message":"yeah","date":"2012-11-26T02:21:50.834Z","type":"message"}
{"nick":"coderarity","message":"could try it","date":"2012-11-26T02:22:04.195Z","type":"message"}
{"nick":"konklone","message":"that doesn't sound terribly implausible, when you say it like that","date":"2012-11-26T02:22:05.006Z","type":"message"}
{"nick":"coderarity","message":"yeah :P","date":"2012-11-26T02:22:12.439Z","type":"message"}
{"nick":"sorensen","date":"2012-11-26T02:22:37.965Z","type":"join"}
{"nick":"konklone","message":"okay, I have 60 connections open again","date":"2012-11-26T02:22:56.087Z","type":"message"}
{"nick":"konklone","message":"how's memory?","date":"2012-11-26T02:23:11.003Z","type":"message"}
{"nick":"coderarity","message":"30.8 MB","date":"2012-11-26T02:23:11.635Z","type":"message"}
{"nick":"konklone","message":"okay","date":"2012-11-26T02:23:13.524Z","type":"message"}
{"nick":"konklone","message":"I'm gonna shut off all but 1","date":"2012-11-26T02:23:19.078Z","type":"message"}
{"nick":"konklone","message":"one sec","date":"2012-11-26T02:23:55.035Z","type":"message"}
{"nick":"konklone","message":"okay","date":"2012-11-26T02:24:42.219Z","type":"message"}
{"nick":"konklone","message":"closed all but 1","date":"2012-11-26T02:24:43.965Z","type":"message"}
{"nick":"konklone","message":"now we wait a bit, I guess","date":"2012-11-26T02:24:55.377Z","type":"message"}
{"nick":"coderarity","message":"okay, let's give the GC a few seconds","date":"2012-11-26T02:24:55.572Z","type":"message"}
{"nick":"coderarity","message":"dropped to 25504 KB","date":"2012-11-26T02:25:13.600Z","type":"message"}
{"nick":"konklone","message":"which is basically what it started at","date":"2012-11-26T02:25:58.634Z","type":"message"}
{"nick":"konklone","message":"okay, just closed the last one","date":"2012-11-26T02:26:08.299Z","type":"message"}
{"nick":"konklone","message":"hrm","date":"2012-11-26T02:27:39.235Z","type":"message"}
{"nick":"coderarity","message":"it was still pretty steady","date":"2012-11-26T02:27:47.612Z","type":"message"}
{"nick":"coderarity","message":"25.6MB or something","date":"2012-11-26T02:27:54.002Z","type":"message"}
{"nick":"konklone","message":"yeah, I'm inclined to say we did not find evidence of a memory leak in these tests","date":"2012-11-26T02:28:04.958Z","type":"message"}
{"nick":"konklone","message":"though neither did we find evidence of single connections taking up a lot of memory","date":"2012-11-26T02:28:17.746Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T02:28:40.734Z","type":"message"}
{"nick":"konklone","message":"and I really don't think I was taking up more than 120 connections across the 2 drones I had when I first brought this up","date":"2012-11-26T02:29:06.299Z","type":"message"}
{"nick":"coderarity","message":"indeed","date":"2012-11-26T02:29:15.079Z","type":"message"}
{"nick":"coderarity","message":"i saw like 90-something","date":"2012-11-26T02:29:22.629Z","type":"message"}
{"nick":"konklone","message":"shall I start the production one back up and we'll take another look at it?","date":"2012-11-26T02:29:39.250Z","type":"message"}
{"nick":"coderarity","message":"yeah, put it at 5 drones","date":"2012-11-26T02:30:01.114Z","type":"message"}
{"nick":"shykes","new_nick":"zz_shykes","date":"2012-11-26T02:30:02.225Z","type":"nick"}
{"nick":"konklone","message":"okay, starting it","date":"2012-11-26T02:30:29.529Z","type":"message"}
{"nick":"konklone","message":"I suppose one thing that's different about production is I do have Internet Explorer 8/9 clients attempt to start a flashsockets connection to the server","date":"2012-11-26T02:31:39.997Z","type":"message"}
{"nick":"konklone","message":"they don't get through because nodejitsu's node-http-proxy is not configured to pass on those kind of connections","date":"2012-11-26T02:31:55.241Z","type":"message"}
{"nick":"konklone","message":"though I suppose they could be dragging the proxy server in some way","date":"2012-11-26T02:32:34.592Z","type":"message"}
{"nick":"konklone","message":"anyway the production server is started","date":"2012-11-26T02:32:41.132Z","type":"message"}
{"nick":"konklone","message":"looks like ~20 connections","date":"2012-11-26T02:32:59.709Z","type":"message"}
{"nick":"coderarity","message":"okay, lemme check it out","date":"2012-11-26T02:33:28.741Z","type":"message"}
{"nick":"konklone","message":"in the dev console, running \"i=0; for (other in others) {i++}; console.log(i)\" will print out the number of connections that are broadcasting to each other","date":"2012-11-26T02:34:01.256Z","type":"message"}
{"nick":"konklone","message":"23 now","date":"2012-11-26T02:34:27.670Z","type":"message"}
{"nick":"joshsmith","reason":"Quit: joshsmith","date":"2012-11-26T02:34:28.093Z","type":"quit"}
{"nick":"benv_","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T02:34:45.302Z","type":"quit"}
{"nick":"coderarity","message":"around 52 MB on each drone","date":"2012-11-26T02:35:48.490Z","type":"message"}
{"nick":"konklone","message":"wow","date":"2012-11-26T02:36:51.155Z","type":"message"}
{"nick":"konklone","message":"and only 15 concurrent right now","date":"2012-11-26T02:36:59.021Z","type":"message"}
{"nick":"konklone","message":"the churn is high though","date":"2012-11-26T02:37:01.754Z","type":"message"}
{"nick":"konklone","message":"lots of people in and out","date":"2012-11-26T02:37:06.767Z","type":"message"}
{"nick":"konklone","message":"wow on each of 5 drones","date":"2012-11-26T02:37:27.826Z","type":"message"}
{"nick":"coderarity","message":"seems to be more memory usage than the test, but nothing crazy","date":"2012-11-26T02:37:58.943Z","type":"message"}
{"nick":"coderarity","message":"no crashes yet, but i'll keep an eye on them","date":"2012-11-26T02:38:09.870Z","type":"message"}
{"nick":"konklone","message":"thank you","date":"2012-11-26T02:39:34.705Z","type":"message"}
{"nick":"coderarity","message":"one is up to 98 MB","date":"2012-11-26T02:39:46.339Z","type":"message"}
{"nick":"konklone","message":"I added a thing to start measuring the churn, client-side","date":"2012-11-26T02:40:52.209Z","type":"message"}
{"nick":"konklone","message":"as of like the last 3 minutes","date":"2012-11-26T02:41:00.948Z","type":"message"}
{"nick":"konklone","message":"37 concurrents, 144 connections passed through","date":"2012-11-26T02:41:11.320Z","type":"message"}
{"nick":"coderarity","message":"wow, one of these drones is already at 114640 MB","date":"2012-11-26T02:41:44.736Z","type":"message"}
{"nick":"konklone","message":"114MB you mean?","date":"2012-11-26T02:41:50.990Z","type":"message"}
{"nick":"konklone","message":"190 connections passed through now","date":"2012-11-26T02:42:02.009Z","type":"message"}
{"nick":"coderarity","message":"yes","date":"2012-11-26T02:42:02.735Z","type":"message"}
{"nick":"konklone","message":"so that's ~50 connections/min at this rate","date":"2012-11-26T02:42:08.636Z","type":"message"}
{"nick":"konklone","message":"this is with, according to Google Analytics' real-time analytics viewer, 356 people on the front page right now","date":"2012-11-26T02:42:22.576Z","type":"message"}
{"nick":"coderarity","message":"another got up to like 110 MB and then went back down to around 60 MB","date":"2012-11-26T02:42:22.917Z","type":"message"}
{"nick":"coderarity","message":"konklone: ooops, got them mixed up, all the drones have been staying around 60 MB","date":"2012-11-26T02:43:15.876Z","type":"message"}
{"nick":"konklone","message":"hah","date":"2012-11-26T02:43:29.484Z","type":"message"}
{"nick":"konklone","message":"okay","date":"2012-11-26T02:43:32.828Z","type":"message"}
{"nick":"coderarity","message":"the first one did go up to 114 MB the first time, though","date":"2012-11-26T02:43:42.294Z","type":"message"}
{"nick":"konklone","message":"hmm, ok","date":"2012-11-26T02:43:51.093Z","type":"message"}
{"nick":"konklone","message":"288 connections come through","date":"2012-11-26T02:44:18.327Z","type":"message"}
{"nick":"konklone","message":"yeah, ~50/minute","date":"2012-11-26T02:44:26.621Z","type":"message"}
{"nick":"konklone","message":"so a bit < 1/sec","date":"2012-11-26T02:44:40.601Z","type":"message"}
{"nick":"konklone","message":"coderarity: thank you for doing all this monitoring","date":"2012-11-26T02:45:07.270Z","type":"message"}
{"nick":"zz_shykes","new_nick":"shykes","date":"2012-11-26T02:45:08.458Z","type":"nick"}
{"nick":"Sly","message":"konklone: Sorry to see you're still having problems with this. Hopefully it gets worked out, though. :)","date":"2012-11-26T02:45:49.771Z","type":"message"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T02:46:12.932Z","type":"quit"}
{"nick":"konklone","message":"yeah, I","date":"2012-11-26T02:46:20.116Z","type":"message"}
{"nick":"konklone","message":"'m just glad I have enough time to test it out and figure out how to best do this","date":"2012-11-26T02:46:30.015Z","type":"message"}
{"nick":"konklone","message":"and very glad to have such a responsive support team/channel","date":"2012-11-26T02:46:38.833Z","type":"message"}
{"nick":"coderarity","message":"okay, so the second drone has stayed at around 100-120 MB consistently","date":"2012-11-26T02:48:25.824Z","type":"message"}
{"nick":"coderarity","message":"third one was at 60, then down to about 40, now at about 110 MB","date":"2012-11-26T02:49:46.030Z","type":"message"}
{"nick":"admc","date":"2012-11-26T02:49:49.632Z","type":"join"}
{"nick":"konklone","message":"that's wild","date":"2012-11-26T02:50:13.998Z","type":"message"}
{"nick":"admc","reason":"Client Quit","date":"2012-11-26T02:50:21.931Z","type":"quit"}
{"nick":"generalissimo","date":"2012-11-26T02:50:49.792Z","type":"join"}
{"nick":"konklone","message":"stayed up steady for 18 minutes so far","date":"2012-11-26T02:50:50.382Z","type":"message"}
{"nick":"anoemi","reason":"Quit: anoemi","date":"2012-11-26T02:51:10.057Z","type":"quit"}
{"nick":"anoemi","date":"2012-11-26T02:51:21.627Z","type":"join"}
{"nick":"konklone","message":"traffic down to 234 people on the prod site at any one time (obviously not all of them are establishing socket connections)","date":"2012-11-26T02:51:34.821Z","type":"message"}
{"nick":"konklone","message":"weird, I'd expect more than 27 out of 234","date":"2012-11-26T02:51:48.119Z","type":"message"}
{"nick":"konklone","message":"(27 is the concurrent connections I see in my tab)","date":"2012-11-26T02:51:56.757Z","type":"message"}
{"nick":"konklone","message":"I wonder if mobile iOS/Android will open up sockets","date":"2012-11-26T02:52:34.603Z","type":"message"}
{"nick":"konklone","message":"visiting it on Chrome on my Galaxy Nexus (Android 4.2) shows me the flags moving around, so that's pretty cool","date":"2012-11-26T02:53:23.834Z","type":"message"}
{"nick":"konklone","message":"(aside: moving my mouse on my laptop and seeing the flag move around on my phone, connected over 3G, is a pretty neat experience)","date":"2012-11-26T02:54:23.676Z","type":"message"}
{"nick":"konklone","message":"no latency at all","date":"2012-11-26T02:54:33.042Z","type":"message"}
{"nick":"coderarity","message":"konklone: did you make any changes when you deployed the test drone?","date":"2012-11-26T02:55:48.538Z","type":"message"}
{"nick":"konklone","message":"no...","date":"2012-11-26T02:56:35.864Z","type":"message"}
{"nick":"coderarity","message":"alright, just checking :P","date":"2012-11-26T02:56:55.017Z","type":"message"}
{"nick":"konklone","message":"incidentally, what's the memory usage of the test drone like?","date":"2012-11-26T02:57:18.962Z","type":"message"}
{"nick":"konklone","message":"http://iic_sockets_test.jit.su/","date":"2012-11-26T02:57:20.545Z","type":"message"}
{"nick":"konklone","message":"I can't get to it","date":"2012-11-26T02:57:23.422Z","type":"message"}
{"nick":"coderarity","message":"yeah, that's my bad, lol","date":"2012-11-26T02:57:32.524Z","type":"message"}
{"nick":"konklone","message":"here's something interesting: the test drone, and the 5 production drones, they share the same redis store","date":"2012-11-26T02:57:39.332Z","type":"message"}
{"nick":"coderarity","message":"konklone: oh, redeploy it","date":"2012-11-26T02:58:04.165Z","type":"message"}
{"nick":"konklone","message":"so the test drone will experience a lot of the load that the system at large is experiencing","date":"2012-11-26T02:58:04.315Z","type":"message"}
{"nick":"coderarity","message":"the test app, that is","date":"2012-11-26T02:58:07.022Z","type":"message"}
{"nick":"konklone","message":"ok","date":"2012-11-26T02:58:07.557Z","type":"message"}
{"nick":"konklone","message":"restart, or redeploy?","date":"2012-11-26T02:58:23.701Z","type":"message"}
{"nick":"coderarity","message":"`jitsu start` works","date":"2012-11-26T02:58:29.585Z","type":"message"}
{"nick":"konklone","message":"ok, doing so","date":"2012-11-26T02:58:38.794Z","type":"message"}
{"nick":"coderarity","message":"we'll see if we find something out there","date":"2012-11-26T02:58:54.043Z","type":"message"}
{"nick":"konklone","message":"got a 500 when starting it","date":"2012-11-26T02:59:24.262Z","type":"message"}
{"nick":"konklone","message":"trying again","date":"2012-11-26T02:59:32.435Z","type":"message"}
{"nick":"konklone","message":"ok, worked that time","date":"2012-11-26T02:59:44.710Z","type":"message"}
{"nick":"konklone","message":"and http://iic_sockets_test.jit.su/ works now","date":"2012-11-26T02:59:48.813Z","type":"message"}
{"nick":"konklone","message":"huh, the test drone is not streaming through the connections from the production drones as I would expect","date":"2012-11-26T03:00:45.211Z","type":"message"}
{"nick":"coderarity","message":"yeah, and only at 24 MB","date":"2012-11-26T03:01:19.368Z","type":"message"}
{"nick":"konklone","message":"well fuck","date":"2012-11-26T03:02:03.964Z","type":"message"}
{"nick":"niallo","date":"2012-11-26T03:02:11.959Z","type":"part"}
{"nick":"konklone","message":"apparently I was *not* having any of them run through the redis store","date":"2012-11-26T03:02:12.908Z","type":"message"}
{"nick":"konklone","message":"I had turned it off in config.js, they're all doing memory store","date":"2012-11-26T03:02:24.682Z","type":"message"}
{"nick":"konklone","message":"so there's no redis brokering at all","date":"2012-11-26T03:02:30.825Z","type":"message"}
{"nick":"coderarity","message":"well, that might isolate the location of the proble :P","date":"2012-11-26T03:02:31.906Z","type":"message"}
{"nick":"konklone","message":"all right, I'll turn on redis brokering and restart the production drones","date":"2012-11-26T03:02:43.861Z","type":"message"}
{"nick":"konklone","message":"this would also explain why I was getting a lower-than-expected number of concurrents in-browser compared to how many Google said were on the page","date":"2012-11-26T03:04:51.869Z","type":"message"}
{"nick":"konklone","message":"though normal traffic on the page is down to 154 now, the spike has subsided","date":"2012-11-26T03:05:18.384Z","type":"message"}
{"nick":"konklone","message":"this might make a big difference","date":"2012-11-26T03:06:59.683Z","type":"message"}
{"nick":"coderarity","message":"i hope it does :P","date":"2012-11-26T03:07:05.494Z","type":"message"}
{"nick":"konklone","message":"trying to get the new one deployed, it failed the first time","date":"2012-11-26T03:07:24.671Z","type":"message"}
{"nick":"admc","date":"2012-11-26T03:07:46.612Z","type":"join"}
{"nick":"konklone","message":"it feels like in the past, the more drones I've had, the higher the chance of a deploy/activate failing because of a timeout","date":"2012-11-26T03:07:53.422Z","type":"message"}
{"nick":"konklone","message":"no, failed again :(","date":"2012-11-26T03:08:36.991Z","type":"message"}
{"nick":"konklone","message":"error:   Error running command snapshots activate","date":"2012-11-26T03:08:52.086Z","type":"message"}
{"nick":"konklone","message":"error:   socket hang up","date":"2012-11-26T03:08:52.237Z","type":"message"}
{"nick":"konklone","message":"info:    jitsu's client request timed out before the server could respond","date":"2012-11-26T03:08:52.372Z","type":"message"}
{"nick":"konklone","message":"will try again..","date":"2012-11-26T03:08:58.165Z","type":"message"}
{"nick":"AvianFlu","message":"konklone: `jitsu config set timeout 900000`","date":"2012-11-26T03:09:12.657Z","type":"message"}
{"nick":"AvianFlu","message":"that's a local timeout","date":"2012-11-26T03:09:16.895Z","type":"message"}
{"nick":"konklone","message":":o","date":"2012-11-26T03:09:21.870Z","type":"message"}
{"nick":"konklone","message":"oh that is helpful","date":"2012-11-26T03:09:23.755Z","type":"message"}
{"nick":"konklone","message":"thank you","date":"2012-11-26T03:09:37.936Z","type":"message"}
{"nick":"joshsmith","date":"2012-11-26T03:09:57.791Z","type":"join"}
{"nick":"konklone","message":"hmm, this one I got just now was a server issue though","date":"2012-11-26T03:10:33.510Z","type":"message"}
{"nick":"konklone","message":"https://gist.github.com/acac5b06af53033b156b","date":"2012-11-26T03:10:47.454Z","type":"message"}
{"nick":"konklone","message":"trying again (this time with bigger client timeout)","date":"2012-11-26T03:11:15.061Z","type":"message"}
{"nick":"AvianFlu","message":"yeah, that's an ongoing occasional problem, the \"took too long to listen on a socket\" problem","date":"2012-11-26T03:11:28.962Z","type":"message"}
{"nick":"AvianFlu","message":"we're looking into that one","date":"2012-11-26T03:11:32.370Z","type":"message"}
{"nick":"joshontheweb","date":"2012-11-26T03:11:34.189Z","type":"join"}
{"nick":"AvianFlu","message":"just try it agian in the meantime","date":"2012-11-26T03:11:35.996Z","type":"message"}
{"nick":"konklone","message":"same failure - I'll just keep trying and will let you know when it succeeds","date":"2012-11-26T03:12:31.070Z","type":"message"}
{"nick":"konklone","message":"the chances of it happening are quite high with a higher number of drones","date":"2012-11-26T03:12:37.924Z","type":"message"}
{"nick":"konklone","message":"okay, it worked","date":"2012-11-26T03:13:51.211Z","type":"message"}
{"nick":"dylang","reason":"Quit: dylang","date":"2012-11-26T03:14:08.878Z","type":"quit"}
{"nick":"konklone","message":"coderarity: production drones are re-deployed with redis brokering","date":"2012-11-26T03:14:24.236Z","type":"message"}
{"nick":"coderarity","message":"okay","date":"2012-11-26T03:15:17.022Z","type":"message"}
{"nick":"coderarity","message":"test drone is still at 25 MB","date":"2012-11-26T03:15:27.607Z","type":"message"}
{"nick":"coderarity","message":"let me go look at production drones","date":"2012-11-26T03:15:32.363Z","type":"message"}
{"nick":"konklone","message":"I am now redeploying the test drone with redis brokering","date":"2012-11-26T03:15:52.987Z","type":"message"}
{"nick":"konklone","message":"it will be interesting because the *only* load the test drone will experience is messages sent from redis","date":"2012-11-26T03:16:05.799Z","type":"message"}
{"nick":"konklone","message":"it won't have any connections of its own (assuming you all closed your connections to it as well)","date":"2012-11-26T03:16:22.109Z","type":"message"}
{"nick":"AvianFlu","message":"a good isolation test","date":"2012-11-26T03:16:22.929Z","type":"message"}
{"nick":"AvianFlu","message":"this is what we'll have to do here","date":"2012-11-26T03:16:32.622Z","type":"message"}
{"nick":"AvianFlu","message":"keep thinking of ways to isolate different pieces of it until one stands out","date":"2012-11-26T03:16:42.323Z","type":"message"}
{"nick":"konklone","message":"ok, test drone is deployed with redis brokering - will briefly connect just to verify that it's getting the events passing through the production site","date":"2012-11-26T03:17:51.043Z","type":"message"}
{"nick":"konklone","message":"yep, it is","date":"2012-11-26T03:18:00.283Z","type":"message"}
{"nick":"konklone","message":"disconnected from it","date":"2012-11-26T03:18:04.169Z","type":"message"}
{"nick":"coderarity","message":"okay, let me see all the memory stuff","date":"2012-11-26T03:23:49.947Z","type":"message"}
{"nick":"coderarity","message":"1st drone - 41 MB, second drone - 40 MB 3rd drone - 65 MB test drone - 37 MB","date":"2012-11-26T03:24:42.520Z","type":"message"}
{"nick":"coderarity","message":"those were not all done at exactly the same time, btw","date":"2012-11-26T03:24:51.556Z","type":"message"}
{"nick":"coderarity","message":"1 - 39 MB 2 - 39 MB 3 - 68 MB test - 32 MB","date":"2012-11-26T03:25:43.004Z","type":"message"}
{"nick":"konklone","message":"is the production app only using 3/5 drones?","date":"2012-11-26T03:26:00.464Z","type":"message"}
{"nick":"coderarity","message":"no, that's all i've got open right now","date":"2012-11-26T03:26:13.456Z","type":"message"}
{"nick":"coderarity","message":"i've cleared up a few terminal windows so i'll go ahead and look at the last two","date":"2012-11-26T03:26:26.184Z","type":"message"}
{"nick":"jmar777","reason":"Remote host closed the connection","date":"2012-11-26T03:27:46.199Z","type":"quit"}
{"nick":"jmar777","date":"2012-11-26T03:28:22.281Z","type":"join"}
{"nick":"konklone","message":"ok","date":"2012-11-26T03:29:45.376Z","type":"message"}
{"nick":"coderarity","message":"4 is at 80 MB and 5 is at 58 MB","date":"2012-11-26T03:30:35.207Z","type":"message"}
{"nick":"coderarity","message":"1st is at 80 MB too","date":"2012-11-26T03:30:51.650Z","type":"message"}
{"nick":"konklone","message":"this seems about the same as before","date":"2012-11-26T03:32:03.760Z","type":"message"}
{"nick":"coderarity","message":"test drone is at about 50 MB","date":"2012-11-26T03:32:06.875Z","type":"message"}
{"nick":"coderarity","message":"which is almost twice as much as it was before","date":"2012-11-26T03:32:13.680Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T03:32:16.977Z","type":"message"}
{"nick":"konklone","message":"yeah, but the test drone wasn't seeing any broadcasts at all","date":"2012-11-26T03:32:23.798Z","type":"message"}
{"nick":"konklone","message":"it's actually handling connections from redis now","date":"2012-11-26T03:32:34.151Z","type":"message"}
{"nick":"konklone","message":"or messages, rather","date":"2012-11-26T03:32:37.821Z","type":"message"}
{"nick":"jmar777","reason":"Ping timeout: 264 seconds","date":"2012-11-26T03:33:06.106Z","type":"quit"}
{"nick":"konklone","message":"socket.io is going to make a new connection object when it gets a new connection message from redis, so that's expected","date":"2012-11-26T03:33:17.886Z","type":"message"}
{"nick":"coderarity","message":"56, 72, 70, 91, 57 in order, test at 56","date":"2012-11-26T03:33:27.699Z","type":"message"}
{"nick":"konklone","message":"the raw (actual) connection doesn't take up much memory, it's socket.io's bookkeeping","date":"2012-11-26T03:33:29.659Z","type":"message"}
{"nick":"coderarity","message":"all in MB","date":"2012-11-26T03:33:30.375Z","type":"message"}
{"nick":"konklone","message":"hmm","date":"2012-11-26T03:33:32.259Z","type":"message"}
{"nick":"konklone","message":"yeah, so there's like a baseline load caused by redis","date":"2012-11-26T03:33:44.651Z","type":"message"}
{"nick":"konklone","message":"though there's no evidence that redis causes a memory leak","date":"2012-11-26T03:33:51.726Z","type":"message"}
{"nick":"konklone","message":"just that the brokering costs memory, which is expected","date":"2012-11-26T03:34:23.198Z","type":"message"}
{"nick":"konklone","message":"splitting the load across drones only helps with the front half of the load","date":"2012-11-26T03:34:38.483Z","type":"message"}
{"nick":"konklone","message":"connections on drone 4 still cause drone 1 to do work","date":"2012-11-26T03:34:48.857Z","type":"message"}
{"nick":"konklone","message":"just, less work","date":"2012-11-26T03:34:52.680Z","type":"message"}
{"nick":"sorensen","reason":"Ping timeout: 246 seconds","date":"2012-11-26T03:35:02.009Z","type":"quit"}
{"nick":"coderarity","message":"i see","date":"2012-11-26T03:35:52.920Z","type":"message"}
{"nick":"konklone","message":"I'm contemplating writing my own brokering using sockjs","date":"2012-11-26T03:36:21.784Z","type":"message"}
{"nick":"konklone","message":"which is a vastly thinner layer over websockets than is socket.io","date":"2012-11-26T03:36:30.967Z","type":"message"}
{"nick":"coderarity","message":"i mean, the test drone is now at 67 MB, up like 10 MB, and afaik nothing is affecting that other than redis stuff","date":"2012-11-26T03:36:44.652Z","type":"message"}
{"nick":"konklone","message":"huh...","date":"2012-11-26T03:36:49.806Z","type":"message"}
{"nick":"davidbanham","date":"2012-11-26T03:37:05.697Z","type":"join"}
{"nick":"konklone","message":"yeah, only 36 concurrent showing to my in-browser client","date":"2012-11-26T03:37:06.206Z","type":"message"}
{"nick":"davidbanham","reason":"Client Quit","date":"2012-11-26T03:37:07.088Z","type":"quit"}
{"nick":"konklone","message":"really shouldn't be generating this much memory usage","date":"2012-11-26T03:37:49.069Z","type":"message"}
{"nick":"coderarity","message":"108, 93, 70, 106, 92 in order, test at 79","date":"2012-11-26T03:38:20.675Z","type":"message"}
{"nick":"konklone","message":"wow","date":"2012-11-26T03:38:26.405Z","type":"message"}
{"nick":"konklone","message":"that is a direct upward trajectory","date":"2012-11-26T03:38:30.748Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T03:38:44.436Z","type":"message"}
{"nick":"coderarity","message":"and it only happens with redis working between all the drones","date":"2012-11-26T03:38:52.097Z","type":"message"}
{"nick":"konklone","message":"this makes a ton of sense though - the most obvious memory leak is one where clients show up and then leave, but their leaving doesn't get reflected across all drones","date":"2012-11-26T03:39:20.341Z","type":"message"}
{"nick":"konklone","message":"I actually observed this behavior on my dev machine","date":"2012-11-26T03:39:27.224Z","type":"message"}
{"nick":"konklone","message":"with just two processes","date":"2012-11-26T03:39:31.952Z","type":"message"}
{"nick":"konklone","message":"have 2 people show up to each one, for 4 total","date":"2012-11-26T03:39:45.846Z","type":"message"}
{"nick":"sorensen","date":"2012-11-26T03:39:47.286Z","type":"join"}
{"nick":"konklone","message":"both processes see 4 clients","date":"2012-11-26T03:39:51.129Z","type":"message"}
{"nick":"konklone","message":"then disconnect the 2 from one process","date":"2012-11-26T03:39:55.599Z","type":"message"}
{"nick":"coderarity","message":"i see","date":"2012-11-26T03:39:58.854Z","type":"message"}
{"nick":"konklone","message":"that process sees just 2, but the other one sees 4 still","date":"2012-11-26T03:40:01.429Z","type":"message"}
{"nick":"AvianFlu","message":"not propagating disconnect events properly, perhaps?","date":"2012-11-26T03:40:31.544Z","type":"message"}
{"nick":"konklone","message":"this looks about right: https://github.com/LearnBoost/socket.io/issues/1040","date":"2012-11-26T03:41:20.524Z","type":"message"}
{"nick":"konklone","message":"and the OP says he solved it by switching to SockJS, with the same node version","date":"2012-11-26T03:41:47.823Z","type":"message"}
{"nick":"coderarity","message":"WOAHHH","date":"2012-11-26T03:42:06.289Z","type":"message"}
{"nick":"coderarity","message":"5th drone has a TON of TIME_WAIT connections","date":"2012-11-26T03:42:17.256Z","type":"message"}
{"nick":"konklone","message":"o_O","date":"2012-11-26T03:42:17.385Z","type":"message"}
{"nick":"konklone","message":"what does that mean?","date":"2012-11-26T03:42:30.149Z","type":"message"}
{"nick":"coderarity","message":"hmmm, hold up","date":"2012-11-26T03:42:32.734Z","type":"message"}
{"nick":"konklone","message":"(I'm not a very good sysadmin)","date":"2012-11-26T03:42:33.611Z","type":"message"}
{"nick":"coderarity","message":"neither am I, that's why we have AvianFlu ","date":"2012-11-26T03:42:46.122Z","type":"message"}
{"nick":"AvianFlu","message":"a socket goes through a number of different states","date":"2012-11-26T03:43:05.521Z","type":"message"}
{"nick":"AvianFlu","message":"there are at least 8 or 10 in total","date":"2012-11-26T03:43:10.735Z","type":"message"}
{"nick":"AvianFlu","message":"TIME_WAIT is the state they're in after they're closed, and the kernel keeps them dead to cool down and make sure both ends are really disconnected","date":"2012-11-26T03:43:34.612Z","type":"message"}
{"nick":"AvianFlu","message":"too many of them, and some kind of socket pooling should be introduced","date":"2012-11-26T03:43:43.856Z","type":"message"}
{"nick":"AvianFlu","message":"apparently not happening here","date":"2012-11-26T03:43:48.219Z","type":"message"}
{"nick":"coderarity","message":"konklone: do you use aws at all?","date":"2012-11-26T03:44:21.299Z","type":"message"}
{"nick":"konklone","message":"in my work work, yeah","date":"2012-11-26T03:44:28.947Z","type":"message"}
{"nick":"coderarity","message":"i mean, in this app?","date":"2012-11-26T03:44:35.084Z","type":"message"}
{"nick":"konklone","message":"not that I know of","date":"2012-11-26T03:44:39.337Z","type":"message"}
{"nick":"konklone","message":"the Redis server is on redistogo","date":"2012-11-26T03:44:49.365Z","type":"message"}
{"nick":"AvianFlu","message":"how about redistogo","date":"2012-11-26T03:44:49.774Z","type":"message"}
{"nick":"konklone","message":"which actually, yeah, is on AWS","date":"2012-11-26T03:44:53.492Z","type":"message"}
{"nick":"AvianFlu","message":"which is on AWS","date":"2012-11-26T03:44:55.076Z","type":"message"}
{"nick":"AvianFlu","message":":D","date":"2012-11-26T03:44:57.755Z","type":"message"}
{"nick":"konklone","message":"though there's a finite number of connections to redis, though - 3 per drone","date":"2012-11-26T03:45:04.070Z","type":"message"}
{"nick":"coderarity","message":"i don't see any AWS connections on any other drone, only the last one","date":"2012-11-26T03:45:27.034Z","type":"message"}
{"nick":"coderarity","message":"and 47 TIME_WAIT connections to AWS on that last drone","date":"2012-11-26T03:45:34.893Z","type":"message"}
{"nick":"AvianFlu","message":"it's apparently not reusing sockets","date":"2012-11-26T03:46:00.920Z","type":"message"}
{"nick":"AvianFlu","message":"but 47 isn't that many TIME_WAIT","date":"2012-11-26T03:46:06.826Z","type":"message"}
{"nick":"AvianFlu","message":"the connection churn on the redis instance, though, could add up","date":"2012-11-26T03:46:19.936Z","type":"message"}
{"nick":"konklone","message":"I don't think the node drones are re-connecting to redis, though...","date":"2012-11-26T03:46:37.183Z","type":"message"}
{"nick":"konklone","message":"or at least, it's not like every user connection causes a redis connection","date":"2012-11-26T03:46:50.728Z","type":"message"}
{"nick":"AvianFlu","message":"try to add some logging around it maybe","date":"2012-11-26T03:47:07.961Z","type":"message"}
{"nick":"konklone","message":"hmm","date":"2012-11-26T03:51:55.876Z","type":"message"}
{"nick":"konklone","message":"yeah I can look at that","date":"2012-11-26T03:52:04.576Z","type":"message"}
{"nick":"anoemi","reason":"Quit: anoemi","date":"2012-11-26T03:55:55.188Z","type":"quit"}
{"nick":"st_luke","message":"SEAL THE DEAL","date":"2012-11-26T03:57:33.315Z","type":"message"}
{"nick":"konklone","message":"but wait, can't you identify the TIME_WAIT IPs or something","date":"2012-11-26T03:58:04.441Z","type":"message"}
{"nick":"konklone","message":"we should be able to identify whether they are redis<->drone or user<->drone, right?","date":"2012-11-26T03:58:19.881Z","type":"message"}
{"nick":"konklone","message":"especially because","date":"2012-11-26T03:58:22.831Z","type":"message"}
{"nick":"konklone","message":"the drones connect right to redis directly","date":"2012-11-26T03:58:28.223Z","type":"message"}
{"nick":"AvianFlu","message":"konklone: they're from AWS","date":"2012-11-26T03:58:33.253Z","type":"message"}
{"nick":"konklone","message":"but users hit the drones through the proxy","date":"2012-11-26T03:58:34.201Z","type":"message"}
{"nick":"AvianFlu","message":"so it's redis","date":"2012-11-26T03:58:35.095Z","type":"message"}
{"nick":"konklone","message":"ok","date":"2012-11-26T03:58:51.497Z","type":"message"}
{"nick":"coderarity","message":"konklone: 1st drone is now at 217 MB, about to crash","date":"2012-11-26T04:09:14.874Z","type":"message"}
{"nick":"konklone","message":"wow","date":"2012-11-26T04:09:19.669Z","type":"message"}
{"nick":"coderarity","message":"second is at 227 MB","date":"2012-11-26T04:09:34.961Z","type":"message"}
{"nick":"konklone","message":"I've just about got logs tied up to redis events","date":"2012-11-26T04:09:42.970Z","type":"message"}
{"nick":"konklone","message":"testing it locally","date":"2012-11-26T04:09:45.488Z","type":"message"}
{"nick":"konklone","message":"actually coderarity: the logs show a whole bunch of crashes already","date":"2012-11-26T04:10:04.985Z","type":"message"}
{"nick":"coderarity","message":"21 MB for third, only 140 MB for 4th","date":"2012-11-26T04:10:07.105Z","type":"message"}
{"nick":"coderarity","message":"oh, maybe I missed them :O","date":"2012-11-26T04:10:14.538Z","type":"message"}
{"nick":"konklone","message":"the third probably already restarted","date":"2012-11-26T04:10:15.412Z","type":"message"}
{"nick":"konklone","message":"https://gist.github.com/4146570","date":"2012-11-26T04:10:32.354Z","type":"message"}
{"nick":"coderarity","message":"test drone is similar, 212 MB","date":"2012-11-26T04:10:43.131Z","type":"message"}
{"nick":"sorensen","reason":"Ping timeout: 246 seconds","date":"2012-11-26T04:11:09.621Z","type":"quit"}
{"nick":"AvianFlu","message":"coderarity: there you go!","date":"2012-11-26T04:11:30.692Z","type":"message"}
{"nick":"AvianFlu","message":"it's definitely the pubsub somehow, and dangling references in the JS","date":"2012-11-26T04:11:44.326Z","type":"message"}
{"nick":"coderarity","message":"yes","date":"2012-11-26T04:11:49.898Z","type":"message"}
{"nick":"konklone","message":"ok, testing redis logging locally","date":"2012-11-26T04:12:22.110Z","type":"message"}
{"nick":"konklone","message":"okay, tested, I am deploying to production now","date":"2012-11-26T04:14:11.045Z","type":"message"}
{"nick":"konklone","message":"I guess if we see a lot of excess logging, then the TIME_WAITs from AWS are explained","date":"2012-11-26T04:14:40.193Z","type":"message"}
{"nick":"konklone","message":"I don't know if that explains all the memory usage though","date":"2012-11-26T04:14:44.676Z","type":"message"}
{"nick":"konklone","message":"we may be seeing two independent phenomena","date":"2012-11-26T04:14:48.358Z","type":"message"}
{"nick":"konklone","message":"the TIME_WAITs being less impactful than the memory leaks","date":"2012-11-26T04:14:55.818Z","type":"message"}
{"nick":"konklone","message":"this is my suspicion anyway","date":"2012-11-26T04:14:58.216Z","type":"message"}
{"nick":"coderarity","message":"i think it's a JS thing","date":"2012-11-26T04:15:07.025Z","type":"message"}
{"nick":"konklone","message":"I would certainly like to isolate it because even if I do switch to SockJS, I'll be using a Redis store","date":"2012-11-26T04:15:37.645Z","type":"message"}
{"nick":"AvianFlu","message":"this could just be a leak in socket.io's redis store","date":"2012-11-26T04:16:07.835Z","type":"message"}
{"nick":"AvianFlu","message":"the TIME_WAIT sockets wouldn't cause OOM","date":"2012-11-26T04:16:12.978Z","type":"message"}
{"nick":"AvianFlu","message":"they'd cause other slowdowns","date":"2012-11-26T04:16:16.843Z","type":"message"}
{"nick":"konklone","message":"yeah I suspect it is a leak in socket.io's redis store, or in some effect of using *any* non-memory store","date":"2012-11-26T04:16:30.264Z","type":"message"}
{"nick":"konklone","message":"where processes are keeping track of clients that did not originally connect to that client","date":"2012-11-26T04:16:42.891Z","type":"message"}
{"nick":"konklone","message":"okay, I deployed to the production drones with redis logging","date":"2012-11-26T04:18:14.599Z","type":"message"}
{"nick":"konklone","message":"deploying to test drone now","date":"2012-11-26T04:18:17.035Z","type":"message"}
{"nick":"konklone","message":"what's memory usage like?","date":"2012-11-26T04:19:41.050Z","type":"message"}
{"nick":"sorensen","date":"2012-11-26T04:19:55.430Z","type":"join"}
{"nick":"konklone","message":"I am seeing some redis reconnects though not with a frenzy or anything","date":"2012-11-26T04:20:12.989Z","type":"message"}
{"nick":"konklone","message":"once every 40 seconds or so","date":"2012-11-26T04:20:18.918Z","type":"message"}
{"nick":"AvianFlu","message":"that sounds about right","date":"2012-11-26T04:20:37.077Z","type":"message"}
{"nick":"AvianFlu","message":"that number of sockets he saw wasn't insane","date":"2012-11-26T04:20:42.639Z","type":"message"}
{"nick":"AvianFlu","message":"and they only stay in that state for 2 or 3 minutes","date":"2012-11-26T04:20:51.077Z","type":"message"}
{"nick":"konklone","message":"yeah","date":"2012-11-26T04:21:14.071Z","type":"message"}
{"nick":"konklone","message":"okay now it's a little faster","date":"2012-11-26T04:21:25.482Z","type":"message"}
{"nick":"konklone","message":"every 6-8s","date":"2012-11-26T04:21:28.186Z","type":"message"}
{"nick":"AvianFlu","message":"any idea what they're coming from?","date":"2012-11-26T04:21:42.427Z","type":"message"}
{"nick":"shykes","new_nick":"zz_shykes","date":"2012-11-26T04:22:28.724Z","type":"nick"}
{"nick":"konklone","message":"interestingly, they're always from the \"pub\" and \"client\" clients","date":"2012-11-26T04:22:30.495Z","type":"message"}
{"nick":"konklone","message":"not the \"sub\" client (that receives data)","date":"2012-11-26T04:22:34.821Z","type":"message"}
{"nick":"standoo","date":"2012-11-26T04:22:36.969Z","type":"join"}
{"nick":"konklone","message":"\"pub\" sends data to redis, and \"client\" is there to issue other commands","date":"2012-11-26T04:22:43.978Z","type":"message"}
{"nick":"konklone","message":"er also...","date":"2012-11-26T04:23:27.010Z","type":"message"}
{"nick":"konklone","message":"error: http://sockets.isitchristmas.com/","date":"2012-11-26T04:23:29.258Z","type":"message"}
{"nick":"konklone","message":"not sure what's up there","date":"2012-11-26T04:23:35.362Z","type":"message"}
{"nick":"AvianFlu","message":"what are you seeing?","date":"2012-11-26T04:25:26.144Z","type":"message"}
{"nick":"AvianFlu","message":"it looks up to me","date":"2012-11-26T04:25:27.943Z","type":"message"}
{"nick":"coderarity","message":"database was slow","date":"2012-11-26T04:25:34.190Z","type":"message"}
{"nick":"coderarity","message":"it just updated","date":"2012-11-26T04:25:36.245Z","type":"message"}
{"nick":"konklone","message":"yeah, lots of reconnects every 6-15s","date":"2012-11-26T04:26:30.232Z","type":"message"}
{"nick":"konklone","message":"redis reconnects","date":"2012-11-26T04:26:32.756Z","type":"message"}
{"nick":"konklone","message":"I think that explains the TIME_WAITs to me","date":"2012-11-26T04:26:36.269Z","type":"message"}
{"nick":"konklone","message":"and by \"lots\", I mean \"about one reconnect every 6-15s\"","date":"2012-11-26T04:26:49.317Z","type":"message"}
{"nick":"konklone","message":"which is unexpected, sure","date":"2012-11-26T04:26:53.949Z","type":"message"}
{"nick":"coderarity","message":"over 5 drones?","date":"2012-11-26T04:27:00.189Z","type":"message"}
{"nick":"konklone","message":"right","date":"2012-11-26T04:27:03.385Z","type":"message"}
{"nick":"konklone","message":"so yeah for each one, probably once every 30s-75s","date":"2012-11-26T04:27:17.240Z","type":"message"}
{"nick":"konklone","message":"or it's probably staggered there","date":"2012-11-26T04:27:22.664Z","type":"message"}
{"nick":"konklone","message":"every 40s or so, like I first thought (while the other drones were still starting, maybe)","date":"2012-11-26T04:27:33.559Z","type":"message"}
{"nick":"konklone","message":"so, okay","date":"2012-11-26T04:28:09.771Z","type":"message"}
{"nick":"konklone","message":"I think","date":"2012-11-26T04:28:11.226Z","type":"message"}
{"nick":"konklone","message":"I am going to switch to SockJS","date":"2012-11-26T04:28:14.396Z","type":"message"}
{"nick":"konklone","message":"with my own Redis very light brokering","date":"2012-11-26T04:28:18.402Z","type":"message"}
{"nick":"konklone","message":"*very light Redis brokering","date":"2012-11-26T04:28:21.879Z","type":"message"}
{"nick":"konklone","message":"and probably holding on to nothing extra","date":"2012-11-26T04:28:45.956Z","type":"message"}
{"nick":"konklone","message":"each drone only manages the connections connected right to it","date":"2012-11-26T04:29:04.978Z","type":"message"}
{"nick":"konklone","message":"and ignores all irrelevant messages from redis","date":"2012-11-26T04:29:10.821Z","type":"message"}
{"nick":"coderarity","message":"cool","date":"2012-11-26T04:29:44.834Z","type":"message"}
{"nick":"bardu","date":"2012-11-26T04:30:10.125Z","type":"join"}
{"nick":"bardu","date":"2012-11-26T04:30:12.432Z","type":"part"}
{"nick":"konklone","message":"coderarity, AvianFlu - thank you *a ton* for working through this with me","date":"2012-11-26T04:31:43.344Z","type":"message"}
{"nick":"konklone","message":"so so helpful","date":"2012-11-26T04:31:44.528Z","type":"message"}
{"nick":"thepumpkin","date":"2012-11-26T04:31:50.845Z","type":"join"}
{"nick":"konklone","message":"and I hope it helps others doing websockets stuff on nodejitsu ","date":"2012-11-26T04:32:00.083Z","type":"message"}
{"nick":"konklone","message":"to learn from it","date":"2012-11-26T04:32:02.830Z","type":"message"}
{"nick":"AvianFlu","message":"yeah, I'll certainly know what to do if *this* happens again XD","date":"2012-11-26T04:33:04.464Z","type":"message"}
{"nick":"AvianFlu","message":"and we're usually here if anything else weird happens","date":"2012-11-26T04:33:11.767Z","type":"message"}
{"nick":"AvianFlu","message":"also - this might not necessarily be a leak","date":"2012-11-26T04:33:22.243Z","type":"message"}
{"nick":"AvianFlu","message":"if all 5 drones are all keeping the total aggregate state of the system in-memory inadvertently ","date":"2012-11-26T04:33:37.929Z","type":"message"}
{"nick":"AvianFlu","message":"the total pile of memory might just add up that high","date":"2012-11-26T04:33:46.281Z","type":"message"}
{"nick":"AvianFlu","message":"and they'd be out-of-sync a bid based purely on load and coincidence","date":"2012-11-26T04:34:01.599Z","type":"message"}
{"nick":"AvianFlu","message":"s/bid/bit/","date":"2012-11-26T04:34:06.785Z","type":"message"}
{"nick":"AvianFlu","message":"and leaks here and there would compound it","date":"2012-11-26T04:34:17.456Z","type":"message"}
{"nick":"AvianFlu","message":"and all our efforts to add more drones would just increase the amount of communication happening, lolz","date":"2012-11-26T04:34:53.588Z","type":"message"}
{"nick":"coderarity","message":"i mean, adding more drones didn't really help","date":"2012-11-26T04:37:01.555Z","type":"message"}
{"nick":"coderarity","message":"in any case, all this thinking makes me hungry","date":"2012-11-26T04:37:31.290Z","type":"message"}
{"nick":"konklone","message":"yeah, this is also true","date":"2012-11-26T04:37:49.451Z","type":"message"}
{"nick":"konklone","message":"but whether it's keeping the state of the system, or an actual leak - both can be fixed by ditching socket.io's redis store","date":"2012-11-26T04:38:04.977Z","type":"message"}
{"nick":"hugo_dc","date":"2012-11-26T04:38:15.492Z","type":"join"}
{"nick":"konklone","message":"and making it so processes do not keep the aggregate state of the system","date":"2012-11-26T04:38:16.981Z","type":"message"}
{"nick":"AvianFlu","message":"yes.  I support your decision.","date":"2012-11-26T04:38:18.959Z","type":"message"}
{"nick":"konklone","message":":)","date":"2012-11-26T04:38:30.395Z","type":"message"}
{"nick":"konklone","message":"well hopefully I can do something that is reasonably extract-able for others","date":"2012-11-26T04:38:39.019Z","type":"message"}
{"nick":"konklone","message":"though I am on a tight enough time frame that I may do that extraction post-christmas","date":"2012-11-26T04:38:47.233Z","type":"message"}
{"nick":"konklone","message":"but I'll try to keep it in mind as I work","date":"2012-11-26T04:38:54.801Z","type":"message"}
{"nick":"AvianFlu","message":"that's the spirit :)","date":"2012-11-26T04:39:02.984Z","type":"message"}
{"nick":"AvianFlu","message":"GET THIS SHIT INTO PRODUCTION - BUT OPEN SOURCE IT SOON THEREAFTER","date":"2012-11-26T04:39:27.406Z","type":"message"}
{"nick":"AvianFlu","message":"that's like, my rule #5","date":"2012-11-26T04:39:31.275Z","type":"message"}
{"nick":"AvianFlu","message":"...except for all the other \"rule #5\"s","date":"2012-11-26T04:39:41.951Z","type":"message"}
{"nick":"konklone","message":"rule 5(5)","date":"2012-11-26T04:39:56.743Z","type":"message"}
{"nick":"konklone","message":"you guys mind if I post an abridged version of this chat into a public gist to reference on some Github tickets?","date":"2012-11-26T04:40:44.140Z","type":"message"}
{"nick":"AvianFlu","message":"no, that's fine","date":"2012-11-26T04:41:30.023Z","type":"message"}
{"nick":"AvianFlu","message":"maybe show it to us first just to be sure","date":"2012-11-26T04:41:45.038Z","type":"message"}
{"nick":"konklone","message":"yeah, I will","date":"2012-11-26T04:41:59.436Z","type":"message"}
{"nick":"AvianFlu","message":"but I don't think anybody said anything too stupid or offensive in the last hour or so XD","date":"2012-11-26T04:42:00.690Z","type":"message"}
{"nick":"thl0","date":"2012-11-26T04:42:13.422Z","type":"join"}
{"nick":"konklone","message":"I'm removing all the enter/exits, anything not said by us 3, and all the irrelevant stuff","date":"2012-11-26T04:42:16.911Z","type":"message"}
{"nick":"AvianFlu","message":"sounds like a good plan","date":"2012-11-26T04:43:32.492Z","type":"message"}
{"nick":"coderarity","message":"konklone: wait, the world can't know i'm hungry","date":"2012-11-26T04:43:54.347Z","type":"message"}
{"nick":"coderarity","message":"lol","date":"2012-11-26T04:43:58.592Z","type":"message"}
{"nick":"konklone","message":"coderarity: I deleted that line :)","date":"2012-11-26T04:51:30.208Z","type":"message"}
{"nick":"YoY","reason":"Ping timeout: 256 seconds","date":"2012-11-26T04:53:52.965Z","type":"quit"}
{"nick":"meso","reason":"Remote host closed the connection","date":"2012-11-26T04:55:45.914Z","type":"quit"}
{"nick":"st_luke","message":"my cousin vinny is no longer on netflix instant, bullshit","date":"2012-11-26T04:55:50.070Z","type":"message"}
{"nick":"YoY","date":"2012-11-26T04:56:23.869Z","type":"join"}
{"nick":"konklone","message":"coderarity, AvianFlu - https://gist.github.com/4146668","date":"2012-11-26T04:57:55.225Z","type":"message"}
{"nick":"konklone","message":"I got rid of irrelevant stuff and fixed typos, added a header describing the situation","date":"2012-11-26T04:58:06.379Z","type":"message"}
{"nick":"konklone","message":"it is public, but let me know if I should remove it","date":"2012-11-26T04:58:11.995Z","type":"message"}
{"nick":"konklone","message":"and I shall!","date":"2012-11-26T04:58:17.009Z","type":"message"}
{"nick":"coderarity","message":"seems fine to me","date":"2012-11-26T05:02:17.328Z","type":"message"}
{"nick":"AvianFlu","message":"yeah it's kinda long, but it's all fine","date":"2012-11-26T05:04:01.685Z","type":"message"}
{"nick":"jaswope","date":"2012-11-26T05:05:10.185Z","type":"join"}
{"nick":"jaswope","message":"I couldn't seem to find this info, is there a way to have multiple accounts administer a single app on nodejitsu?","date":"2012-11-26T05:06:17.476Z","type":"message"}
{"nick":"sorensen","reason":"Ping timeout: 246 seconds","date":"2012-11-26T05:06:22.748Z","type":"quit"}
{"nick":"jaswope","message":"Or do I need to create a shared user account for it?","date":"2012-11-26T05:06:34.014Z","type":"message"}
{"nick":"coderarity","message":"shared account for now","date":"2012-11-26T05:06:45.031Z","type":"message"}
{"nick":"jaswope","message":"Alright, thanks","date":"2012-11-26T05:06:53.160Z","type":"message"}
{"nick":"konklone","message":"yeah it's long, 'swhy I summed it up at the top, and anyone who cares about the details can skim it","date":"2012-11-26T05:08:25.416Z","type":"message"}
{"nick":"konklone","message":"*shrug* it'll come in handy some day for somebody","date":"2012-11-26T05:14:26.395Z","type":"message"}
{"nick":"mdedetrich","message":"man the thing I hated about going to a dynamic language","date":"2012-11-26T05:23:27.380Z","type":"message"}
{"nick":"mdedetrich","message":"is the number of errors you make","date":"2012-11-26T05:23:33.318Z","type":"message"}
{"nick":"mdedetrich","message":"almost all of which would have been picked up in a static language","date":"2012-11-26T05:23:43.218Z","type":"message"}
{"nick":"mdedetrich","message":"(im talking about stupid errors here","date":"2012-11-26T05:23:50.600Z","type":"message"}
{"nick":"motiooon","reason":"Quit: motiooon","date":"2012-11-26T05:29:41.704Z","type":"quit"}
{"nick":"konklone","date":"2012-11-26T05:30:47.590Z","type":"part"}
{"nick":"YoY","reason":"Ping timeout: 245 seconds","date":"2012-11-26T05:34:11.837Z","type":"quit"}
{"nick":"prenaud","date":"2012-11-26T05:35:23.966Z","type":"join"}
{"nick":"YoY","date":"2012-11-26T05:37:22.254Z","type":"join"}
{"nick":"_yoy_","date":"2012-11-26T05:38:45.642Z","type":"join"}
{"nick":"prenaud","reason":"Ping timeout: 245 seconds","date":"2012-11-26T05:39:38.029Z","type":"quit"}
{"nick":"YoY","reason":"Ping timeout: 260 seconds","date":"2012-11-26T05:42:03.174Z","type":"quit"}
{"nick":"_yoy_","new_nick":"YoY","date":"2012-11-26T05:42:03.409Z","type":"nick"}
{"nick":"coderarity","message":"mdedetrich: i think you could have static typing in a dynamic language, it would just throw a runtime error, which is not ideal","date":"2012-11-26T05:42:42.329Z","type":"message"}
{"nick":"coderarity","message":"mdedetrich: that's why things like typescript exist","date":"2012-11-26T05:42:49.180Z","type":"message"}
{"nick":"rodw","date":"2012-11-26T05:42:54.028Z","type":"join"}
{"nick":"mdedetrich","message":"@coderarity: true, but the problem with typescript is it wont have static typing with the libraries you use unless the library is written in typescript","date":"2012-11-26T05:43:32.260Z","type":"message"}
{"nick":"mdedetrich","message":"also the runtime errors are not always obvious, as we all know","date":"2012-11-26T05:43:46.981Z","type":"message"}
{"nick":"rodw","message":"Does \"Error: socket hang up\" mean anything to anyone?  I'm getting a failure on `jitsu snapshot activate`, but it seems to run fine locally.","date":"2012-11-26T05:44:34.262Z","type":"message"}
{"nick":"mdedetrich","message":"I just so wish that someone made a scala->js compiler","date":"2012-11-26T05:44:37.436Z","type":"message"}
{"nick":"hugo_dc","reason":"Quit: Ex-Chat","date":"2012-11-26T05:44:38.258Z","type":"quit"}
{"nick":"mdedetrich","message":"that would be so awesome","date":"2012-11-26T05:44:43.334Z","type":"message"}
{"nick":"sorensen","date":"2012-11-26T05:44:56.611Z","type":"join"}
{"nick":"AvianFlu","date":"2012-11-26T05:45:58.963Z","type":"quit"}
{"nick":"rodw","message":"error output is at http://pastebin.com/eqgEf3sJ","date":"2012-11-26T05:47:35.209Z","type":"message"}
{"nick":"coderarity","message":"rodw: hi","date":"2012-11-26T05:48:58.032Z","type":"message"}
{"nick":"coderarity","message":"rodw: username/appname?","date":"2012-11-26T05:49:12.205Z","type":"message"}
{"nick":"thl0","reason":"Remote host closed the connection","date":"2012-11-26T05:49:15.314Z","type":"quit"}
{"nick":"coderarity","message":"rodw: also, `jitsu config set timeout 10000`","date":"2012-11-26T05:49:47.935Z","type":"message"}
{"nick":"rodw","message":"@coderarity : username `rodw`, appname `m.shrm`","date":"2012-11-26T05:49:53.287Z","type":"message"}
{"nick":"coderarity","message":"rodw: after doing that command, give it another shot, and i'll see if there's anything wrong over here","date":"2012-11-26T05:50:13.752Z","type":"message"}
{"nick":"rodw","message":"ack'd, i'm trying it again now","date":"2012-11-26T05:50:46.262Z","type":"message"}
{"nick":"rodw","message":"that actually seems to fail faster, with slightly different error (http://pastebin.com/GEM7Gbsr) ","date":"2012-11-26T05:52:47.805Z","type":"message"}
{"nick":"rodw","message":"I'm bumped the timeout up to 30000, just to see what will heppen","date":"2012-11-26T05:53:05.085Z","type":"message"}
{"nick":"coderarity","message":"that's a good idea :P","date":"2012-11-26T05:53:13.435Z","type":"message"}
{"nick":"coderarity","message":"if it's getting ETIMEDOUT should definitely raise the timeout","date":"2012-11-26T05:53:24.965Z","type":"message"}
{"nick":"rodw","message":"that also failed, with the \"socket hand up\" error again","date":"2012-11-26T05:53:41.293Z","type":"message"}
{"nick":"luismreis","reason":"Ping timeout: 245 seconds","date":"2012-11-26T05:53:46.824Z","type":"quit"}
{"nick":"rodw","message":"btw, my app doesn't start slowly locally","date":"2012-11-26T05:54:46.486Z","type":"message"}
{"nick":"coderarity","message":"okay, it's getting a spawn ENOMEM when unpacking","date":"2012-11-26T05:55:18.122Z","type":"message"}
{"nick":"coderarity","message":"which is weird, but we can probably fix it - what's the output from `tar -tf $(npm pack)`","date":"2012-11-26T05:55:52.737Z","type":"message"}
{"nick":"coderarity","message":"run inside the directory of your package.json","date":"2012-11-26T05:56:04.849Z","type":"message"}
{"nick":"rodw","message":"ok, one moment","date":"2012-11-26T05:56:49.626Z","type":"message"}
{"nick":"rodw","message":"enomem means out of memory?","date":"2012-11-26T05:58:25.305Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T05:58:30.318Z","type":"message"}
{"nick":"coderarity","message":"it's a specific type of ENOMEM, which happens when the unpacking process uses a ton of memory","date":"2012-11-26T05:58:57.824Z","type":"message"}
{"nick":"coderarity","message":"rodw: what snapshot version where you trying to activate?","date":"2012-11-26T05:59:22.179Z","type":"message"}
{"nick":"thl0","date":"2012-11-26T05:59:24.958Z","type":"join"}
{"nick":"ds1","date":"2012-11-26T05:59:33.840Z","type":"join"}
{"nick":"rodw","message":"I did add ~100 jpg files to the app since I last deployed, but the whole tgz file is only 21M.","date":"2012-11-26T05:59:43.983Z","type":"message"}
{"nick":"rodw","message":"0.5.0","date":"2012-11-26T05:59:54.701Z","type":"message"}
{"nick":"coderarity","message":"okay","date":"2012-11-26T06:00:00.770Z","type":"message"}
{"nick":"ds1","message":"hey all, I'm trying to get setup on Jitsu and have ran into an issue. Anyone here able to lend a hand?","date":"2012-11-26T06:00:24.670Z","type":"message"}
{"nick":"coderarity","message":"ds1: what's up?","date":"2012-11-26T06:00:35.301Z","type":"message"}
{"nick":"ds1","message":"I'm having errors with soynode, a closure template lib","date":"2012-11-26T06:01:00.399Z","type":"message"}
{"nick":"ds1","message":"I'm unsure if it's: because it runs in a child process or if it's because it's a .jar","date":"2012-11-26T06:01:24.268Z","type":"message"}
{"nick":"coderarity","message":"what's the error?","date":"2012-11-26T06:01:33.289Z","type":"message"}
{"nick":"coderarity","message":"also, i highly doubt we have java installed","date":"2012-11-26T06:01:39.512Z","type":"message"}
{"nick":"ds1","message":"https://github.com/Obvious/soynode/blob/master/lib/soynode.js","date":"2012-11-26T06:01:44.054Z","type":"message"}
{"nick":"tmpvar","reason":"Ping timeout: 276 seconds","date":"2012-11-26T06:01:45.391Z","type":"quit"}
{"nick":"ds1","message":"error is generic, just that it can't find the template","date":"2012-11-26T06:01:58.955Z","type":"message"}
{"nick":"ds1","message":"but it's a catch-all, so it's not very helpful","date":"2012-11-26T06:02:08.910Z","type":"message"}
{"nick":"ds1","message":"I've emulated 'production' on my local machine, and it works as expected","date":"2012-11-26T06:02:27.035Z","type":"message"}
{"nick":"coderarity","message":"it won't work","date":"2012-11-26T06:02:29.796Z","type":"message"}
{"nick":"coderarity","message":"your spawning java, and we don't have that","date":"2012-11-26T06:02:34.508Z","type":"message"}
{"nick":"ds1","message":"no java?","date":"2012-11-26T06:02:36.882Z","type":"message"}
{"nick":"ds1","message":"le sigh","date":"2012-11-26T06:02:38.691Z","type":"message"}
{"nick":"coderarity","message":"you can email support@nodejitsu.com and we can see about getting it integrated","date":"2012-11-26T06:02:49.740Z","type":"message"}
{"nick":"coderarity","message":"but no promises","date":"2012-11-26T06:02:52.768Z","type":"message"}
{"nick":"generalissimo","reason":"Remote host closed the connection","date":"2012-11-26T06:02:57.322Z","type":"quit"}
{"nick":"rodw","message":"the tar output is now at http://pastebin.com/WanMFGiC","date":"2012-11-26T06:03:01.538Z","type":"message"}
{"nick":"coderarity","message":"rodw: can you also show me `ls -l`?","date":"2012-11-26T06:03:35.518Z","type":"message"}
{"nick":"ds1","message":"@coderarity thanks for the help","date":"2012-11-26T06:04:20.398Z","type":"message"}
{"nick":"coderarity","message":"np","date":"2012-11-26T06:04:28.476Z","type":"message"}
{"nick":"ds1","message":"I'll drop them an email. Would be _amazing_ if java were on the instances","date":"2012-11-26T06:04:33.673Z","type":"message"}
{"nick":"rodw","message":"Yes, one sec.  BTW, I just noticed when expanded my package comes out to 173M.  Is that too much?","date":"2012-11-26T06:04:56.988Z","type":"message"}
{"nick":"tmpvar","date":"2012-11-26T06:05:18.488Z","type":"join"}
{"nick":"ljharb","message":"i've had problems with 40MB packages","date":"2012-11-26T06:05:38.404Z","type":"message"}
{"nick":"rodw","message":"ls -l is at http://pastebin.com/Zjsiq3Tj","date":"2012-11-26T06:06:50.399Z","type":"message"}
{"nick":"rodw","message":"@ljharb is that 40MB as a tgz, or 40MB after unzipping and untarring?","date":"2012-11-26T06:07:44.934Z","type":"message"}
{"nick":"ljharb","message":"as a tgz. i don't remember the full size","date":"2012-11-26T06:08:04.064Z","type":"message"}
{"nick":"meso","date":"2012-11-26T06:08:14.930Z","type":"join"}
{"nick":"generalissimo","date":"2012-11-26T06:08:16.420Z","type":"join"}
{"nick":"ljharb","message":"but why is your app that big? mine was that big because my dependencies had huge log files in them (which they shouldn't hae)","date":"2012-11-26T06:08:22.123Z","type":"message"}
{"nick":"ljharb","message":"*have","date":"2012-11-26T06:08:24.273Z","type":"message"}
{"nick":"rodw","message":"static files, for the most part","date":"2012-11-26T06:08:44.077Z","type":"message"}
{"nick":"rodw","message":"(images and such)","date":"2012-11-26T06:08:51.513Z","type":"message"}
{"nick":"ds1","message":"question, how do I see the tar / package that's being sent across to jitsu?","date":"2012-11-26T06:09:18.007Z","type":"message"}
{"nick":"rodw","message":"I can probably trim it down a bit, but in the grand scheme of things 180mb isn't all that large","date":"2012-11-26T06:09:24.092Z","type":"message"}
{"nick":"tomshreds","date":"2012-11-26T06:10:35.431Z","type":"join"}
{"nick":"tomshreds","message":"hey what was that cool website where you could test website in multiple browsers through vms?","date":"2012-11-26T06:10:47.110Z","type":"message"}
{"nick":"coderarity","message":"rodw: yes","date":"2012-11-26T06:11:13.471Z","type":"message"}
{"nick":"generalissimo","reason":"Remote host closed the connection","date":"2012-11-26T06:11:20.294Z","type":"quit"}
{"nick":"coderarity","message":"sorry, have to get brownies out of the oven","date":"2012-11-26T06:11:26.071Z","type":"message"}
{"nick":"rodw","message":"Yes, too large?","date":"2012-11-26T06:11:29.688Z","type":"message"}
{"nick":"coderarity","message":"173 MB might be too large, yet","date":"2012-11-26T06:11:41.545Z","type":"message"}
{"nick":"coderarity","message":"i mean, we haven't had an ENOMEM in a while :P","date":"2012-11-26T06:11:55.183Z","type":"message"}
{"nick":"ljharb","message":"rodw: why not host that content somewhere else?","date":"2012-11-26T06:12:00.603Z","type":"message"}
{"nick":"coderarity","message":"rodw: yeah, you can host that content on something like amazon S3, it should be faster to put it there anyways :P","date":"2012-11-26T06:12:36.722Z","type":"message"}
{"nick":"rodw","message":"ljharb: right now, because this is a development instance","date":"2012-11-26T06:12:42.146Z","type":"message"}
{"nick":"tomshreds","message":"anyone? was it browsify or something?","date":"2012-11-26T06:12:48.538Z","type":"message"}
{"nick":"tomshreds","message":"browserling","date":"2012-11-26T06:12:53.073Z","type":"message"}
{"nick":"tomshreds","message":"YEAH found it","date":"2012-11-26T06:13:01.429Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T06:13:03.129Z","type":"message"}
{"nick":"tomshreds","message":"nevermind","date":"2012-11-26T06:13:04.371Z","type":"message"}
{"nick":"ljharb","message":"browserstack browserling","date":"2012-11-26T06:13:06.239Z","type":"message"}
{"nick":"coderarity","message":"rodw: anything over 50 MB shows an error, but it's 180 MB because of a ton of dependencies","date":"2012-11-26T06:13:36.282Z","type":"message"}
{"nick":"coderarity","message":"rodw: the drones themselves are pretty small, so if you have huge packages it has trouble untaring them","date":"2012-11-26T06:13:53.513Z","type":"message"}
{"nick":"substack","message":"tomshreds: yep! I run that site with pkrumins","date":"2012-11-26T06:13:58.805Z","type":"message"}
{"nick":"substack","message":"so if you have problems just bug me over irc","date":"2012-11-26T06:14:06.837Z","type":"message"}
{"nick":"thl0","reason":"Remote host closed the connection","date":"2012-11-26T06:14:15.570Z","type":"quit"}
{"nick":"rodw","message":"Yes my node_modules (including devDependencies) is 110M","date":"2012-11-26T06:15:24.278Z","type":"message"}
{"nick":"tomshreds","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-11-26T06:16:27.783Z","type":"quit"}
{"nick":"rodw","message":"In contrast, my \"docroot\" is ~22 mb","date":"2012-11-26T06:17:27.782Z","type":"message"}
{"nick":"rodw","message":"so I need to trim down node_modules?","date":"2012-11-26T06:18:01.893Z","type":"message"}
{"nick":"rodw","message":"(I've only got 9 entries directly in my dependencies, but several of those have a lot of dependencies in turn)","date":"2012-11-26T06:19:39.215Z","type":"message"}
{"nick":"coderarity","message":"well, anything you take out helps","date":"2012-11-26T06:20:56.378Z","type":"message"}
{"nick":"coderarity","message":"but you can bundle dependencies and then remove things from those dependencies, like test folders","date":"2012-11-26T06:21:19.204Z","type":"message"}
{"nick":"coderarity","message":"check out package.json.jit.su for information on bundleDependencies","date":"2012-11-26T06:21:36.407Z","type":"message"}
{"nick":"rodw","message":"is there a way to make `npm pack` leave out my devDependencies?","date":"2012-11-26T06:21:41.295Z","type":"message"}
{"nick":"rodw","message":"that's where most of the space is","date":"2012-11-26T06:22:06.006Z","type":"message"}
{"nick":"rodw","message":"(zombie is ~50MB, jscoverage is another ~20MB)","date":"2012-11-26T06:22:39.915Z","type":"message"}
{"nick":"coderarity","message":"it should already?","date":"2012-11-26T06:22:57.731Z","type":"message"}
{"nick":"rodw","message":"I've been running `make test` (essentially `npm test`) as part of my deploy script, so maybe it's just picking up whatever is already in node_modules?","date":"2012-11-26T06:24:16.675Z","type":"message"}
{"nick":"rodw","message":"Or is that happening on the jitsu side of things?","date":"2012-11-26T06:24:30.521Z","type":"message"}
{"nick":"coderarity","message":"should happen locally, if you did a predeploy script","date":"2012-11-26T06:24:46.155Z","type":"message"}
{"nick":"rodw","message":"The package tgz doesn't include anything but what's in my bundleDependencies.  ","date":"2012-11-26T06:26:03.306Z","type":"message"}
{"nick":"rodw","message":"Is there a way to tell nodejitsu to `npm install` the production dependencies only?","date":"2012-11-26T06:26:43.436Z","type":"message"}
{"nick":"ds1","message":"@rodw make sure NODE_ENV is production","date":"2012-11-26T06:27:47.521Z","type":"message"}
{"nick":"ds1","message":"and or, $ npm install production","date":"2012-11-26T06:27:58.366Z","type":"message"}
{"nick":"rodw","message":"My local NODE_ENV shouldn't matter, right?","date":"2012-11-26T06:28:15.595Z","type":"message"}
{"nick":"ds1","message":"https://npmjs.org/doc/config.html#production","date":"2012-11-26T06:28:26.565Z","type":"message"}
{"nick":"ds1","message":"dev dependencies are only *not* installed at the top-most level unless production is flagged to true","date":"2012-11-26T06:28:46.986Z","type":"message"}
{"nick":"coderarity","message":"your local node_eenv doesn't matter","date":"2012-11-26T06:28:50.359Z","type":"message"}
{"nick":"coderarity","message":"rodw: wait, so when you do `jitsu snapshots fetch` of the snapshot you're trying to deploy, does it have devDependencies installed?","date":"2012-11-26T06:29:23.848Z","type":"message"}
{"nick":"Arro","date":"2012-11-26T06:29:24.529Z","type":"join"}
{"nick":"rodw","message":"Didn't know I could fetch it back.  Maybe this is a red herring and my package is too big without the dev dependencies.  You're right, I don't have any evidence that nodejitsu is installing them, I just know that they are large locally.","date":"2012-11-26T06:30:30.771Z","type":"message"}
{"nick":"Arro","message":"getting socket hangup on database create.  just me or everyone?","date":"2012-11-26T06:31:06.865Z","type":"message"}
{"nick":"coderarity","message":"Arro: i see","date":"2012-11-26T06:31:20.349Z","type":"message"}
{"nick":"coderarity","message":"gimme a second","date":"2012-11-26T06:31:26.328Z","type":"message"}
{"nick":"travis-ci","date":"2012-11-26T06:31:39.530Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] nodejitsu/node-http-proxy#71 (master - 22639b3 : Maciej Maecki): The build passed.","date":"2012-11-26T06:31:39.658Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/nodejitsu/node-http-proxy/compare/886a395429f2...22639b378189","date":"2012-11-26T06:31:39.658Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/nodejitsu/node-http-proxy/builds/3359435","date":"2012-11-26T06:31:39.658Z","type":"message"}
{"nick":"travis-ci","date":"2012-11-26T06:31:39.658Z","type":"part"}
{"nick":"Sly","reason":"Remote host closed the connection","date":"2012-11-26T06:31:49.607Z","type":"quit"}
{"nick":"sreeix","date":"2012-11-26T06:31:54.287Z","type":"join"}
{"nick":"rodw","message":"Odd, `jitsu snapshots fetch` is giving me a truncated tgz file back.","date":"2012-11-26T06:32:35.500Z","type":"message"}
{"nick":"coderarity","message":"rodw: you have a package directory with a copy of everything in it, delete that","date":"2012-11-26T06:32:44.719Z","type":"message"}
{"nick":"zz_shykes","new_nick":"shykes","date":"2012-11-26T06:32:51.717Z","type":"nick"}
{"nick":"rodw","message":"I noticed that too, but the 0.5.0-1 version seemed to fail also.","date":"2012-11-26T06:33:20.177Z","type":"message"}
{"nick":"coderarity","message":"Arro: seems fine to me, maybe try `jitsu config set timeout 30000` and give it another shit\\","date":"2012-11-26T06:33:42.053Z","type":"message"}
{"nick":"coderarity","message":"shot*","date":"2012-11-26T06:33:45.019Z","type":"message"}
{"nick":"coderarity","message":"lol","date":"2012-11-26T06:33:48.172Z","type":"message"}
{"nick":"rodw","message":"Although I don't see that in the snapshot list.  Let me try again.","date":"2012-11-26T06:34:05.253Z","type":"message"}
{"nick":"Arro","message":"@coderarity ok tried that, still \"socket hang up\"","date":"2012-11-26T06:34:40.752Z","type":"message"}
{"nick":"Arro","message":"and occasionally \"connect ECONNREFUSED\"","date":"2012-11-26T06:34:51.591Z","type":"message"}
{"nick":"coderarity","message":"Arro: can you paste the complete output to gist.github.com?","date":"2012-11-26T06:35:03.751Z","type":"message"}
{"nick":"Arro","message":"https://gist.github.com/4146858","date":"2012-11-26T06:35:41.060Z","type":"message"}
{"nick":"Arro","message":"just a thought: your servers may hate my IP.  I had a node knockout entry where I had a restart script, and got an email about it yesterday telling me to shut it off.  ","date":"2012-11-26T06:37:03.106Z","type":"message"}
{"nick":"Sly","date":"2012-11-26T06:37:22.682Z","type":"join"}
{"nick":"Arro","message":"that would be on a different account, but same ip","date":"2012-11-26T06:37:32.946Z","type":"message"}
{"nick":"coderarity","message":"restart script?","date":"2012-11-26T06:38:01.512Z","type":"message"}
{"nick":"Arro","message":"yeah now i can't even log in.","date":"2012-11-26T06:38:37.001Z","type":"message"}
{"nick":"Arro","message":"i just had a python script that restarted my app every 10 minutes.  i wasn't allowed to touch my node.js code.","date":"2012-11-26T06:39:06.258Z","type":"message"}
{"nick":"gorillatron","reason":"Ping timeout: 250 seconds","date":"2012-11-26T06:39:10.635Z","type":"quit"}
{"nick":"gorillatron","date":"2012-11-26T06:40:05.663Z","type":"join"}
{"nick":"metafedora","date":"2012-11-26T06:41:54.089Z","type":"join"}
{"nick":"ds1","message":"thanks for the help @coderarity, hopefully Java appears. Not wanting to us heroku :/","date":"2012-11-26T06:42:14.054Z","type":"message"}
{"nick":"ds1","message":"use*","date":"2012-11-26T06:42:19.261Z","type":"message"}
{"nick":"rodw","message":"repackaged everything, but now I'm gettng ECONNREFUSED for anything I try to do against the jitsu server","date":"2012-11-26T06:42:33.047Z","type":"message"}
{"nick":"rodw","message":"(e.g.. jitsu deploy, jitsu logs)","date":"2012-11-26T06:42:49.120Z","type":"message"}
{"nick":"coderarity","message":"rodw: okay","date":"2012-11-26T06:42:50.144Z","type":"message"}
{"nick":"coderarity","message":"Arro: rodw: try again","date":"2012-11-26T06:43:47.459Z","type":"message"}
{"nick":"ds1","date":"2012-11-26T06:43:56.766Z","type":"part"}
{"nick":"coderarity","message":"Arro: wait, you had that python script running locally?","date":"2012-11-26T06:44:30.176Z","type":"message"}
{"nick":"Arro","message":"@coderarity yes","date":"2012-11-26T06:44:48.247Z","type":"message"}
{"nick":"coderarity","message":"i'm not sure what happened there, tbh, but it sounds like a bad idea","date":"2012-11-26T06:44:48.552Z","type":"message"}
{"nick":"Arro","message":"yeah, for sure","date":"2012-11-26T06:44:55.639Z","type":"message"}
{"nick":"rodw","message":"ack'd, I can hit `jitsu snapshots list` now, trying the deploy","date":"2012-11-26T06:45:16.772Z","type":"message"}
{"nick":"Arro","message":"after the hackathon i had like no brain power left.  so tired.  and it kept crashing.","date":"2012-11-26T06:45:38.376Z","type":"message"}
{"nick":"Arro","message":"@coderarity: i am able to log in again.","date":"2012-11-26T06:46:58.563Z","type":"message"}
{"nick":"meso","reason":"Remote host closed the connection","date":"2012-11-26T06:47:22.208Z","type":"quit"}
{"nick":"Arro","message":"@coderarity: however, on database create, new problems: https://gist.github.com/4146901","date":"2012-11-26T06:47:33.669Z","type":"message"}
{"nick":"Sly","message":"Arro: what version of jitsu are you using?","date":"2012-11-26T06:47:56.918Z","type":"message"}
{"nick":"Sly","message":"The latest version is 0.11.3, so update if it's lower than that.","date":"2012-11-26T06:48:14.586Z","type":"message"}
{"nick":"Arro","message":"ok will do","date":"2012-11-26T06:48:22.643Z","type":"message"}
{"nick":"Arro","message":"(it was lower)","date":"2012-11-26T06:48:50.388Z","type":"message"}
{"nick":"coderarity","message":"yep, that's the problem","date":"2012-11-26T06:48:54.229Z","type":"message"}
{"nick":"mappum","date":"2012-11-26T06:49:05.988Z","type":"join"}
{"nick":"Arro","message":"ok that fixed it","date":"2012-11-26T06:49:16.929Z","type":"message"}
{"nick":"Sly","message":"Cool.","date":"2012-11-26T06:49:24.560Z","type":"message"}
{"nick":"Arro","message":"thanks for the help @coderarity, and @Sly ","date":"2012-11-26T06:49:28.894Z","type":"message"}
{"nick":"Sly","message":"np","date":"2012-11-26T06:49:36.694Z","type":"message"}
{"nick":"standoo","date":"2012-11-26T06:50:07.786Z","type":"part"}
{"nick":"NaN","date":"2012-11-26T06:51:05.398Z","type":"join"}
{"nick":"rodw","message":"@coderarity: sorry for the delay, I'm getting timeouts when uploading the app but I think that's network issues on my end.","date":"2012-11-26T06:51:30.398Z","type":"message"}
{"nick":"rodw","message":"I also just upgraded jitsu based on Sly's advice to Arro.","date":"2012-11-26T06:52:12.491Z","type":"message"}
{"nick":"coderarity","message":"rodw: ETIMEDOUT? just set the timeout even higher :P","date":"2012-11-26T06:52:36.148Z","type":"message"}
{"nick":"coderarity","message":"`jitsu config set timeout 100000`","date":"2012-11-26T06:52:44.740Z","type":"message"}
{"nick":"coderarity","message":"`jitsu config set timeout 500000`","date":"2012-11-26T06:52:53.465Z","type":"message"}
{"nick":"coderarity","message":"`jitsu config set timeout 1000000`","date":"2012-11-26T06:52:59.710Z","type":"message"}
{"nick":"coderarity","message":"lol","date":"2012-11-26T06:53:03.111Z","type":"message"}
{"nick":"rodw","message":"No, it's failing during the upload.","date":"2012-11-26T06:53:12.669Z","type":"message"}
{"nick":"meso","date":"2012-11-26T06:53:22.926Z","type":"join"}
{"nick":"rodw","message":"It is ETIMEDOUT though, lemme try it.","date":"2012-11-26T06:53:38.077Z","type":"message"}
{"nick":"Sly","message":"rodw, are you sure it's failing?","date":"2012-11-26T06:53:38.919Z","type":"message"}
{"nick":"coderarity","message":"with the old version? it's probably not","date":"2012-11-26T06:53:46.160Z","type":"message"}
{"nick":"Sly","message":"Have you checked your snapshots list to see if it actually uploaded?","date":"2012-11-26T06:53:47.149Z","type":"message"}
{"nick":"nmanousos","date":"2012-11-26T06:54:21.993Z","type":"join"}
{"nick":"nmanousos","message":"having issues deploying, I keep getting \"Script took too long to listen on a socket\"","date":"2012-11-26T06:54:31.638Z","type":"message"}
{"nick":"nmanousos","message":"any advice?","date":"2012-11-26T06:54:39.529Z","type":"message"}
{"nick":"rodw","message":"just checked, def. not uploading","date":"2012-11-26T06:54:44.949Z","type":"message"}
{"nick":"Sly","message":"rodw: alright. Just wondering.","date":"2012-11-26T06:54:59.861Z","type":"message"}
{"nick":"Sly","message":"nmanousos: what is the username/app name?","date":"2012-11-26T06:55:08.309Z","type":"message"}
{"nick":"nmanousos","message":"nmanousos / coolence","date":"2012-11-26T06:55:36.036Z","type":"message"}
{"nick":"nmanousos","message":"ah, worked now","date":"2012-11-26T06:55:45.855Z","type":"message"}
{"nick":"nmanousos","message":"just took a few tries","date":"2012-11-26T06:55:48.751Z","type":"message"}
{"nick":"nmanousos","message":"small complaint - this is becoming very frequent, maybe 1/2 of the time I can't deploy, takes a few tries to get it don","date":"2012-11-26T06:56:16.483Z","type":"message"}
{"nick":"nmanousos","message":"e","date":"2012-11-26T06:56:17.111Z","type":"message"}
{"nick":"nmanousos","message":"is there anything that can be done to make deploys happen more reliably?","date":"2012-11-26T06:56:33.960Z","type":"message"}
{"nick":"Sly","message":"You may have a dependency that's causing it to time out.","date":"2012-11-26T06:56:38.820Z","type":"message"}
{"nick":"Sly","message":"Like, if you have a *huge* dependency that has to install.","date":"2012-11-26T06:56:45.401Z","type":"message"}
{"nick":"coderarity","message":"some of those are bad servers","date":"2012-11-26T06:56:50.171Z","type":"message"}
{"nick":"Sly","message":"^ that too","date":"2012-11-26T06:56:55.296Z","type":"message"}
{"nick":"nmanousos","message":"ah","date":"2012-11-26T06:57:01.416Z","type":"message"}
{"nick":"coderarity","message":"they just go away as we find and fix them","date":"2012-11-26T06:57:13.789Z","type":"message"}
{"nick":"nmanousos","message":"is there a way to deploy without re-downloading all the deps?","date":"2012-11-26T06:57:23.117Z","type":"message"}
{"nick":"nmanousos","message":"if its just a code change on my side?","date":"2012-11-26T06:57:28.547Z","type":"message"}
{"nick":"coderarity","message":"no","date":"2012-11-26T06:57:44.884Z","type":"message"}
{"nick":"Sly","message":"The short answer, no.. as coderarity said.","date":"2012-11-26T06:58:30.439Z","type":"message"}
{"nick":"Sly","message":"The long answer, yes.. but it wouldn't help.","date":"2012-11-26T06:58:40.510Z","type":"message"}
{"nick":"Sly","message":"You can bundle them, but that can still cause timeouts because then you have more to upload to the server.","date":"2012-11-26T06:58:59.753Z","type":"message"}
{"nick":"nmanousos","message":"hmmm","date":"2012-11-26T06:59:10.653Z","type":"message"}
{"nick":"nmanousos","message":"ok","date":"2012-11-26T06:59:11.734Z","type":"message"}
{"nick":"Sly","message":"There's a number of things that could have caused it to time out. It could just simply be a bad drone that maybe hasn't been effected by patches that we've ran.","date":"2012-11-26T07:00:14.373Z","type":"message"}
{"nick":"Sly","message":"We don't run patches on drones that have active applications, to prevent crashing a production app.","date":"2012-11-26T07:00:27.403Z","type":"message"}
{"nick":"nmanousos","message":"k","date":"2012-11-26T07:00:35.361Z","type":"message"}
{"nick":"Sly","message":"That's why you guys may run into bad drones that are out of date, compared to others.","date":"2012-11-26T07:00:41.209Z","type":"message"}
{"nick":"nmanousos","message":"no worries, i can survive with this","date":"2012-11-26T07:00:56.046Z","type":"message"}
{"nick":"DTrejo","date":"2012-11-26T07:01:03.603Z","type":"join"}
{"nick":"Sly","message":"Cool. Just letting you all know. :)","date":"2012-11-26T07:01:17.431Z","type":"message"}
{"nick":"nmanousos","message":"is there a way to see what my capacity is like now?","date":"2012-11-26T07:01:17.562Z","type":"message"}
{"nick":"nmanousos","message":"i apprecaite it :)","date":"2012-11-26T07:01:22.489Z","type":"message"}
{"nick":"Sly","message":"What do you mean by \"capacity\"?","date":"2012-11-26T07:01:25.756Z","type":"message"}
{"nick":"nmanousos","message":"to see if I am good on the 1 drone plan i have, or if i need to upgrade","date":"2012-11-26T07:01:36.816Z","type":"message"}
{"nick":"joshsmith","reason":"Quit: joshsmith","date":"2012-11-26T07:01:46.026Z","type":"quit"}
{"nick":"nmanousos","message":"i have an ecommerce app, and i am expecting a huge traffic increase tomorrrow w/ cyber monday shopping","date":"2012-11-26T07:02:02.821Z","type":"message"}
{"nick":"nmanousos","message":"a bit concerned to keep everything up and running","date":"2012-11-26T07:02:14.994Z","type":"message"}
{"nick":"Sly","message":"If you're concerned about traffic spikes, it would probably be a good idea to have at least 2 drones.","date":"2012-11-26T07:02:39.386Z","type":"message"}
{"nick":"Sly","message":"That's jmo, though.","date":"2012-11-26T07:02:55.712Z","type":"message"}
{"nick":"nmanousos","message":"is there a way to actually see though, see where i'm at w/ traffic","date":"2012-11-26T07:03:06.628Z","type":"message"}
{"nick":"nmanousos","message":"i have no idea","date":"2012-11-26T07:03:12.145Z","type":"message"}
{"nick":"Sly","message":"Not that I'm aware of.","date":"2012-11-26T07:03:27.102Z","type":"message"}
{"nick":"nmanousos","message":"maybe a feature idea for you guys, i would upgrade if i could see some dashboard telling me i needed to because of my traffic","date":"2012-11-26T07:03:56.367Z","type":"message"}
{"nick":"Sly","message":"Well, the thing is.. your app may be able to handle the amount of traffic it gets on one drone. It depends on how fast your app handles a request, what it's serving, etc.","date":"2012-11-26T07:04:53.269Z","type":"message"}
{"nick":"Sly","message":"We don't limit traffic, so we don't really keep up with what drones are doing network wise.","date":"2012-11-26T07:05:10.136Z","type":"message"}
{"nick":"Sly","message":"I'm sure there are logs for network traffic somewhere on Joyent's servers, but *we* don't log traffic.","date":"2012-11-26T07:05:23.450Z","type":"message"}
{"nick":"Sly","message":"You can submit it as a request, though. We're always open to feature requests.","date":"2012-11-26T07:05:56.168Z","type":"message"}
{"nick":"nmanousos","message":"i understand, but i just have nothing to base this on","date":"2012-11-26T07:06:04.409Z","type":"message"}
{"nick":"rodw","message":"@coderarity: fyi, got the 0.5.1 version uploaded; still hitting \"socket hang up\" errors on activate. trying again with timeout 1000000.","date":"2012-11-26T07:06:05.141Z","type":"message"}
{"nick":"nmanousos","message":"no idea if i need 1 drone, 100 drones, 1000 drones","date":"2012-11-26T07:06:12.473Z","type":"message"}
{"nick":"rodw","message":"same issue","date":"2012-11-26T07:06:24.006Z","type":"message"}
{"nick":"nmanousos","message":"so i just got the cheapest and hope that my app doesnt crash if i get too much traffic","date":"2012-11-26T07:06:32.484Z","type":"message"}
{"nick":"Sly","message":"nmanousos: to give you an idea, our blog.jit.su site uses 2 drones.","date":"2012-11-26T07:08:07.555Z","type":"message"}
{"nick":"Sly","message":"The drones can handle traffic pretty well. Like I said, it just depends on how fast your app responds to requests and what it's serving.","date":"2012-11-26T07:08:27.964Z","type":"message"}
{"nick":"coderarity","message":"nmanousos: if your app crashes, it'll restart - and you'll see an error in `jitsu logs`","date":"2012-11-26T07:08:32.998Z","type":"message"}
{"nick":"Sly","message":"^","date":"2012-11-26T07:08:38.046Z","type":"message"}
{"nick":"coderarity","message":"if you see a memory error in `jitsu logs`, it may be time to add drones","date":"2012-11-26T07:08:41.957Z","type":"message"}
{"nick":"nmanousos","message":"that's true.. some of the times","date":"2012-11-26T07:08:45.021Z","type":"message"}
{"nick":"nmanousos","message":"twice in the past couple days, it has crashed due to out of memory errors, and not restarted","date":"2012-11-26T07:09:09.159Z","type":"message"}
{"nick":"coderarity","message":"rodw: okay, second","date":"2012-11-26T07:09:24.524Z","type":"message"}
{"nick":"Sly","message":"If that happens again, let us know and we'll look into it.","date":"2012-11-26T07:09:29.704Z","type":"message"}
{"nick":"nmanousos","message":"ok","date":"2012-11-26T07:10:01.911Z","type":"message"}
{"nick":"nmanousos","message":"totally unrelated - anyone know how to \"set the default write concern\" for mongodb?","date":"2012-11-26T07:10:31.978Z","type":"message"}
{"nick":"nmanousos","message":"i set safe:false when i init the db, but it keeps asking me","date":"2012-11-26T07:11:00.755Z","type":"message"}
{"nick":"coderarity","message":"rodw: same thing","date":"2012-11-26T07:11:03.011Z","type":"message"}
{"nick":"coderarity","message":"rodw: still ENOMEMing, need to make it smaller","date":"2012-11-26T07:11:13.439Z","type":"message"}
{"nick":"rodw","message":"To clarify, I need to make my package file (tgz file) smaller?","date":"2012-11-26T07:11:58.974Z","type":"message"}
{"nick":"coderarity","message":"yeah, `npm pack`","date":"2012-11-26T07:12:19.988Z","type":"message"}
{"nick":"mdedetrich","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T07:15:02.494Z","type":"quit"}
{"nick":"coderarity","message":"rodw: we might have to talk to someone and follow up, but we'll see - I'd just try to make it smaller if possible and deploy a few more times","date":"2012-11-26T07:17:08.356Z","type":"message"}
{"nick":"rodw","message":"coderarity: ack'd. I'm stripping out everything optional *and* the ~15MB of images added since the last good deploy. ","date":"2012-11-26T07:17:31.189Z","type":"message"}
{"nick":"rodw","message":"That won't really work (broken image links) but I just want to see if  the deploy works without those images.","date":"2012-11-26T07:18:24.063Z","type":"message"}
{"nick":"coderarity","message":"yeah","date":"2012-11-26T07:18:33.651Z","type":"message"}
{"nick":"nmanousos","reason":"Quit: Page closed","date":"2012-11-26T07:19:29.254Z","type":"quit"}
{"nick":"metafedora","reason":"Ping timeout: 245 seconds","date":"2012-11-26T07:21:43.324Z","type":"quit"}
{"nick":"rodw","message":"coderarity: Ok. The initial deploy gave me the timeout during the activation phase, but `jitsu snapshots activate` worked when I called it directly.","date":"2012-11-26T07:24:59.239Z","type":"message"}
{"nick":"coderarity","message":"i'd say, put those on a CDN like S3","date":"2012-11-26T07:25:15.603Z","type":"message"}
{"nick":"rodw","message":"I guess I'll just need to find another host for the image files.","date":"2012-11-26T07:25:18.852Z","type":"message"}
{"nick":"rodw","message":"Right.  Thats so much for your help. You guys give excellent support.","date":"2012-11-26T07:25:36.646Z","type":"message"}
{"nick":"coderarity","message":"np","date":"2012-11-26T07:25:41.577Z","type":"message"}
{"nick":"rodw","message":"*Thanks*, not thats","date":"2012-11-26T07:25:47.303Z","type":"message"}
{"nick":"booyaa","message":"mornigng","date":"2012-11-26T07:26:01.317Z","type":"message"}
{"nick":"coderarity","message":"hi","date":"2012-11-26T07:26:05.551Z","type":"message"}
{"nick":"benv_","date":"2012-11-26T07:30:01.610Z","type":"join"}
{"nick":"rodw","reason":"Ping timeout: 245 seconds","date":"2012-11-26T07:30:03.177Z","type":"quit"}
{"nick":"booyaa","message":"ahhh fresh new os install, really need to find a way to automate user settings. no matter.. most of the stuff i've nicked from others","date":"2012-11-26T07:30:53.646Z","type":"message"}
{"nick":"defunctzombie","reason":"Remote host closed the connection","date":"2012-11-26T07:31:04.407Z","type":"quit"}
{"nick":"booyaa","message":"vim config is mmalecki 's","date":"2012-11-26T07:31:08.890Z","type":"message"}
{"nick":"booyaa","message":"i wonder if i should switch to zsh i heard all the hipsters are using it now","date":"2012-11-26T07:31:23.138Z","type":"message"}
{"nick":"coderarity","message":"i just steal the nnomap ; : thingy","date":"2012-11-26T07:31:27.128Z","type":"message"}
{"nick":"booyaa","message":"oh yes that's a nice one, bleeding obvious once you see it ;)","date":"2012-11-26T07:32:01.344Z","type":"message"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T07:33:49.945Z","type":"quit"}
{"nick":"booyaa","message":"working my way through this nicely annotated config too http://amix.dk/vim/vimrc.html","date":"2012-11-26T07:35:16.470Z","type":"message"}
{"nick":"joshontheweb","date":"2012-11-26T07:35:56.959Z","type":"join"}
{"nick":"booyaa","message":"man my eyes are getting crap, i'm now up to 15pt terminal :(","date":"2012-11-26T07:37:51.697Z","type":"message"}
{"nick":"booyaa","message":"could be it's early, but i thinkk old age is starting to kick in","date":"2012-11-26T07:38:13.086Z","type":"message"}
{"nick":"coderarity","message":"i'm at 16pt","date":"2012-11-26T07:38:15.940Z","type":"message"}
{"nick":"booyaa","message":"are you short sighted? (i am)","date":"2012-11-26T07:38:34.026Z","type":"message"}
{"nick":"travis-ci","date":"2012-11-26T07:38:41.413Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] flatiron/plates#91 (master - 6bc531b : Paolo Fragomeni): The build passed.","date":"2012-11-26T07:38:41.543Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/flatiron/plates/compare/1d8d99c08d0b...6bc531b9b378","date":"2012-11-26T07:38:41.544Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/flatiron/plates/builds/3359947","date":"2012-11-26T07:38:41.544Z","type":"message"}
{"nick":"travis-ci","date":"2012-11-26T07:38:41.544Z","type":"part"}
{"nick":"coderarity","message":"not technically","date":"2012-11-26T07:38:47.492Z","type":"message"}
{"nick":"coderarity","message":"but i think visiting the eye doctor could change that","date":"2012-11-26T07:38:58.907Z","type":"message"}
{"nick":"coderarity","message":"or wait, is that far sighted? idk","date":"2012-11-26T07:39:13.617Z","type":"message"}
{"nick":"booyaa","message":"man i wish i was far sighted, i'd happily read my papers from 5ft away vs not be able to see 5\" in front of","date":"2012-11-26T07:44:15.032Z","type":"message"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2012-11-26T07:47:39.709Z","type":"quit"}
{"nick":"alucardX","date":"2012-11-26T07:52:49.162Z","type":"join"}
{"nick":"alucardX","message":"morning","date":"2012-11-26T07:52:57.545Z","type":"message"}
{"nick":"DTrejo","reason":"Remote host closed the connection","date":"2012-11-26T07:54:20.574Z","type":"quit"}
{"nick":"coderarity","message":"hi","date":"2012-11-26T07:54:40.230Z","type":"message"}
