{"nick":"saxby","reason":"Remote host closed the connection","date":"2014-07-10T00:03:33.228Z","type":"quit"}
{"nick":"bixu","date":"2014-07-10T00:10:28.706Z","type":"join"}
{"nick":"fredk1","reason":"Quit: Leaving.","date":"2014-07-10T00:12:21.303Z","type":"quit"}
{"nick":"bixu","reason":"Ping timeout: 272 seconds","date":"2014-07-10T00:15:31.705Z","type":"quit"}
{"nick":"saxby","date":"2014-07-10T00:15:58.932Z","type":"join"}
{"nick":"mindlace","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2014-07-10T00:28:40.727Z","type":"quit"}
{"nick":"mindlace","date":"2014-07-10T00:30:50.624Z","type":"join"}
{"nick":"saxby","reason":"Remote host closed the connection","date":"2014-07-10T00:55:48.791Z","type":"quit"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2014-07-10T01:20:00.542Z","type":"quit"}
{"nick":"ed209","date":"2014-07-10T01:20:35.346Z","type":"join"}
{"nick":"marsell","reason":"Quit: marsell","date":"2014-07-10T01:41:35.931Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-07-10T02:21:20.758Z","type":"quit"}
{"nick":"mindlace","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-07-10T03:00:35.008Z","type":"quit"}
{"nick":"saxby","date":"2014-07-10T03:27:11.277Z","type":"join"}
{"nick":"saxby","reason":"Remote host closed the connection","date":"2014-07-10T05:42:51.383Z","type":"quit"}
{"nick":"bsdguru","date":"2014-07-10T06:35:44.235Z","type":"join"}
{"nick":"saxby","date":"2014-07-10T06:43:25.384Z","type":"join"}
{"nick":"saxby","reason":"Ping timeout: 245 seconds","date":"2014-07-10T06:48:07.349Z","type":"quit"}
{"nick":"bsdguru","reason":"Quit: bsdguru","date":"2014-07-10T06:49:10.634Z","type":"quit"}
{"nick":"ringzero","date":"2014-07-10T06:51:37.874Z","type":"join"}
{"nick":"bsdguru","date":"2014-07-10T07:01:11.612Z","type":"join"}
{"nick":"bsdguru","reason":"Quit: bsdguru","date":"2014-07-10T07:09:15.024Z","type":"quit"}
{"nick":"marsell","date":"2014-07-10T07:09:23.743Z","type":"join"}
{"nick":"bixu","date":"2014-07-10T07:45:26.134Z","type":"join"}
{"nick":"bixu","reason":"Remote host closed the connection","date":"2014-07-10T07:46:00.693Z","type":"quit"}
{"nick":"ringzero","date":"2014-07-10T07:54:18.734Z","type":"quit"}
{"nick":"bixu","date":"2014-07-10T08:17:18.776Z","type":"join"}
{"nick":"bixu","reason":"Read error: Connection reset by peer","date":"2014-07-10T08:17:30.148Z","type":"quit"}
{"nick":"bixu","date":"2014-07-10T08:20:00.962Z","type":"join"}
{"nick":"bixu","reason":"Ping timeout: 255 seconds","date":"2014-07-10T08:24:27.277Z","type":"quit"}
{"nick":"bixu","date":"2014-07-10T08:26:31.032Z","type":"join"}
{"nick":"bsdguru","date":"2014-07-10T08:27:54.775Z","type":"join"}
{"nick":"bixu","reason":"Ping timeout: 264 seconds","date":"2014-07-10T08:35:22.911Z","type":"quit"}
{"nick":"bsdguru","reason":"Ping timeout: 240 seconds","date":"2014-07-10T08:37:03.786Z","type":"quit"}
{"nick":"bixu","date":"2014-07-10T08:37:52.134Z","type":"join"}
{"nick":"bixu","reason":"Remote host closed the connection","date":"2014-07-10T08:37:58.074Z","type":"quit"}
{"nick":"bsdguru","date":"2014-07-10T08:45:31.069Z","type":"join"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2014-07-10T10:20:00.997Z","type":"quit"}
{"nick":"ed209","date":"2014-07-10T10:20:36.164Z","type":"join"}
{"nick":"yruss972","date":"2014-07-10T10:22:47.619Z","type":"join"}
{"nick":"bixu","date":"2014-07-10T10:45:04.229Z","type":"join"}
{"nick":"bixu","reason":"Ping timeout: 255 seconds","date":"2014-07-10T10:49:48.221Z","type":"quit"}
{"nick":"saxby","date":"2014-07-10T10:58:53.267Z","type":"join"}
{"nick":"saxby","reason":"Ping timeout: 255 seconds","date":"2014-07-10T11:03:18.221Z","type":"quit"}
{"nick":"saxby","date":"2014-07-10T11:59:37.100Z","type":"join"}
{"nick":"saxby","reason":"Ping timeout: 256 seconds","date":"2014-07-10T12:04:01.043Z","type":"quit"}
{"nick":"bixu","date":"2014-07-10T12:34:31.704Z","type":"join"}
{"nick":"bixu","reason":"Ping timeout: 272 seconds","date":"2014-07-10T12:39:03.704Z","type":"quit"}
{"nick":"nicholaswyoung","date":"2014-07-10T12:44:02.100Z","type":"join"}
{"nick":"nicholaswyoung","message":"Is there a way to setup a job without the input, and add it later?","date":"2014-07-10T13:19:40.480Z","type":"message"}
{"nick":"nahamu","message":"I think so","date":"2014-07-10T13:37:54.459Z","type":"message"}
{"nick":"nahamu","message":"but you need to add the input within a minute or two (I think...)","date":"2014-07-10T13:38:11.015Z","type":"message"}
{"nick":"ryancnelson","date":"2014-07-10T14:58:03.999Z","type":"join"}
{"nick":"chorrell","date":"2014-07-10T15:06:25.077Z","type":"join"}
{"nick":"nfitch","date":"2014-07-10T15:07:00.632Z","type":"join"}
{"nick":"chorrell","reason":"Client Quit","date":"2014-07-10T15:07:16.888Z","type":"quit"}
{"nick":"nfitch","reason":"Client Quit","date":"2014-07-10T15:11:33.033Z","type":"quit"}
{"nick":"nfitch","date":"2014-07-10T15:12:00.275Z","type":"join"}
{"nick":"jschmidt","reason":"Remote host closed the connection","date":"2014-07-10T15:24:41.969Z","type":"quit"}
{"nick":"fredk1","date":"2014-07-10T15:38:03.705Z","type":"join"}
{"nick":"jschmidt","date":"2014-07-10T15:43:52.283Z","type":"join"}
{"nick":"chorrell","date":"2014-07-10T16:00:02.895Z","type":"join"}
{"nick":"dap_","date":"2014-07-10T16:28:26.137Z","type":"join"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-07-10T16:38:14.271Z","type":"quit"}
{"nick":"chorrell","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2014-07-10T16:40:18.502Z","type":"quit"}
{"nick":"nicholaswyoung","reason":"Quit: Computer has gone to sleep.","date":"2014-07-10T17:03:47.411Z","type":"quit"}
{"nick":"yruss972","reason":"Ping timeout: 252 seconds","date":"2014-07-10T17:09:08.738Z","type":"quit"}
{"nick":"dap_","date":"2014-07-10T17:10:08.208Z","type":"join"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-07-10T17:18:58.152Z","type":"quit"}
{"nick":"mindlace","date":"2014-07-10T17:29:58.397Z","type":"join"}
{"nick":"Marc__","date":"2014-07-10T17:32:50.507Z","type":"join"}
{"nick":"Marc__","message":"can i also ask zfs questions here?","date":"2014-07-10T17:33:17.807Z","type":"message"}
{"nick":"nicholaswyoung","date":"2014-07-10T17:33:34.035Z","type":"join"}
{"nick":"Marc__","message":"test","date":"2014-07-10T17:35:33.768Z","type":"message"}
{"nick":"rmustacc","message":"Marc__: You can, but probably something like #illumos or #smartos may be a better venue. But what'su p?","date":"2014-07-10T17:35:51.499Z","type":"message"}
{"nick":"Marc__","message":"i had a long 1-on-1 discussion with Cantrill in SF on June 6th wrt \"derived datasets\" and ZFS","date":"2014-07-10T17:37:02.960Z","type":"message"}
{"nick":"Marc__","message":"but in the context of SDC, I'm confused on something","date":"2014-07-10T17:37:26.250Z","type":"message"}
{"nick":"rmustacc","message":"delegated datasets perhaps?","date":"2014-07-10T17:38:15.390Z","type":"message"}
{"nick":"Marc__","message":"what i effectively want to do is to be able to share a zfs snapshot or clone across all of the compute nodes under control of the SDC headnode","date":"2014-07-10T17:38:16.601Z","type":"message"}
{"nick":"Marc__","message":"maybe delegated is the term","date":"2014-07-10T17:38:34.216Z","type":"message"}
{"nick":"rmustacc","message":"Share how? NFS, iSCSI, something else?","date":"2014-07-10T17:38:45.584Z","type":"message"}
{"nick":"Marc__","message":"ie","date":"2014-07-10T17:38:46.971Z","type":"message"}
{"nick":"Marc__","message":"i want to be able to clone a zfs snapshot","date":"2014-07-10T17:38:57.957Z","type":"message"}
{"nick":"Marc__","message":"and then create zones (VMs) on other servers","date":"2014-07-10T17:39:21.372Z","type":"message"}
{"nick":"Marc__","message":"in the compute resource pool","date":"2014-07-10T17:39:27.713Z","type":"message"}
{"nick":"Marc__","message":"and then use the zfs clone","date":"2014-07-10T17:39:37.310Z","type":"message"}
{"nick":"Marc__","message":"from whereever zpool that it was created on","date":"2014-07-10T17:39:53.614Z","type":"message"}
{"nick":"Marc__","message":"whatever","date":"2014-07-10T17:39:59.823Z","type":"message"}
{"nick":"Marc__","message":"and use that clone on a new zone/vm","date":"2014-07-10T17:40:14.485Z","type":"message"}
{"nick":"Marc__","message":"i would prefer not to use nfs","date":"2014-07-10T17:40:34.771Z","type":"message"}
{"nick":"Marc__","message":"as teh file sharing mechanism","date":"2014-07-10T17:40:42.611Z","type":"message"}
{"nick":"Marc__","message":"although","date":"2014-07-10T17:40:44.194Z","type":"message"}
{"nick":"Marc__","message":"that seems to be an obvious solution","date":"2014-07-10T17:41:03.311Z","type":"message"}
{"nick":"Marc__","message":"i think that zfs clones","date":"2014-07-10T17:41:12.392Z","type":"message"}
{"nick":"rmustacc","message":"Well, what are the semantics of the data, is it read-only? Does it need to be consistent in every zone?","date":"2014-07-10T17:41:45.730Z","type":"message"}
{"nick":"Marc__","message":"should be able to be used seamlessly across the SDC compute resource pools or the aggregation of all zones across all servers","date":"2014-07-10T17:41:50.592Z","type":"message"}
{"nick":"Marc__","message":"yes read only","date":"2014-07-10T17:41:57.646Z","type":"message"}
{"nick":"Marc__","message":"for example","date":"2014-07-10T17:42:16.356Z","type":"message"}
{"nick":"Marc__","message":"we create a chip build","date":"2014-07-10T17:42:25.277Z","type":"message"}
{"nick":"Marc__","message":"then we want to kick off","date":"2014-07-10T17:42:33.834Z","type":"message"}
{"nick":"Marc__","message":"a bunch of simulation runs","date":"2014-07-10T17:42:42.249Z","type":"message"}
{"nick":"rmustacc","message":"And I guess you don't want to use something like manta to just schedule the compute for you?","date":"2014-07-10T17:42:56.659Z","type":"message"}
{"nick":"Marc__","message":"against that chip build that was created on a zfs dataset","date":"2014-07-10T17:43:00.139Z","type":"message"}
{"nick":"Marc__","message":"i would consider manta","date":"2014-07-10T17:43:09.045Z","type":"message"}
{"nick":"Marc__","message":"but i'm not sure how it would work in this case","date":"2014-07-10T17:43:27.312Z","type":"message"}
{"nick":"rmustacc","message":"Well, you have a large blob of data right? Maybe you frame an entire chip dataset as a tar file, for example.","date":"2014-07-10T17:43:54.215Z","type":"message"}
{"nick":"Marc__","message":"the chip build is a directory tree of files associated with the chip build","date":"2014-07-10T17:43:56.215Z","type":"message"}
{"nick":"Marc__","message":"the chip build may consist of 100 files","date":"2014-07-10T17:44:24.601Z","type":"message"}
{"nick":"rmustacc","message":"Then your manta job just executes by first untarring that and running the compute job against the object and you create one job for each simulation or other checks you have.","date":"2014-07-10T17:44:25.692Z","type":"message"}
{"nick":"Marc__","message":"this sounds like what i want to do","date":"2014-07-10T17:45:04.141Z","type":"message"}
{"nick":"Marc__","message":"however","date":"2014-07-10T17:45:10.659Z","type":"message"}
{"nick":"Marc__","message":"i really want these jobs to be running against an existing file system","date":"2014-07-10T17:45:42.294Z","type":"message"}
{"nick":"Marc__","message":"ala","date":"2014-07-10T17:45:43.704Z","type":"message"}
{"nick":"Marc__","message":"zfs dataset","date":"2014-07-10T17:45:47.721Z","type":"message"}
{"nick":"ryancnelson","message":"a zfs clone is a writable snapshot of a zfs filesystem.  writability is what makes it a \"clone\".  read-only is just \"a snapshot\" … and both reference the zfs filesystem they were cloned/snapped from for data that's not changed since snap-time.  The term for \"serialized out full-copy of that thing, so you can use it elsewhere or share it\" is (basically) \"dataset\"","date":"2014-07-10T17:45:50.234Z","type":"message"}
{"nick":"Marc__","message":"elswhere is the operative word","date":"2014-07-10T17:46:21.387Z","type":"message"}
{"nick":"rmustacc","message":"Sure, it's a question of how much you want to build your own orchestration, right?","date":"2014-07-10T17:46:23.229Z","type":"message"}
{"nick":"rmustacc","message":"And by that I mean, if say, you create an image for a dataset that has your tools and the data, then you have to manually create that on all of the hosts and cause jobs to run on it.","date":"2014-07-10T17:47:04.972Z","type":"message"}
{"nick":"Marc__","message":"share the zfs clone across zones between servers","date":"2014-07-10T17:47:05.250Z","type":"message"}
{"nick":"Marc__","message":"so","date":"2014-07-10T17:47:39.675Z","type":"message"}
{"nick":"Marc__","message":"with 100 servers","date":"2014-07-10T17:47:44.320Z","type":"message"}
{"nick":"ryancnelson","message":"you are, for the most part, describing how we offer new vm images to our customers… \"provision a new vm/zone of this version with this software installed in it\"  == \"deliver a new instance of this frozen-and-prepared-at-this-date dataset to customer X\"","date":"2014-07-10T17:48:09.434Z","type":"message"}
{"nick":"Marc__","message":"yes","date":"2014-07-10T17:48:27.849Z","type":"message"}
{"nick":"Marc__","message":"but","date":"2014-07-10T17:48:29.394Z","type":"message"}
{"nick":"ryancnelson","message":"that's how it does it in a few seconds, vs \"install the os every time\"","date":"2014-07-10T17:48:37.193Z","type":"message"}
{"nick":"Marc__","message":"it is not an OS image","date":"2014-07-10T17:48:37.495Z","type":"message"}
{"nick":"ryancnelson","message":"right, but that's just a fine point.","date":"2014-07-10T17:48:46.107Z","type":"message"}
{"nick":"Marc__","message":"it is a file system","date":"2014-07-10T17:48:52.723Z","type":"message"}
{"nick":"Marc__","message":"that i want to share","date":"2014-07-10T17:49:04.491Z","type":"message"}
{"nick":"Marc__","message":"among many zones","date":"2014-07-10T17:49:10.742Z","type":"message"}
{"nick":"rmustacc","message":"Right, you'll get that.","date":"2014-07-10T17:49:16.893Z","type":"message"}
{"nick":"Marc__","message":"some zones which will be on different servers","date":"2014-07-10T17:49:21.664Z","type":"message"}
{"nick":"rmustacc","message":"Yup.","date":"2014-07-10T17:49:30.019Z","type":"message"}
{"nick":"rmustacc","message":"So, let's talk about what the image actually has.","date":"2014-07-10T17:49:36.370Z","type":"message"}
{"nick":"rmustacc","message":"So the core of the OS doesn't come from the image at all.","date":"2014-07-10T17:49:43.401Z","type":"message"}
{"nick":"Marc__","message":"no","date":"2014-07-10T17:49:48.386Z","type":"message"}
{"nick":"rmustacc","message":"It just comes from the hypervsior.","date":"2014-07-10T17:49:50.727Z","type":"message"}
{"nick":"Marc__","message":"?","date":"2014-07-10T17:49:58.472Z","type":"message"}
{"nick":"rmustacc","message":"No, you don't want me to explain it?","date":"2014-07-10T17:50:00.671Z","type":"message"}
{"nick":"Marc__","message":"yes","date":"2014-07-10T17:50:09.210Z","type":"message"}
{"nick":"Marc__","message":"the data","date":"2014-07-10T17:50:17.853Z","type":"message"}
{"nick":"Marc__","message":"on the zfs dataset","date":"2014-07-10T17:50:24.384Z","type":"message"}
{"nick":"Marc__","message":"is needed by the user to run their application","date":"2014-07-10T17:50:42.663Z","type":"message"}
{"nick":"saxby","date":"2014-07-10T17:50:45.968Z","type":"join"}
{"nick":"Marc__","message":"like the chip build","date":"2014-07-10T17:50:53.285Z","type":"message"}
{"nick":"Marc__","message":"that i described","date":"2014-07-10T17:50:57.228Z","type":"message"}
{"nick":"Marc__","message":"let me ask it this way","date":"2014-07-10T17:51:23.292Z","type":"message"}
{"nick":"Marc__","message":"how would you share a zfs clone to another zone on a different server?","date":"2014-07-10T17:51:48.163Z","type":"message"}
{"nick":"ryancnelson","message":"you need to stop using the term \"clone\".  that means a thing that you don't mean here.","date":"2014-07-10T17:52:23.199Z","type":"message"}
{"nick":"mindlace","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-07-10T17:52:43.014Z","type":"quit"}
{"nick":"Marc__","message":"just use the term zfs dataset?","date":"2014-07-10T17:52:45.819Z","type":"message"}
{"nick":"ryancnelson","message":"yes.","date":"2014-07-10T17:52:49.068Z","type":"message"}
{"nick":"Marc__","message":"ok","date":"2014-07-10T17:52:54.976Z","type":"message"}
{"nick":"ryancnelson","message":"by way of example:","date":"2014-07-10T17:52:57.697Z","type":"message"}
{"nick":"ryancnelson","message":"in the joyent public manta:","date":"2014-07-10T17:53:06.927Z","type":"message"}
{"nick":"rmustacc","message":"Well, given the constraints of I don't care about the space it takes up and do care about the latency.","date":"2014-07-10T17:53:08.142Z","type":"message"}
{"nick":"rmustacc","message":"I would do one of two things.","date":"2014-07-10T17:53:29.699Z","type":"message"}
{"nick":"rmustacc","message":"I would either, first, do a zfs send of that zfs dataset to every host that would have zones I want to run this.","date":"2014-07-10T17:53:54.634Z","type":"message"}
{"nick":"rmustacc","message":"Next, I would then use vmadm to do a lofs mount of that data read-only into the zone.","date":"2014-07-10T17:54:23.408Z","type":"message"}
{"nick":"rmustacc","message":"Such that the zone then has read-only access at some defined point.","date":"2014-07-10T17:54:38.850Z","type":"message"}
{"nick":"Marc__","message":"ok","date":"2014-07-10T17:55:19.996Z","type":"message"}
{"nick":"Marc__","message":"2nd?","date":"2014-07-10T17:55:23.274Z","type":"message"}
{"nick":"Marc__","message":"way?","date":"2014-07-10T17:55:33.862Z","type":"message"}
{"nick":"rmustacc","message":"I would give every zone a delegated dataset.","date":"2014-07-10T17:55:47.981Z","type":"message"}
{"nick":"rmustacc","message":"And then do the zfs send | zfs recv directly to that zone's delegated dataset.","date":"2014-07-10T17:55:57.648Z","type":"message"}
{"nick":"Marc__","message":"ok...that was my next question","date":"2014-07-10T17:55:59.606Z","type":"message"}
{"nick":"rmustacc","message":"The advantage is that the user has their own copy that's unique to that zone.","date":"2014-07-10T17:56:08.783Z","type":"message"}
{"nick":"Marc__","message":"what is a delegated dataset?","date":"2014-07-10T17:56:13.961Z","type":"message"}
{"nick":"rmustacc","message":"They can modify it to their heart's content.","date":"2014-07-10T17:56:15.959Z","type":"message"}
{"nick":"rmustacc","message":"So, are you familiar with the idea of how zfs is broken into datasets that are logically grouped?","date":"2014-07-10T17:56:35.464Z","type":"message"}
{"nick":"Marc__","message":"i think that i do","date":"2014-07-10T17:56:53.455Z","type":"message"}
{"nick":"Marc__","message":"the datasets","date":"2014-07-10T17:57:02.340Z","type":"message"}
{"nick":"Marc__","message":"are essentially file systems","date":"2014-07-10T17:57:07.806Z","type":"message"}
{"nick":"Marc__","message":"individually","date":"2014-07-10T17:57:15.760Z","type":"message"}
{"nick":"rmustacc","message":"Yes, but they are grouped in a heirarchy.","date":"2014-07-10T17:57:25.382Z","type":"message"}
{"nick":"Marc__","message":"the grouping is the zpool","date":"2014-07-10T17:57:25.696Z","type":"message"}
{"nick":"dap_","date":"2014-07-10T17:57:28.811Z","type":"join"}
{"nick":"Marc__","message":"right?","date":"2014-07-10T17:57:28.923Z","type":"message"}
{"nick":"rmustacc","message":"A zpool will contain many datasets.","date":"2014-07-10T17:57:37.951Z","type":"message"}
{"nick":"Marc__","message":"yes","date":"2014-07-10T17:57:42.340Z","type":"message"}
{"nick":"rmustacc","message":"For example, each zone will have their own dataset zones/<uuid>","date":"2014-07-10T17:57:51.272Z","type":"message"}
{"nick":"ryancnelson","message":"if i mlogin to 10 manta compute zones, i see a *ton* of stuff installed in /opt/local/bin … recently, we updated that list of stuff to add a lot more, and removed a couple buggy things.","date":"2014-07-10T17:57:56.287Z","type":"message"}
{"nick":"ryancnelson","message":"all that software is just data that's delivered in the image.  You could have a terabyte of chip-data in there if you wanted.  that's the dataset we provision with.","date":"2014-07-10T17:57:56.402Z","type":"message"}
{"nick":"Marc__","message":"right","date":"2014-07-10T17:58:13.311Z","type":"message"}
{"nick":"Marc__","message":"what is the hierarchy?","date":"2014-07-10T17:58:25.579Z","type":"message"}
{"nick":"rmustacc","message":"A delegated dataset allows a zone to have a namespace under zones/<uuid>/data that they can then do whatever they want with, subject to the constraints.","date":"2014-07-10T17:58:26.760Z","type":"message"}
{"nick":"rmustacc","message":"So a zone is given permission to administer anything in zones/<uuid>/data, but nothing else.","date":"2014-07-10T17:58:44.283Z","type":"message"}
{"nick":"rmustacc","message":"So they can create additional datasets, etc.","date":"2014-07-10T17:58:52.515Z","type":"message"}
{"nick":"Marc__","message":"how does this relate to other zones?","date":"2014-07-10T18:00:00.096Z","type":"message"}
{"nick":"rmustacc","message":"They're all independent.","date":"2014-07-10T18:00:09.483Z","type":"message"}
{"nick":"Marc__","message":"that may wish to use another zone's delegated dataset?","date":"2014-07-10T18:00:23.064Z","type":"message"}
{"nick":"rmustacc","message":"But it means you could take a zfs dataset from one zone and send it to another.","date":"2014-07-10T18:00:23.181Z","type":"message"}
{"nick":"rmustacc","message":"They cannot.","date":"2014-07-10T18:00:28.043Z","type":"message"}
{"nick":"Marc__","message":"send the delegated dataset to another zone","date":"2014-07-10T18:01:12.184Z","type":"message"}
{"nick":"nahamu","message":"stupid question: is the chip build huge? why not just create a new zone image that includes the chip build in it?","date":"2014-07-10T18:01:22.091Z","type":"message"}
{"nick":"rmustacc","message":"That's what I was originally trying to suggest.","date":"2014-07-10T18:01:41.167Z","type":"message"}
{"nick":"nahamu","message":"oh, I missed that.","date":"2014-07-10T18:01:47.611Z","type":"message"}
{"nick":"Marc__","message":"these chip builds and data can be 100's of GB","date":"2014-07-10T18:02:00.354Z","type":"message"}
{"nick":"Marc__","message":"and take a long time to build","date":"2014-07-10T18:02:13.087Z","type":"message"}
{"nick":"nahamu","message":"okay, so that will be annoying to hold in the image server","date":"2014-07-10T18:02:16.204Z","type":"message"}
{"nick":"nahamu","message":"but otherwise you still need to drop a copy of that zfs filesystem onto every compute node.","date":"2014-07-10T18:02:33.122Z","type":"message"}
{"nick":"Marc__","message":"we have one engineer perform these builds","date":"2014-07-10T18:02:42.859Z","type":"message"}
{"nick":"Marc__","message":"then another engineer","date":"2014-07-10T18:02:48.429Z","type":"message"}
{"nick":"rmustacc","message":"Well, given that you probably care about your storage capacity, I wouldn't go the delegated dataset route because you'll duplicate that for every zone.","date":"2014-07-10T18:02:50.917Z","type":"message"}
{"nick":"Marc__","message":"who will","date":"2014-07-10T18:02:51.618Z","type":"message"}
{"nick":"Marc__","message":"set up the batch regressions","date":"2014-07-10T18:02:59.663Z","type":"message"}
{"nick":"Marc__","message":"against this build","date":"2014-07-10T18:03:06.529Z","type":"message"}
{"nick":"Marc__","message":"we want to save builds","date":"2014-07-10T18:03:12.457Z","type":"message"}
{"nick":"Marc__","message":"to be able to compare regressions and re-run","date":"2014-07-10T18:03:25.182Z","type":"message"}
{"nick":"Marc__","message":"we want to make sure that the build is stable, untouched and know how it was created","date":"2014-07-10T18:03:51.210Z","type":"message"}
{"nick":"Marc__","message":"i'm actually not that concerned with the storage","date":"2014-07-10T18:04:07.287Z","type":"message"}
{"nick":"nahamu","message":"certainly the path of least resistance in SDC would be to do the build in a zone, create an image out of that zone, and then use that new image for all the testing","date":"2014-07-10T18:04:15.292Z","type":"message"}
{"nick":"Marc__","message":"a typical chip project will allocate 25TB of storage","date":"2014-07-10T18:04:26.411Z","type":"message"}
{"nick":"Marc__","message":"hmmm?","date":"2014-07-10T18:04:43.445Z","type":"message"}
{"nick":"nahamu","message":"but the build is only 100s of GB?","date":"2014-07-10T18:04:44.349Z","type":"message"}
{"nick":"nahamu","message":"now I'm confused.","date":"2014-07-10T18:04:50.401Z","type":"message"}
{"nick":"Marc__","message":"the chip build","date":"2014-07-10T18:05:07.344Z","type":"message"}
{"nick":"rmustacc","message":"Marc__: How many of these do you want to have active on a single compute node?","date":"2014-07-10T18:05:08.115Z","type":"message"}
{"nick":"Marc__","message":"is just a seed","date":"2014-07-10T18:05:11.087Z","type":"message"}
{"nick":"rmustacc","message":"eg. what's your capacity on an individual node and how much do you want to manage that?","date":"2014-07-10T18:05:22.232Z","type":"message"}
{"nick":"Marc__","message":"input to the execution of many downstream application runds","date":"2014-07-10T18:05:29.939Z","type":"message"}
{"nick":"Marc__","message":"for example","date":"2014-07-10T18:05:49.474Z","type":"message"}
{"nick":"Marc__","message":"Qualcomm","date":"2014-07-10T18:05:56.262Z","type":"message"}
{"nick":"Marc__","message":"the Snapdragon ARM processor","date":"2014-07-10T18:06:06.652Z","type":"message"}
{"nick":"Marc__","message":"there are approximately 350,000 regression tests against that processor core","date":"2014-07-10T18:06:28.922Z","type":"message"}
{"nick":"chorrell","date":"2014-07-10T18:06:33.818Z","type":"join"}
{"nick":"rmustacc","message":"I understand, I did chip work in a past life.","date":"2014-07-10T18:06:45.330Z","type":"message"}
{"nick":"Marc__","message":"that are almost under continuous regression","date":"2014-07-10T18:06:46.160Z","type":"message"}
{"nick":"Marc__","message":"the similar activity will happen for synthesis, place & route, and timing","date":"2014-07-10T18:07:09.609Z","type":"message"}
{"nick":"Marc__","message":"so you see where i am going with this","date":"2014-07-10T18:07:21.351Z","type":"message"}
{"nick":"Marc__","message":"the key problem","date":"2014-07-10T18:07:26.487Z","type":"message"}
{"nick":"Marc__","message":"here","date":"2014-07-10T18:07:28.038Z","type":"message"}
{"nick":"rmustacc","message":"Right, so that's why I asked how much data you want to have active on a single CN at a time and how much do you manually want to manage it?","date":"2014-07-10T18:07:29.923Z","type":"message"}
{"nick":"Marc__","message":"this depends","date":"2014-07-10T18:07:56.546Z","type":"message"}
{"nick":"Marc__","message":"on exactly what i am doing in the full chip workflow","date":"2014-07-10T18:08:10.610Z","type":"message"}
{"nick":"Marc__","message":"keep in mind that","date":"2014-07-10T18:08:14.530Z","type":"message"}
{"nick":"rmustacc","message":"Well, based on the sizing requirements, I wouldn't use a delegated dataset.","date":"2014-07-10T18:08:17.266Z","type":"message"}
{"nick":"Marc__","message":"we are dealing with a complex workflow","date":"2014-07-10T18:08:34.427Z","type":"message"}
{"nick":"rmustacc","message":"I would lofs mount the data read-only from the GZ and send each dataset to the node that it needs to exist on.","date":"2014-07-10T18:08:35.223Z","type":"message"}
{"nick":"Marc__","message":"that has many EDA software applications","date":"2014-07-10T18:08:44.149Z","type":"message"}
{"nick":"Marc__","message":"that comprise the workflow","date":"2014-07-10T18:08:52.674Z","type":"message"}
{"nick":"Marc__","message":"i call these types of workflows Loosely Coupled Tightly Constrained","date":"2014-07-10T18:09:11.519Z","type":"message"}
{"nick":"Marc__","message":"(LCTC","date":"2014-07-10T18:09:14.046Z","type":"message"}
{"nick":"Marc__","message":")","date":"2014-07-10T18:09:16.202Z","type":"message"}
{"nick":"Marc__","message":"the loosely coupled component is","date":"2014-07-10T18:09:30.276Z","type":"message"}
{"nick":"Marc__","message":"the batch regressions that are run iteratively","date":"2014-07-10T18:09:41.377Z","type":"message"}
{"nick":"nahamu","message":"when you say 25TB, are you referring to 250 copies of a 100GB build floating around, or are you saying that there are 25TB of non-replicated data?","date":"2014-07-10T18:09:45.145Z","type":"message"}
{"nick":"Marc__","message":"the tightly constrained portion","date":"2014-07-10T18:09:49.104Z","type":"message"}
{"nick":"nahamu","message":"(ignore me until you're done answering rmustacc...)","date":"2014-07-10T18:10:05.984Z","type":"message"}
{"nick":"rmustacc","message":"Right, so I think what I'm suggesting will work for you.","date":"2014-07-10T18:10:09.168Z","type":"message"}
{"nick":"rmustacc","message":"But it will be a bit more manual on your part.","date":"2014-07-10T18:10:23.242Z","type":"message"}
{"nick":"Marc__","message":"25TB of non-replicated data","date":"2014-07-10T18:10:45.829Z","type":"message"}
{"nick":"Marc__","message":"over the course of the project","date":"2014-07-10T18:10:50.618Z","type":"message"}
{"nick":"rmustacc","message":"If I wanted to take myself out of managing the individual datasets and their presence or lack thereof on compute nodes, I'd probably try to find a way to make it work on manta.","date":"2014-07-10T18:10:52.600Z","type":"message"}
{"nick":"rmustacc","message":"But either of those two routes should work for you, make sense?","date":"2014-07-10T18:10:59.607Z","type":"message"}
{"nick":"Marc__","message":"i'm more interested in understanding if i can use Manta to do this","date":"2014-07-10T18:11:23.871Z","type":"message"}
{"nick":"Marc__","message":"so you would suggest making this work on Manta, right?","date":"2014-07-10T18:12:26.314Z","type":"message"}
{"nick":"rmustacc","message":"Well, if all the files must be present and can't be done through an object pipeline, then today, you'd have to have each of that blob of data be a single object.","date":"2014-07-10T18:12:26.441Z","type":"message"}
{"nick":"rmustacc","message":"It all depends on the level of management you want to od.","date":"2014-07-10T18:12:36.371Z","type":"message"}
{"nick":"rmustacc","message":"*do","date":"2014-07-10T18:12:37.204Z","type":"message"}
{"nick":"rmustacc","message":"Manta will make managing the data to host mapping easier, but it may be trickier to transform a file system of objects into a series of jobs to best take advantage of manta.","date":"2014-07-10T18:12:59.558Z","type":"message"}
{"nick":"Marc__","message":"so i do think i understand what manta does","date":"2014-07-10T18:13:33.636Z","type":"message"}
{"nick":"rmustacc","message":"Having the ability to just use a delegated dataset and import that data in manta might be interesting, but isn't something that exists today or is probably going to magically appear any time soon.","date":"2014-07-10T18:13:34.610Z","type":"message"}
{"nick":"Marc__","message":"after you said taht","date":"2014-07-10T18:13:40.793Z","type":"message"}
{"nick":"Marc__","message":"that","date":"2014-07-10T18:13:42.474Z","type":"message"}
{"nick":"Marc__","message":"yes","date":"2014-07-10T18:13:57.134Z","type":"message"}
{"nick":"Marc__","message":"that is what we want in this scenario","date":"2014-07-10T18:14:05.219Z","type":"message"}
{"nick":"Marc__","message":"a delegated dataset imported into Manta","date":"2014-07-10T18:14:18.868Z","type":"message"}
{"nick":"rmustacc","message":"Unfortunately, that doesn't exist today, and would not necessairily be faster than the tar approach.","date":"2014-07-10T18:14:47.393Z","type":"message"}
{"nick":"Marc__","message":"so where can i read about delgated datasets","date":"2014-07-10T18:14:51.393Z","type":"message"}
{"nick":"Marc__","message":"last question","date":"2014-07-10T18:16:18.138Z","type":"message"}
{"nick":"Marc__","message":"what about nfs","date":"2014-07-10T18:16:21.224Z","type":"message"}
{"nick":"rmustacc","message":"Well, there are two things you could do here, actually.","date":"2014-07-10T18:16:33.781Z","type":"message"}
{"nick":"rmustacc","message":"You could have a real nfs server and just have the data in one place.","date":"2014-07-10T18:16:40.602Z","type":"message"}
{"nick":"rmustacc","message":"You could also use manta-nfs.","date":"2014-07-10T18:16:43.661Z","type":"message"}
{"nick":"rmustacc","message":"So you could put all the files in manta, and expose it to a zone through nfs.","date":"2014-07-10T18:16:53.323Z","type":"message"}
{"nick":"Marc__","message":"what about performance","date":"2014-07-10T18:17:08.144Z","type":"message"}
{"nick":"Marc__","message":"against 10,000 zones","date":"2014-07-10T18:17:19.135Z","type":"message"}
{"nick":"rmustacc","message":"As for reading about delegated datasets, I'd suggest the zfs manual page http://illumos.org/man/zfs","date":"2014-07-10T18:17:24.818Z","type":"message"}
{"nick":"Marc__","message":"spinning up and down","date":"2014-07-10T18:17:26.897Z","type":"message"}
{"nick":"Marc__","message":"with mounts and unmounts","date":"2014-07-10T18:17:37.694Z","type":"message"}
{"nick":"nahamu","message":"The SmartOS specifics are described a bit in the man page: http://us-east.manta.joyent.com/smartosman/public/man1M/vmadm.1M.html","date":"2014-07-10T18:17:47.828Z","type":"message"}
{"nick":"rmustacc","message":"I haven't personally done nfs scalability or manta-nfs scalability.","date":"2014-07-10T18:17:56.522Z","type":"message"}
{"nick":"rmustacc","message":"But manta itself is designed to handle those kinds of requests.","date":"2014-07-10T18:18:06.454Z","type":"message"}
{"nick":"Marc__","message":"manta deals with objects","date":"2014-07-10T18:18:38.560Z","type":"message"}
{"nick":"Marc__","message":"not file systems","date":"2014-07-10T18:18:45.297Z","type":"message"}
{"nick":"nahamu","message":"this may have been asked already, but how many chip builds are active in a single cluster at a time?","date":"2014-07-10T18:18:48.843Z","type":"message"}
{"nick":"Marc__","message":"in our cloud","date":"2014-07-10T18:19:04.430Z","type":"message"}
{"nick":"Marc__","message":"there would be dozens","date":"2014-07-10T18:19:13.027Z","type":"message"}
{"nick":"Marc__","message":"being done by many different organizations","date":"2014-07-10T18:19:28.201Z","type":"message"}
{"nick":"nahamu","message":"oh, so this is a service for chip companies...","date":"2014-07-10T18:19:39.386Z","type":"message"}
{"nick":"Marc__","message":"yes","date":"2014-07-10T18:20:00.850Z","type":"message"}
{"nick":"Marc__","message":"a design infrastructure built upon SDC","date":"2014-07-10T18:20:11.066Z","type":"message"}
{"nick":"Marc__","message":"SmartO","date":"2014-07-10T18:20:15.779Z","type":"message"}
{"nick":"Marc__","message":"SmartOS and ZFS","date":"2014-07-10T18:20:23.347Z","type":"message"}
{"nick":"Marc__","message":"an inter-organizational WorkFlow-as-a-Service","date":"2014-07-10T18:20:39.335Z","type":"message"}
{"nick":"Marc__","message":"and Digital-Rights-Management-as-a-Service (DRMaaS)","date":"2014-07-10T18:20:54.024Z","type":"message"}
{"nick":"Marc__","message":"many thanks for this dialogue","date":"2014-07-10T18:22:04.933Z","type":"message"}
{"nick":"Marc__","message":"this transcript will give me something to re-read and ponder","date":"2014-07-10T18:22:21.920Z","type":"message"}
{"nick":"nahamu","message":"If it were me and I had some serious money backing the project, I'd probably get a couple of new features added to Manta to smooth this out.","date":"2014-07-10T18:23:12.990Z","type":"message"}
{"nick":"Marc__","message":"that is what we are talking to Joyent about","date":"2014-07-10T18:23:36.824Z","type":"message"}
{"nick":"nicholaswyoung","reason":"Quit: Computer has gone to sleep.","date":"2014-07-10T18:23:50.740Z","type":"quit"}
{"nick":"Marc__","message":"we're now standing up the first pilot cloud now","date":"2014-07-10T18:23:57.881Z","type":"message"}
{"nick":"nahamu","message":"Because ultimately I do think that ZFS is the best way to reliably store and move around your bits.","date":"2014-07-10T18:24:00.157Z","type":"message"}
{"nick":"Marc__","message":"with Joyent's assistance","date":"2014-07-10T18:24:19.908Z","type":"message"}
{"nick":"Marc__","message":"with SDC 7","date":"2014-07-10T18:24:23.411Z","type":"message"}
{"nick":"nahamu","message":"And Manta's computation model has a lot going for it.","date":"2014-07-10T18:24:28.326Z","type":"message"}
{"nick":"Marc__","message":"i'm getting pushback to allow us to instal Manta","date":"2014-07-10T18:24:39.118Z","type":"message"}
{"nick":"Marc__","message":"at this point","date":"2014-07-10T18:24:42.986Z","type":"message"}
{"nick":"nahamu","message":"But the units of computation you're dealing with seem to be bigger than the normal style of objects that Manta generally deals in","date":"2014-07-10T18:25:04.329Z","type":"message"}
{"nick":"Marc__","message":"precisely","date":"2014-07-10T18:25:15.243Z","type":"message"}
{"nick":"nahamu","message":"I mean, here's a completely unfinished idea:","date":"2014-07-10T18:25:29.468Z","type":"message"}
{"nick":"nahamu","message":"if you could have an object that was in fact a UFS filesystem that the compute zone could mount up...","date":"2014-07-10T18:25:48.715Z","type":"message"}
{"nick":"Marc__","message":"plus i want combinations of ZFS datasets","date":"2014-07-10T18:26:03.093Z","type":"message"}
{"nick":"Marc__","message":"to complete the execution picture for the user","date":"2014-07-10T18:26:03.231Z","type":"message"}
{"nick":"nahamu","message":"then you don't need to waste time untarring a tarball.","date":"2014-07-10T18:26:05.529Z","type":"message"}
{"nick":"Marc__","message":"right","date":"2014-07-10T18:26:20.033Z","type":"message"}
{"nick":"Marc__","message":"we may seek to have zfs-1a + zfs-2b + zfs-3.3, etc to comprise a complete filesystem needed for a specific chip regression","date":"2014-07-10T18:27:16.311Z","type":"message"}
{"nick":"nahamu","message":"each of which contains thousands of files","date":"2014-07-10T18:27:46.111Z","type":"message"}
{"nick":"nahamu","message":"(if not millions)","date":"2014-07-10T18:27:50.086Z","type":"message"}
{"nick":"Marc__","message":"maybe not millions, but certainly 1000's","date":"2014-07-10T18:28:05.380Z","type":"message"}
{"nick":"Marc__","message":"remember i would also like for the EDA software tree to be shared and moved around","date":"2014-07-10T18:28:37.949Z","type":"message"}
{"nick":"ryancnelson","message":"mounting a filesystem via lofs (filesystem in a file) is a thing that's not considered safe for multi-tenant infrastructures, so we don't allow it in the JPC, or the public manta.  You could do that in your on-prem manta, though.","date":"2014-07-10T18:28:43.370Z","type":"message"}
{"nick":"nahamu","message":"can hyperlofs mount in a whole subtree?","date":"2014-07-10T18:29:53.243Z","type":"message"}
{"nick":"nahamu","message":"I don't actually know the internals of Manta, but I know enough about SmartOS to be dangerous.","date":"2014-07-10T18:30:55.811Z","type":"message"}
{"nick":"chorrell","reason":"Read error: Connection reset by peer","date":"2014-07-10T18:30:56.007Z","type":"quit"}
{"nick":"nahamu","message":"I'm pretty sure that Manta is using hyperlofs to mount in the object to an already running zone.","date":"2014-07-10T18:31:20.512Z","type":"message"}
{"nick":"ryancnelson","message":"yep","date":"2014-07-10T18:31:30.890Z","type":"message"}
{"nick":"nahamu","message":"it would be cool if you could have an \"object\" that was actually a while filesystem tree","date":"2014-07-10T18:31:39.063Z","type":"message"}
{"nick":"ryancnelson","message":"also pretty sure it's just objects","date":"2014-07-10T18:31:44.865Z","type":"message"}
{"nick":"ryancnelson","message":"actually, it has to be","date":"2014-07-10T18:31:50.906Z","type":"message"}
{"nick":"ryancnelson","message":"in this implementation, anyway","date":"2014-07-10T18:31:56.630Z","type":"message"}
{"nick":"nahamu","message":"the normal tools for uploading such an object wouldn't really make sense.","date":"2014-07-10T18:32:08.305Z","type":"message"}
{"nick":"ryancnelson","message":"because:","date":"2014-07-10T18:32:08.428Z","type":"message"}
{"nick":"ryancnelson","message":"if you pass in 200 objects to a marlin job","date":"2014-07-10T18:32:19.014Z","type":"message"}
{"nick":"ryancnelson","message":"… we find compute near those objects","date":"2014-07-10T18:32:27.908Z","type":"message"}
{"nick":"ryancnelson","message":"sorry, more elipses","date":"2014-07-10T18:32:34.059Z","type":"message"}
{"nick":"nahamu","message":":)","date":"2014-07-10T18:32:36.760Z","type":"message"}
{"nick":"ryancnelson","message":"and we will re-use your marlin zone to do the next ones, if it's in the same place as more of the objects you pass in","date":"2014-07-10T18:33:07.449Z","type":"message"}
{"nick":"ryancnelson","message":"but they're spread all over","date":"2014-07-10T18:33:14.322Z","type":"message"}
{"nick":"ryancnelson","message":"which is to say, the \"directory tree\" of manta storage is just an abstraction.","date":"2014-07-10T18:33:35.042Z","type":"message"}
{"nick":"ryancnelson","message":"all your objects under /nahamu/stor/foo/bar/ aren't really all on the same spinning disk.","date":"2014-07-10T18:33:54.800Z","type":"message"}
{"nick":"nahamu","message":"right, I get that.","date":"2014-07-10T18:34:00.324Z","type":"message"}
{"nick":"ryancnelson","message":"disks","date":"2014-07-10T18:34:04.206Z","type":"message"}
{"nick":"ryancnelson","message":"so, there's no \"directory\" to map in, via hyperlofs","date":"2014-07-10T18:34:18.174Z","type":"message"}
{"nick":"nahamu","message":"they're each under /zones/<blah blah blah>/<unique identifier>","date":"2014-07-10T18:34:29.714Z","type":"message"}
{"nick":"ryancnelson","message":"right","date":"2014-07-10T18:34:34.508Z","type":"message"}
{"nick":"nahamu","message":"and manatee knows what \"path\" it's under","date":"2014-07-10T18:34:42.880Z","type":"message"}
{"nick":"nahamu","message":"what I'm saying is I'd love to have /nahamu/stor/thing1 as an object, but that object is actually a whole tree of files itself.","date":"2014-07-10T18:35:14.967Z","type":"message"}
{"nick":"ryancnelson","message":"so, pick a compute zone you're in.  that guy might be nearby the disks that hold *some* of the files in that dir, but almost certainly not all of them","date":"2014-07-10T18:35:23.177Z","type":"message"}
{"nick":"ryancnelson","message":"right","date":"2014-07-10T18:35:27.480Z","type":"message"}
{"nick":"ryancnelson","message":"that's like a boot_archive :)","date":"2014-07-10T18:35:33.474Z","type":"message"}
{"nick":"nahamu","message":"because then I could set the number of copies for that object equal to the number of machines in the cluster","date":"2014-07-10T18:35:37.777Z","type":"message"}
{"nick":"ryancnelson","message":"… which has a ufs filesystem in it","date":"2014-07-10T18:35:40.342Z","type":"message"}
{"nick":"nahamu","message":"and then I can run jobs on it that can run on any machine since it's on every machine.","date":"2014-07-10T18:35:52.593Z","type":"message"}
{"nick":"ryancnelson","message":"in VERY EARLY manta,","date":"2014-07-10T18:35:53.994Z","type":"message"}
{"nick":"ryancnelson","message":"i used to be able to mount a hsfs (cdrom iso) file in a manta zone","date":"2014-07-10T18:36:15.120Z","type":"message"}
{"nick":"ryancnelson","message":"doing compute jobs on iso images was very handy","date":"2014-07-10T18:36:25.410Z","type":"message"}
{"nick":"ryancnelson","message":"but it's not safe","date":"2014-07-10T18:36:28.198Z","type":"message"}
{"nick":"tjfontaine","message":"fwiw there are plenty of ways you could do that in userspace","date":"2014-07-10T18:36:49.700Z","type":"message"}
{"nick":"ryancnelson","message":"arbitrary filesystem data mounted by kernel filesystem drivers","date":"2014-07-10T18:36:55.130Z","type":"message"}
{"nick":"ryancnelson","message":"yeah, userland is safe, and the recommended alternative","date":"2014-07-10T18:37:19.136Z","type":"message"}
{"nick":"nahamu","message":"right, if illumos had fuse it might be safer, but you could abuse the node-nfs and do it locally in the zone too","date":"2014-07-10T18:37:22.949Z","type":"message"}
{"nick":"nahamu","message":"oh!","date":"2014-07-10T18:37:29.654Z","type":"message"}
{"nick":"nahamu","message":"that's it!","date":"2014-07-10T18:37:33.426Z","type":"message"}
{"nick":"ryancnelson","message":"marlin zones can't nfs-mount stuff, either","date":"2014-07-10T18:37:48.128Z","type":"message"}
{"nick":"nahamu","message":"rats","date":"2014-07-10T18:37:52.486Z","type":"message"}
{"nick":"tjfontaine","message":"I'm not sure if I would define it as 'safe' to have fuse -- but you really don't need much kernel support to actually do file system parsers","date":"2014-07-10T18:38:01.015Z","type":"message"}
{"nick":"ryancnelson","message":"they could, and (fairly) safely, too","date":"2014-07-10T18:38:04.083Z","type":"message"}
{"nick":"tjfontaine","message":"the kernel support you need is basically \"this is how you load a file\" which of course you're always going to have :)","date":"2014-07-10T18:38:25.657Z","type":"message"}
{"nick":"ryancnelson","message":"it's just a bit crazy to think that normally someone would nfs-mount their netapp out the JPC manta nat gateway","date":"2014-07-10T18:38:33.351Z","type":"message"}
{"nick":"ryancnelson","message":"nfs-mount localhost as a filesystem interface isn't un-reasonable, though","date":"2014-07-10T18:39:07.553Z","type":"message"}
{"nick":"nahamu","message":"but you could allow nfs in an on-prem manta","date":"2014-07-10T18:39:08.518Z","type":"message"}
{"nick":"nahamu","message":"but yes, if there's money to be spent, kernel work could be on the table","date":"2014-07-10T18:40:09.979Z","type":"message"}
{"nick":"nahamu","message":"but still, without messing with the kernel...","date":"2014-07-10T18:40:37.535Z","type":"message"}
{"nick":"nahamu","message":"oh!","date":"2014-07-10T18:40:45.236Z","type":"message"}
{"nick":"nahamu","message":"okay, next unfinished idea:","date":"2014-07-10T18:40:50.852Z","type":"message"}
{"nick":"nahamu","message":"manta is normally expecting a \"normal\" object","date":"2014-07-10T18:41:52.274Z","type":"message"}
{"nick":"nahamu","message":"stream of bits that get landed into a file on n nodes in the cluster","date":"2014-07-10T18:42:09.462Z","type":"message"}
{"nick":"nahamu","message":"if you could set a header that said \"this is a zfs send stream\" instead of dropping it into a file you receive it into an appropriately named spot","date":"2014-07-10T18:42:44.543Z","type":"message"}
{"nick":"nahamu","message":"(on n nodes in the cluster)","date":"2014-07-10T18:42:52.416Z","type":"message"}
{"nick":"nahamu","message":"then you could hyperlofs that directory into a marlin zone","date":"2014-07-10T18:43:10.981Z","type":"message"}
{"nick":"nahamu","message":"(this would never fly in the JPC Manta...)","date":"2014-07-10T18:43:19.011Z","type":"message"}
{"nick":"ryancnelson","message":"then you still have a big file in your marlin zone.","date":"2014-07-10T18:43:50.646Z","type":"message"}
{"nick":"nahamu","message":"huh? no, it's a send stream containing a snapshot of a filesystem","date":"2014-07-10T18:44:13.126Z","type":"message"}
{"nick":"chorrell","date":"2014-07-10T18:44:19.219Z","type":"join"}
{"nick":"nahamu","message":"which you receive into a filesystem rather than just dropping onto the disk.","date":"2014-07-10T18:44:34.741Z","type":"message"}
{"nick":"ryancnelson","message":"oh.  you zfs receive at provision time?","date":"2014-07-10T18:44:46.646Z","type":"message"}
{"nick":"nahamu","message":"I meant at upload time","date":"2014-07-10T18:44:54.224Z","type":"message"}
{"nick":"ryancnelson","message":"that's not fast, like zfs clone","date":"2014-07-10T18:44:56.891Z","type":"message"}
{"nick":"chorrell","reason":"Client Quit","date":"2014-07-10T18:45:02.079Z","type":"quit"}
{"nick":"ryancnelson","message":"oh, i get it","date":"2014-07-10T18:45:11.320Z","type":"message"}
{"nick":"ryancnelson","message":"at store-time, instead of writing files, you import datasets","date":"2014-07-10T18:45:41.782Z","type":"message"}
{"nick":"nahamu","message":"right","date":"2014-07-10T18:45:47.760Z","type":"message"}
{"nick":"ryancnelson","message":"you don't want to have millions of datasets, though.  millions of files is trivial, though","date":"2014-07-10T18:46:06.968Z","type":"message"}
{"nick":"nahamu","message":"right, but if each of these datasets is 100GB you'll run out of disk before you get to millions of them.","date":"2014-07-10T18:46:34.242Z","type":"message"}
{"nick":"nahamu","message":"again, this wouldn't work for JPC","date":"2014-07-10T18:46:51.966Z","type":"message"}
{"nick":"nahamu","message":"and in theory, if a compute job could be made to delegate a dataset, then you could dump your outputs into that delegated dataset filesystem and that could be similarly uploaded into manta for later reuse","date":"2014-07-10T18:48:13.387Z","type":"message"}
{"nick":"nahamu","message":"with the number of copies set appropriately depending on what kind of output it is.","date":"2014-07-10T18:48:26.338Z","type":"message"}
{"nick":"Marc__","message":"a delegated dataset filesystem uploaded into manta?","date":"2014-07-10T18:49:39.075Z","type":"message"}
{"nick":"Marc__","message":"as individual file objects?","date":"2014-07-10T18:49:56.626Z","type":"message"}
{"nick":"nahamu","message":"this is a hypothetical, not an existing feature, but yes.","date":"2014-07-10T18:50:03.256Z","type":"message"}
{"nick":"nahamu","message":"as individual \"Manta objects\"","date":"2014-07-10T18:50:15.504Z","type":"message"}
{"nick":"nahamu","message":"I'm redefining a Manta object.","date":"2014-07-10T18:50:22.457Z","type":"message"}
{"nick":"Marc__","message":"as a zfs dataset","date":"2014-07-10T18:50:41.763Z","type":"message"}
{"nick":"nahamu","message":"Currently a Manta object is an immutable file.","date":"2014-07-10T18:50:55.433Z","type":"message"}
{"nick":"nahamu","message":"I'm saying \"wouldn't it be cool if Manta objects could either be a) an immutable file or b) an immutable snapshot of a single zfs filesystem\"","date":"2014-07-10T18:51:26.650Z","type":"message"}
{"nick":"Marc__","message":"yes","date":"2014-07-10T18:51:38.630Z","type":"message"}
{"nick":"Marc__","message":"i would agree","date":"2014-07-10T18:51:43.108Z","type":"message"}
{"nick":"Marc__","message":"that would be awesome","date":"2014-07-10T18:51:52.050Z","type":"message"}
{"nick":"nahamu","message":"I don't think it makes sense for the Joyent cloud","date":"2014-07-10T18:52:34.174Z","type":"message"}
{"nick":"Marc__","message":"a zpool is confined to a single server, right?","date":"2014-07-10T18:53:09.015Z","type":"message"}
{"nick":"ryancnelson","message":"absolutely it is","date":"2014-07-10T18:54:02.086Z","type":"message"}
{"nick":"ryancnelson","message":"having your filesystem-in-a-file as a manta object would need to be basically on every node, to be useful for computing \"against\"","date":"2014-07-10T18:59:08.218Z","type":"message"}
{"nick":"ryancnelson","message":"currently, we top out at (i think?)  8 copies","date":"2014-07-10T18:59:17.958Z","type":"message"}
{"nick":"nahamu","message":"oh, interesting","date":"2014-07-10T18:59:25.659Z","type":"message"}
{"nick":"nahamu","message":"I was kind of assuming I could set copies to \"everywhere\"","date":"2014-07-10T18:59:41.754Z","type":"message"}
{"nick":"ryancnelson","message":"a different, special type of object could maybe be distrubuted widely","date":"2014-07-10T18:59:44.862Z","type":"message"}
{"nick":"nahamu","message":"like an alternate compute image as rmustacc suggested earlier","date":"2014-07-10T19:00:12.968Z","type":"message"}
{"nick":"ryancnelson","message":"if we put that kind of filesystem delegation into it","date":"2014-07-10T19:00:13.554Z","type":"message"}
{"nick":"ryancnelson","message":"yeah, this is re-inventing the image system, really","date":"2014-07-10T19:00:30.348Z","type":"message"}
{"nick":"nahamu","message":"but if you want to mix and match them it gets a little trickier.","date":"2014-07-10T19:00:33.390Z","type":"message"}
{"nick":"Marc__","reason":"Quit: Page closed","date":"2014-07-10T19:01:01.616Z","type":"quit"}
{"nick":"Marc__","date":"2014-07-10T19:02:01.507Z","type":"join"}
{"nick":"nahamu","message":"Is it known if these phases are CPU or I/O or memory bound?","date":"2014-07-10T19:09:34.132Z","type":"message"}
{"nick":"mindlace","date":"2014-07-10T19:09:55.144Z","type":"join"}
{"nick":"jschmidt","reason":"Ping timeout: 245 seconds","date":"2014-07-10T19:26:27.428Z","type":"quit"}
{"nick":"jschmidt","date":"2014-07-10T19:31:27.042Z","type":"join"}
{"nick":"saxby","reason":"Remote host closed the connection","date":"2014-07-10T19:44:59.316Z","type":"quit"}
{"nick":"nicholaswyoung","date":"2014-07-10T19:56:13.623Z","type":"join"}
{"nick":"nahamu","message":"At any rate, whether or not Manta fits the use case, I'd certainly pick SDC over anything else to build out the compute side of that system.","date":"2014-07-10T20:00:57.992Z","type":"message"}
{"nick":"nicholaswyoung","reason":"Quit: Computer has gone to sleep.","date":"2014-07-10T20:14:12.688Z","type":"quit"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2014-07-10T20:20:00.323Z","type":"quit"}
{"nick":"ed209","date":"2014-07-10T20:20:36.074Z","type":"join"}
{"nick":"ryancnelson","reason":"Quit: Leaving.","date":"2014-07-10T20:26:55.508Z","type":"quit"}
{"nick":"saxby","date":"2014-07-10T20:28:53.342Z","type":"join"}
{"nick":"nicholaswyoung","date":"2014-07-10T21:10:15.377Z","type":"join"}
{"nick":"ryancnelson","date":"2014-07-10T21:41:39.020Z","type":"join"}
{"nick":"nicholaswyoung","reason":"Quit: Computer has gone to sleep.","date":"2014-07-10T21:42:11.535Z","type":"quit"}
{"nick":"preilly","reason":"Quit: ZNC - http://znc.in","date":"2014-07-10T21:51:00.022Z","type":"quit"}
{"nick":"jperkin","reason":"*.net *.split","date":"2014-07-10T22:32:56.733Z","type":"quit"}
{"nick":"tjfontaine","reason":"*.net *.split","date":"2014-07-10T22:32:59.162Z","type":"quit"}
{"nick":"jperkin","date":"2014-07-10T22:33:18.394Z","type":"join"}
{"nick":"tjfontaine","date":"2014-07-10T22:36:02.590Z","type":"join"}
{"nick":"echelog-1","reason":"Read error: Connection reset by peer","date":"2014-07-10T22:36:19.078Z","type":"quit"}
{"nick":"echelog-1","date":"2014-07-10T22:39:39.025Z","type":"join"}
{"nick":"nicholaswyoung","date":"2014-07-10T22:44:05.643Z","type":"join"}
{"nick":"nicholaswyoung","message":"Can anyone report on this issue? https://github.com/joyent/node-manta/issues/172","date":"2014-07-10T22:50:23.768Z","type":"message"}
{"nick":"nicholaswyoung","message":"Because that helper would be super-awesome to have.","date":"2014-07-10T22:50:38.270Z","type":"message"}
{"nick":"utlemming","reason":"Remote host closed the connection","date":"2014-07-10T22:54:01.932Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-07-10T22:57:50.077Z","type":"quit"}
{"nick":"dap_","date":"2014-07-10T22:58:22.707Z","type":"join"}
{"nick":"nicholaswyoung","reason":"Quit: Computer has gone to sleep.","date":"2014-07-10T23:05:21.909Z","type":"quit"}
