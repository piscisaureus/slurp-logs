{"nick":"dbevenius","date":"2019-01-24T00:14:23.315Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 250 seconds","date":"2019-01-24T00:19:03.212Z","type":"quit"}
{"nick":"AtumT","reason":"Quit: AtumT","date":"2019-01-24T00:19:46.000Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T00:34:11.433Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-01-24T00:38:48.376Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T00:56:26.288Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 246 seconds","date":"2019-01-24T01:00:52.297Z","type":"quit"}
{"nick":"al-damiri","reason":"Quit: Connection closed for inactivity","date":"2019-01-24T01:09:22.210Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T01:25:29.655Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 240 seconds","date":"2019-01-24T01:29:56.676Z","type":"quit"}
{"nick":"antsmartian","date":"2019-01-24T01:49:32.065Z","type":"join"}
{"nick":"dbevenius","date":"2019-01-24T01:54:26.321Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-01-24T01:58:48.341Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T02:14:32.516Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 240 seconds","date":"2019-01-24T02:18:47.414Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T02:35:22.587Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 244 seconds","date":"2019-01-24T02:39:57.353Z","type":"quit"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2019-01-24T02:43:32.672Z","type":"quit"}
{"nick":"antsmartian","date":"2019-01-24T02:49:32.787Z","type":"join"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2019-01-24T02:53:30.312Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T02:55:32.765Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 268 seconds","date":"2019-01-24T03:00:32.743Z","type":"quit"}
{"nick":"bradleymeck","message":"joyee: https://github.com/nodejs/node/compare/master...bmeck:policy-worker-fix#diff-2fac8ba6c6d089daac449456cdd97917R11 , it does start up a lot later and lazier, but the timing is still... uncertain?","date":"2019-01-24T03:19:33.060Z","type":"message"}
{"nick":"bradleymeck","message":"moved it far enough that it happens after CJS starts up","date":"2019-01-24T03:20:00.418Z","type":"message"}
{"nick":"dbevenius","date":"2019-01-24T03:45:36.362Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-01-24T03:50:03.648Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T04:04:19.035Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 246 seconds","date":"2019-01-24T04:08:42.040Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-24T04:11:09.663Z","type":"join"}
{"nick":"wawasho","reason":"Ping timeout: 264 seconds","date":"2019-01-24T05:12:40.066Z","type":"quit"}
{"nick":"seishun","date":"2019-01-24T06:29:35.609Z","type":"join"}
{"nick":"lpin","date":"2019-01-24T06:31:45.784Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2019-01-24T07:05:47.409Z","type":"quit"}
{"nick":"seishun","date":"2019-01-24T07:48:07.148Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 240 seconds","date":"2019-01-24T07:52:27.328Z","type":"quit"}
{"nick":"lundibundi","date":"2019-01-24T08:10:26.716Z","type":"join"}
{"nick":"yaelhe","date":"2019-01-24T08:45:00.513Z","type":"join"}
{"nick":"yaelhe","reason":"Remote host closed the connection","date":"2019-01-24T09:18:08.590Z","type":"quit"}
{"nick":"lundibundi","reason":"Ping timeout: 240 seconds","date":"2019-01-24T09:34:26.636Z","type":"quit"}
{"nick":"zeds","date":"2019-01-24T09:43:52.780Z","type":"join"}
{"nick":"zeds","date":"2019-01-24T09:47:02.946Z","type":"part"}
{"nick":"yaelhe","date":"2019-01-24T10:15:35.196Z","type":"join"}
{"nick":"yaelhe","reason":"Remote host closed the connection","date":"2019-01-24T10:28:39.608Z","type":"quit"}
{"nick":"lundibundi","date":"2019-01-24T12:13:00.565Z","type":"join"}
{"nick":"al-damiri","date":"2019-01-24T12:42:32.598Z","type":"join"}
{"nick":"lundibundi","reason":"Ping timeout: 240 seconds","date":"2019-01-24T13:06:07.341Z","type":"quit"}
{"nick":"lundibundi","date":"2019-01-24T13:12:27.427Z","type":"join"}
{"nick":"yaelhe","date":"2019-01-24T13:21:15.319Z","type":"join"}
{"nick":"yaelhe","reason":"Remote host closed the connection","date":"2019-01-24T13:34:15.218Z","type":"quit"}
{"nick":"antsmartian","date":"2019-01-24T14:14:20.611Z","type":"join"}
{"nick":"joyee","message":"bradleymeck: on master it's now only added when the command line API is accessed","date":"2019-01-24T14:23:07.573Z","type":"message"}
{"nick":"joyee","message":"https://github.com/nodejs/node/commit/d3806f9f3cded6bce9831f5d8ff88372ba7e5861","date":"2019-01-24T14:24:50.031Z","type":"message"}
{"nick":"zeds1","date":"2019-01-24T14:39:15.026Z","type":"join"}
{"nick":"zeds1","date":"2019-01-24T14:39:21.703Z","type":"part"}
{"nick":"bradleymeck","message":"gah, something has made my env variables now break the tests??","date":"2019-01-24T15:27:54.790Z","type":"message"}
{"nick":"bradleymeck","message":"they are parsing my env variables in node-report?","date":"2019-01-24T15:28:01.864Z","type":"message"}
{"nick":"joyee","message":"bradleymeck: NODE_OPTIONS?","date":"2019-01-24T15:29:09.964Z","type":"message"}
{"nick":"bradleymeck","message":"ITERM_PREV_PS1 isn't properly being serialized somewhere in a report file","date":"2019-01-24T15:29:27.935Z","type":"message"}
{"nick":"bradleymeck","message":"it contains a newline and is freaking things out","date":"2019-01-24T15:29:35.931Z","type":"message"}
{"nick":"joyee","message":"huh? It dumps environment variables?","date":"2019-01-24T15:30:43.134Z","type":"message"}
{"nick":"joyee","message":"oh, it does","date":"2019-01-24T15:30:47.458Z","type":"message"}
{"nick":"joyee","message":"hmm, that's kind of worrying","date":"2019-01-24T15:30:56.112Z","type":"message"}
{"nick":"bradleymeck","message":"it is quite worrying XD","date":"2019-01-24T15:31:03.647Z","type":"message"}
{"nick":"joyee","message":"At least it should be opt-in, or provides filters..","date":"2019-01-24T15:31:24.712Z","type":"message"}
{"nick":"Hu0p","date":"2019-01-24T15:34:29.667Z","type":"join"}
{"nick":"bradleymeck","message":"found it, it deals with node_report.cc not properly escaping JSON","date":"2019-01-24T15:37:43.715Z","type":"message"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2019-01-24T15:42:04.251Z","type":"quit"}
{"nick":"guybedford","date":"2019-01-24T15:47:16.255Z","type":"join"}
{"nick":"guybedford","message":"devsnek are you around to discuss vm dynamic import?","date":"2019-01-24T15:49:21.086Z","type":"message"}
{"nick":"devsnek","message":"guybedford: hello","date":"2019-01-24T15:49:29.905Z","type":"message"}
{"nick":"guybedford","message":"so as you know my goal is to try and move forward with that PR","date":"2019-01-24T15:49:54.494Z","type":"message"}
{"nick":"devsnek","message":"indeed","date":"2019-01-24T15:49:58.072Z","type":"message"}
{"nick":"guybedford","message":"and we attempted to do the dynamic import implementation there but there was a segmentation fault happening on the reference","date":"2019-01-24T15:50:20.182Z","type":"message"}
{"nick":"guybedford","message":"the naive fix would have been to make the reference persistent but I just can't bring myself to write an intentional memory leak in Node","date":"2019-01-24T15:50:51.124Z","type":"message"}
{"nick":"guybedford","message":"so I'm not sure what is the best approach moving forward","date":"2019-01-24T15:51:06.317Z","type":"message"}
{"nick":"devsnek","message":"guybedford: so right now we tie the lifetime of the v8::Module to the lifetime of our ModuleWrap","date":"2019-01-24T15:51:27.161Z","type":"message"}
{"nick":"devsnek","message":"i think the fix would be doing the opposite","date":"2019-01-24T15:51:34.096Z","type":"message"}
{"nick":"devsnek","message":"saying the ModuleWrap cannot die until the v8::Module dies","date":"2019-01-24T15:51:43.733Z","type":"message"}
{"nick":"bradleymeck","message":"I don't think v8::Module has lifecycle hooks to know when it dies though?","date":"2019-01-24T15:52:14.233Z","type":"message"}
{"nick":"devsnek","message":"ðŸ¤·","date":"2019-01-24T15:52:20.479Z","type":"message"}
{"nick":"bradleymeck","message":"only the realm being nuked?","date":"2019-01-24T15:52:24.352Z","type":"message"}
{"nick":"guybedford","message":"right it's really about realm disposal","date":"2019-01-24T15:52:33.110Z","type":"message"}
{"nick":"devsnek","message":"whether it does or doesn't isn't really the problem on our end","date":"2019-01-24T15:52:36.023Z","type":"message"}
{"nick":"guybedford","message":"but it does block us...","date":"2019-01-24T15:52:43.006Z","type":"message"}
{"nick":"devsnek","message":"like if that becomes a problem","date":"2019-01-24T15:52:52.127Z","type":"message"}
{"nick":"guybedford","message":"unless we are ok with a permanent memory leak on this API?","date":"2019-01-24T15:52:52.431Z","type":"message"}
{"nick":"guybedford","message":"right now all modules in the root realm are persistent and additive","date":"2019-01-24T15:53:16.396Z","type":"message"}
{"nick":"devsnek","message":"we can just go to v8 and ask them to increase the granularity of the gc for modules","date":"2019-01-24T15:53:18.640Z","type":"message"}
{"nick":"guybedford","message":"which is ok because we only have one realm and registry and there is no module disposal","date":"2019-01-24T15:53:26.211Z","type":"message"}
{"nick":"guybedford","message":"but VM is different","date":"2019-01-24T15:53:30.547Z","type":"message"}
{"nick":"guybedford","message":"because VM is all about being able to spin up new realms and get rid of them","date":"2019-01-24T15:53:39.765Z","type":"message"}
{"nick":"guybedford","message":"if the \"get rid of them\" part is a false promise that will bite someone who assumes otherwise","date":"2019-01-24T15:53:53.764Z","type":"message"}
{"nick":"guybedford","message":"when they run out of memory","date":"2019-01-24T15:53:57.682Z","type":"message"}
{"nick":"devsnek","message":"well they're tied to the v8::Context afaik","date":"2019-01-24T15:54:11.183Z","type":"message"}
{"nick":"devsnek","message":"assuming we don't ref them to live longer with our ModuleWrap","date":"2019-01-24T15:54:23.642Z","type":"message"}
{"nick":"guybedford","message":"if there is no solution to this issue, we might need to just revert the VM implementation of dynamic import entirely until there is a suitable approach","date":"2019-01-24T15:54:33.276Z","type":"message"}
{"nick":"guybedford","message":"any thoughts on a suitable path forward?","date":"2019-01-24T15:55:35.353Z","type":"message"}
{"nick":"devsnek","message":"what was the original problem again?","date":"2019-01-24T15:55:52.376Z","type":"message"}
{"nick":"devsnek","message":"the ModuleWrap was being collected too early right?","date":"2019-01-24T15:56:09.226Z","type":"message"}
{"nick":"guybedford","message":"no the reference to the vm.Script and dynamic import callback are being collected - https://github.com/nodejs/node/issues/25424","date":"2019-01-24T15:56:35.869Z","type":"message"}
{"nick":"devsnek","message":"well the callback itself isn't being collected","date":"2019-01-24T15:57:37.450Z","type":"message"}
{"nick":"guybedford","message":"yes it is","date":"2019-01-24T15:58:13.483Z","type":"message"}
{"nick":"devsnek","message":"no, because it gets called","date":"2019-01-24T15:58:24.739Z","type":"message"}
{"nick":"guybedford","message":"because changing the WeakMap in the bootstrapper to a Map fixes the issue","date":"2019-01-24T15:58:25.687Z","type":"message"}
{"nick":"devsnek","message":"i really wish my debug build had workd","date":"2019-01-24T15:59:13.522Z","type":"message"}
