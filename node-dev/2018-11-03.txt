{"nick":"al-damiri","reason":"Quit: Connection closed for inactivity","date":"2018-11-03T00:01:00.801Z","type":"quit"}
{"nick":"zsocw","date":"2018-11-03T00:08:08.799Z","type":"join"}
{"nick":"zsoc","reason":"Disconnected by services","date":"2018-11-03T00:08:08.915Z","type":"quit"}
{"nick":"t0dd1v","reason":"Quit: Connection closed for inactivity","date":"2018-11-03T00:09:28.906Z","type":"quit"}
{"nick":"zsoc","date":"2018-11-03T00:10:00.438Z","type":"join"}
{"nick":"zsocw","reason":"Ping timeout: 252 seconds","date":"2018-11-03T00:13:27.762Z","type":"quit"}
{"nick":"d10n-work","reason":"Quit: Connection closed for inactivity","date":"2018-11-03T00:15:40.964Z","type":"quit"}
{"nick":"ralphtheninja","reason":"Quit: leaving","date":"2018-11-03T00:21:16.655Z","type":"quit"}
{"nick":"AtumT_","reason":"Quit: AtumT_","date":"2018-11-03T00:24:20.525Z","type":"quit"}
{"nick":"t0dd1v","date":"2018-11-03T01:03:17.715Z","type":"join"}
{"nick":"antsmartian","date":"2018-11-03T01:36:32.633Z","type":"join"}
{"nick":"doodadjs","reason":"Ping timeout: 244 seconds","date":"2018-11-03T01:53:56.522Z","type":"quit"}
{"nick":"marthinal","date":"2018-11-03T02:10:35.446Z","type":"join"}
{"nick":"zeds","date":"2018-11-03T02:13:02.710Z","type":"join"}
{"nick":"marthinal","reason":"Ping timeout: 252 seconds","date":"2018-11-03T02:15:00.284Z","type":"quit"}
{"nick":"zeds","date":"2018-11-03T02:15:12.387Z","type":"part"}
{"nick":"gabrielschulhof","reason":"Ping timeout: 252 seconds","date":"2018-11-03T03:09:27.250Z","type":"quit"}
{"nick":"gabrielschulhof","date":"2018-11-03T03:16:16.240Z","type":"join"}
{"nick":"gabrielschulhof","reason":"Ping timeout: 252 seconds","date":"2018-11-03T03:33:06.244Z","type":"quit"}
{"nick":"marthinal","date":"2018-11-03T04:40:04.414Z","type":"join"}
{"nick":"marthinal","reason":"Ping timeout: 252 seconds","date":"2018-11-03T04:44:36.427Z","type":"quit"}
{"nick":"octetcloud","reason":"Ping timeout: 245 seconds","date":"2018-11-03T05:20:28.356Z","type":"quit"}
{"nick":"t0dd1v","reason":"Quit: Connection closed for inactivity","date":"2018-11-03T05:42:34.559Z","type":"quit"}
{"nick":"joyee","message":"hmm, wait, why is acron in node core again? IIRC, it's to display the `assert.strictEqual(a, b)` line in error messages? But it seems to be broken now?","date":"2018-11-03T05:46:19.145Z","type":"message"}
{"nick":"evanlucas","reason":"Remote host closed the connection","date":"2018-11-03T05:56:53.673Z","type":"quit"}
{"nick":"evanlucas","date":"2018-11-03T05:57:08.249Z","type":"join"}
{"nick":"lpin","date":"2018-11-03T06:05:05.042Z","type":"join"}
{"nick":"joyee","message":"Is there a way in JS land to directly make an external string out of a buffer when you are already certain about the encoding (instead of writing it to another string and cost twice the memory?)","date":"2018-11-03T07:22:23.493Z","type":"message"}
{"nick":"marthinal","date":"2018-11-03T07:30:41.403Z","type":"join"}
{"nick":"t0dd1v","date":"2018-11-03T07:44:25.704Z","type":"join"}
{"nick":"marthinal","reason":"Remote host closed the connection","date":"2018-11-03T07:55:37.164Z","type":"quit"}
{"nick":"seishun","date":"2018-11-03T08:30:41.513Z","type":"join"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2018-11-03T08:52:13.374Z","type":"quit"}
{"nick":"lundibundi","date":"2018-11-03T09:04:27.897Z","type":"join"}
{"nick":"antsmartian","date":"2018-11-03T09:20:55.449Z","type":"join"}
{"nick":"zsoc","reason":"Ping timeout: 240 seconds","date":"2018-11-03T09:39:47.437Z","type":"quit"}
{"nick":"zsoc","date":"2018-11-03T09:41:11.563Z","type":"join"}
{"nick":"lundibundi","reason":"Ping timeout: 268 seconds","date":"2018-11-03T09:53:08.812Z","type":"quit"}
{"nick":"marthinal","date":"2018-11-03T10:01:54.615Z","type":"join"}
{"nick":"t0dd1v","reason":"Quit: Connection closed for inactivity","date":"2018-11-03T10:13:42.195Z","type":"quit"}
{"nick":"johannh","reason":"Ping timeout: 276 seconds","date":"2018-11-03T10:17:27.056Z","type":"quit"}
{"nick":"johannh","date":"2018-11-03T10:26:34.840Z","type":"join"}
{"nick":"AtumT","date":"2018-11-03T10:53:40.510Z","type":"join"}
{"nick":"AtumT","reason":"Read error: Connection reset by peer","date":"2018-11-03T11:00:42.093Z","type":"quit"}
{"nick":"AtumT_","date":"2018-11-03T11:00:45.495Z","type":"join"}
{"nick":"lundibundi","date":"2018-11-03T11:26:09.513Z","type":"join"}
{"nick":"rtn","date":"2018-11-03T11:29:29.001Z","type":"join"}
{"nick":"rtn","new_nick":"ralphtheninja","date":"2018-11-03T11:29:31.293Z","type":"nick"}
{"nick":"m00dy","date":"2018-11-03T11:41:29.085Z","type":"join"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2018-11-03T12:56:06.178Z","type":"quit"}
{"nick":"m00dy","reason":"Remote host closed the connection","date":"2018-11-03T12:58:37.818Z","type":"quit"}
{"nick":"joyee","message":"ryzokuken: I am thinking about refactoring the C++ code used by NativeModule.prototype.compile to another file and look up the source/cache directly in C++ so the code can be reused for bootstrappers","date":"2018-11-03T12:59:57.070Z","type":"message"}
{"nick":"ryzokuken","message":"joyee: I don't think I understand that completely.","date":"2018-11-03T13:01:54.110Z","type":"message"}
{"nick":"ryzokuken","message":"Oh wait, now I do.","date":"2018-11-03T13:02:32.379Z","type":"message"}
{"nick":"ryzokuken","message":"I'll check the bootstrapper code.","date":"2018-11-03T13:02:41.543Z","type":"message"}
{"nick":"joyee","message":"ryzokuken: that is, instead of calling `internalBinding('contextify').compileFunction`, call `internalBinding('native_module').compileFunction(id)`","date":"2018-11-03T13:02:44.342Z","type":"message"}
{"nick":"joyee","message":"The C++ layer only needs the ID","date":"2018-11-03T13:02:53.933Z","type":"message"}
{"nick":"ryzokuken","message":"We could refactor the common parts, I guess.","date":"2018-11-03T13:02:54.150Z","type":"message"}
{"nick":"zsoc","reason":"Ping timeout: 244 seconds","date":"2018-11-03T13:03:01.482Z","type":"quit"}
{"nick":"joyee","message":"Although the separating code cache part to another binding would still be nice for `vm.compileFunction`","date":"2018-11-03T13:03:27.787Z","type":"message"}
{"nick":"ryzokuken","message":"Ooh, so a new C++ file for NativeModules etc.?","date":"2018-11-03T13:03:50.062Z","type":"message"}
{"nick":"joyee","message":"yep","date":"2018-11-03T13:03:56.330Z","type":"message"}
{"nick":"joyee","message":"And gradually moving a bunch of stuff in node.cc overthere","date":"2018-11-03T13:04:12.819Z","type":"message"}
{"nick":"zsoc","date":"2018-11-03T13:04:20.949Z","type":"join"}
{"nick":"ryzokuken","message":"and call `node::ContextifyScript::CompileFunction` inside that file?","date":"2018-11-03T13:04:27.402Z","type":"message"}
{"nick":"joyee","message":"ryzokuken: no really - we can do a lot more simpler than that if it's specialized for native modules","date":"2018-11-03T13:05:02.741Z","type":"message"}
{"nick":"joyee","message":"for example, agressive CHECKs","date":"2018-11-03T13:05:08.279Z","type":"message"}
{"nick":"ryzokuken","message":"Totally onboard with this.","date":"2018-11-03T13:05:48.546Z","type":"message"}
{"nick":"ryzokuken","message":"Would love to help you out.","date":"2018-11-03T13:05:54.159Z","type":"message"}
{"nick":"joyee","message":"I am still playing around with that idea locally..","date":"2018-11-03T13:06:11.830Z","type":"message"}
{"nick":"ryzokuken","message":"Regarding the getCacheForFunction function, I'd fiddled with that a day or two ago, had been busy making slides for an engagement so didn't make a PR.","date":"2018-11-03T13:06:43.889Z","type":"message"}
{"nick":"joyee","message":"Also use eager compile  for native modules when generating code cache","date":"2018-11-03T13:06:48.407Z","type":"message"}
{"nick":"ryzokuken","message":"Will make one tonight.","date":"2018-11-03T13:06:51.629Z","type":"message"}
{"nick":"ryzokuken","message":"joyee: I'll have to look some of that up. Let's iterate on the PR thread?","date":"2018-11-03T13:07:29.208Z","type":"message"}
{"nick":"ryzokuken","message":"I'll start it ASAP.","date":"2018-11-03T13:07:34.752Z","type":"message"}
{"nick":"joyee","message":"ryzokuken: I'm still moving code around, not yet compiling..","date":"2018-11-03T13:08:09.814Z","type":"message"}
{"nick":"joyee","message":"But the getCacheForFunction is othorgonal, since that's userland","date":"2018-11-03T13:08:32.389Z","type":"message"}
{"nick":"ryzokuken","message":"Exactly.","date":"2018-11-03T13:08:44.046Z","type":"message"}
{"nick":"ryzokuken","message":"Also, we could decide if that should be an API function or just a binding?","date":"2018-11-03T13:09:02.736Z","type":"message"}
{"nick":"ryzokuken","message":"Makes 0 difference for core anyway, but I don't see what's the harm in making it an API function.","date":"2018-11-03T13:09:26.968Z","type":"message"}
{"nick":"ryzokuken","message":"Especially given that it was called extensively in API functions anyway.","date":"2018-11-03T13:09:43.660Z","type":"message"}
{"nick":"joyee","message":"ryzokuken: IDK...I usually prefer to stay in binding until it's proven someone wants this","date":"2018-11-03T13:10:20.528Z","type":"message"}
{"nick":"ryzokuken","message":"Well...","date":"2018-11-03T13:10:49.476Z","type":"message"}
{"nick":"joyee","message":"What API calls compileFunction?","date":"2018-11-03T13:10:50.428Z","type":"message"}
{"nick":"ryzokuken","message":"That could be said for pretty much the entirity of the VM module lol","date":"2018-11-03T13:11:19.010Z","type":"message"}
{"nick":"ryzokuken","message":"It's just a bunch of \"mostly-internals\" IMO.","date":"2018-11-03T13:11:40.513Z","type":"message"}
{"nick":"zeds","date":"2018-11-03T13:12:49.664Z","type":"join"}
{"nick":"zeds","date":"2018-11-03T13:15:41.633Z","type":"part"}
{"nick":"AtumT_","reason":"Quit: AtumT_","date":"2018-11-03T13:21:08.741Z","type":"quit"}
{"nick":"joyee","message":"ryzokuken: I thought they only calls compile in the C++ layer? (and not necessarily CompileFunctionInContext","date":"2018-11-03T13:31:10.523Z","type":"message"}
{"nick":"ryzokuken","message":"joyee: Yeah, I think so too.","date":"2018-11-03T13:32:36.100Z","type":"message"}
{"nick":"ryzokuken","message":"Oh, wait. I get your point now.","date":"2018-11-03T13:36:24.769Z","type":"message"}
{"nick":"ryzokuken","message":"If you cannot exactly call compilation methods from the JS-layer, why would you need cache methods","date":"2018-11-03T13:37:12.883Z","type":"message"}
{"nick":"ryzokuken","message":"right?","date":"2018-11-03T13:37:15.413Z","type":"message"}
{"nick":"marthinal","reason":"Remote host closed the connection","date":"2018-11-03T13:39:35.099Z","type":"quit"}
{"nick":"joyee","message":"Yeah","date":"2018-11-03T13:42:29.892Z","type":"message"}
{"nick":"ryzokuken","message":"there's `vm.compileFunction`","date":"2018-11-03T13:42:49.158Z","type":"message"}
{"nick":"ryzokuken","message":"but the public interface won't change anyway. Only the internal handling of cache will.","date":"2018-11-03T13:43:07.514Z","type":"message"}
{"nick":"ryzokuken","message":"true probably a bad idea to expose it.","date":"2018-11-03T13:43:21.843Z","type":"message"}
{"nick":"ryzokuken","message":"true, probably*","date":"2018-11-03T13:43:31.368Z","type":"message"}
{"nick":"doodadjs","date":"2018-11-03T13:54:49.309Z","type":"join"}
{"nick":"lundibundi","reason":"Ping timeout: 240 seconds","date":"2018-11-03T14:05:47.358Z","type":"quit"}
{"nick":"seishun","reason":"Ping timeout: 252 seconds","date":"2018-11-03T14:24:51.223Z","type":"quit"}
{"nick":"addaleax","message":"mcollina: uh  … so … i got a question: what’s the interaction between `.destroy()` and pending writes? should the `_write()` callback be called if the stream was destroyed during the write? it appears that it has to in order for `finish` to fire, but it also calls `clearBuffer()`, which throws an error if the stream was destroyed and there’s more in the queue?","date":"2018-11-03T14:31:18.758Z","type":"message"}
{"nick":"addaleax","message":"mcollina: is the latter behavior a bug, and should the write queue get dropped silently?","date":"2018-11-03T14:31:21.190Z","type":"message"}
{"nick":"mcollina","message":"None. We are getting this cleaned up.","date":"2018-11-03T14:32:34.514Z","type":"message"}
{"nick":"mcollina","message":"Let’s talk about this at nceu.","date":"2018-11-03T14:32:43.649Z","type":"message"}
{"nick":"addaleax","message":"mcollina: okay, yeah, let’s just talk about it at nceu … :/","date":"2018-11-03T14:33:13.497Z","type":"message"}
{"nick":"mcollina","message":"The _write callback should be always called IMHO","date":"2018-11-03T14:33:50.031Z","type":"message"}
{"nick":"addaleax","message":"i’d agree, but doing that breaks our tests (*sigh*)","date":"2018-11-03T14:34:05.722Z","type":"message"}
{"nick":"addaleax","message":"i’m trying some stuff out, might open a PR or so … not because i’m sure what the right thing to do is, but maybe just to have something more concrete to talk about","date":"2018-11-03T14:34:40.978Z","type":"message"}
{"nick":"seishun","date":"2018-11-03T14:39:47.616Z","type":"join"}
{"nick":"mcollina","message":"Go for it.","date":"2018-11-03T14:53:33.019Z","type":"message"}
{"nick":"antsmartian","date":"2018-11-03T15:38:26.013Z","type":"join"}
{"nick":"joyee","message":"hmm, it's strange, why do I get va_list is not defined in a new file, but it's fine in previous file (node_internals.h)? There doesn't seem to be <stdarg.h> before","date":"2018-11-03T15:41:30.201Z","type":"message"}
{"nick":"t0dd1v","date":"2018-11-03T15:49:22.711Z","type":"join"}
