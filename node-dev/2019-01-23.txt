{"nick":"dbevenius","date":"2019-01-23T00:13:27.051Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 246 seconds","date":"2019-01-23T00:17:48.008Z","type":"quit"}
{"nick":"AtumT","reason":"Quit: AtumT","date":"2019-01-23T00:30:07.610Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T00:33:13.325Z","type":"join"}
{"nick":"devsnek","message":"that's... interesting","date":"2019-01-23T00:34:41.348Z","type":"message"}
{"nick":"dbevenius","reason":"Ping timeout: 240 seconds","date":"2019-01-23T00:37:47.440Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T00:54:24.932Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 250 seconds","date":"2019-01-23T00:58:56.850Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T01:15:23.374Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 240 seconds","date":"2019-01-23T01:19:47.381Z","type":"quit"}
{"nick":"antsmartian","date":"2019-01-23T01:26:09.511Z","type":"join"}
{"nick":"dbevenius","date":"2019-01-23T01:34:31.391Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-01-23T01:38:48.348Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T01:44:38.111Z","type":"join"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2019-01-23T01:48:08.299Z","type":"quit"}
{"nick":"dbevenius","reason":"Ping timeout: 244 seconds","date":"2019-01-23T01:48:51.349Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T02:03:28.522Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 250 seconds","date":"2019-01-23T02:08:16.525Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T02:26:31.326Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 246 seconds","date":"2019-01-23T02:30:55.268Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T02:53:35.048Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 246 seconds","date":"2019-01-23T02:58:05.998Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T03:13:36.327Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-01-23T03:17:58.337Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T03:45:36.362Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-01-23T03:50:03.348Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T04:13:46.360Z","type":"join"}
{"nick":"dbevenius","reason":"Remote host closed the connection","date":"2019-01-23T04:19:03.095Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T04:19:17.332Z","type":"join"}
{"nick":"julianduque","reason":"Quit: Lost terminal","date":"2019-01-23T04:45:41.455Z","type":"quit"}
{"nick":"dbevenius","reason":"Read error: Connection reset by peer","date":"2019-01-23T04:46:41.813Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T04:46:49.727Z","type":"join"}
{"nick":"dbevenius","reason":"Remote host closed the connection","date":"2019-01-23T05:56:03.749Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T06:03:31.422Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 250 seconds","date":"2019-01-23T06:07:54.870Z","type":"quit"}
{"nick":"dbevenius","date":"2019-01-23T06:13:58.392Z","type":"join"}
{"nick":"seishun","date":"2019-01-23T06:29:24.910Z","type":"join"}
{"nick":"lpin","date":"2019-01-23T06:29:52.454Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 246 seconds","date":"2019-01-23T07:08:42.031Z","type":"quit"}
{"nick":"seishun","date":"2019-01-23T07:38:20.197Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 268 seconds","date":"2019-01-23T07:43:03.768Z","type":"quit"}
{"nick":"seishun","date":"2019-01-23T07:50:24.486Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 246 seconds","date":"2019-01-23T07:59:34.297Z","type":"quit"}
{"nick":"zeds","date":"2019-01-23T10:36:20.075Z","type":"join"}
{"nick":"zeds","date":"2019-01-23T10:36:48.983Z","type":"part"}
{"nick":"lundibundi","date":"2019-01-23T11:19:06.747Z","type":"join"}
{"nick":"lundibundi","reason":"Ping timeout: 240 seconds","date":"2019-01-23T12:03:26.667Z","type":"quit"}
{"nick":"lundibundi","date":"2019-01-23T12:07:02.481Z","type":"join"}
{"nick":"antsmartian","date":"2019-01-23T12:22:34.894Z","type":"join"}
{"nick":"antsmartian","reason":"Ping timeout: 268 seconds","date":"2019-01-23T12:27:20.708Z","type":"quit"}
{"nick":"yaelhe","date":"2019-01-23T12:44:49.229Z","type":"join"}
{"nick":"yaelhe","reason":"Quit: Page closed","date":"2019-01-23T12:53:55.832Z","type":"quit"}
{"nick":"yaelhe","date":"2019-01-23T12:55:39.171Z","type":"join"}
{"nick":"yaelhe","message":"@devsnek, why is your weblocks PR stalled? Can I take it? https://github.com/nodejs/node/pull/22719","date":"2019-01-23T13:20:40.225Z","type":"message"}
{"nick":"yaelhe_","date":"2019-01-23T13:29:28.254Z","type":"join"}
{"nick":"yaelhe_","reason":"Remote host closed the connection","date":"2019-01-23T13:29:35.106Z","type":"quit"}
{"nick":"yaelhe_","date":"2019-01-23T13:32:21.800Z","type":"join"}
{"nick":"yaelhe","reason":"Ping timeout: 245 seconds","date":"2019-01-23T13:32:58.340Z","type":"quit"}
{"nick":"lundibundi","reason":"Ping timeout: 240 seconds","date":"2019-01-23T13:35:07.385Z","type":"quit"}
{"nick":"lundibundi","date":"2019-01-23T13:36:16.723Z","type":"join"}
{"nick":"yaelhe_","date":"2019-01-23T13:37:56.603Z","type":"quit"}
{"nick":"yaelhe","date":"2019-01-23T13:41:20.600Z","type":"join"}
{"nick":"yaelhe","reason":"Remote host closed the connection","date":"2019-01-23T13:46:15.062Z","type":"quit"}
{"nick":"antsmartian","date":"2019-01-23T13:59:04.427Z","type":"join"}
{"nick":"yaelhe","date":"2019-01-23T14:04:38.934Z","type":"join"}
{"nick":"yaelhe","reason":"Remote host closed the connection","date":"2019-01-23T14:24:44.955Z","type":"quit"}
{"nick":"yaelhe","date":"2019-01-23T14:28:46.385Z","type":"join"}
{"nick":"yaelhe","reason":"Remote host closed the connection","date":"2019-01-23T14:32:50.567Z","type":"quit"}
{"nick":"antsmartian","reason":"Read error: Connection reset by peer","date":"2019-01-23T14:56:29.364Z","type":"quit"}
{"nick":"antsmartian","date":"2019-01-23T14:56:57.015Z","type":"join"}
{"nick":"bradleymeck","message":"addaleax: might it make sense to introduce a more minor form of your PR that just disables child process and C++ loading?","date":"2019-01-23T15:15:20.133Z","type":"message"}
{"nick":"bradleymeck","message":"replacing the fns that do those operations with ones that error before any user code starts up","date":"2019-01-23T15:15:51.065Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: i don’t think that makes sense without effectively restricting fs access, and I don’t see how a reduced version would have advantages over the full version?","date":"2019-01-23T15:19:26.049Z","type":"message"}
{"nick":"bradleymeck","message":"why do we need to restrict fs access? my viewpoint comes from running with integrity checks already loaded into the process","date":"2019-01-23T15:20:45.034Z","type":"message"}
{"nick":"bradleymeck","message":"though, idk how workers load up policies as they are a bit confusing last i read","date":"2019-01-23T15:21:03.506Z","type":"message"}
{"nick":"bradleymeck","message":"but ideally they should be given the policy from the main thread instead of a new fs read?","date":"2019-01-23T15:21:20.614Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: idk, depends on how you implemented the feature","date":"2019-01-23T15:21:36.345Z","type":"message"}
{"nick":"bradleymeck","message":"it is loaded up during bootstrapping in node.js","date":"2019-01-23T15:21:55.562Z","type":"message"}
{"nick":"addaleax","message":"then you’ll probably end up with one fs access per Worker, yes","date":"2019-01-23T15:22:08.129Z","type":"message"}
{"nick":"bradleymeck","message":"how could I avoid that?","date":"2019-01-23T15:22:51.217Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: i assume you could pass the parent’s manifest to the worker during its startup?","date":"2019-01-23T15:23:05.727Z","type":"message"}
{"nick":"bradleymeck","message":"possible, but would need to be careful about it","date":"2019-01-23T15:23:20.446Z","type":"message"}
{"nick":"bradleymeck","message":"since it is a sync read by nature, maybe we could do it in C++ instead?","date":"2019-01-23T15:23:46.248Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: we could, but what’s the advantage?","date":"2019-01-23T15:24:09.714Z","type":"message"}
{"nick":"addaleax","message":"doesn’t really have anything do to with async/sync, we can do both in c++ without issues","date":"2019-01-23T15:24:30.918Z","type":"message"}
{"nick":"yaelhe","date":"2019-01-23T15:24:31.006Z","type":"join"}
{"nick":"bradleymeck","message":"store the source text in C++ where JS can't mutate it / intercept it when passing to the worker","date":"2019-01-23T15:24:39.900Z","type":"message"}
{"nick":"bradleymeck","message":"addaleax: i'm not comfy adding async bootstraps to core's startup (someone w/ more exp might be)","date":"2019-01-23T15:25:10.593Z","type":"message"}
{"nick":"bradleymeck","message":"in C++(","date":"2019-01-23T15:25:20.038Z","type":"message"}
{"nick":"bradleymeck","message":"*","date":"2019-01-23T15:25:21.579Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: storing text in C++ just to make it less mutable sounds unnecessarily complicated … it’s not like we can’t do that in JS pretty well","date":"2019-01-23T15:25:49.500Z","type":"message"}
{"nick":"bradleymeck","message":"addaleax: the manifest even with all the boilerplate I added to harden it still has some problems","date":"2019-01-23T15:26:21.709Z","type":"message"}
{"nick":"bradleymeck","message":"our JS core is not robust against mutation","date":"2019-01-23T15:26:32.470Z","type":"message"}
{"nick":"bradleymeck","message":"i can imagine i will be finding odd ways to get to and mutate things for quite a while that affect the manifest in JS","date":"2019-01-23T15:27:31.377Z","type":"message"}
{"nick":"addaleax","message":"yes, but neither is our C++ code","date":"2019-01-23T15:27:43.214Z","type":"message"}
{"nick":"bradleymeck","message":"true, but if you can't load C++ addons that is greatly reduced","date":"2019-01-23T15:28:16.353Z","type":"message"}
{"nick":"joyee","message":"If you simply do not want JS to be able to hijack anything maybe storing the manifest in C++ and verifying it in C++ would make the whole thing more encapsulated","date":"2019-01-23T15:30:26.065Z","type":"message"}
{"nick":"bradleymeck","message":"possible to do so, but parsing stuff would be quite a bit of C++ comparatively","date":"2019-01-23T15:31:44.796Z","type":"message"}
{"nick":"bradleymeck","message":"right now i think ironing out what is leaking where is a bit higher, plugging the fs race for workers by passing it down purely in JS seems a fine first pass","date":"2019-01-23T15:32:31.523Z","type":"message"}
{"nick":"joyee","message":"The policy files should has a fixed schema right?","date":"2019-01-23T15:32:34.635Z","type":"message"}
{"nick":"bradleymeck","message":"joyee: yes, but fields could be missing / might change over time (it is experimental and people on Realms calls that implemented similar files in past had to add breaking changes)","date":"2019-01-23T15:33:12.930Z","type":"message"}
{"nick":"bradleymeck","message":"anywho, i'll probably write up a test/PR for addaleax 's idea of just passing to the worker via JS back channel","date":"2019-01-23T15:34:39.072Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: we already pass a bunch of information to the worker threads in a first startup message, that seems like a good location to me","date":"2019-01-23T15:35:17.823Z","type":"message"}
{"nick":"bradleymeck","message":"eventually will want to look at spinning up workers with subset of perms of thread that spawns them","date":"2019-01-23T15:36:14.702Z","type":"message"}
{"nick":"addaleax","message":"bradleymeck: fwiw, that’s exactly what my PR back then did","date":"2019-01-23T15:37:03.577Z","type":"message"}
{"nick":"bradleymeck","message":"sounds like a good idea then ;p","date":"2019-01-23T15:37:35.221Z","type":"message"}
{"nick":"bradleymeck","message":"bnoordhuis seems to want more eyes on this stuff though, and I'd somewhat agree","date":"2019-01-23T15:38:05.464Z","type":"message"}
{"nick":"bradleymeck","message":"even in my calls w/ security wg / etc. few ppl are actually helping review and write tests","date":"2019-01-23T15:38:22.042Z","type":"message"}
{"nick":"bradleymeck","message":"this might have been caught with more eyes","date":"2019-01-23T15:38:44.617Z","type":"message"}
{"nick":"lundibundi","reason":"Ping timeout: 240 seconds","date":"2019-01-23T15:39:26.656Z","type":"quit"}
{"nick":"addaleax","message":"no, of course, more review and help would be great","date":"2019-01-23T15:39:37.464Z","type":"message"}
{"nick":"lundibundi","date":"2019-01-23T15:55:09.728Z","type":"join"}
{"nick":"dbevenius","reason":"Remote host closed the connection","date":"2019-01-23T15:58:43.618Z","type":"quit"}
