{"nick":"dbevenius","date":"2019-02-28T00:03:57.457Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-02-28T00:08:22.162Z","type":"quit"}
{"nick":"devsnek","message":"ljharb: why does dual mode have to exist","date":"2019-02-28T00:10:27.013Z","type":"message"}
{"nick":"devsnek","message":"in case we don't ship cjs interop?","date":"2019-02-28T00:10:40.156Z","type":"message"}
{"nick":"ljharb","message":"devsnek: i must be able to publish a package that uses ESM and also works on old node.","date":"2019-02-28T00:10:42.782Z","type":"message"}
{"nick":"devsnek","message":"why","date":"2019-02-28T00:10:55.777Z","type":"message"}
{"nick":"ljharb","message":"otherwise either a) using ESM is a severe breaking change, fucking with the ecosystem","date":"2019-02-28T00:11:03.171Z","type":"message"}
{"nick":"devsnek","message":"that's a feature not a use case","date":"2019-02-28T00:11:03.797Z","type":"message"}
{"nick":"ljharb","message":"or b) nobody will use ESM, and ESM isn't worth shipping","date":"2019-02-28T00:11:10.188Z","type":"message"}
{"nick":"ljharb","message":"the use case is \"i want to incentivize painless migration to esm\"","date":"2019-02-28T00:11:18.874Z","type":"message"}
{"nick":"devsnek","message":"aight","date":"2019-02-28T00:11:22.816Z","type":"message"}
{"nick":"ljharb","message":"both painless, and migration","date":"2019-02-28T00:11:23.034Z","type":"message"}
{"nick":"ljharb","message":"and that absolutely requires dual mode, full stop","date":"2019-02-28T00:11:28.379Z","type":"message"}
{"nick":"devsnek","message":"dual mode breaks things if not done correctly though","date":"2019-02-28T00:11:34.923Z","type":"message"}
{"nick":"devsnek","message":"where \"correctly\" = re-export cjs","date":"2019-02-28T00:11:44.091Z","type":"message"}
{"nick":"ljharb","message":"lots of things done incorrectly break things, that's a truism, not an argument","date":"2019-02-28T00:12:03.862Z","type":"message"}
{"nick":"devsnek","message":"or at least all your shared stuff has to stay in cjs","date":"2019-02-28T00:12:03.987Z","type":"message"}
{"nick":"ljharb","message":"sure","date":"2019-02-28T00:12:11.060Z","type":"message"}
{"nick":"ljharb","message":"that's a fine requirement","date":"2019-02-28T00:12:13.472Z","type":"message"}
{"nick":"devsnek","message":"but dual mode makes it super duper easy","date":"2019-02-28T00:12:15.850Z","type":"message"}
{"nick":"ljharb","message":"(that also necessitates interop, which i'm also in favor of)","date":"2019-02-28T00:12:20.838Z","type":"message"}
{"nick":"devsnek","message":"didn't this break react for a while","date":"2019-02-28T00:12:25.109Z","type":"message"}
{"nick":"devsnek","message":"even the pros mess this up","date":"2019-02-28T00:12:40.108Z","type":"message"}
{"nick":"ljharb","message":"not that i know of","date":"2019-02-28T00:12:58.550Z","type":"message"}
{"nick":"ljharb","message":"and sure, if it's easy to mess up, then we need to make it harder to do that","date":"2019-02-28T00:13:05.969Z","type":"message"}
{"nick":"ljharb","message":"that's not a fatal flaw of \"dual mode\", altho perhaps it's a fatal flaw of some implementation","date":"2019-02-28T00:13:17.082Z","type":"message"}
{"nick":"devsnek","message":"a mode where a package can have two sources loaded under the same specifier is the fatal flaw","date":"2019-02-28T00:13:40.073Z","type":"message"}
{"nick":"ljharb","message":"i'm not convinced of that","date":"2019-02-28T00:14:40.861Z","type":"message"}
{"nick":"devsnek","message":"the only safe way to balance it is to make sure any shared state comes from one source","date":"2019-02-28T00:15:40.721Z","type":"message"}
{"nick":"devsnek","message":"which will have to be cjs","date":"2019-02-28T00:15:43.271Z","type":"message"}
{"nick":"devsnek","message":"so might as well just use cjs","date":"2019-02-28T00:15:47.875Z","type":"message"}
{"nick":"ljharb","message":"that's only reasonable if we have full interop including named imports.","date":"2019-02-28T00:16:02.882Z","type":"message"}
{"nick":"ljharb","message":"otherwise i'd *have* to include at least something in ESM, to provide that.","date":"2019-02-28T00:16:12.097Z","type":"message"}
{"nick":"ljharb","message":"and we're right back to dual mode","date":"2019-02-28T00:16:16.857Z","type":"message"}
{"nick":"devsnek","message":"i agree there's a problem here","date":"2019-02-28T00:16:18.812Z","type":"message"}
{"nick":"devsnek","message":"the problem where someone thought an imperative module system was a good idea :(","date":"2019-02-28T00:17:20.301Z","type":"message"}
{"nick":"dbevenius","date":"2019-02-28T00:23:09.477Z","type":"join"}
{"nick":"kumavis","date":"2019-02-28T00:27:37.177Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 255 seconds","date":"2019-02-28T00:27:56.355Z","type":"quit"}
{"nick":"devsnek","message":"ljharb: thinking about this more, i don't think esm needs to have 100% usage to be a success","date":"2019-02-28T00:30:29.212Z","type":"message"}
{"nick":"devsnek","message":"code will always use new features that older versions of browsers/node/etc didn't support","date":"2019-02-28T00:31:30.905Z","type":"message"}
{"nick":"devsnek","message":"if you don't use let/const in your codebase for back compat reasons i wouldn't expect you to use esm in your codebase either","date":"2019-02-28T00:32:09.457Z","type":"message"}
{"nick":"devsnek","message":"🤷","date":"2019-02-28T00:32:11.183Z","type":"message"}
{"nick":"ljharb","message":"it's not syntax, it's modules. it's not the same at all.","date":"2019-02-28T00:37:54.521Z","type":"message"}
{"nick":"ljharb","message":"there's a big difference between \"don't use a few new syntax features\" and \"don't use the module system everyone's been using via babel and typescript anyways\"","date":"2019-02-28T00:38:27.555Z","type":"message"}
{"nick":"devsnek","message":"i'm not sure that difference is worth making","date":"2019-02-28T00:48:41.742Z","type":"message"}
{"nick":"devsnek","message":"\"don't use the new syntax everyone's been using via babel and typescript anyways\"","date":"2019-02-28T00:52:59.623Z","type":"message"}
{"nick":"AtumT","reason":"Quit: AtumT","date":"2019-02-28T00:57:53.260Z","type":"quit"}
{"nick":"ljharb","message":"i think you're underestimating the desire to use `import` and `export` specifically, unrelated to its semantics.","date":"2019-02-28T01:05:30.572Z","type":"message"}
{"nick":"ljharb","message":"that's the reason most people even use babel at all, i'd expect.","date":"2019-02-28T01:05:38.301Z","type":"message"}
{"nick":"ljharb","message":"(for non-old-browser targets)","date":"2019-02-28T01:05:45.206Z","type":"message"}
{"nick":"devsnek","message":"so i think it becomes a question of do you want to use esm more than you want to support old node","date":"2019-02-28T01:07:11.807Z","type":"message"}
{"nick":"devsnek","message":"as with any other addition to js over the last 10 years","date":"2019-02-28T01:07:30.115Z","type":"message"}
{"nick":"ljharb","message":"and i think that the pit of failure would be if it's too easy to not support old node.","date":"2019-02-28T01:07:44.474Z","type":"message"}
{"nick":"ljharb","message":"or, too hard to do so.","date":"2019-02-28T01:07:47.397Z","type":"message"}
{"nick":"ljharb","message":"right now, you just use babel, and you get that. but you wouldn't without a dual mode package, even with babel.","date":"2019-02-28T01:08:01.669Z","type":"message"}
{"nick":"devsnek","message":"can you use jdd's thing on old node","date":"2019-02-28T01:08:09.396Z","type":"message"}
{"nick":"ljharb","message":"probably, but that’s like telling people to use babel-register. It’s not a choice a package should force on people.","date":"2019-02-28T01:10:08.783Z","type":"message"}
{"nick":"devsnek","message":"on a library level i mean","date":"2019-02-28T01:10:22.098Z","type":"message"}
{"nick":"ljharb","message":"hm, possibly, if it could be used without patching anything, and could be made to *only* apply to first-partly library code. But i still don’t think that’s an easy enough interop story to make ESM worth having at all.","date":"2019-02-28T01:11:18.166Z","type":"message"}
{"nick":"devsnek","message":"not unlike using a loader hook with esm","date":"2019-02-28T01:11:43.565Z","type":"message"}
{"nick":"ljharb","message":"i think that requiring a per package loader is not acceptable for back compat","date":"2019-02-28T01:12:00.635Z","type":"message"}
{"nick":"devsnek","message":"there are probably more ideas waiting to be had","date":"2019-02-28T01:12:05.842Z","type":"message"}
{"nick":"ljharb","message":"loaders should be for weird edge Casey things only","date":"2019-02-28T01:12:07.539Z","type":"message"}
{"nick":"devsnek","message":"i kinda thing trying to load two sources for one package is edge casey","date":"2019-02-28T01:12:58.163Z","type":"message"}
{"nick":"devsnek","message":"think*","date":"2019-02-28T01:13:01.943Z","type":"message"}
{"nick":"dbevenius","date":"2019-02-28T01:24:02.512Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 250 seconds","date":"2019-02-28T01:28:30.493Z","type":"quit"}
{"nick":"antsmartian","date":"2019-02-28T01:30:01.267Z","type":"join"}
{"nick":"dbevenius","date":"2019-02-28T01:43:18.350Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 244 seconds","date":"2019-02-28T01:47:34.350Z","type":"quit"}
{"nick":"bradleymeck","message":"loaders are useful for a variety of things, not all of them edge casey","date":"2019-02-28T02:01:39.656Z","type":"message"}
{"nick":"dbevenius","date":"2019-02-28T02:04:48.312Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 246 seconds","date":"2019-02-28T02:09:28.372Z","type":"quit"}
{"nick":"dbevenius","date":"2019-02-28T02:23:15.191Z","type":"join"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2019-02-28T02:26:15.475Z","type":"quit"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-02-28T02:27:32.126Z","type":"quit"}
{"nick":"dbevenius","date":"2019-02-28T02:44:15.184Z","type":"join"}
{"nick":"antsmartian","date":"2019-02-28T02:47:50.719Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 258 seconds","date":"2019-02-28T02:48:44.145Z","type":"quit"}
{"nick":"antsmartian","reason":"Remote host closed the connection","date":"2019-02-28T02:53:47.271Z","type":"quit"}
{"nick":"dbevenius","date":"2019-02-28T03:04:11.457Z","type":"join"}
{"nick":"dbevenius","reason":"Ping timeout: 245 seconds","date":"2019-02-28T03:08:47.166Z","type":"quit"}
{"nick":"ljharb","message":"devsnek: itd only be one at a time, ideally.","date":"2019-02-28T03:11:50.881Z","type":"message"}
{"nick":"devsnek","message":"ljharb: how's that work","date":"2019-02-28T03:12:04.749Z","type":"message"}
{"nick":"ljharb","message":"devsnek: it’s that in an older env, you’d only get the cjs, and in a newer one, only ESM","date":"2019-02-28T03:12:10.128Z","type":"message"}
{"nick":"ljharb","message":"because mjs takes priority over js","date":"2019-02-28T03:12:17.351Z","type":"message"}
{"nick":"devsnek","message":"but...","date":"2019-02-28T03:12:20.742Z","type":"message"}
{"nick":"devsnek","message":"cjs isn't aware of esm","date":"2019-02-28T03:12:24.710Z","type":"message"}
{"nick":"ljharb","message":"so there’s not actually dual things unless you explicitly import them with an extension","date":"2019-02-28T03:12:29.345Z","type":"message"}
{"nick":"ljharb","message":"it doesn’t have to be","date":"2019-02-28T03:12:32.219Z","type":"message"}
{"nick":"ljharb","message":"the .js files operate in an “only CJS exists” world","date":"2019-02-28T03:12:43.802Z","type":"message"}
{"nick":"devsnek","message":"if lodash ships dual mode","date":"2019-02-28T03:12:46.078Z","type":"message"}
{"nick":"devsnek","message":"and some random package does require('lodash')","date":"2019-02-28T03:12:52.029Z","type":"message"}
{"nick":"ljharb","message":"then ESM node will only touch the mjs","date":"2019-02-28T03:12:55.175Z","type":"message"}
{"nick":"ljharb","message":"ohhh","date":"2019-02-28T03:12:57.225Z","type":"message"}
{"nick":"devsnek","message":"and some random package does import 'lodash'","date":"2019-02-28T03:13:01.002Z","type":"message"}
{"nick":"ljharb","message":"right, I was remembering when we had require(‘esm’).","date":"2019-02-28T03:13:12.103Z","type":"message"}
{"nick":"devsnek","message":"eep","date":"2019-02-28T03:13:21.383Z","type":"message"}
{"nick":"ljharb","message":"ok well. I’ll have to put some thought in it. But the necessity remains.","date":"2019-02-28T03:13:24.107Z","type":"message"}
{"nick":"devsnek","message":"what if we just make a third module system to distract people from arguing about the first two","date":"2019-02-28T03:14:35.725Z","type":"message"}
{"nick":"ljharb","message":"it’s super effective","date":"2019-02-28T03:15:31.802Z","type":"message"}
{"nick":"dbevenius","date":"2019-02-28T03:29:12.354Z","type":"join"}
{"nick":"wawasho","reason":"Remote host closed the connection","date":"2019-02-28T03:33:57.123Z","type":"quit"}
{"nick":"antsmartian","date":"2019-02-28T03:35:06.982Z","type":"join"}
{"nick":"wawasho","date":"2019-02-28T03:35:34.728Z","type":"join"}
{"nick":"antsmartian","reason":"Ping timeout: 250 seconds","date":"2019-02-28T03:39:48.843Z","type":"quit"}
{"nick":"neo4","date":"2019-02-28T03:59:11.612Z","type":"join"}
{"nick":"antsmartian","date":"2019-02-28T04:10:48.393Z","type":"join"}
{"nick":"dbevenius","reason":"Remote host closed the connection","date":"2019-02-28T04:13:05.898Z","type":"quit"}
{"nick":"dbevenius","date":"2019-02-28T04:13:22.172Z","type":"join"}
{"nick":"wawasho","reason":"Remote host closed the connection","date":"2019-02-28T04:13:43.114Z","type":"quit"}
{"nick":"wawasho","date":"2019-02-28T04:14:14.716Z","type":"join"}
{"nick":"antsmartian","reason":"Ping timeout: 246 seconds","date":"2019-02-28T04:15:07.271Z","type":"quit"}
{"nick":"howdoi","date":"2019-02-28T05:40:51.770Z","type":"join"}
{"nick":"neo4","reason":"Quit: neo4","date":"2019-02-28T05:43:16.313Z","type":"quit"}
{"nick":"dbevenius","reason":"Remote host closed the connection","date":"2019-02-28T06:00:53.267Z","type":"quit"}
{"nick":"lpin","date":"2019-02-28T06:06:02.270Z","type":"join"}
{"nick":"dbevenius","date":"2019-02-28T06:15:08.195Z","type":"join"}
{"nick":"lundibundi","date":"2019-02-28T07:38:12.962Z","type":"join"}
{"nick":"lundibundi","reason":"Ping timeout: 250 seconds","date":"2019-02-28T08:11:56.789Z","type":"quit"}
{"nick":"lundibundi","date":"2019-02-28T09:24:26.938Z","type":"join"}
{"nick":"howdoi","reason":"Quit: Connection closed for inactivity","date":"2019-02-28T13:35:38.758Z","type":"quit"}
{"nick":"antsmartian","date":"2019-02-28T13:58:17.436Z","type":"join"}
{"nick":"antsmartian","reason":"Ping timeout: 255 seconds","date":"2019-02-28T14:02:53.341Z","type":"quit"}
{"nick":"kumavis","reason":"Quit: Connection closed for inactivity","date":"2019-02-28T14:03:27.473Z","type":"quit"}
{"nick":"howdoi","date":"2019-02-28T14:08:30.320Z","type":"join"}
{"nick":"zeds","date":"2019-02-28T15:05:04.349Z","type":"join"}
{"nick":"zeds","date":"2019-02-28T15:05:11.349Z","type":"part"}
{"nick":"julianduque","reason":"Ping timeout: 246 seconds","date":"2019-02-28T15:13:28.283Z","type":"quit"}
{"nick":"julianduque","date":"2019-02-28T15:21:52.758Z","type":"join"}
{"nick":"julianduque","reason":"Ping timeout: 268 seconds","date":"2019-02-28T15:26:52.910Z","type":"quit"}
{"nick":"bradleymeck","message":"devsnek: just wait til we talk about webpackage support","date":"2019-02-28T15:29:01.021Z","type":"message"}
{"nick":"dbevenius","reason":"Read error: Connection reset by peer","date":"2019-02-28T15:29:01.109Z","type":"quit"}
{"nick":"devsnek","message":"bradleymeck: I'm a fan tbh","date":"2019-02-28T15:29:55.472Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: also the identity problem you describe of pulling in 2 diff wrappers/formats is super real if you look at what happened with GraphQL a while ago","date":"2019-02-28T15:30:12.330Z","type":"message"}
{"nick":"devsnek","message":"aha graphql","date":"2019-02-28T15:30:24.266Z","type":"message"}
{"nick":"bradleymeck","message":"it was hard enough to fix they just pulled support for real dual mode packages","date":"2019-02-28T15:30:24.899Z","type":"message"}
{"nick":"devsnek","message":"I knew it happened to a large package","date":"2019-02-28T15:30:32.922Z","type":"message"}
{"nick":"devsnek","message":"I couldn't remember which one","date":"2019-02-28T15:30:37.074Z","type":"message"}
{"nick":"bradleymeck","message":"there were a few in the react space","date":"2019-02-28T15:30:48.439Z","type":"message"}
{"nick":"bradleymeck","message":"graphql was the biggest","date":"2019-02-28T15:30:54.226Z","type":"message"}
{"nick":"devsnek","message":"it's such an easy mistake to make :(","date":"2019-02-28T15:31:15.551Z","type":"message"}
{"nick":"bradleymeck","message":"dual mode is *very* hard to do right, and still requires a transpiler if you are trying to support browsers","date":"2019-02-28T15:31:18.675Z","type":"message"}
{"nick":"bradleymeck","message":"the \"still requires a transpiler\" made it kind of not useful","date":"2019-02-28T15:31:40.572Z","type":"message"}
{"nick":"devsnek","message":"lol","date":"2019-02-28T15:31:47.203Z","type":"message"}
{"nick":"bradleymeck","message":"cause ESM needs to consume CJS to expose the same identities","date":"2019-02-28T15:32:05.470Z","type":"message"}
{"nick":"devsnek","message":"yep","date":"2019-02-28T15:32:13.784Z","type":"message"}
{"nick":"bradleymeck","message":"CJS can't really consume ESM without moving to a Promise","date":"2019-02-28T15:32:18.831Z","type":"message"}
{"nick":"bradleymeck","message":"so f' it was the answer heard all around the ecosystem","date":"2019-02-28T15:32:36.426Z","type":"message"}
{"nick":"julianduque","date":"2019-02-28T15:32:40.862Z","type":"join"}
{"nick":"devsnek","message":"has webpackage been moving forward","date":"2019-02-28T15:34:11.339Z","type":"message"}
{"nick":"bradleymeck","message":"transpilers are interesting here because they don't generally support dual mode packages, they tend to always select 1 mode","date":"2019-02-28T15:34:13.072Z","type":"message"}
{"nick":"bradleymeck","message":"devsnek: intent to ship was out i thought?","date":"2019-02-28T15:34:26.168Z","type":"message"}
{"nick":"devsnek","message":"last I heard it had a secret implementation only facebook had the source for","date":"2019-02-28T15:34:33.675Z","type":"message"}
{"nick":"bradleymeck","message":"https://groups.google.com/a/chromium.org/forum/#!msg/blink-dev/gPH_BcOBEtc/Z41GR0mwEQAJ","date":"2019-02-28T15:34:44.142Z","type":"message"}
{"nick":"bradleymeck","message":"nah, its public","date":"2019-02-28T15:34:53.505Z","type":"message"}
{"nick":"devsnek","message":"oh nice","date":"2019-02-28T15:35:05.182Z","type":"message"}
{"nick":"bradleymeck","message":"https://github.com/WICG/webpackage , written in go if i remember","date":"2019-02-28T15:35:11.987Z","type":"message"}
{"nick":"devsnek","message":"hey it still uses 🌐📦 lol","date":"2019-02-28T15:35:54.712Z","type":"message"}
{"nick":"devsnek","message":"why do people believe that there is some situation where node_modules will be browser compatible","date":"2019-02-28T15:39:15.362Z","type":"message"}
{"nick":"dbevenius","date":"2019-02-28T15:43:17.273Z","type":"join"}
{"nick":"bradleymeck","message":"cause servers do transformations all the time","date":"2019-02-28T15:44:02.756Z","type":"message"}
{"nick":"bradleymeck","message":"also because the possibility of generating those transforms ahead of time","date":"2019-02-28T15:44:58.483Z","type":"message"}
{"nick":"bradleymeck","message":"plenty of build/deploy steps are done in most prod servers","date":"2019-02-28T15:45:29.979Z","type":"message"}
{"nick":"bradleymeck","message":"so it is just another part of that","date":"2019-02-28T15:45:35.605Z","type":"message"}
{"nick":"bradleymeck","message":"extremely few servers are purely static w/o any action","date":"2019-02-28T15:45:51.183Z","type":"message"}
{"nick":"bradleymeck","message":"when you push data up it often does actions even if the actual response doesn't require actions","date":"2019-02-28T15:46:15.242Z","type":"message"}
