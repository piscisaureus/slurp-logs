{"nick":"Qantas94Heavy","reason":"Ping timeout: 248 seconds","date":"2017-07-02T00:01:05.543Z","type":"quit"}
{"nick":"darkSeid_","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2017-07-02T00:02:29.015Z","type":"quit"}
{"nick":"kakashiAL","date":"2017-07-02T00:02:39.537Z","type":"join"}
{"nick":"InternetAddicted","date":"2017-07-02T00:03:19.369Z","type":"join"}
{"nick":"hextileX","reason":"Quit: hextileX","date":"2017-07-02T00:04:12.923Z","type":"quit"}
{"nick":"duckydan","date":"2017-07-02T00:06:31.605Z","type":"join"}
{"nick":"perrier-jouet","reason":"Quit: WeeChat 1.9","date":"2017-07-02T00:07:37.823Z","type":"quit"}
{"nick":"sz0","reason":"Quit: Connection closed for inactivity","date":"2017-07-02T00:12:29.397Z","type":"quit"}
{"nick":"dbclk","reason":"Ping timeout: 268 seconds","date":"2017-07-02T00:14:10.790Z","type":"quit"}
{"nick":"xrash","date":"2017-07-02T00:14:31.096Z","type":"join"}
{"nick":"Cabanossi","reason":"Ping timeout: 276 seconds","date":"2017-07-02T00:18:31.669Z","type":"quit"}
{"nick":"Cabanossi","date":"2017-07-02T00:18:56.314Z","type":"join"}
{"nick":"samsch","reason":"Remote host closed the connection","date":"2017-07-02T00:19:38.063Z","type":"quit"}
{"nick":"Qantas94Heavy","date":"2017-07-02T00:19:44.553Z","type":"join"}
{"nick":"samsch","date":"2017-07-02T00:20:40.685Z","type":"join"}
{"nick":"kamylo","reason":"Remote host closed the connection","date":"2017-07-02T00:26:15.470Z","type":"quit"}
{"nick":"Circlefusion1","reason":"Remote host closed the connection","date":"2017-07-02T00:27:06.241Z","type":"quit"}
{"nick":"h12o","date":"2017-07-02T00:27:16.779Z","type":"join"}
{"nick":"ovsh","message":"So I have Users and Projects as seperate tables in postgresql. I set up a relation between them and a bunch of FKs too. Why do I need to fetch all projects by user1 using a relation? Why not just do a query of projects where user_id = (user_id_I_need)?","date":"2017-07-02T00:29:27.425Z","type":"message"}
{"nick":"ovsh","message":"it seems wasteful in resources to do all these joins","date":"2017-07-02T00:29:33.487Z","type":"message"}
{"nick":"ovsh","message":"I'm using objectionjs on top of knex, if that makes sense to anyone","date":"2017-07-02T00:31:10.349Z","type":"message"}
{"nick":"kbkk","reason":"Read error: Connection reset by peer","date":"2017-07-02T00:34:54.490Z","type":"quit"}
{"nick":"chjj","reason":"Ping timeout: 268 seconds","date":"2017-07-02T00:36:22.880Z","type":"quit"}
{"nick":"deltab","message":"that wouldn't bring back any user data","date":"2017-07-02T00:39:00.266Z","type":"message"}
{"nick":"deltab","message":"so you'd need a separate query if you want that","date":"2017-07-02T00:39:15.122Z","type":"message"}
{"nick":"deltab","message":"a join combines them into one query","date":"2017-07-02T00:41:02.671Z","type":"message"}
{"nick":"siba","date":"2017-07-02T00:41:10.535Z","type":"join"}
{"nick":"jfhbrook","message":"I don't think anyone's stopping you from doing that","date":"2017-07-02T00:41:20.239Z","type":"message"}
{"nick":"jfhbrook","message":"if you already know the user id and you just want their projects and no metadata...go for it, query","date":"2017-07-02T00:41:44.868Z","type":"message"}
{"nick":"deltab","action":"nods","date":"2017-07-02T00:41:50.108Z","type":"action"}
{"nick":"jfhbrook","message":"projects without a join","date":"2017-07-02T00:41:50.281Z","type":"message"}
{"nick":"RLa","reason":"Quit: Leaving","date":"2017-07-02T00:42:03.748Z","type":"quit"}
{"nick":"jfhbrook","message":"possible your ORM is making it look like you're doing a join, or making you feel like you have to do one, but there's nothing in sql that says you need to do this","date":"2017-07-02T00:42:30.049Z","type":"message"}
{"nick":"ovsh","message":"got it","date":"2017-07-02T00:43:50.215Z","type":"message"}
{"nick":"ovsh","message":"thanks!","date":"2017-07-02T00:43:51.321Z","type":"message"}
{"nick":"ovsh","message":"my ORM got me super confused","date":"2017-07-02T00:43:55.706Z","type":"message"}
{"nick":"ovsh","message":"and I can't even get this $relatedQuery thing to even work","date":"2017-07-02T00:44:03.752Z","type":"message"}
{"nick":"zsoc","message":"ovsh: also remember this is how sql is made to work.. with relations and joins... it's not as much overhead as it might seem","date":"2017-07-02T00:44:31.993Z","type":"message"}
{"nick":"zsoc","message":"if you need the metadata that the join provides.. do the join","date":"2017-07-02T00:44:40.408Z","type":"message"}
{"nick":"ovsh","message":"zsoc, yeah, but I can't get the join to work","date":"2017-07-02T00:44:57.437Z","type":"message"}
{"nick":"ovsh","message":":(","date":"2017-07-02T00:44:58.570Z","type":"message"}
{"nick":"ovsh","message":"rip","date":"2017-07-02T00:44:59.224Z","type":"message"}
{"nick":"ovsh","message":"Let me make a gist and hopefully someone is smarter than me","date":"2017-07-02T00:45:54.031Z","type":"message"}
{"nick":"milardovich","reason":"Remote host closed the connection","date":"2017-07-02T00:46:17.066Z","type":"quit"}
{"nick":"NomadJim","date":"2017-07-02T00:46:37.796Z","type":"join"}
{"nick":"deltab","message":"the DBMS knows it's repeating data in a join: it could communicate that in the way it sends the resultset in its protocol, and the ORM could detect that when it maps to objects, so there'd be little overhead. I have no idea whether that's actually done though","date":"2017-07-02T00:47:24.215Z","type":"message"}
{"nick":"zsoc","message":"when in doubt.. get the join to work just with a raw query first","date":"2017-07-02T00:47:26.639Z","type":"message"}
{"nick":"ovsh","message":"it works with a raw query","date":"2017-07-02T00:47:38.854Z","type":"message"}
{"nick":"zsoc","message":"the amount of optimizations done in the db level is scary","date":"2017-07-02T00:47:52.296Z","type":"message"}
{"nick":"zsoc","message":"ovsh: oh, well then just the way you're trying to implement the model or w/e is wrong :p","date":"2017-07-02T00:48:05.829Z","type":"message"}
{"nick":"ovsh","message":"yeah, I'm making a gist of it so hopefully any of you guys can read better than me","date":"2017-07-02T00:48:29.417Z","type":"message"}
{"nick":"ovsh","message":"Getting an error 500","date":"2017-07-02T00:48:56.757Z","type":"message"}
{"nick":"zsoc","message":"not from Objection you aren't lol","date":"2017-07-02T00:50:17.154Z","type":"message"}
{"nick":"Supernovah","date":"2017-07-02T00:50:22.801Z","type":"join"}
{"nick":"ovsh","message":"zsoc, no?","date":"2017-07-02T00:50:48.482Z","type":"message"}
{"nick":"zsoc","message":"if you're getting an error in your route.. break it down into the actual call you're making from the model","date":"2017-07-02T00:50:53.428Z","type":"message"}
{"nick":"ovsh","message":"How come?","date":"2017-07-02T00:50:53.652Z","type":"message"}
{"nick":"zsoc","message":"how.. would a model give you error 500?","date":"2017-07-02T00:50:58.683Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/79a563dc2f43fbe9edd60c55f855f014","date":"2017-07-02T00:51:03.110Z","type":"message"}
{"nick":"zsoc","message":"That sounds like an http status code...","date":"2017-07-02T00:51:03.287Z","type":"message"}
{"nick":"ovsh","message":"it breaks on the .$relatedQuery","date":"2017-07-02T00:51:13.862Z","type":"message"}
{"nick":"zsoc","message":"please also gist the error and stack trace","date":"2017-07-02T00:51:27.134Z","type":"message"}
{"nick":"zsoc","message":"we've been through this before i'm pretty sure :p","date":"2017-07-02T00:51:31.613Z","type":"message"}
{"nick":"ovsh","message":"There's no error or stack trace!","date":"2017-07-02T00:51:40.030Z","type":"message"}
{"nick":"ovsh","message":"that's part of why I can't debug this","date":"2017-07-02T00:51:46.245Z","type":"message"}
{"nick":"ovsh","message":"its not on the console of my server.js, or on the browser, on on redux state","date":"2017-07-02T00:51:55.900Z","type":"message"}
{"nick":"chjj","date":"2017-07-02T00:52:15.601Z","type":"join"}
{"nick":"zsoc","message":"ovsh: did you use express-generator to generate your code?","date":"2017-07-02T00:52:21.622Z","type":"message"}
{"nick":"ovsh","message":"when I remove L34 it works (but returns my user)","date":"2017-07-02T00:52:23.220Z","type":"message"}
{"nick":"ovsh","message":"zsoc, ugh, no?","date":"2017-07-02T00:52:27.371Z","type":"message"}
{"nick":"zsoc","message":"are you sure?","date":"2017-07-02T00:52:30.659Z","type":"message"}
{"nick":"ovsh","message":"yeah?","date":"2017-07-02T00:52:36.042Z","type":"message"}
{"nick":"ovsh","message":"ol","date":"2017-07-02T00:52:36.683Z","type":"message"}
{"nick":"ovsh","message":"lol*","date":"2017-07-02T00:52:38.163Z","type":"message"}
{"nick":"xiinotulp","date":"2017-07-02T00:52:58.483Z","type":"part"}
{"nick":"ovsh","message":"I added comments myself for the gist so it'll be easy to debug if thats why you're asking","date":"2017-07-02T00:52:58.760Z","type":"message"}
{"nick":"zsoc","message":"because the only other thing that could cause a 500 here is if there's a synchronous error (so the .catch() isn't catching it) and it's being handled in a global error handler middleware in express","date":"2017-07-02T00:53:02.013Z","type":"message"}
{"nick":"wsayo","reason":"Ping timeout: 255 seconds","date":"2017-07-02T00:53:14.846Z","type":"quit"}
{"nick":"ovsh","message":"hmm","date":"2017-07-02T00:53:18.403Z","type":"message"}
{"nick":"zsoc","message":"or you added a global error handler in express you forgot about :p","date":"2017-07-02T00:53:20.474Z","type":"message"}
{"nick":"ovsh","message":"I have a piece I added to server.js","date":"2017-07-02T00:53:22.537Z","type":"message"}
{"nick":"ovsh","message":"yes I did","date":"2017-07-02T00:53:24.908Z","type":"message"}
{"nick":"zsoc","message":"does it look like (err, req, res, next) ?","date":"2017-07-02T00:53:30.109Z","type":"message"}
{"nick":"zsoc","message":"console.warn(err) from in that closure","date":"2017-07-02T00:53:35.014Z","type":"message"}
{"nick":"systemfault","reason":"Quit: Bye!","date":"2017-07-02T00:53:35.208Z","type":"quit"}
{"nick":"plutoniix","date":"2017-07-02T00:53:35.380Z","type":"join"}
{"nick":"ovsh","message":"yup","date":"2017-07-02T00:53:36.164Z","type":"message"}
{"nick":"systemfault","date":"2017-07-02T00:53:52.700Z","type":"join"}
{"nick":"ovsh","message":"OH WOW","date":"2017-07-02T00:53:54.617Z","type":"message"}
{"nick":"ovsh","message":"now I see the error","date":"2017-07-02T00:53:58.133Z","type":"message"}
{"nick":"ovsh","message":"Should I even _have_ a global error handler?","date":"2017-07-02T00:54:07.727Z","type":"message"}
{"nick":"zsoc","message":"yeah so.. Objection is throwing on 34 which is *before* it's a promise","date":"2017-07-02T00:54:08.899Z","type":"message"}
{"nick":"zsoc","message":"you should, but it should crash your app :p","date":"2017-07-02T00:54:15.012Z","type":"message"}
{"nick":"systemfault","reason":"Client Quit","date":"2017-07-02T00:54:20.902Z","type":"quit"}
{"nick":"EyePulp","date":"2017-07-02T00:54:22.860Z","type":"join"}
{"nick":"ovsh","message":"rip","date":"2017-07-02T00:54:26.661Z","type":"message"}
{"nick":"ovsh","message":"ok","date":"2017-07-02T00:54:27.152Z","type":"message"}
{"nick":"ovsh","message":"well the error is this:","date":"2017-07-02T00:54:31.090Z","type":"message"}
{"nick":"ovsh","message":"TypeError: User.query(...).where(...).then(...).$relatedQuery is not a function","date":"2017-07-02T00:54:34.862Z","type":"message"}
{"nick":"zsoc","message":"this is why it's good to wrap entire routes in promises or use express-promise-router which returns a promise :p","date":"2017-07-02T00:54:43.407Z","type":"message"}
{"nick":"zsoc","message":"right, so let me see what the heck $relatedQuery is cos i've never heard such a thing","date":"2017-07-02T00:54:58.606Z","type":"message"}
{"nick":"ovsh","message":"http://vincit.github.io/objection.js/#fetch-queries12","date":"2017-07-02T00:55:14.438Z","type":"message"}
{"nick":"ovsh","message":"its like a \"join\"","date":"2017-07-02T00:55:17.474Z","type":"message"}
{"nick":"ovsh","message":"done for you?","date":"2017-07-02T00:55:20.837Z","type":"message"}
{"nick":"deltab","message":"it's a query to get linked records","date":"2017-07-02T00:55:30.291Z","type":"message"}
{"nick":"ovsh","message":"so its a join?","date":"2017-07-02T00:55:36.460Z","type":"message"}
{"nick":"zivester","reason":"Ping timeout: 260 seconds","date":"2017-07-02T00:55:40.491Z","type":"quit"}
{"nick":"deltab","message":"yes","date":"2017-07-02T00:55:43.418Z","type":"message"}
{"nick":"ovsh","message":":D","date":"2017-07-02T00:55:45.901Z","type":"message"}
{"nick":"ovsh","message":"yay I know stuff","date":"2017-07-02T00:55:47.659Z","type":"message"}
{"nick":"InternetAddicted","reason":"Quit: My PC went to BSOD","date":"2017-07-02T00:55:54.162Z","type":"quit"}
{"nick":"deltab","message":"well, not necessarily, as above","date":"2017-07-02T00:55:56.315Z","type":"message"}
{"nick":"zsoc","message":"you... don't query *and* related query","date":"2017-07-02T00:56:04.583Z","type":"message"}
{"nick":"ovsh","message":"thats what I thought","date":"2017-07-02T00:56:15.338Z","type":"message"}
{"nick":"ovsh","message":"but then it says","date":"2017-07-02T00:56:18.084Z","type":"message"}
{"nick":"ovsh","message":"/ `person` is an instance of `Person` model.","date":"2017-07-02T00:56:23.359Z","type":"message"}
{"nick":"milardovich","date":"2017-07-02T00:56:29.239Z","type":"join"}
{"nick":"deltab","message":"but it's something you do with a single instance","date":"2017-07-02T00:56:30.702Z","type":"message"}
{"nick":"zsoc","message":"right, not the whole model.. like you would forge() before","date":"2017-07-02T00:56:42.683Z","type":"message"}
{"nick":"ovsh","message":"forge is evil","date":"2017-07-02T00:56:47.585Z","type":"message"}
{"nick":"ovsh","message":"forge is bookshelf","date":"2017-07-02T00:56:50.378Z","type":"message"}
{"nick":"ovsh","message":":x","date":"2017-07-02T00:56:52.779Z","type":"message"}
{"nick":"zsoc","message":"er.. crap i'm confusing objection with boookshelf","date":"2017-07-02T00:57:02.069Z","type":"message"}
{"nick":"zsoc","message":"sorry","date":"2017-07-02T00:57:02.974Z","type":"message"}
{"nick":"zsoc","message":"all ORMs are evil :p","date":"2017-07-02T00:57:05.289Z","type":"message"}
{"nick":"ovsh","message":"bookshelf is satan","date":"2017-07-02T00:57:11.132Z","type":"message"}
{"nick":"zsoc","message":"no that's sequelize :p","date":"2017-07-02T00:57:17.716Z","type":"message"}
{"nick":"ovsh","message":"objections is <3","date":"2017-07-02T00:57:19.561Z","type":"message"}
{"nick":"ovsh","message":"so wait why am I dumb","date":"2017-07-02T00:57:24.195Z","type":"message"}
{"nick":"ovsh","message":"how would a relatedQuery look like?","date":"2017-07-02T00:57:32.823Z","type":"message"}
{"nick":"ovsh","message":"deltab, https://gist.github.com/ovsh/79a563dc2f43fbe9edd60c55f855f014","date":"2017-07-02T00:57:47.964Z","type":"message"}
{"nick":"deltab","message":"there's examples in the documentation","date":"2017-07-02T00:57:48.794Z","type":"message"}
{"nick":"ovsh","message":"if that helps?","date":"2017-07-02T00:57:49.380Z","type":"message"}
{"nick":"ovsh","message":"I did follow that","date":"2017-07-02T00:57:55.352Z","type":"message"}
{"nick":"ovsh","message":"no?","date":"2017-07-02T00:58:04.461Z","type":"message"}
{"nick":"zsoc","message":"knex('users').join('projects', 'projects.user_id', 'users.id').where('id', req.user[0].id)","date":"2017-07-02T00:58:05.295Z","type":"message"}
{"nick":"zsoc","message":"then we can all go home :p","date":"2017-07-02T00:58:07.732Z","type":"message"}
{"nick":"ovsh","message":"i am home t_t","date":"2017-07-02T00:58:24.471Z","type":"message"}
{"nick":"f32","message":"ljharb: no, you listed the conventions that work in a pure JS context","date":"2017-07-02T00:58:27.791Z","type":"message"}
{"nick":"zsoc","message":"there are indeed examples in the documentation","date":"2017-07-02T00:58:40.609Z","type":"message"}
{"nick":"zsoc","message":"ovsh: can i ask you what data you want to get out of this query?","date":"2017-07-02T00:58:48.530Z","type":"message"}
{"nick":"ovsh","message":"zsoc, but I took it from the docs","date":"2017-07-02T00:58:49.278Z","type":"message"}
{"nick":"zsoc","message":"that might help lol","date":"2017-07-02T00:58:50.210Z","type":"message"}
{"nick":"zsoc","message":"where?","date":"2017-07-02T00:58:52.384Z","type":"message"}
{"nick":"zsoc","message":"i don't see this anywhere in the docs","date":"2017-07-02T00:58:55.563Z","type":"message"}
{"nick":"deltab","message":"ovsh: no, you're doing a query; how do you get the single instance from that?","date":"2017-07-02T00:58:58.168Z","type":"message"}
{"nick":"ovsh","message":"zsoc, I want to get all projects from a specific user","date":"2017-07-02T00:59:05.643Z","type":"message"}
{"nick":"EyePulp","reason":"Ping timeout: 268 seconds","date":"2017-07-02T00:59:11.754Z","type":"quit"}
{"nick":"ovsh","message":"deltab, doesnt the query return a single instance of a user? relatedQuery requires an instance, so thats what I did to \"make an instance\"","date":"2017-07-02T00:59:37.161Z","type":"message"}
{"nick":"zsoc","message":"okay, then you need to get that user 'instance', and then $relatedQuery it","date":"2017-07-02T00:59:40.536Z","type":"message"}
{"nick":"ovsh","message":"yeah but isnt that what I'm doing by doing the User.query().where... da da da?","date":"2017-07-02T00:59:55.620Z","type":"message"}
{"nick":"zsoc","message":"but this is a jiggin' orm.. shouldn't you just be calling User.getAllProjects()? which you define in the model? :p","date":"2017-07-02T00:59:57.823Z","type":"message"}
{"nick":"Ripple","reason":"Remote host closed the connection","date":"2017-07-02T01:00:06.551Z","type":"quit"}
{"nick":"zsoc","message":"ovsh: no you are returning a builder","date":"2017-07-02T01:00:15.298Z","type":"message"}
{"nick":"deltab","message":"Objection \"aims to stay out of your way and make it as easy as possible to use the full power of SQL and the underlying database engine while keeping magic to a minimum.\"","date":"2017-07-02T01:00:23.729Z","type":"message"}
{"nick":"zsoc","message":"which is what the docs say, you need to execute that query to get the instance from it","date":"2017-07-02T01:00:24.270Z","type":"message"}
{"nick":"deltab","message":"ovsh: you're missing the step where you get the result of the query","date":"2017-07-02T01:00:48.816Z","type":"message"}
{"nick":"zsoc","message":"^^^^^","date":"2017-07-02T01:01:03.403Z","type":"message"}
{"nick":"ovsh","message":"deltab, so even with that step it didnt work","date":"2017-07-02T01:01:05.205Z","type":"message"}
{"nick":"ovsh","message":"let me update the gist","date":"2017-07-02T01:01:08.292Z","type":"message"}
{"nick":"zsoc","message":"it's funny because the error message it gives you is really close lol","date":"2017-07-02T01:01:11.924Z","type":"message"}
{"nick":"milardovich","reason":"Ping timeout: 260 seconds","date":"2017-07-02T01:01:16.492Z","type":"quit"}
{"nick":"ovsh","message":"I added:       .then(one_person => {","date":"2017-07-02T01:01:17.650Z","type":"message"}
{"nick":"ovsh","message":"        return one_person;","date":"2017-07-02T01:01:17.822Z","type":"message"}
{"nick":"ovsh","message":"      })","date":"2017-07-02T01:01:17.822Z","type":"message"}
{"nick":"zsoc","message":"it shows you how it's interpreting your chain","date":"2017-07-02T01:01:18.870Z","type":"message"}
{"nick":"ovsh","message":"shit let me put that in the gist","date":"2017-07-02T01:01:25.117Z","type":"message"}
{"nick":"zsoc","message":"ovsh: that's an array","date":"2017-07-02T01:01:53.757Z","type":"message"}
{"nick":"zsoc","message":"which the docs also show","date":"2017-07-02T01:01:57.370Z","type":"message"}
{"nick":"zsoc","message":"ovsh: https://gist.github.com/jkantr/fab515bd7635e08d0c7e68bc9fa5717f","date":"2017-07-02T01:02:05.999Z","type":"message"}
{"nick":"zsoc","message":"that's what you want","date":"2017-07-02T01:02:08.336Z","type":"message"}
{"nick":"ovsh","message":"should I try one_person[0]?","date":"2017-07-02T01:02:10.954Z","type":"message"}
{"nick":"Cabanossi","reason":"Ping timeout: 246 seconds","date":"2017-07-02T01:02:11.557Z","type":"quit"}
{"nick":"ovsh","message":"oh wow","date":"2017-07-02T01:02:25.615Z","type":"message"}
{"nick":"deltab","message":"no, .then will return a promise","date":"2017-07-02T01:02:35.268Z","type":"message"}
{"nick":"zsoc","message":"well, persons[0] (if you want the name of your identifier to make sense :PPP)","date":"2017-07-02T01:02:36.435Z","type":"message"}
{"nick":"zsoc","message":"wait are you saying it can't chain the resolved promise to the instance?","date":"2017-07-02T01:02:57.212Z","type":"message"}
{"nick":"zsoc","message":"that would be horrific","date":"2017-07-02T01:03:00.081Z","type":"message"}
{"nick":"zsoc","message":"i refuse to accept that","date":"2017-07-02T01:03:02.635Z","type":"message"}
{"nick":"ovsh","message":"oh wow","date":"2017-07-02T01:03:05.097Z","type":"message"}
{"nick":"ovsh","message":"why is it so dumb though","date":"2017-07-02T01:03:08.523Z","type":"message"}
{"nick":"ovsh","message":"its like too many hoops or steps","date":"2017-07-02T01:03:16.790Z","type":"message"}
{"nick":"ovsh","message":"is that why ORMs suck","date":"2017-07-02T01:03:20.698Z","type":"message"}
{"nick":"zsoc","message":"ovsh: the idea of an orm is you abstract these things away into your model","date":"2017-07-02T01:03:27.881Z","type":"message"}
{"nick":"zsoc","message":"so in your route it's just User.getAllProjectsForUser(id)","date":"2017-07-02T01:03:37.813Z","type":"message"}
{"nick":"ovsh","message":"so how would it look like inside the ORM getAllProjects?","date":"2017-07-02T01:03:41.873Z","type":"message"}
{"nick":"deltab","message":"ovsh: uh, note the quote above","date":"2017-07-02T01:03:47.658Z","type":"message"}
{"nick":"ovsh","message":"what would be \"inside\" there","date":"2017-07-02T01:03:49.256Z","type":"message"}
{"nick":"ovsh","message":"deltab, what quote?","date":"2017-07-02T01:03:55.138Z","type":"message"}
{"nick":"Cabanossi","date":"2017-07-02T01:03:59.388Z","type":"join"}
{"nick":"deltab","message":"Objection \"aims to stay out of your way and make it as easy as possible to use the full power of SQL and the underlying database engine while keeping magic to a minimum.\"","date":"2017-07-02T01:04:05.808Z","type":"message"}
{"nick":"ovsh","message":"hm","date":"2017-07-02T01:04:20.156Z","type":"message"}
{"nick":"deltab","message":"so it's not doing as much for you as it could","date":"2017-07-02T01:04:23.921Z","type":"message"}
{"nick":"ovsh","message":"got it","date":"2017-07-02T01:04:29.622Z","type":"message"}
{"nick":"ovsh","message":"to make it less ORMish","date":"2017-07-02T01:04:36.327Z","type":"message"}
{"nick":"zsoc","message":"ovsh: this (updated) should work https://gist.github.com/jkantr/fab515bd7635e08d0c7e68bc9fa5717f","date":"2017-07-02T01:04:36.500Z","type":"message"}
{"nick":"zsoc","message":"and i kind of like how you can just .query() and basically step down into knex almost.. it's neat","date":"2017-07-02T01:04:57.911Z","type":"message"}
{"nick":"ovsh","message":"zsoc, ew but that looks bad","date":"2017-07-02T01:05:05.600Z","type":"message"}
{"nick":"ovsh","message":"how would you write it?","date":"2017-07-02T01:05:10.276Z","type":"message"}
{"nick":"zsoc","message":"but yeah i know very little about objection. reading the docs for these 5 minutes has probably doubled my knowledge lol","date":"2017-07-02T01:05:13.810Z","type":"message"}
{"nick":"zsoc","message":"ovsh: i would look at the docs about how you build custom methods in the model :p","date":"2017-07-02T01:05:24.582Z","type":"message"}
{"nick":"ovsh","message":"you would just strip to knex?","date":"2017-07-02T01:05:28.396Z","type":"message"}
{"nick":"zsoc","message":"that's.. what i always do","date":"2017-07-02T01:05:34.340Z","type":"message"}
{"nick":"ovsh","message":"so User.query()","date":"2017-07-02T01:05:39.606Z","type":"message"}
{"nick":"ovsh","message":"then","date":"2017-07-02T01:05:40.859Z","type":"message"}
{"nick":"zsoc","message":"I'm sure there is some project where an ORM would feel right","date":"2017-07-02T01:05:41.244Z","type":"message"}
{"nick":"f32","message":"ljharb: how many people do you suppose are using babel to transpile nodejs code?","date":"2017-07-02T01:05:43.519Z","type":"message"}
{"nick":"zsoc","message":"no i just wouldn't use objection lol","date":"2017-07-02T01:05:45.824Z","type":"message"}
{"nick":"ovsh","message":"oh","date":"2017-07-02T01:05:51.219Z","type":"message"}
{"nick":"ovsh","message":"lol","date":"2017-07-02T01:05:51.769Z","type":"message"}
{"nick":"ovsh","message":"rip","date":"2017-07-02T01:05:52.452Z","type":"message"}
{"nick":"zsoc","message":"f32: a lot, because of object rest spread :p","date":"2017-07-02T01:06:04.281Z","type":"message"}
{"nick":"zsoc","message":"ovsh: but like if i was doing some very classic type of app.. like where you have Books and Authors and Tags and crap like that.. i could see wanting to use one","date":"2017-07-02T01:06:28.742Z","type":"message"}
{"nick":"ovsh","message":"zsoc, your second one work","date":"2017-07-02T01:06:45.293Z","type":"message"}
{"nick":"ovsh","message":"worked*","date":"2017-07-02T01:06:46.605Z","type":"message"}
{"nick":"ovsh","message":"but holy shit it looks fugly","date":"2017-07-02T01:06:53.372Z","type":"message"}
{"nick":"ovsh","message":"how would you turn it into User.getAllProjects()?","date":"2017-07-02T01:07:01.143Z","type":"message"}
{"nick":"zsoc","message":"looks like it uses static getters","date":"2017-07-02T01:07:06.117Z","type":"message"}
{"nick":"ovsh","message":"i does","date":"2017-07-02T01:07:12.627Z","type":"message"}
{"nick":"ovsh","message":"it*","date":"2017-07-02T01:07:13.671Z","type":"message"}
{"nick":"zsoc","message":"static get allProjects()","date":"2017-07-02T01:07:17.273Z","type":"message"}
{"nick":"zsoc","message":"nope, n/m","date":"2017-07-02T01:07:42.750Z","type":"message"}
{"nick":"ovsh","message":"and what would be inside that?","date":"2017-07-02T01:07:47.158Z","type":"message"}
{"nick":"f32","message":"zsoc: i would say its not soo common","date":"2017-07-02T01:07:48.364Z","type":"message"}
{"nick":"zsoc","message":"never do that, the es6~ allows you not to use getters, luckily lol","date":"2017-07-02T01:07:53.541Z","type":"message"}
{"nick":"ovsh","message":"the same shit we wrote?","date":"2017-07-02T01:07:54.650Z","type":"message"}
{"nick":"zsoc","message":"ovsh: i'm still reading.. this is the ... 8th minute into Objection for me :p","date":"2017-07-02T01:08:08.289Z","type":"message"}
{"nick":"ovsh","message":"LOL","date":"2017-07-02T01:08:12.532Z","type":"message"}
{"nick":"ovsh","message":":D","date":"2017-07-02T01:08:13.161Z","type":"message"}
{"nick":"dbclk","date":"2017-07-02T01:08:28.635Z","type":"join"}
{"nick":"zsoc","message":"ovsh: so you would create a relation mapping of projects on the User model","date":"2017-07-02T01:08:40.330Z","type":"message"}
{"nick":"zsoc","message":"so User.projects would have all of that users projects. So you would just get the user and you'd have the projects exposed","date":"2017-07-02T01:08:55.554Z","type":"message"}
{"nick":"ovsh","message":"I did create a relation mapping, zsoc","date":"2017-07-02T01:09:33.534Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/79a563dc2f43fbe9edd60c55f855f014","date":"2017-07-02T01:09:41.698Z","type":"message"}
{"nick":"ovsh","message":"its in the previous gist","date":"2017-07-02T01:09:43.592Z","type":"message"}
{"nick":"ovsh","message":"so you would just add","date":"2017-07-02T01:09:45.442Z","type":"message"}
{"nick":"zsoc","message":"sry, looking now","date":"2017-07-02T01:09:51.897Z","type":"message"}
{"nick":"zsoc","message":"ovsh: ok, first thing is go back to the docs where you found that example and scroll down a little to \"ES Next:\" and use that version","date":"2017-07-02T01:10:26.922Z","type":"message"}
{"nick":"deltab","message":"btw, there's a convention of using # when referring to an instance method:  User#getAllProjects  means  (some instance of User).getAllProjects","date":"2017-07-02T01:10:27.726Z","type":"message"}
{"nick":"zsoc","message":"es5 getters are evil","date":"2017-07-02T01:10:31.460Z","type":"message"}
{"nick":"zsoc","message":"yes prototype methods.. sry i'm being lazy","date":"2017-07-02T01:10:47.852Z","type":"message"}
{"nick":"ovsh","message":"deltab, thanks","date":"2017-07-02T01:11:02.688Z","type":"message"}
{"nick":"deltab","message":"as distinct from User.getAllProjects, a method of User itself","date":"2017-07-02T01:11:03.733Z","type":"message"}
{"nick":"ovsh","message":"gotcha","date":"2017-07-02T01:11:10.930Z","type":"message"}
{"nick":"ovsh","message":"zsoc, so here's one problem","date":"2017-07-02T01:11:19.837Z","type":"message"}
{"nick":"ovsh","message":"I can't use ES Next:","date":"2017-07-02T01:11:26.010Z","type":"message"}
{"nick":"ovsh","message":":x","date":"2017-07-02T01:11:26.847Z","type":"message"}
{"nick":"ovsh","message":"it errors out, so I guess I'm not running any transpiler on my server code?","date":"2017-07-02T01:11:36.050Z","type":"message"}
{"nick":"zsoc","message":"huh?","date":"2017-07-02T01:11:59.420Z","type":"message"}
{"nick":"shesek","reason":"Ping timeout: 268 seconds","date":"2017-07-02T01:12:08.765Z","type":"quit"}
{"nick":"zsoc","message":"what is your output for node -v","date":"2017-07-02T01:12:11.971Z","type":"message"}
{"nick":"deltab","message":"what is the error message?","date":"2017-07-02T01:12:22.484Z","type":"message"}
{"nick":"ovsh","message":"v6.3.1","date":"2017-07-02T01:12:23.792Z","type":"message"}
{"nick":"zsoc","message":"no it'll work","date":"2017-07-02T01:12:28.491Z","type":"message"}
{"nick":"ovsh","message":"it didnt","date":"2017-07-02T01:12:31.273Z","type":"message"}
{"nick":"zsoc","message":"gist the error :p","date":"2017-07-02T01:12:37.609Z","type":"message"}
{"nick":"ovsh","message":"that's why I'm using getters","date":"2017-07-02T01:12:37.818Z","type":"message"}
{"nick":"ovsh","message":"1 sec","date":"2017-07-02T01:12:39.939Z","type":"message"}
{"nick":"iffraff1","reason":"Ping timeout: 240 seconds","date":"2017-07-02T01:12:49.529Z","type":"quit"}
{"nick":"deltab","message":"\"there was an error\" is not usually enough to work out what went wrong","date":"2017-07-02T01:12:56.628Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/4e9bd79a4521b9bb17ba8f4e9955700f","date":"2017-07-02T01:14:29.821Z","type":"message"}
{"nick":"ovsh","message":"deltab, zsoc ^","date":"2017-07-02T01:14:32.686Z","type":"message"}
{"nick":"ovsh","message":"error on bottom","date":"2017-07-02T01:14:48.121Z","type":"message"}
{"nick":"deltab","message":"thanks","date":"2017-07-02T01:15:02.881Z","type":"message"}
{"nick":"zsoc","message":"uhm.. i'm afraid to ask","date":"2017-07-02T01:15:17.021Z","type":"message"}
{"nick":"ovsh","message":":X","date":"2017-07-02T01:15:20.565Z","type":"message"}
{"nick":"jfhbrook","message":"do objects support assignments in there like that?","date":"2017-07-02T01:15:22.293Z","type":"message"}
{"nick":"zsoc","message":"why is the error happening in vm.js ?","date":"2017-07-02T01:15:26.816Z","type":"message"}
{"nick":"zsoc","message":"jfhbrook: es6 getters","date":"2017-07-02T01:15:35.855Z","type":"message"}
{"nick":"jfhbrook","message":"no not the getters","date":"2017-07-02T01:15:43.061Z","type":"message"}
{"nick":"deltab","message":"it's not-yet standardized syntax?","date":"2017-07-02T01:15:46.582Z","type":"message"}
{"nick":"jfhbrook","message":"not static get whatever() {","date":"2017-07-02T01:15:50.900Z","type":"message"}
{"nick":"jfhbrook","message":"static whatever = {","date":"2017-07-02T01:15:54.826Z","type":"message"}
{"nick":"ovsh","message":"static get whatever() { works","date":"2017-07-02T01:15:57.634Z","type":"message"}
{"nick":"jfhbrook","message":"that ^","date":"2017-07-02T01:15:58.696Z","type":"message"}
{"nick":"ovsh","message":"whatever = { fails","date":"2017-07-02T01:16:00.956Z","type":"message"}
{"nick":"zsoc","message":"right, members, static members","date":"2017-07-02T01:16:02.833Z","type":"message"}
{"nick":"jfhbrook","message":"I was never able to find a way to do that in js objects, it's one of my major crits of them","date":"2017-07-02T01:16:23.155Z","type":"message"}
{"nick":"zsoc","message":"hmmmm maybe it's not es6 then and i'm crazy","date":"2017-07-02T01:16:33.846Z","type":"message"}
{"nick":"ovsh","message":"so can I stick to the previous?","date":"2017-07-02T01:17:01.650Z","type":"message"}
{"nick":"ovsh","message":"whatever() {","date":"2017-07-02T01:17:04.331Z","type":"message"}
{"nick":"h12o","reason":"Ping timeout: 268 seconds","date":"2017-07-02T01:17:04.795Z","type":"quit"}
{"nick":"zsoc","message":"k","date":"2017-07-02T01:17:09.784Z","type":"message"}
{"nick":"deltab","message":"this? https://github.com/tc39/proposal-class-fields","date":"2017-07-02T01:17:20.264Z","type":"message"}
{"nick":"Qantas94Heavy","reason":"Ping timeout: 248 seconds","date":"2017-07-02T01:17:21.893Z","type":"quit"}
{"nick":"ovsh","message":"I call you all the IRC gods from temple node.js","date":"2017-07-02T01:17:23.070Z","type":"message"}
{"nick":"zsoc","message":"deltab: it would seem :/","date":"2017-07-02T01:17:43.151Z","type":"message"}
{"nick":"ovsh","message":"so :x","date":"2017-07-02T01:17:51.628Z","type":"message"}
{"nick":"joukov","reason":"Quit: leaving","date":"2017-07-02T01:17:54.015Z","type":"quit"}
{"nick":"ovsh","message":"how do I do that nice User.getAllProjects","date":"2017-07-02T01:18:00.073Z","type":"message"}
{"nick":"zsoc","message":"ovsh: so anyway, put back the getter for relationMappings","date":"2017-07-02T01:18:04.120Z","type":"message"}
{"nick":"zsoc","message":"it would *seem* you don't have to do anything","date":"2017-07-02T01:18:08.579Z","type":"message"}
{"nick":"zsoc","message":"as you already have the relation defined","date":"2017-07-02T01:18:14.101Z","type":"message"}
{"nick":"zsoc","message":"(this is the magic part)","date":"2017-07-02T01:18:28.517Z","type":"message"}
{"nick":"jiujiu","date":"2017-07-02T01:18:28.689Z","type":"join"}
{"nick":"deltab","message":"User#getAllProjects :-P","date":"2017-07-02T01:18:41.341Z","type":"message"}
{"nick":"ovsh","message":"yeah but","date":"2017-07-02T01:18:50.611Z","type":"message"}
{"nick":"ovsh","message":"LOL","date":"2017-07-02T01:18:51.399Z","type":"message"}
{"nick":"ovsh","message":"what would be inside the definition","date":"2017-07-02T01:18:56.564Z","type":"message"}
{"nick":"deltab","message":"that would have to be defined somewhere, or \"magically\" provided by Model","date":"2017-07-02T01:19:02.554Z","type":"message"}
{"nick":"ovsh","message":"in the Models.js file","date":"2017-07-02T01:19:03.264Z","type":"message"}
{"nick":"zsoc","message":"crap you're right","date":"2017-07-02T01:19:08.957Z","type":"message"}
{"nick":"zsoc","message":"this interfacing is uh.. hmm","date":"2017-07-02T01:19:16.762Z","type":"message"}
{"nick":"joshontheweb","date":"2017-07-02T01:19:22.931Z","type":"join"}
{"nick":"zsoc","message":"deltab: i was expecting the ORM to do magic ORM things... and just like, you know... stuff the projects onto the instance of user for you","date":"2017-07-02T01:19:38.117Z","type":"message"}
{"nick":"deltab","message":"ovsh: you can add a method that returns this.$relatedQuery etc.","date":"2017-07-02T01:19:46.221Z","type":"message"}
{"nick":"ovsh","message":"oh really","date":"2017-07-02T01:19:52.240Z","type":"message"}
{"nick":"ovsh","message":":O","date":"2017-07-02T01:19:53.024Z","type":"message"}
{"nick":"ovsh","message":"that simple?","date":"2017-07-02T01:19:59.402Z","type":"message"}
{"nick":"zsoc","message":"ah there you go","date":"2017-07-02T01:20:00.682Z","type":"message"}
{"nick":"ed209","reason":"Remote host closed the connection","date":"2017-07-02T01:20:00.854Z","type":"quit"}
{"nick":"ed209","date":"2017-07-02T01:20:07.690Z","type":"join"}
{"nick":"deltab","message":"I expect so anyway","date":"2017-07-02T01:20:11.487Z","type":"message"}
{"nick":"zsoc","message":"^ this guy things in orms :p","date":"2017-07-02T01:20:14.451Z","type":"message"}
{"nick":"zsoc","message":"i would hope so","date":"2017-07-02T01:20:16.363Z","type":"message"}
{"nick":"zsoc","message":"*thinks","date":"2017-07-02T01:20:18.658Z","type":"message"}
{"nick":"ovsh","message":"deltab, are you made of fire and orm","date":"2017-07-02T01:20:32.342Z","type":"message"}
{"nick":"deltab","message":"that's the 'extract method' refactoring","date":"2017-07-02T01:21:09.903Z","type":"message"}
{"nick":"ovsh","message":"so ok let me try this magic this.$relatedQuery","date":"2017-07-02T01:21:20.248Z","type":"message"}
{"nick":"ovsh","message":"wait but I'm scared","date":"2017-07-02T01:21:28.521Z","type":"message"}
{"nick":"ovsh","message":"lol","date":"2017-07-02T01:21:29.030Z","type":"message"}
{"nick":"ovsh","message":"I'm going to screw it up","date":"2017-07-02T01:21:32.467Z","type":"message"}
{"nick":"ovsh","message":"ok sure lets see","date":"2017-07-02T01:21:37.827Z","type":"message"}
{"nick":"zsoc","message":"static get related(foo) { return this.$relatedQuery(foo) } ??","date":"2017-07-02T01:21:44.435Z","type":"message"}
{"nick":"deltab","message":"not magic, just defining one method that calls another","date":"2017-07-02T01:21:54.808Z","type":"message"}
{"nick":"h12o","date":"2017-07-02T01:22:21.337Z","type":"join"}
{"nick":"zsoc","message":"feels weird calling that `static` tho... if it ends up on the prototype?","date":"2017-07-02T01:24:00.537Z","type":"message"}
{"nick":"zsoc","message":"maybe that's just the failing of `class` heh","date":"2017-07-02T01:24:06.904Z","type":"message"}
{"nick":"deltab","message":"it wouldn't be static","date":"2017-07-02T01:24:11.563Z","type":"message"}
{"nick":"deltab","message":"you need the instance","date":"2017-07-02T01:24:17.093Z","type":"message"}
{"nick":"ovsh","message":"wait what","date":"2017-07-02T01:24:26.215Z","type":"message"}
{"nick":"ovsh","message":"what am I doing","date":"2017-07-02T01:24:28.304Z","type":"message"}
{"nick":"ovsh","message":"LOL","date":"2017-07-02T01:24:29.352Z","type":"message"}
{"nick":"ovsh","message":"so confused","date":"2017-07-02T01:24:41.156Z","type":"message"}
{"nick":"zsoc","message":"right, so not static","date":"2017-07-02T01:24:43.395Z","type":"message"}
{"nick":"deltab","message":"you can't get projects without a user","date":"2017-07-02T01:24:45.365Z","type":"message"}
{"nick":"deltab","message":"well, not limited to that user","date":"2017-07-02T01:25:07.839Z","type":"message"}
{"nick":"zsoc","message":"hmmmmm","date":"2017-07-02T01:25:16.084Z","type":"message"}
{"nick":"ovsh","message":"it doesnt work, one sec","date":"2017-07-02T01:25:16.887Z","type":"message"}
{"nick":"ovsh","message":"\"getter should have no params\"","date":"2017-07-02T01:25:26.903Z","type":"message"}
{"nick":"zsoc","message":"so there's already $relatedQuery() that does that","date":"2017-07-02T01:25:29.323Z","type":"message"}
{"nick":"ovsh","message":"I removed the static keyword","date":"2017-07-02T01:25:30.313Z","type":"message"}
{"nick":"zsoc","message":"so adding another getting is pointless heh","date":"2017-07-02T01:25:33.971Z","type":"message"}
{"nick":"zsoc","message":"it's the same thing","date":"2017-07-02T01:25:36.298Z","type":"message"}
{"nick":"ovsh","message":"x_x","date":"2017-07-02T01:25:47.956Z","type":"message"}
{"nick":"ovsh","message":"im dead","date":"2017-07-02T01:25:50.059Z","type":"message"}
{"nick":"ovsh","message":"so I still need a User.query()","date":"2017-07-02T01:25:59.756Z","type":"message"}
{"nick":"ovsh","message":"and then I still need to .$relatedQuery","date":"2017-07-02T01:26:07.275Z","type":"message"}
{"nick":"ovsh","message":"and I still need to fetch 1 single person?","date":"2017-07-02T01:26:13.189Z","type":"message"}
{"nick":"jiujiu","reason":"Remote host closed the connection","date":"2017-07-02T01:26:21.350Z","type":"quit"}
{"nick":"zsoc","message":"okay so.. so.. you could add a static method where you give the user id only","date":"2017-07-02T01:26:22.825Z","type":"message"}
{"nick":"ovsh","message":"a la --> https://gist.github.com/jkantr/fab515bd7635e08d0c7e68bc9fa5717f","date":"2017-07-02T01:26:26.227Z","type":"message"}
{"nick":"zsoc","message":"and get back the projects for that user","date":"2017-07-02T01:26:29.000Z","type":"message"}
{"nick":"ovsh","message":"how?","date":"2017-07-02T01:26:33.191Z","type":"message"}
{"nick":"ovsh","message":"I cant get the syntax right","date":"2017-07-02T01:26:41.038Z","type":"message"}
{"nick":"chipping","reason":"Ping timeout: 248 seconds","date":"2017-07-02T01:26:57.593Z","type":"quit"}
{"nick":"ovsh","message":"\"this is a reserved keyword\"","date":"2017-07-02T01:27:18.925Z","type":"message"}
{"nick":"ovsh","message":"rip","date":"2017-07-02T01:27:19.555Z","type":"message"}
{"nick":"zsoc","message":"er.. static getters can't have params? alright","date":"2017-07-02T01:27:34.919Z","type":"message"}
{"nick":"zsoc","message":"why do orms exist again","date":"2017-07-02T01:27:38.152Z","type":"message"}
{"nick":"deltab","message":"getters can't have parameters: where would they get their values?","date":"2017-07-02T01:28:12.470Z","type":"message"}
{"nick":"zsoc","message":"you're right lol","date":"2017-07-02T01:28:19.381Z","type":"message"}
{"nick":"deltab","message":"x = y.z","date":"2017-07-02T01:28:26.121Z","type":"message"}
{"nick":"ovsh","message":"so what do I do","date":"2017-07-02T01:28:29.912Z","type":"message"}
{"nick":"deltab","message":"delete \"foo\"","date":"2017-07-02T01:28:40.887Z","type":"message"}
{"nick":"myndzi","message":"function get(arg) { return arg; }","date":"2017-07-02T01:28:42.980Z","type":"message"}
{"nick":"myndzi","message":":V","date":"2017-07-02T01:28:43.919Z","type":"message"}
{"nick":"ovsh","message":"but it complains about this being a reserved keyword too","date":"2017-07-02T01:29:04.120Z","type":"message"}
{"nick":"deltab","message":"just make it getProjects, a normal instance method","date":"2017-07-02T01:29:27.898Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/79a563dc2f43fbe9edd60c55f855f014","date":"2017-07-02T01:29:33.682Z","type":"message"}
{"nick":"zsoc","message":"deltab: but then that is the same as doing .$relatedQuery('projects') .. he hasn't made anything easier :p","date":"2017-07-02T01:29:55.712Z","type":"message"}
{"nick":"chipping","date":"2017-07-02T01:30:09.996Z","type":"join"}
{"nick":"deltab","message":"right","date":"2017-07-02T01:30:11.532Z","type":"message"}
{"nick":"ovsh","message":"x_x","date":"2017-07-02T01:30:44.525Z","type":"message"}
{"nick":"ovsh","message":"deltab, sorry to be a pain in the ass","date":"2017-07-02T01:30:48.425Z","type":"message"}
{"nick":"ovsh","message":"but could you show me how to write what you're saying","date":"2017-07-02T01:30:56.379Z","type":"message"}
{"nick":"ovsh","message":"on a gist?","date":"2017-07-02T01:30:58.867Z","type":"message"}
{"nick":"ovsh","message":"Im super confused at this point","date":"2017-07-02T01:31:05.152Z","type":"message"}
{"nick":"ovsh","message":"this is what I have (L21-L25) and its super wrong","date":"2017-07-02T01:31:25.277Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/79a563dc2f43fbe9edd60c55f855f014","date":"2017-07-02T01:31:28.277Z","type":"message"}
{"nick":"zsoc","message":"ovsh: what he is saying would make your code look exactly the same, except instead of person.$relatedQuery(\"projects\") you'd have person.allProjects()","date":"2017-07-02T01:31:30.121Z","type":"message"}
{"nick":"deltab","message":"yeah","date":"2017-07-02T01:31:39.203Z","type":"message"}
{"nick":"zsoc","message":"the issue you had was the nesting of the promise and what not","date":"2017-07-02T01:31:45.974Z","type":"message"}
{"nick":"ovsh","message":"its still complaining about the \"this\"","date":"2017-07-02T01:32:03.444Z","type":"message"}
{"nick":"h12o","reason":"Ping timeout: 255 seconds","date":"2017-07-02T01:32:04.050Z","type":"quit"}
{"nick":"ovsh","message":"and I cant put params inside the static thing","date":"2017-07-02T01:32:11.735Z","type":"message"}
{"nick":"zsoc","message":"ovsh: yeah scrap the whole idea of the static getter","date":"2017-07-02T01:32:15.090Z","type":"message"}
{"nick":"ovsh","message":"zsoc, and do what instead","date":"2017-07-02T01:32:24.750Z","type":"message"}
{"nick":"ovsh","message":"just method()","date":"2017-07-02T01:32:29.091Z","type":"message"}
{"nick":"ovsh","message":"no static no get","date":"2017-07-02T01:32:36.575Z","type":"message"}
{"nick":"cagedwisdom","date":"2017-07-02T01:32:38.521Z","type":"join"}
{"nick":"deltab","message":"or not bother with it at all","date":"2017-07-02T01:32:50.790Z","type":"message"}
{"nick":"ovsh","message":"also why does objectionjs return evertyhing as a god damn array","date":"2017-07-02T01:33:05.666Z","type":"message"}
{"nick":"ovsh","message":"is there a way to fix it","date":"2017-07-02T01:33:08.234Z","type":"message"}
{"nick":"zsoc","message":"that's not objection","date":"2017-07-02T01:33:24.841Z","type":"message"}
{"nick":"zsoc","message":"that's `pg`","date":"2017-07-02T01:33:30.718Z","type":"message"}
{"nick":"ovsh","message":"oh","date":"2017-07-02T01:33:40.481Z","type":"message"}
{"nick":"deltab","message":"when you do a query? there can be multiple records returned in the result","date":"2017-07-02T01:33:40.752Z","type":"message"}
{"nick":"zsoc","message":"and if you limit(1) i think you get either an object or -1","date":"2017-07-02T01:33:45.772Z","type":"message"}
{"nick":"zsoc","message":"or maybe null","date":"2017-07-02T01:33:47.762Z","type":"message"}
{"nick":"ovsh","message":"ok","date":"2017-07-02T01:33:56.152Z","type":"message"}
{"nick":"ovsh","message":"so this relation stuff is dumb","date":"2017-07-02T01:34:01.043Z","type":"message"}
{"nick":"ovsh","message":"I mean","date":"2017-07-02T01:34:04.324Z","type":"message"}
{"nick":"ovsh","message":"not helfup","date":"2017-07-02T01:34:06.800Z","type":"message"}
{"nick":"ovsh","message":"in this context","date":"2017-07-02T01:34:08.255Z","type":"message"}
{"nick":"deltab","message":"if nothing matches, you get an empty array","date":"2017-07-02T01:34:09.804Z","type":"message"}
{"nick":"ovsh","message":"helpful","date":"2017-07-02T01:34:10.495Z","type":"message"}
{"nick":"zsoc","message":"ovsh: here's an example of how an ORM helps here... you define getOne on Users to do the query with limit(1), then you define allProjects as an instance method and then your code looks more sane in your route (in theory)","date":"2017-07-02T01:34:46.105Z","type":"message"}
{"nick":"ovsh","message":"oh","date":"2017-07-02T01:35:13.645Z","type":"message"}
{"nick":"ovsh","message":"so it would be","date":"2017-07-02T01:35:21.982Z","type":"message"}
{"nick":"ovsh","message":"Users.getOne(id).allProjects()?","date":"2017-07-02T01:35:38.760Z","type":"message"}
{"nick":"zsoc","message":"nah, cos promise :p","date":"2017-07-02T01:35:52.754Z","type":"message"}
{"nick":"ovsh","message":"._____________________.","date":"2017-07-02T01:35:58.550Z","type":"message"}
{"nick":"deltab","message":"it can return a promise","date":"2017-07-02T01:36:01.287Z","type":"message"}
{"nick":"ovsh","message":"what does that mean","date":"2017-07-02T01:36:02.465Z","type":"message"}
{"nick":"zsoc","message":"There's probably a way to do that","date":"2017-07-02T01:36:08.001Z","type":"message"}
{"nick":"zsoc","message":"in objection","date":"2017-07-02T01:36:11.343Z","type":"message"}
{"nick":"zsoc","message":"but lord knows what it is","date":"2017-07-02T01:36:14.069Z","type":"message"}
{"nick":"ovsh","message":"so how would it be based on what you wrote above","date":"2017-07-02T01:36:15.366Z","type":"message"}
{"nick":"ovsh","message":"the \"example\"","date":"2017-07-02T01:36:21.424Z","type":"message"}
{"nick":"zsoc","message":"Users.getOne(id).then(user => user.allProjects).then(projects => res.json(projects))","date":"2017-07-02T01:36:48.225Z","type":"message"}
{"nick":"zsoc","message":"something like that","date":"2017-07-02T01:36:49.646Z","type":"message"}
{"nick":"ovsh","message":"EW","date":"2017-07-02T01:36:56.430Z","type":"message"}
{"nick":"ovsh","message":"should we all just move to python","date":"2017-07-02T01:37:02.522Z","type":"message"}
{"nick":"zsoc","message":"...","date":"2017-07-02T01:37:05.984Z","type":"message"}
{"nick":"ovsh","message":":x","date":"2017-07-02T01:37:08.676Z","type":"message"}
{"nick":"ovsh","message":"or not","date":"2017-07-02T01:37:11.946Z","type":"message"}
{"nick":"zsoc","action":"doesn't think that's so bad","date":"2017-07-02T01:37:13.117Z","type":"action"}
{"nick":"zsoc","message":"uh, upgrade to node 8 and use async/await?","date":"2017-07-02T01:37:20.394Z","type":"message"}
{"nick":"quakephil","reason":"Ping timeout: 260 seconds","date":"2017-07-02T01:37:40.629Z","type":"quit"}
{"nick":"ovsh","message":"I feel javascript fatigue","date":"2017-07-02T01:37:42.898Z","type":"message"}
{"nick":"zsoc","message":"const user = await Users.getOne(id); const projects = await user.allProjects(); res.json(projects); ?","date":"2017-07-02T01:37:52.057Z","type":"message"}
{"nick":"zsoc","message":"that's uglier to me but w/e :p","date":"2017-07-02T01:38:09.732Z","type":"message"}
{"nick":"h12o","date":"2017-07-02T01:38:15.685Z","type":"join"}
{"nick":"ovsh","message":"x_x","date":"2017-07-02T01:38:19.773Z","type":"message"}
{"nick":"zsoc","message":"there's a section in objection docs called \"recipes\", have you checked that out?","date":"2017-07-02T01:38:29.772Z","type":"message"}
{"nick":"ovsh","message":"nope?","date":"2017-07-02T01:38:37.393Z","type":"message"}
{"nick":"ovsh","message":"looking now","date":"2017-07-02T01:39:13.748Z","type":"message"}
{"nick":"horsey","date":"2017-07-02T01:39:25.031Z","type":"join"}
{"nick":"visualshock","reason":"Ping timeout: 260 seconds","date":"2017-07-02T01:39:32.457Z","type":"quit"}
{"nick":"zsoc","message":"ovsh: ah this section lets you patch a method like getOne onto the query builder: https://github.com/Vincit/objection.js/blob/master/doc/includes/RECIPES.md#custom-query-builder","date":"2017-07-02T01:40:27.820Z","type":"message"}
{"nick":"zsoc","message":"object really does have very little magic.. it's true to its word :p","date":"2017-07-02T01:41:00.435Z","type":"message"}
{"nick":"zsoc","message":"*objection","date":"2017-07-02T01:41:03.731Z","type":"message"}
{"nick":"mezod","reason":"Remote host closed the connection","date":"2017-07-02T01:41:45.368Z","type":"quit"}
{"nick":"ovsh","message":"oh wow","date":"2017-07-02T01:41:47.490Z","type":"message"}
{"nick":"eshlox","reason":"Quit: Connection closed for inactivity","date":"2017-07-02T01:41:48.601Z","type":"quit"}
{"nick":"ovsh","message":"interesting","date":"2017-07-02T01:41:51.569Z","type":"message"}
{"nick":"SrPx","date":"2017-07-02T01:42:49.157Z","type":"join"}
{"nick":"SrPx","message":"What is the state-of-art way to compile some native C code and run it in a browser?","date":"2017-07-02T01:43:33.043Z","type":"message"}
{"nick":"SrPx","message":"fastly","date":"2017-07-02T01:43:39.588Z","type":"message"}
{"nick":"deltab","message":"webassembly","date":"2017-07-02T01:43:46.599Z","type":"message"}
{"nick":"deltab","message":"'native'?","date":"2017-07-02T01:44:17.479Z","type":"message"}
{"nick":"horsey","reason":"Ping timeout: 276 seconds","date":"2017-07-02T01:44:19.674Z","type":"quit"}
{"nick":"SrPx","message":"deltab: webassembly is already working on browsers? It has been a while since I looked it... in any case, I googled and couldn't find a C->wasm compiler, am I missing something?","date":"2017-07-02T01:44:58.694Z","type":"message"}
{"nick":"af92","date":"2017-07-02T01:44:59.638Z","type":"join"}
{"nick":"deltab","message":"if you want to call native code it'll need to be a browser extension","date":"2017-07-02T01:45:03.863Z","type":"message"}
{"nick":"SrPx","message":"deltab: risk the native word","date":"2017-07-02T01:45:09.235Z","type":"message"}
{"nick":"af92","date":"2017-07-02T01:45:16.506Z","type":"part"}
{"nick":"SrPx","message":"deltab: no idea why I said it","date":"2017-07-02T01:45:18.596Z","type":"message"}
{"nick":"anji","date":"2017-07-02T01:45:29.462Z","type":"join"}
{"nick":"deltab","message":"web assembly is pretty new","date":"2017-07-02T01:45:42.922Z","type":"message"}
{"nick":"SrPx","message":"I just want to run a C program that is very fast on my machine on the browser... I heard asm.js/wasm are almost as fast as native code nowadays. Just couldn't find what compiler the guy was talking about","date":"2017-07-02T01:45:55.806Z","type":"message"}
{"nick":"h12o","reason":"Ping timeout: 276 seconds","date":"2017-07-02T01:46:16.688Z","type":"quit"}
{"nick":"deltab","message":"http://webassembly.org/getting-started/developers-guide/","date":"2017-07-02T01:46:28.254Z","type":"message"}
{"nick":"SourcePhoenix","reason":"Remote host closed the connection","date":"2017-07-02T01:47:29.956Z","type":"quit"}
{"nick":"ovsh","message":"zsoc, I'm adding my nice getOne","date":"2017-07-02T01:47:46.550Z","type":"message"}
{"nick":"ovsh","message":"might need some assitance","date":"2017-07-02T01:47:49.896Z","type":"message"}
{"nick":"ovsh","message":"assistance","date":"2017-07-02T01:47:51.546Z","type":"message"}
{"nick":"ovsh","message":"er","date":"2017-07-02T01:47:52.876Z","type":"message"}
{"nick":"ovsh","message":"yeah","date":"2017-07-02T01:47:53.782Z","type":"message"}
{"nick":"ovsh","message":":x","date":"2017-07-02T01:47:57.458Z","type":"message"}
{"nick":"SrPx","message":"deltab: thanks","date":"2017-07-02T01:49:02.712Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/4e9bd79a4521b9bb17ba8f4e9955700f#file-models-js-L7-L8","date":"2017-07-02T01:50:37.624Z","type":"message"}
{"nick":"ovsh","message":"zsoc,  ^ help? :x","date":"2017-07-02T01:50:41.477Z","type":"message"}
{"nick":"anj","date":"2017-07-02T01:50:57.463Z","type":"join"}
{"nick":"h12o","date":"2017-07-02T01:51:06.124Z","type":"join"}
{"nick":"anji","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2017-07-02T01:51:38.062Z","type":"quit"}
{"nick":"zumba_addict","reason":"Remote host closed the connection","date":"2017-07-02T01:51:56.251Z","type":"quit"}
{"nick":"snowkidind","date":"2017-07-02T01:52:15.676Z","type":"join"}
{"nick":"deltab","message":"maybe  return this.first();","date":"2017-07-02T01:52:20.034Z","type":"message"}
{"nick":"ovsh","message":"deltab, dont you need to .query it first?","date":"2017-07-02T01:52:33.193Z","type":"message"}
{"nick":"ovsh","message":"or do a .where id matches id?","date":"2017-07-02T01:52:45.656Z","type":"message"}
{"nick":"deltab","message":"yes","date":"2017-07-02T01:52:58.587Z","type":"message"}
{"nick":"ovsh","message":"so its not return this.first()?","date":"2017-07-02T01:53:07.731Z","type":"message"}
{"nick":"deltab","message":"you'd want that at the end, I think","date":"2017-07-02T01:53:35.721Z","type":"message"}
{"nick":"zsoc","message":"return this.query().where(\"id\", \"=\", req.user[0].id).first()","date":"2017-07-02T01:53:43.374Z","type":"message"}
{"nick":"ovsh","message":"<3 <3","date":"2017-07-02T01:53:51.805Z","type":"message"}
{"nick":"zsoc","message":"err well","date":"2017-07-02T01:53:53.340Z","type":"message"}
{"nick":"ovsh","message":"OR WELL","date":"2017-07-02T01:53:55.241Z","type":"message"}
{"nick":"ovsh","message":"or well","date":"2017-07-02T01:53:58.036Z","type":"message"}
{"nick":"zsoc","message":"you wo'nt have req in that context lol","date":"2017-07-02T01:53:59.874Z","type":"message"}
{"nick":"ovsh","message":".where(\"id\", \"=\", id)","date":"2017-07-02T01:54:04.721Z","type":"message"}
{"nick":"zsoc","message":"right","date":"2017-07-02T01:54:09.108Z","type":"message"}
{"nick":"ovsh","message":"and id is a param I'm passing","date":"2017-07-02T01:54:09.461Z","type":"message"}
{"nick":"ovsh","message":":D :D :D","date":"2017-07-02T01:54:11.039Z","type":"message"}
{"nick":"ovsh","message":"I'M SO SMART YES","date":"2017-07-02T01:54:13.717Z","type":"message"}
{"nick":"ovsh","message":":D :D","date":"2017-07-02T01:54:14.556Z","type":"message"}
{"nick":"ovsh","message":"zsoc is the god of war","date":"2017-07-02T01:54:18.600Z","type":"message"}
{"nick":"zsoc","action":"blinks","date":"2017-07-02T01:54:22.145Z","type":"action"}
{"nick":"zsoc","message":"i have a different question i'm afraid to ask","date":"2017-07-02T01:54:41.226Z","type":"message"}
{"nick":"ovsh","message":"oh no","date":"2017-07-02T01:54:47.098Z","type":"message"}
{"nick":"zsoc","message":"why is req.user an array","date":"2017-07-02T01:54:48.684Z","type":"message"}
{"nick":"ovsh","message":"yeah that's my question too","date":"2017-07-02T01:54:55.676Z","type":"message"}
{"nick":"ovsh","message":"I'm using passport","date":"2017-07-02T01:55:05.223Z","type":"message"}
{"nick":"zsoc","message":"you fubar'ed serializing your user onto the req object somewhere","date":"2017-07-02T01:55:08.284Z","type":"message"}
{"nick":"zsoc","message":"yeah what does your serialization function look like? :p","date":"2017-07-02T01:55:17.000Z","type":"message"}
{"nick":"ovsh","message":":x","date":"2017-07-02T01:55:21.904Z","type":"message"}
{"nick":"ovsh","message":"you'll hit me with a stick","date":"2017-07-02T01:55:25.091Z","type":"message"}
{"nick":"zsoc","message":"luckily i've not invented such a way to do that through the internet yet","date":"2017-07-02T01:55:38.771Z","type":"message"}
{"nick":"ovsh","action":"gets hit with a stick","date":"2017-07-02T01:55:53.833Z","type":"action"}
{"nick":"ovsh","message":"see","date":"2017-07-02T01:55:54.284Z","type":"message"}
{"nick":"ovsh","message":"1 sec","date":"2017-07-02T01:55:56.118Z","type":"message"}
{"nick":"ovsh","message":"UGH","date":"2017-07-02T01:56:11.572Z","type":"message"}
{"nick":"ovsh","message":"SyntaxError: this is a reserved word (8:14)","date":"2017-07-02T01:56:15.260Z","type":"message"}
{"nick":"ovsh","message":"    return { this.query().where('id', '=', id).first() }","date":"2017-07-02T01:56:24.685Z","type":"message"}
{"nick":"deltab","message":"remove the { and }","date":"2017-07-02T01:56:46.494Z","type":"message"}
{"nick":"ovsh","message":"YAY","date":"2017-07-02T01:57:03.720Z","type":"message"}
{"nick":"ovsh","message":"why do you know this","date":"2017-07-02T01:57:05.636Z","type":"message"}
{"nick":"zsoc","message":"right, that's creating an object literal heh","date":"2017-07-02T01:57:06.194Z","type":"message"}
{"nick":"ovsh","message":"how","date":"2017-07-02T01:57:06.886Z","type":"message"}
{"nick":"zsoc","message":"n> { this: 'foo' }","date":"2017-07-02T01:57:15.582Z","type":"message"}
{"nick":"ovsh","message":"how do I become so smart","date":"2017-07-02T01:57:18.432Z","type":"message"}
{"nick":"babelboot","message":"zsoc: (okay) ^  SyntaxError: Unexpected token : at Object.<anonymous> (/var/ws/eval-js.js:11:26) at Module._compile (module.js:569:30) at Object.Module._extensions..js (module.js:580:10) at Module.load (module.js:503:32) at tryModuleLoa ... https://git.io/vQ0RP","date":"2017-07-02T01:57:19.134Z","type":"message"}
{"nick":"zsoc","action":"blinks","date":"2017-07-02T01:57:29.309Z","type":"action"}
{"nick":"ovsh","message":"zsoc, that wasnt me","date":"2017-07-02T01:57:36.520Z","type":"message"}
{"nick":"ovsh","message":":D","date":"2017-07-02T01:57:37.081Z","type":"message"}
{"nick":"deltab","message":"zsoc is a 'check engine' light","date":"2017-07-02T01:57:44.528Z","type":"message"}
{"nick":"ovsh","message":"zsoc, my serialization is literally seralize(user)","date":"2017-07-02T01:57:46.972Z","type":"message"}
{"nick":"ovsh","message":"so its","date":"2017-07-02T01:58:00.313Z","type":"message"}
{"nick":"zsoc","message":"ovsh: that's more disturbing then that it's an array lol","date":"2017-07-02T01:58:03.753Z","type":"message"}
{"nick":"ovsh","message":"  passport.serializeUser(function(user, done) {","date":"2017-07-02T01:58:06.349Z","type":"message"}
{"nick":"ovsh","message":"    done(null, user); });","date":"2017-07-02T01:58:06.521Z","type":"message"}
{"nick":"ovsh","message":"should I do a user[0].id?","date":"2017-07-02T01:58:18.566Z","type":"message"}
{"nick":"zsoc","message":"so then the problem isn't in serialization :p","date":"2017-07-02T01:58:23.061Z","type":"message"}
{"nick":"deltab","message":"how is user obtained?","date":"2017-07-02T01:58:26.912Z","type":"message"}
{"nick":"zsoc","message":"can you gist your local strategy","date":"2017-07-02T01:58:33.707Z","type":"message"}
{"nick":"deltab","message":"from a database query?","date":"2017-07-02T01:58:37.527Z","type":"message"}
{"nick":"zsoc","message":"yes","date":"2017-07-02T01:58:40.552Z","type":"message"}
{"nick":"zsoc","message":"he's likely doing the same thing","date":"2017-07-02T01:58:43.701Z","type":"message"}
{"nick":"ovsh","message":"I dont have a local strategy","date":"2017-07-02T01:58:44.443Z","type":"message"}
{"nick":"ovsh","message":"just linkedin","date":"2017-07-02T01:58:45.540Z","type":"message"}
{"nick":"zsoc","message":"where he gets the User and ... oh","date":"2017-07-02T01:58:48.967Z","type":"message"}
{"nick":"ovsh","message":"but yeah","date":"2017-07-02T01:58:54.766Z","type":"message"}
{"nick":"ovsh","message":"done(null, user)","date":"2017-07-02T01:58:58.227Z","type":"message"}
{"nick":"zsoc","message":"yeah don't fix it there, fix it .. there ^","date":"2017-07-02T01:59:04.478Z","type":"message"}
{"nick":"zsoc","message":"done(null, user[0]) :p","date":"2017-07-02T01:59:12.017Z","type":"message"}
{"nick":"ovsh","message":"https://gist.github.com/ovsh/9513ed233e10c447ece18aa134fa37c0","date":"2017-07-02T01:59:12.764Z","type":"message"}
{"nick":"ovsh","message":"this","date":"2017-07-02T01:59:16.041Z","type":"message"}
{"nick":"ovsh","message":"D:","date":"2017-07-02T01:59:18.512Z","type":"message"}
{"nick":"zsoc","message":"or preferably before that when you check to validate it lol","date":"2017-07-02T01:59:18.975Z","type":"message"}
{"nick":"zsoc","message":"ovsh: https://gist.github.com/ovsh/9513ed233e10c447ece18aa134fa37c0#file-passport-js-L36","date":"2017-07-02T01:59:47.555Z","type":"message"}
{"nick":"zsoc","message":"same thing, you have 'user' but really that query is returning 'users', plural, heh","date":"2017-07-02T01:59:59.233Z","type":"message"}
{"nick":"ovsh","message":"gotcha","date":"2017-07-02T02:00:03.080Z","type":"message"}
{"nick":"ovsh","message":"you know whats funny","date":"2017-07-02T02:00:20.993Z","type":"message"}
{"nick":"ovsh","message":"I keep calling you gods","date":"2017-07-02T02:00:24.126Z","type":"message"}
{"nick":"cannap","reason":"Read error: Connection reset by peer","date":"2017-07-02T02:00:27.567Z","type":"quit"}
{"nick":"ovsh","message":"but you find bugs in my code in places I haven't even asked you about","date":"2017-07-02T02:00:35.255Z","type":"message"}
{"nick":"zsoc","message":"change 35 to like .then(users => done(null, users[0]) and then stop doing [0] everywhere else in your entire code base","date":"2017-07-02T02:00:35.458Z","type":"message"}
{"nick":"ovsh","message":"so you have to have superpowers","date":"2017-07-02T02:00:47.015Z","type":"message"}
{"nick":"deltab","message":"pattern matching","date":"2017-07-02T02:00:54.864Z","type":"message"}
{"nick":"zsoc","message":"we've just seen the same mistakes 800,000,000 times","date":"2017-07-02T02:00:59.115Z","type":"message"}
{"nick":"deltab","message":"you have a bug where you have an array instead of a single object","date":"2017-07-02T02:01:10.202Z","type":"message"}
{"nick":"sbellina","date":"2017-07-02T02:01:19.686Z","type":"join"}
{"nick":"deltab","message":"and you complained about queries returning arrays","date":"2017-07-02T02:01:42.564Z","type":"message"}
{"nick":"deltab","message":"and your code earlier didn't extract a single user object","date":"2017-07-02T02:02:11.021Z","type":"message"}
{"nick":"deltab","message":"so, likely the same thing again","date":"2017-07-02T02:02:25.687Z","type":"message"}
{"nick":"ovsh","message":":x","date":"2017-07-02T02:02:35.548Z","type":"message"}
{"nick":"ovsh","message":"thank you","date":"2017-07-02T02:02:38.902Z","type":"message"}
{"nick":"ovsh","message":"I will sacrifice a goat in your name","date":"2017-07-02T02:02:44.278Z","type":"message"}
{"nick":"ovsh","message":"I also want to understand errors","date":"2017-07-02T02:03:26.585Z","type":"message"}
{"nick":"ovsh","message":"and whats the best way to maintain errors","date":"2017-07-02T02:03:30.878Z","type":"message"}
{"nick":"ovsh","message":"and how to send them","date":"2017-07-02T02:03:32.886Z","type":"message"}
{"nick":"ovsh","message":"but that will be for a different day","date":"2017-07-02T02:03:37.335Z","type":"message"}
{"nick":"ovsh","message":"my brain cant process a single more bit","date":"2017-07-02T02:03:43.226Z","type":"message"}
{"nick":"nya","reason":"Remote host closed the connection","date":"2017-07-02T02:04:03.250Z","type":"quit"}
{"nick":"anj","message":"Let's say I'm designing a service that works like a very simplified Shopify/Wordpress/Wix, where people buy a domain name and I host a site for them. In reality all sites hosted would be served on demand from a single Express server. How do I differentiate which site to render via the domain name that they are accessing? Obviously if I'm doing something like https://AnjsExpressSite/client site, I can just use a router to figure out","date":"2017-07-02T02:06:18.986Z","type":"message"}
{"nick":"anj","message":" which site to render, what database to connect to, etc. How do I do it with custom domain names? The same as before but point the DNS record to it?","date":"2017-07-02T02:06:19.177Z","type":"message"}
{"nick":"zsoc","message":"there's a lot of ways to do that... in fact there's some express middleware called uh virtualhost or something?","date":"2017-07-02T02:07:55.189Z","type":"message"}
{"nick":"zsoc","message":"not saying that's the best way to do it","date":"2017-07-02T02:08:00.332Z","type":"message"}
{"nick":"deltab","message":"req.hostname","date":"2017-07-02T02:09:33.579Z","type":"message"}
{"nick":"deltab","message":"when a browser requests a page, it does a DNS query on the hostname to get an IP address, connects to that address, and sends an HTTP request with the hostname in the Host header","date":"2017-07-02T02:11:27.972Z","type":"message"}
{"nick":"f32","message":"hey all, trying to run nodemon as a local package","date":"2017-07-02T02:11:49.895Z","type":"message"}
{"nick":"deltab","message":"so you just need to get that hostname and look up which site to serve","date":"2017-07-02T02:12:03.947Z","type":"message"}
{"nick":"anj","message":"deltab, That makes sense.","date":"2017-07-02T02:12:19.913Z","type":"message"}
{"nick":"f32","message":"can't seem to target the thing, can't find the package \"graceful-fs\"","date":"2017-07-02T02:12:23.813Z","type":"message"}
{"nick":"milardovich","date":"2017-07-02T02:12:51.847Z","type":"join"}
{"nick":"f32","message":"so, when i run nodemon as a global package, don't have a problem, running local, yeah, can't find this \"graceful-fs\" package","date":"2017-07-02T02:13:00.067Z","type":"message"}
{"nick":"f32","message":"is it reasonable to install packages global like i have always done?","date":"2017-07-02T02:13:14.454Z","type":"message"}
{"nick":"star_prone","date":"2017-07-02T02:14:45.684Z","type":"join"}
{"nick":"deltab","message":"that's only for command-line tools, aiui","date":"2017-07-02T02:14:48.891Z","type":"message"}
{"nick":"f32","message":"deltab: ljharb suggests i should be installed command line tools as local packages","date":"2017-07-02T02:15:10.720Z","type":"message"}
{"nick":"f32","message":"*installing","date":"2017-07-02T02:15:17.858Z","type":"message"}
{"nick":"deltab","message":"he knows more about it than I do","date":"2017-07-02T02:15:30.493Z","type":"message"}
{"nick":"kalkulator","reason":"Quit: http://www.kiwiirc.com/ - A hand crafted IRC client","date":"2017-07-02T02:15:41.036Z","type":"quit"}
{"nick":"f32","message":"deltab: fwiw, installing the typescript compiler as a dev dep is fine, but yeah, nodemon seems to have some problem with this this graceful-fs thing","date":"2017-07-02T02:16:58.414Z","type":"message"}
{"nick":"milardovich","reason":"Ping timeout: 240 seconds","date":"2017-07-02T02:17:19.466Z","type":"quit"}
{"nick":"kalkulator","date":"2017-07-02T02:17:21.523Z","type":"join"}
{"nick":"wrkrcoop","reason":"Quit: wrkrcoop","date":"2017-07-02T02:18:26.013Z","type":"quit"}
{"nick":"deltab","message":"what can't find it? what's the exact message?","date":"2017-07-02T02:18:51.531Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 276 seconds","date":"2017-07-02T02:19:25.676Z","type":"quit"}
{"nick":"iffraff1","date":"2017-07-02T02:20:31.457Z","type":"join"}
{"nick":"watersoul","reason":"Ping timeout: 240 seconds","date":"2017-07-02T02:20:49.505Z","type":"quit"}
{"nick":"kalkulator","reason":"Client Quit","date":"2017-07-02T02:21:37.496Z","type":"quit"}
{"nick":"malcolm1","date":"2017-07-02T02:21:56.455Z","type":"join"}
{"nick":"malcolm1","message":"hi UnhandledPromiseRejectionWarning is impossible to debug. it doesn't give you line number just error message. exmaple: Unhandled promise rejection (rejection id: 2): TypeError: Cannot read property 'oauth_token' of undefined","date":"2017-07-02T02:22:42.248Z","type":"message"}
{"nick":"zsoc","message":"malcolm1: yep, this is true","date":"2017-07-02T02:23:19.868Z","type":"message"}
{"nick":"zsoc","message":"it's because there's huge overhead associated with the necessary steps to give stack traces of async stuff","date":"2017-07-02T02:23:41.961Z","type":"message"}
{"nick":"zsoc","message":"Bluebird does it tho (by default i believe in dev environment)","date":"2017-07-02T02:24:03.998Z","type":"message"}
{"nick":"zsoc","message":"malcolm1: but.. try running your application with --trace-warnings flag","date":"2017-07-02T02:24:38.293Z","type":"message"}
{"nick":"samsch","reason":"Quit: Leaving","date":"2017-07-02T02:24:52.268Z","type":"quit"}
{"nick":"b0x","reason":"Ping timeout: 268 seconds","date":"2017-07-02T02:24:54.865Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T02:25:13.547Z","type":"join"}
{"nick":"zsoc","message":"malcolm1: otherwise (and maybe 'and') add a custom handler only for development: process.on('unhandledRejection', r => console.log(r));","date":"2017-07-02T02:25:21.059Z","type":"message"}
{"nick":"joepie91","message":"yeah, --trace-warnings is the thing here","date":"2017-07-02T02:25:34.048Z","type":"message"}
{"nick":"malcolm1","message":"yes trace warnings flag worked perfectly, thanks a lot","date":"2017-07-02T02:28:46.486Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 248 seconds","date":"2017-07-02T02:29:53.525Z","type":"quit"}
{"nick":"h12o","reason":"Ping timeout: 260 seconds","date":"2017-07-02T02:31:28.139Z","type":"quit"}
{"nick":"zerowaitstate","date":"2017-07-02T02:31:53.587Z","type":"join"}
{"nick":"systemfault","date":"2017-07-02T02:33:09.476Z","type":"join"}
{"nick":"HelloMiles","date":"2017-07-02T02:33:50.554Z","type":"join"}
{"nick":"QWERTYZZZASDFASD","date":"2017-07-02T02:34:49.688Z","type":"join"}
{"nick":"sbellina","reason":"Ping timeout: 275 seconds","date":"2017-07-02T02:35:01.697Z","type":"quit"}
{"nick":"SrPx","reason":"Ping timeout: 260 seconds","date":"2017-07-02T02:35:54.983Z","type":"quit"}
{"nick":"duplicated","reason":"Ping timeout: 255 seconds","date":"2017-07-02T02:36:49.908Z","type":"quit"}
{"nick":"mokiwis","date":"2017-07-02T02:36:56.566Z","type":"join"}
{"nick":"h12o","date":"2017-07-02T02:37:37.526Z","type":"join"}
{"nick":"Phloxx","reason":"Ping timeout: 276 seconds","date":"2017-07-02T02:37:37.696Z","type":"quit"}
{"nick":"LeBlaaanc","date":"2017-07-02T02:37:40.594Z","type":"join"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2017-07-02T02:37:50.228Z","type":"quit"}
{"nick":"mokiwis","reason":"Client Quit","date":"2017-07-02T02:38:48.974Z","type":"quit"}
{"nick":"charmander","message":"process.on('unhandledRejection', r => { throw r; })","date":"2017-07-02T02:39:07.455Z","type":"message"}
{"nick":"zsoc","message":"charmander: he's debugging :p i said dev only :ppp","date":"2017-07-02T02:39:29.772Z","type":"message"}
{"nick":"charmander","message":"having unhandled rejections is usually a sign of not using promises far enough though","date":"2017-07-02T02:39:38.686Z","type":"message"}
{"nick":"charmander","message":"zsoc: hm? this ones for dev only too","date":"2017-07-02T02:40:03.856Z","type":"message"}
{"nick":"charmander","message":"it just shows the stack better than console.log","date":"2017-07-02T02:40:18.313Z","type":"message"}
{"nick":"charmander","message":"and causes an exit","date":"2017-07-02T02:40:28.214Z","type":"message"}
{"nick":"zsoc","message":"orly?","date":"2017-07-02T02:40:30.401Z","type":"message"}
{"nick":"zsoc","message":"huh, alright then","date":"2017-07-02T02:40:35.089Z","type":"message"}
{"nick":"Arcaelyx","reason":"Quit: http://radiux.io/","date":"2017-07-02T02:40:44.699Z","type":"quit"}
{"nick":"Phloxx","date":"2017-07-02T02:40:45.683Z","type":"join"}
{"nick":"watersoul","date":"2017-07-02T02:43:06.493Z","type":"join"}
{"nick":"star_prone","date":"2017-07-02T02:43:33.477Z","type":"join"}
{"nick":"smccarthy","date":"2017-07-02T02:43:43.618Z","type":"join"}
{"nick":"watersoul","reason":"Read error: Connection reset by peer","date":"2017-07-02T02:44:40.247Z","type":"quit"}
{"nick":"star_prone","reason":"Read error: Connection reset by peer","date":"2017-07-02T02:44:52.992Z","type":"quit"}
{"nick":"Jen","date":"2017-07-02T02:47:01.447Z","type":"join"}
{"nick":"SourcePhoenix","date":"2017-07-02T02:47:59.134Z","type":"join"}
{"nick":"watersoul","date":"2017-07-02T02:48:11.668Z","type":"join"}
{"nick":"JenElizabeth","reason":"Ping timeout: 240 seconds","date":"2017-07-02T02:50:19.462Z","type":"quit"}
{"nick":"joepie91","message":"charmander: https://www.npmjs.com/package/unhandled-rejection :P","date":"2017-07-02T02:50:44.501Z","type":"message"}
{"nick":"SourcePhoenix","reason":"Ping timeout: 260 seconds","date":"2017-07-02T02:53:03.108Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T02:53:53.484Z","type":"join"}
{"nick":"sysrage","date":"2017-07-02T02:54:16.485Z","type":"join"}
{"nick":"IrishGringo","date":"2017-07-02T02:55:54.684Z","type":"join"}
{"nick":"smccarthy","reason":"Remote host closed the connection","date":"2017-07-02T02:56:26.805Z","type":"quit"}
{"nick":"sysrage_","reason":"Ping timeout: 240 seconds","date":"2017-07-02T02:56:30.399Z","type":"quit"}
{"nick":"ljharb","message":"f32: a lot of people use babel to transpile JS code. also all the conventions i listed apply to *any language* in a node context. typescript is no exception.","date":"2017-07-02T02:57:23.886Z","type":"message"}
{"nick":"Jen","reason":"Read error: Connection reset by peer","date":"2017-07-02T02:57:35.768Z","type":"quit"}
{"nick":"Jen","date":"2017-07-02T02:58:02.040Z","type":"join"}
{"nick":"star_prone","reason":"Ping timeout: 260 seconds","date":"2017-07-02T02:58:24.459Z","type":"quit"}
{"nick":"u0m3","reason":"Ping timeout: 260 seconds","date":"2017-07-02T02:58:53.121Z","type":"quit"}
{"nick":"smccarthy","date":"2017-07-02T02:59:57.843Z","type":"join"}
{"nick":"zivester","date":"2017-07-02T03:00:30.197Z","type":"join"}
{"nick":"u0m3","date":"2017-07-02T03:01:18.975Z","type":"join"}
{"nick":"smccarthy","reason":"Client Quit","date":"2017-07-02T03:01:38.411Z","type":"quit"}
{"nick":"LeBlaaanc","reason":"Quit: My MacBook has gone to sleep. ZZZzzz","date":"2017-07-02T03:02:05.870Z","type":"quit"}
{"nick":"Cabanossi","reason":"Ping timeout: 264 seconds","date":"2017-07-02T03:02:46.281Z","type":"quit"}
{"nick":"Jen","reason":"Read error: Connection reset by peer","date":"2017-07-02T03:03:35.841Z","type":"quit"}
{"nick":"led1","reason":"Remote host closed the connection","date":"2017-07-02T03:03:48.038Z","type":"quit"}
{"nick":"Jen","date":"2017-07-02T03:04:02.044Z","type":"join"}
{"nick":"led1","date":"2017-07-02T03:04:03.598Z","type":"join"}
{"nick":"Cabanossi","date":"2017-07-02T03:04:12.074Z","type":"join"}
{"nick":"f32","message":"ljharb: want to help me work out a ideal project layout / structure?","date":"2017-07-02T03:06:45.429Z","type":"message"}
{"nick":"ljharb","message":"f32: i can try, but two already exist, which i outlined to you yesterday :-)","date":"2017-07-02T03:07:03.151Z","type":"message"}
{"nick":"wrkrcoop","date":"2017-07-02T03:07:14.439Z","type":"join"}
{"nick":"f32","message":"ljharb: the devil is in the detail","date":"2017-07-02T03:07:20.214Z","type":"message"}
{"nick":"f32","message":"can we pm?","date":"2017-07-02T03:07:26.071Z","type":"message"}
{"nick":"f32","message":"or want to discuss in channel?","date":"2017-07-02T03:07:33.101Z","type":"message"}
{"nick":"ljharb","message":"i'm pretty sure i've covered all the details :-) pm is fine if you prefer","date":"2017-07-02T03:07:36.186Z","type":"message"}
{"nick":"zsoc","message":"wait this topic is relevant to my interests :p","date":"2017-07-02T03:08:02.268Z","type":"message"}
{"nick":"ljharb","message":"channel's fine too","date":"2017-07-02T03:08:18.685Z","type":"message"}
{"nick":"star_prone","date":"2017-07-02T03:12:08.415Z","type":"join"}
{"nick":"perrier-jouet","date":"2017-07-02T03:12:50.545Z","type":"join"}
{"nick":"siba","reason":"Quit: My Mac has gone to sleep. ZZZzzz","date":"2017-07-02T03:13:43.243Z","type":"quit"}
{"nick":"sondr3","reason":"Ping timeout: 255 seconds","date":"2017-07-02T03:14:13.045Z","type":"quit"}
{"nick":"star_prone","reason":"Ping timeout: 240 seconds","date":"2017-07-02T03:16:19.410Z","type":"quit"}
{"nick":"_yoy_","date":"2017-07-02T03:16:30.457Z","type":"join"}
{"nick":"notadeveloper","date":"2017-07-02T03:16:30.889Z","type":"join"}
{"nick":"YoY","reason":"Ping timeout: 240 seconds","date":"2017-07-02T03:19:35.494Z","type":"quit"}
{"nick":"h12o","reason":"Quit: ZNC - http://znc.in","date":"2017-07-02T03:20:06.027Z","type":"quit"}
{"nick":"cotko","date":"2017-07-02T03:21:24.109Z","type":"join"}
{"nick":"Supernovah","reason":"Ping timeout: 268 seconds","date":"2017-07-02T03:21:38.751Z","type":"quit"}
{"nick":"h12o","date":"2017-07-02T03:21:39.560Z","type":"join"}
{"nick":"sumyunseal1","date":"2017-07-02T03:21:39.731Z","type":"join"}
{"nick":"malcolm1","reason":"Quit: http://www.kiwiirc.com/ - A hand crafted IRC client","date":"2017-07-02T03:21:52.482Z","type":"quit"}
{"nick":"EyePulp","date":"2017-07-02T03:23:01.426Z","type":"join"}
{"nick":"Supernovah","date":"2017-07-02T03:23:15.488Z","type":"join"}
{"nick":"sterns","reason":"Remote host closed the connection","date":"2017-07-02T03:25:26.289Z","type":"quit"}
{"nick":"smccarthy","date":"2017-07-02T03:26:38.625Z","type":"join"}
{"nick":"EyePulp","reason":"Ping timeout: 268 seconds","date":"2017-07-02T03:27:48.754Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T03:28:10.521Z","type":"join"}
{"nick":"adempus","date":"2017-07-02T03:30:48.522Z","type":"join"}
{"nick":"joshontheweb","date":"2017-07-02T03:31:40.515Z","type":"join"}
{"nick":"cotko","reason":"Read error: Connection reset by peer","date":"2017-07-02T03:32:12.036Z","type":"quit"}
{"nick":"cotko","date":"2017-07-02T03:32:26.618Z","type":"join"}
{"nick":"star_prone","reason":"Ping timeout: 240 seconds","date":"2017-07-02T03:32:35.515Z","type":"quit"}
{"nick":"RenderedElite","date":"2017-07-02T03:33:26.534Z","type":"join"}
{"nick":"RenderedElite","reason":"Read error: Connection reset by peer","date":"2017-07-02T03:33:40.385Z","type":"quit"}
{"nick":"chipping","reason":"Ping timeout: 255 seconds","date":"2017-07-02T03:34:01.048Z","type":"quit"}
{"nick":"JenElizabeth","date":"2017-07-02T03:34:01.501Z","type":"join"}
{"nick":"chipping","date":"2017-07-02T03:34:45.454Z","type":"join"}
{"nick":"perrier-jouet","reason":"Quit: WeeChat 1.9","date":"2017-07-02T03:35:05.634Z","type":"quit"}
{"nick":"perrier-jouet","date":"2017-07-02T03:36:16.790Z","type":"join"}
{"nick":"Jen","reason":"Ping timeout: 255 seconds","date":"2017-07-02T03:36:43.033Z","type":"quit"}
{"nick":"goodenough","reason":"Remote host closed the connection","date":"2017-07-02T03:36:45.905Z","type":"quit"}
{"nick":"goodenough","date":"2017-07-02T03:37:24.492Z","type":"join"}
{"nick":"perrier-jouet","reason":"Client Quit","date":"2017-07-02T03:37:31.772Z","type":"quit"}
{"nick":"omnihil","reason":"Remote host closed the connection","date":"2017-07-02T03:37:58.755Z","type":"quit"}
{"nick":"omnihil","date":"2017-07-02T03:38:15.762Z","type":"join"}
{"nick":"smccarth_","date":"2017-07-02T03:38:48.601Z","type":"join"}
{"nick":"cotko","reason":"Ping timeout: 260 seconds","date":"2017-07-02T03:39:56.656Z","type":"quit"}
{"nick":"rabbitear","message":"damn it, the ] is next to the return key","date":"2017-07-02T03:40:06.195Z","type":"message"}
{"nick":"QWERTYZZZASDFASD","reason":"Ping timeout: 246 seconds","date":"2017-07-02T03:40:58.494Z","type":"quit"}
{"nick":"goodenough","reason":"Ping timeout: 240 seconds","date":"2017-07-02T03:41:30.377Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T03:42:07.115Z","type":"join"}
{"nick":"smccarthy","reason":"Ping timeout: 260 seconds","date":"2017-07-02T03:42:16.463Z","type":"quit"}
{"nick":"star_prone","reason":"Read error: Connection reset by peer","date":"2017-07-02T03:42:43.995Z","type":"quit"}
{"nick":"AtumT","reason":"Remote host closed the connection","date":"2017-07-02T03:42:59.871Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T03:43:17.107Z","type":"join"}
{"nick":"IrishGringo","reason":"Ping timeout: 276 seconds","date":"2017-07-02T03:45:13.695Z","type":"quit"}
{"nick":"zivester","reason":"Ping timeout: 268 seconds","date":"2017-07-02T03:45:41.785Z","type":"quit"}
{"nick":"SourcePhoenix","date":"2017-07-02T03:49:03.549Z","type":"join"}
{"nick":"srpx","date":"2017-07-02T03:50:59.976Z","type":"join"}
{"nick":"srpx","message":"Is there support for Wasm MVP (the one with version 01) on node.js yet?","date":"2017-07-02T03:51:11.668Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 260 seconds","date":"2017-07-02T03:53:08.096Z","type":"quit"}
{"nick":"sumyunseal1","reason":"Quit: This computer has gone to sleep","date":"2017-07-02T03:53:46.670Z","type":"quit"}
{"nick":"SourcePhoenix","reason":"Ping timeout: 260 seconds","date":"2017-07-02T03:53:56.495Z","type":"quit"}
{"nick":"xrash","reason":"Ping timeout: 248 seconds","date":"2017-07-02T03:55:45.538Z","type":"quit"}
{"nick":"slester","reason":"Quit: Peace!","date":"2017-07-02T03:56:47.364Z","type":"quit"}
{"nick":"anj","reason":"Quit: My iMac has gone to sleep. ZZZzzz","date":"2017-07-02T03:58:30.062Z","type":"quit"}
{"nick":"Cabanossi","reason":"Ping timeout: 276 seconds","date":"2017-07-02T04:02:07.738Z","type":"quit"}
{"nick":"xrash","date":"2017-07-02T04:02:39.161Z","type":"join"}
{"nick":"Cabanossi","date":"2017-07-02T04:02:40.603Z","type":"join"}
{"nick":"star_prone","date":"2017-07-02T04:03:21.841Z","type":"join"}
{"nick":"cads","reason":"Ping timeout: 276 seconds","date":"2017-07-02T04:03:25.732Z","type":"quit"}
{"nick":"sumyunseal1","date":"2017-07-02T04:03:39.521Z","type":"join"}
{"nick":"goodenough","date":"2017-07-02T04:08:25.580Z","type":"join"}
{"nick":"star_prone","reason":"Ping timeout: 268 seconds","date":"2017-07-02T04:08:30.790Z","type":"quit"}
{"nick":"nomoney4me","date":"2017-07-02T04:08:36.126Z","type":"join"}
{"nick":"chalker_","reason":"Ping timeout: 276 seconds","date":"2017-07-02T04:12:31.707Z","type":"quit"}
{"nick":"milardovich","date":"2017-07-02T04:14:21.982Z","type":"join"}
{"nick":"nomoney4me","message":"question: https://gist.github.com/nomoney4me/7d22766ccdc7f3a2c2853a6c4498582f starting at line 31, I am trying to get it to check if the client has a token set in cookies or not.  if so, then start searching, if not, launch getToken() and then do a search.  What am I doing wrong?","date":"2017-07-02T04:14:57.370Z","type":"message"}
{"nick":"ljharb","message":"nomoney4me: line 36. `getToken` is a function, not a value.","date":"2017-07-02T04:15:44.811Z","type":"message"}
{"nick":"h12o","reason":"Ping timeout: 248 seconds","date":"2017-07-02T04:17:05.568Z","type":"quit"}
{"nick":"nomoney4me","message":"I initially had function getToken() {} but for some reason, the value is only accessible through .then(() => {} rather by functions after the if...else","date":"2017-07-02T04:17:35.050Z","type":"message"}
{"nick":"ljharb","message":"nomoney4me: no i mean `token = getToken();`","date":"2017-07-02T04:18:13.427Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: uhm, that's how functions that return promises work","date":"2017-07-02T04:19:02.569Z","type":"message"}
{"nick":"zsoc","message":"by now i think you know that lol","date":"2017-07-02T04:19:07.001Z","type":"message"}
{"nick":"GreenJello","message":"nomoney4me, const token = res.cookie.Token ? Promise.resolve(res.cookie.Token) : getToken();","date":"2017-07-02T04:19:18.349Z","type":"message"}
{"nick":"GreenJello","message":"nomoney4me, then 'token' will always be a promise","date":"2017-07-02T04:19:27.726Z","type":"message"}
{"nick":"zsoc","message":"wait, getToken() doesn't return anything.. it's a uh.. s... setter?","date":"2017-07-02T04:19:31.163Z","type":"message"}
{"nick":"milardovich","reason":"Ping timeout: 276 seconds","date":"2017-07-02T04:19:40.688Z","type":"quit"}
{"nick":"zsoc","message":"nomoney4me: return fetch, you're not returning the promise","date":"2017-07-02T04:19:45.660Z","type":"message"}
{"nick":"ljharb","message":"oh lol","date":"2017-07-02T04:19:51.362Z","type":"message"}
{"nick":"ljharb","message":"that too","date":"2017-07-02T04:19:53.207Z","type":"message"}
{"nick":"kaylined","date":"2017-07-02T04:20:55.139Z","type":"join"}
{"nick":"zsoc","message":"nomoney4me: https://gist.github.com/jkantr/08e492251f5137bf5498feec4018bcf3","date":"2017-07-02T04:21:12.398Z","type":"message"}
{"nick":"star_prone","date":"2017-07-02T04:21:13.569Z","type":"join"}
{"nick":"nomoney4me","message":"ok, let me put this back to how it was:  https://gist.github.com/nomoney4me/7d22766ccdc7f3a2c2853a6c4498582f","date":"2017-07-02T04:21:46.814Z","type":"message"}
{"nick":"nomoney4me","message":"a bit confusing when I was messing it up :P","date":"2017-07-02T04:21:57.965Z","type":"message"}
{"nick":"nomoney4me","message":"OH!","date":"2017-07-02T04:22:14.995Z","type":"message"}
{"nick":"nomoney4me","message":"put the if/else in the promise try....duh","date":"2017-07-02T04:22:24.087Z","type":"message"}
{"nick":"zsoc","message":"you tried to do the mostly correct thing but you were confused why it didn't work because getToken() returns undefined","date":"2017-07-02T04:22:29.733Z","type":"message"}
{"nick":"clearcut","date":"2017-07-02T04:22:31.386Z","type":"join"}
{"nick":"zsoc","message":"and the if/else won't fix it until you also fix that.. you had multiple things wrong lol","date":"2017-07-02T04:22:44.641Z","type":"message"}
{"nick":"zsoc","message":"line 19, `return fetch` and then the if / else will work","date":"2017-07-02T04:22:55.971Z","type":"message"}
{"nick":"nomoney4me","message":"even though line 26 returns the data already?","date":"2017-07-02T04:23:22.771Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: that isn't in the function bro, you know this","date":"2017-07-02T04:23:34.342Z","type":"message"}
{"nick":"zsoc","message":"look at getToken(), how many return statements does it have?","date":"2017-07-02T04:23:41.116Z","type":"message"}
{"nick":"stormbytes","reason":"Quit: My Mac Mini has gone to sleep. ZZZzzz","date":"2017-07-02T04:23:41.876Z","type":"quit"}
{"nick":"zsoc","message":"nada, it returns undefined","date":"2017-07-02T04:23:43.454Z","type":"message"}
{"nick":"nomoney4me","message":"oh...","date":"2017-07-02T04:23:49.174Z","type":"message"}
{"nick":"zsoc","message":"also the shorthand you're looking for there is fetch(...).then(res => res.json())","date":"2017-07-02T04:24:34.722Z","type":"message"}
{"nick":"zsoc","message":"you can remove all that other stuff (including the .then((data) => { return data }) which does nothing)","date":"2017-07-02T04:24:47.692Z","type":"message"}
{"nick":"nomoney4me","message":"im not sure why I missed that...:'( sorry","date":"2017-07-02T04:25:01.631Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 260 seconds","date":"2017-07-02T04:25:40.461Z","type":"quit"}
{"nick":"zsoc","message":"don't be sorry, you tried before you asked lol","date":"2017-07-02T04:26:41.203Z","type":"message"}
{"nick":"shadowboxer","date":"2017-07-02T04:26:44.086Z","type":"join"}
{"nick":"nomoney4me","message":"...was wondering why Promise didnt work...never required() it....","date":"2017-07-02T04:26:52.547Z","type":"message"}
{"nick":"shadowboxer","reason":"Remote host closed the connection","date":"2017-07-02T04:26:54.088Z","type":"quit"}
{"nick":"systemfault","message":"Promise is built-in to the language.","date":"2017-07-02T04:27:26.878Z","type":"message"}
{"nick":"MachinShin","reason":"Ping timeout: 268 seconds","date":"2017-07-02T04:27:37.827Z","type":"quit"}
{"nick":"zsoc","message":"systemfault: not #try()","date":"2017-07-02T04:27:39.913Z","type":"message"}
{"nick":"systemfault","message":"Ah, of course not.","date":"2017-07-02T04:27:45.909Z","type":"message"}
{"nick":"nomoney4me","message":"systemfault was referring to bluebird","date":"2017-07-02T04:27:46.963Z","type":"message"}
{"nick":"nomoney4me","message":"I was*","date":"2017-07-02T04:27:53.149Z","type":"message"}
{"nick":"ljharb","message":"* .try, not #try","date":"2017-07-02T04:27:57.829Z","type":"message"}
{"nick":"zsoc","message":"I guess you could be a pleb and Promise.resolve().then(() => { xD","date":"2017-07-02T04:28:00.468Z","type":"message"}
{"nick":"zsoc","message":"oops, you're right","date":"2017-07-02T04:28:05.733Z","type":"message"}
{"nick":"zsoc","message":"Promise.try :p","date":"2017-07-02T04:28:08.420Z","type":"message"}
{"nick":"h12o","date":"2017-07-02T04:28:10.106Z","type":"join"}
{"nick":"GreenJello","message":"zsoc, that's what I do","date":"2017-07-02T04:28:14.730Z","type":"message"}
{"nick":"star_prone","date":"2017-07-02T04:28:23.597Z","type":"join"}
{"nick":"nomoney4me","message":"it's those moment where things are overlooked :((","date":"2017-07-02T04:28:24.189Z","type":"message"}
{"nick":"ljharb","message":"nomoney4me: https://npmjs.com/promise.try tho. no need for bluebird.","date":"2017-07-02T04:28:25.074Z","type":"message"}
{"nick":"GreenJello","message":"zsoc, but it's not quite the same","date":"2017-07-02T04:28:25.550Z","type":"message"}
{"nick":"zsoc","message":"it's not but it's a heck of a lot better than starting a chain of promises arbitrarily with your first call, heh","date":"2017-07-02T04:28:44.290Z","type":"message"}
{"nick":"systemfault","message":"Any usage of try that cannot be done using the constructor?","date":"2017-07-02T04:28:45.352Z","type":"message"}
{"nick":"ljharb","message":"systemfault: no, of course nt","date":"2017-07-02T04:29:09.695Z","type":"message"}
{"nick":"zsoc","message":"systemfault: yes, having your code look reasonable and not be prone to ridiculously unnecessary bugs you introduce with resolve, reject","date":"2017-07-02T04:29:13.323Z","type":"message"}
{"nick":"ljharb","message":"systemfault: it's just more ergonomic","date":"2017-07-02T04:29:13.649Z","type":"message"}
{"nick":"systemfault","message":"I see","date":"2017-07-02T04:29:18.202Z","type":"message"}
{"nick":"nomoney4me","message":"so why require() something else when bluebird does the same job?","date":"2017-07-02T04:29:26.071Z","type":"message"}
{"nick":"systemfault","message":"zsoc: wut.","date":"2017-07-02T04:29:29.049Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: no no, Promise is native","date":"2017-07-02T04:29:38.471Z","type":"message"}
{"nick":"ljharb","message":"nomoney4me: bluebird is only good in v8; it's slower outside it; and because bluebird gets you dependent on a bunch of nonstandard methods.","date":"2017-07-02T04:29:45.544Z","type":"message"}
{"nick":"shadowboxer","date":"2017-07-02T04:29:58.563Z","type":"join"}
{"nick":"zsoc","message":"so it's not \"something else\", it's bluebird or nothing else :p","date":"2017-07-02T04:30:04.535Z","type":"message"}
{"nick":"bigcake","date":"2017-07-02T04:30:07.816Z","type":"join"}
{"nick":"systemfault","message":"nomoney4me: Why use a third-party lib when you can use a built-in </troll> :(","date":"2017-07-02T04:30:12.776Z","type":"message"}
{"nick":"ljharb","message":"well, bluebird, or native + shims","date":"2017-07-02T04:30:16.210Z","type":"message"}
{"nick":"ljharb","message":"systemfault: :-p that's not a troll tho","date":"2017-07-02T04:30:24.779Z","type":"message"}
{"nick":"shadowboxer","message":"hey guys, how do I use socket.io in a large express application which is heavily modularised?","date":"2017-07-02T04:30:39.619Z","type":"message"}
{"nick":"systemfault","message":"ljharb: Thought that nomoney4me could be relying to one of the billion of Bluebird methods.","date":"2017-07-02T04:30:54.871Z","type":"message"}
{"nick":"shadowboxer","message":"I assume I have to module.export stuff? like the server and io","date":"2017-07-02T04:30:58.815Z","type":"message"}
{"nick":"iffraff1","reason":"Ping timeout: 240 seconds","date":"2017-07-02T04:31:19.352Z","type":"quit"}
{"nick":"tzero","reason":"Ping timeout: 268 seconds","date":"2017-07-02T04:31:19.795Z","type":"quit"}
{"nick":"zsoc","message":"systemfault: using `new Promise` is poor practice when you're not wrapping something like a stream/event/callback (which is also poor practice because of things like `stream-to-promise` and `util`.promisify","date":"2017-07-02T04:31:45.472Z","type":"message"}
{"nick":"shadowboxer","message":"A little background, I have a page that is importing a CSV file into a mongo database and as it doesn so I would like to ouput each record to the screen one by one","date":"2017-07-02T04:31:52.734Z","type":"message"}
{"nick":"zsoc","message":"it just makes your code harder to reason about and easily to confuse","date":"2017-07-02T04:31:55.858Z","type":"message"}
{"nick":"nomoney4me","message":"only thing I've been using bluebird for was the .try() and .all() and .join()","date":"2017-07-02T04:32:06.046Z","type":"message"}
{"nick":"dbclk","reason":"Ping timeout: 260 seconds","date":"2017-07-02T04:32:12.605Z","type":"quit"}
{"nick":"dodobrain","reason":"Ping timeout: 260 seconds","date":"2017-07-02T04:32:12.665Z","type":"quit"}
{"nick":"ljharb","message":"nomoney4me: .all is native","date":"2017-07-02T04:32:18.446Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: native has all","date":"2017-07-02T04:32:19.863Z","type":"message"}
{"nick":"zsoc","message":"no idea what join is","date":"2017-07-02T04:32:21.967Z","type":"message"}
{"nick":"ljharb","message":".try is shimmed by my package","date":"2017-07-02T04:32:22.506Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 260 seconds","date":"2017-07-02T04:32:40.597Z","type":"quit"}
{"nick":"zsoc","message":"i honestly use it for long stack traces , map, and #tap","date":"2017-07-02T04:32:42.021Z","type":"message"}
{"nick":"zsoc","message":"er, and error predicates","date":"2017-07-02T04:32:48.351Z","type":"message"}
{"nick":"nomoney4me","message":"oh, still pretty new to the whole async scene so haven't fully used all these promises stuff","date":"2017-07-02T04:32:59.055Z","type":"message"}
{"nick":"ljharb","message":"`promise.map(func)` === `promise.then(promises => Promise.all(promises.map(func)))` \\_()_/","date":"2017-07-02T04:33:09.279Z","type":"message"}
{"nick":"nomoney4me","message":"joepie91 introduced bluebird and I have been using it ever since","date":"2017-07-02T04:33:14.944Z","type":"message"}
{"nick":"zerowaitstate","reason":"Quit: leaving","date":"2017-07-02T04:33:30.976Z","type":"quit"}
{"nick":"ljharb","message":"tap is interesting, but `.tap(func)` === `.then(x => { func(x); return x; })`","date":"2017-07-02T04:33:38.258Z","type":"message"}
{"nick":"tzero","date":"2017-07-02T04:33:49.907Z","type":"join"}
{"nick":"orbyt_","reason":"Quit: My MacBook has gone to sleep. ZZZzzz","date":"2017-07-02T04:33:55.089Z","type":"quit"}
{"nick":"ljharb","message":"or actually `.then(x => { Promise.try(() => func(x)); return x; })` :-p","date":"2017-07-02T04:34:10.973Z","type":"message"}
{"nick":"zsoc","message":"ljharb: i feel like there's no good way to introduce catch predicates without mutilating Promise is an unhealthy way","date":"2017-07-02T04:34:13.397Z","type":"message"}
{"nick":"nomoney4me","message":"so if I'm jusing using .try() and .all() I don't need to require bluebird? how would that benefit?","date":"2017-07-02T04:34:18.995Z","type":"message"}
{"nick":"ljharb","message":"zsoc: nope! there's not","date":"2017-07-02T04:34:21.299Z","type":"message"}
{"nick":"nomoney4me","message":"just using*","date":"2017-07-02T04:34:30.687Z","type":"message"}
{"nick":"h12o","reason":"Ping timeout: 260 seconds","date":"2017-07-02T04:34:33.154Z","type":"quit"}
{"nick":"ljharb","message":"nomoney4me: .all means you don't need bluebird. .try means you can use just the promise.try package","date":"2017-07-02T04:34:40.899Z","type":"message"}
{"nick":"dodobrain","date":"2017-07-02T04:34:41.092Z","type":"join"}
{"nick":"ljharb","message":"nomoney4me: the benefit is that your code becomes portable outside node","date":"2017-07-02T04:34:46.905Z","type":"message"}
{"nick":"ljharb","message":"nomoney4me: and, you don't become dependent on nonstandard methods.","date":"2017-07-02T04:34:55.421Z","type":"message"}
{"nick":"anj","date":"2017-07-02T04:35:03.104Z","type":"join"}
{"nick":"zsoc","message":"but i get triggered from doing promiseTry(() => { when Promise.try(() => looks so much nicer :p","date":"2017-07-02T04:35:03.478Z","type":"message"}
{"nick":"SourcePhoenix","date":"2017-07-02T04:35:06.665Z","type":"join"}
{"nick":"ljharb","message":"zsoc: `require('promise.try').shim()` :-p if you're an app","date":"2017-07-02T04:35:26.979Z","type":"message"}
{"nick":"zsoc","message":"is that.. sane?","date":"2017-07-02T04:35:37.370Z","type":"message"}
{"nick":"ljharb","message":"polyfilling it, in an app? of course","date":"2017-07-02T04:36:39.972Z","type":"message"}
{"nick":"ljharb","message":"it's a stage 1 proposal","date":"2017-07-02T04:36:44.958Z","type":"message"}
{"nick":"ljharb","message":"and the reason it's stage 1 and not 2 or 3 is unrelated to the api; it will likely either never advance, or advance unchanged","date":"2017-07-02T04:37:07.834Z","type":"message"}
{"nick":"zsoc","message":"I'm not sure I'll ever be okay with no being able to do .catch(FetchError, (err) => { ... without wondering if i forgot to re-throw in every instance where i'm not catching what i expect, there's no lint rule for that lol","date":"2017-07-02T04:37:10.603Z","type":"message"}
{"nick":"Aikar","reason":"\"http://quassel-irc.org - Chat comfortably. Anywhere.\"","date":"2017-07-02T04:37:27.643Z","type":"part"}
{"nick":"ljharb","message":"zsoc: got a stage 2 (almost 3) proposal for that one: https://www.npmjs.com/package/promise.prototype.finally","date":"2017-07-02T04:37:40.225Z","type":"message"}
{"nick":"zsoc","message":"also having a series of .catch(FooError's is a lot easier to grok than just a big switch/case or if/else if tree in a catch","date":"2017-07-02T04:37:42.129Z","type":"message"}
{"nick":"ljharb","message":"oh but sure, that doesn't handle conditional catchs","date":"2017-07-02T04:37:58.944Z","type":"message"}
{"nick":"ljharb","message":"yeah that'd have to wait for pattern matching","date":"2017-07-02T04:38:13.395Z","type":"message"}
{"nick":"rabbitear","reason":"Read error: Connection reset by peer","date":"2017-07-02T04:39:09.632Z","type":"quit"}
{"nick":"zsoc","message":"do you think they would take to Promise.delay","date":"2017-07-02T04:39:53.747Z","type":"message"}
{"nick":"rabbitear","date":"2017-07-02T04:39:55.870Z","type":"join"}
{"nick":"zsoc","message":"as a wrapper around setTimeout? doing wrapping setTimeout to do a recursive call seems messy","date":"2017-07-02T04:40:15.189Z","type":"message"}
{"nick":"SourcePhoenix","reason":"Ping timeout: 276 seconds","date":"2017-07-02T04:40:28.714Z","type":"quit"}
{"nick":"zsoc","message":"I'd write a proposal for it","date":"2017-07-02T04:40:39.064Z","type":"message"}
{"nick":"Joedoe","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2017-07-02T04:42:12.224Z","type":"quit"}
{"nick":"`slikts","reason":"Quit: No Ping reply in 180 seconds.","date":"2017-07-02T04:43:04.395Z","type":"quit"}
{"nick":"ljharb","message":"setTimeout isn't in the spec","date":"2017-07-02T04:43:31.507Z","type":"message"}
{"nick":"markasoftware","date":"2017-07-02T04:43:36.680Z","type":"join"}
{"nick":"zsoc","message":"well.. i mean however it works lol","date":"2017-07-02T04:43:45.173Z","type":"message"}
{"nick":"ljharb","message":"right but i mean, \"time\" isn't in the spec","date":"2017-07-02T04:43:59.747Z","type":"message"}
{"nick":"zsoc","message":"i'm confused.. what spec? sorry i'm onto a new topic haha","date":"2017-07-02T04:44:21.603Z","type":"message"}
{"nick":"nomoney4me","message":"so im confused why joepie91 would recommend bluebird, rather than going with built in? http://cryto.net/~joepie91/blog/2016/05/11/what-is-promise-try-and-why-does-it-matter/","date":"2017-07-02T04:44:45.305Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: for all of the reasons i just argued for, and in the sense that 18~ months ago it was a big difference","date":"2017-07-02T04:45:08.932Z","type":"message"}
{"nick":"Yoofie","reason":"Ping timeout: 268 seconds","date":"2017-07-02T04:45:30.895Z","type":"quit"}
{"nick":"ricoeplla","date":"2017-07-02T04:45:56.992Z","type":"join"}
{"nick":"ricoeplla","reason":"Client Quit","date":"2017-07-02T04:46:20.382Z","type":"quit"}
{"nick":"nomoney4me","message":"sorry zsoc, those points were above my head, I didnt understand them.  I was busy reading the basic stuffs regarding built in Promise","date":"2017-07-02T04:46:36.138Z","type":"message"}
{"nick":"`slikts","date":"2017-07-02T04:47:10.702Z","type":"join"}
{"nick":"ljharb","message":"zsoc: i mean, setTimeout isn't in JS. it's in browsers.","date":"2017-07-02T04:47:33.685Z","type":"message"}
{"nick":"ljharb","message":"zsoc: so adding Promise.delay can't go in JS easily.","date":"2017-07-02T04:47:38.974Z","type":"message"}
{"nick":"zsoc","message":"ljharb: oh, right, it's a web api","date":"2017-07-02T04:48:07.366Z","type":"message"}
{"nick":"zsoc","message":"hm","date":"2017-07-02T04:48:09.394Z","type":"message"}
{"nick":"h12o","date":"2017-07-02T04:48:16.805Z","type":"join"}
{"nick":"zsoc","message":"you can use Promise.try but it's a shim, which is a complicated idea to some people :p long stack traces is very useful and it's somewhat automatic when you're in a dev environment. It *is* faster although really that's not terribly important. You get warnings when you forget to 'return' a promise, which is a common mistake (you would have gotten one with your issue just now if getToken() was wrapped in Promise.try)","date":"2017-07-02T04:48:56.629Z","type":"message"}
{"nick":"ljharb","message":"node gives you those already with uncaught promise rejections","date":"2017-07-02T04:49:28.006Z","type":"message"}
{"nick":"zsoc","message":"only with rejections","date":"2017-07-02T04:49:44.368Z","type":"message"}
{"nick":"zsoc","message":"whcih you don't find out until something is thrown :p","date":"2017-07-02T04:49:51.160Z","type":"message"}
{"nick":"zsoc","message":"it has utility stuff like .tap which is fantastic for logging (although shimmable also ofc), and catch predicates make your code less prone to bugs.. which is probably also arguable but really it's just easier to read and stops you from being tempted to use switch/case","date":"2017-07-02T04:50:22.579Z","type":"message"}
{"nick":"anj","reason":"Quit: My iMac has gone to sleep. ZZZzzz","date":"2017-07-02T04:50:41.047Z","type":"quit"}
{"nick":"lpin","date":"2017-07-02T04:51:12.443Z","type":"join"}
{"nick":"zsoc","message":"and yes you can do most of this stuff with some alternatives, but.. ergonomics / code-hygiene can make it less likely you'll pull your hair out tracking down a bug in the future","date":"2017-07-02T04:51:25.373Z","type":"message"}
{"nick":"nomoney4me","message":"so the benefit of bluebird is the errors that would be thrown while I am using it incorrectly or missing stuffs?","date":"2017-07-02T04:53:16.367Z","type":"message"}
{"nick":"zsoc","message":"the immediately benefit to you at the moment? sure probably that.. but at some point in the (maybe near) future when you start to see the necessity of creating custom error objects and properly not catching programming errors etc, more of those benefits might be more obvious to you","date":"2017-07-02T04:54:29.475Z","type":"message"}
{"nick":"Jen","date":"2017-07-02T04:54:38.109Z","type":"join"}
{"nick":"zsoc","message":"I honestly don't convince people to use bluebird, those are just the reasons I use it","date":"2017-07-02T04:54:45.605Z","type":"message"}
{"nick":"zsoc","message":"and especially for library code and stuff it's probably ridiculous (although knex uses it for fairly good reason), but at a top level app.. that's an express app, that realistically is never going to be portable by design...","date":"2017-07-02T04:55:23.932Z","type":"message"}
{"nick":"zsoc","message":"dependencies are cheap","date":"2017-07-02T04:55:26.727Z","type":"message"}
{"nick":"clearcut","reason":"Quit: Leaving","date":"2017-07-02T04:55:49.175Z","type":"quit"}
{"nick":"nomoney4me","message":"all those wordings: shim, .tap goes above my head there.  However, if I were to continue to use bluebird, knowing those benefits helped me to understand my options.","date":"2017-07-02T04:56:23.073Z","type":"message"}
{"nick":"nomoney4me","message":"ljharb has a good point for using native, that's why I was asking the whys so I know the reason behind using it :)","date":"2017-07-02T04:56:55.180Z","type":"message"}
{"nick":"xrash","reason":"Ping timeout: 248 seconds","date":"2017-07-02T04:57:05.455Z","type":"quit"}
{"nick":"zsoc","message":"If I was ljh I would tout native-only also","date":"2017-07-02T04:57:18.109Z","type":"message"}
{"nick":"nomoney4me","message":"so far, I have not included .catch() but if that's the benefit, maybe I should start doing some error catching eh? ;)","date":"2017-07-02T04:57:20.497Z","type":"message"}
{"nick":"JenElizabeth","reason":"Ping timeout: 240 seconds","date":"2017-07-02T04:57:35.494Z","type":"quit"}
{"nick":"zsoc","message":"no native promises have catch lol, just not a very specific type of filtering that is common in some other languages","date":"2017-07-02T04:57:51.060Z","type":"message"}
{"nick":"zsoc","message":"one day you'll ask a question like \"how do i return the previous resolve value to the next .then() in the chain?\" or \"how do i do X flow control thing that involves custom error objects\" and some of those points will be clearer :p","date":"2017-07-02T04:59:05.870Z","type":"message"}
{"nick":"Cabanossi","reason":"Ping timeout: 246 seconds","date":"2017-07-02T05:00:32.557Z","type":"quit"}
{"nick":"h12o","reason":"Ping timeout: 240 seconds","date":"2017-07-02T05:00:57.820Z","type":"quit"}
{"nick":"markasoftware","reason":"Remote host closed the connection","date":"2017-07-02T05:00:59.033Z","type":"quit"}
{"nick":"JBreit","reason":"Remote host closed the connection","date":"2017-07-02T05:01:00.054Z","type":"quit"}
{"nick":"nomoney4me","message":":P will you be waiting for that day?","date":"2017-07-02T05:01:00.785Z","type":"message"}
{"nick":"JBreit","date":"2017-07-02T05:01:25.445Z","type":"join"}
{"nick":"wrkrcoop","reason":"Quit: wrkrcoop","date":"2017-07-02T05:01:32.268Z","type":"quit"}
{"nick":"zsoc","message":"nope, you can cut bluebird right now if you want, but it will be more convenient for me if you don't when those days come haha","date":"2017-07-02T05:01:33.627Z","type":"message"}
{"nick":"xrash","date":"2017-07-02T05:01:43.118Z","type":"join"}
{"nick":"nomoney4me","message":"haha","date":"2017-07-02T05:01:54.258Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: if you could gist some of your code.. what your trying to do basically just involves you exposing your io instance to your router handling the upload","date":"2017-07-02T05:02:35.259Z","type":"message"}
{"nick":"Cabanossi","date":"2017-07-02T05:03:15.238Z","type":"join"}
{"nick":"shadowboxer","message":"zsoc: ahh okay thanks. I'm using fast-csv to pull in a CSV file then I'm dropping the data into a mongodb. this all works fine and is happening from my /controllers/csvreader.js folder","date":"2017-07-02T05:04:07.274Z","type":"message"}
{"nick":"zsoc","message":"i'm very familiar with fast-csv heh","date":"2017-07-02T05:04:15.923Z","type":"message"}
{"nick":"star_prone","date":"2017-07-02T05:04:30.815Z","type":"join"}
{"nick":"zsoc","message":"er... is that a controller controller? Or is it just a router you are calling a controller?","date":"2017-07-02T05:04:34.052Z","type":"message"}
{"nick":"shadowboxer","message":"I would like to stream this data to the screen using (maybe?) socket.io as it goes into the database","date":"2017-07-02T05:04:37.131Z","type":"message"}
{"nick":"shadowboxer","message":"so I rave a routes.js file that calls /controllers/csvreader.js","date":"2017-07-02T05:04:59.739Z","type":"message"}
{"nick":"zsoc","message":"ugh","date":"2017-07-02T05:05:04.254Z","type":"message"}
{"nick":"shadowboxer","message":"I am very n00bish","date":"2017-07-02T05:05:10.917Z","type":"message"}
{"nick":"zsoc","message":"yeah that's the problem with that pattern is stateful injection","date":"2017-07-02T05:05:12.960Z","type":"message"}
{"nick":"zsoc","message":"eh, i mean it's common in a lot of other languages so people sort of drag it over to node...","date":"2017-07-02T05:05:23.335Z","type":"message"}
{"nick":"shadowboxer","message":"so whats the best pattern?","date":"2017-07-02T05:05:24.824Z","type":"message"}
{"nick":"jlipps","reason":"Quit: My comp has gone to sleep. ZZZzzz","date":"2017-07-02T05:05:37.691Z","type":"quit"}
{"nick":"zsoc","message":"no 'best'.. just specific to your needs.. but there is a factoid somewhere about why mvc doesn't fit too well","date":"2017-07-02T05:05:41.719Z","type":"message"}
{"nick":"zsoc","message":"!mvc @ shadowboxer","date":"2017-07-02T05:05:42.992Z","type":"message"}
{"nick":"ecmabot","message":"shadowboxer: You probably don't actually need MVC. http://aredridel.dinhe.net/2015/01/30/why-mvc-does-not-fit-the-web/","date":"2017-07-02T05:05:43.221Z","type":"message"}
{"nick":"star_prone","reason":"Read error: No route to host","date":"2017-07-02T05:05:44.913Z","type":"quit"}
{"nick":"zsoc","message":"yep that one","date":"2017-07-02T05:05:45.647Z","type":"message"}
{"nick":"shadowboxer","message":"haha okay","date":"2017-07-02T05:06:05.086Z","type":"message"}
{"nick":"shadowboxer","message":"I'm literally winging this","date":"2017-07-02T05:06:14.249Z","type":"message"}
{"nick":"smccarth_","date":"2017-07-02T05:06:35.153Z","type":"quit"}
{"nick":"shadowboxer","message":"so should I juts have a monster app.js file?","date":"2017-07-02T05:06:39.580Z","type":"message"}
{"nick":"zsoc","message":"noooooooooo","date":"2017-07-02T05:06:46.050Z","type":"message"}
{"nick":"goodenough","reason":"Read error: Connection reset by peer","date":"2017-07-02T05:06:46.628Z","type":"quit"}
{"nick":"shadowboxer","message":"I didn't thinks os","date":"2017-07-02T05:06:51.328Z","type":"message"}
{"nick":"shadowboxer","message":"I'm trying to make a socket.js file at the moment like I did with my mongo.js handler","date":"2017-07-02T05:07:11.010Z","type":"message"}
{"nick":"goodenough","date":"2017-07-02T05:07:33.575Z","type":"join"}
{"nick":"duplicated","date":"2017-07-02T05:07:42.662Z","type":"join"}
{"nick":"zsoc","message":"basically the pattern i use for stateful deps is, require and configure them in app.js (or wherever your entry point is), and then my routes are parameterized modules (functions that take a 'state' argument and return the router)","date":"2017-07-02T05:07:52.039Z","type":"message"}
{"nick":"NeutronStarr","reason":"Quit: WeeChat 1.4","date":"2017-07-02T05:08:01.158Z","type":"quit"}
{"nick":"JenElizabeth","date":"2017-07-02T05:08:35.347Z","type":"join"}
{"nick":"shadowboxer","message":"I think that's what I did with my db handler","date":"2017-07-02T05:08:45.545Z","type":"message"}
{"nick":"zsoc","message":"so i have like const state = { db, ws, errorHandler } etc, and the routes get required like const fooRoute = require('routes/foo')(state)","date":"2017-07-02T05:08:52.849Z","type":"message"}
{"nick":"zsoc","message":"and then i just destructure in that route what i need... module.exports = ({ db, ws }) => { ... etc","date":"2017-07-02T05:09:09.565Z","type":"message"}
{"nick":"shadowboxer","message":"am I using the right thing with socket.io?","date":"2017-07-02T05:09:33.947Z","type":"message"}
{"nick":"neoncontrails","reason":"Remote host closed the connection","date":"2017-07-02T05:09:40.820Z","type":"quit"}
{"nick":"zsoc","message":"uh i mean... socket.io is sort of a big fat abstraction over websockets","date":"2017-07-02T05:09:45.804Z","type":"message"}
{"nick":"zsoc","message":"if all you need is websockets (like `ws` and/or `express-ws`) then socket.io might be overkill","date":"2017-07-02T05:10:01.371Z","type":"message"}
{"nick":"shadowboxer","message":"I think I need to read this article","date":"2017-07-02T05:10:08.411Z","type":"message"}
{"nick":"neoncontrails","date":"2017-07-02T05:10:11.694Z","type":"join"}
{"nick":"shadowboxer","message":"yeah I just need a websocket for one page","date":"2017-07-02T05:10:20.805Z","type":"message"}
{"nick":"zsoc","message":"also this one:","date":"2017-07-02T05:10:21.574Z","type":"message"}
{"nick":"zsoc","message":"!no mongo @ shadowboxer","date":"2017-07-02T05:10:25.170Z","type":"message"}
{"nick":"ecmabot","message":"shadowboxer: Don't use MongoDB - it has many issues, and is essentially never the right solution to your problem. Here's a list of issues: http://cryto.net/~joepie91/blog/2015/07/19/why-you-should-never-ever-ever-use-mongodb/ and a more technical article at http://www.sarahmei.com/blog/2013/11/11/why-you-should-never-use-mongodb/","date":"2017-07-02T05:10:25.498Z","type":"message"}
{"nick":"zsoc","action":"is the bearer of all sorts of good news today","date":"2017-07-02T05:10:41.899Z","type":"action"}
{"nick":"shadowboxer","message":"ecmabot: good lord! don't tell me this haha","date":"2017-07-02T05:10:59.188Z","type":"message"}
{"nick":"zsoc","message":"the bot won't answer you lol","date":"2017-07-02T05:11:15.370Z","type":"message"}
{"nick":"shadowboxer","action":"curls up in a ball on his side","date":"2017-07-02T05:11:28.860Z","type":"action"}
{"nick":"zsoc","message":"i'm honestly surprised we don't have a socket.io factoid.. if it wasn't a certain time of night in certain places of the world you might be hearing remarks about that also lol","date":"2017-07-02T05:11:52.466Z","type":"message"}
{"nick":"Jen","reason":"Ping timeout: 260 seconds","date":"2017-07-02T05:11:53.116Z","type":"quit"}
{"nick":"zsoc","message":"i like `fast-csv` tho :>","date":"2017-07-02T05:12:01.009Z","type":"message"}
{"nick":"nomoney4me","message":"hey!!! socket.io is cool","date":"2017-07-02T05:12:05.818Z","type":"message"}
{"nick":"nomoney4me","action":"runs away","date":"2017-07-02T05:12:17.128Z","type":"action"}
{"nick":"zsoc","message":"yes, it is both cool and popular, just like mongoose :p","date":"2017-07-02T05:12:25.576Z","type":"message"}
{"nick":"ljharb","message":"what's wrong with socket.io","date":"2017-07-02T05:12:51.632Z","type":"message"}
{"nick":"zsoc","message":"i don't hate it honestly, just people conflate socket.io with websockets so often times they don't need all the other weird crap it has/does","date":"2017-07-02T05:12:54.650Z","type":"message"}
{"nick":"ljharb","message":"\"useful plus some unnecessary stuff\" isn't really in the same boat as mongo :-p","date":"2017-07-02T05:13:20.374Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc what is ws in your example earlier","date":"2017-07-02T05:13:26.669Z","type":"message"}
{"nick":"shadowboxer","message":"?","date":"2017-07-02T05:13:28.192Z","type":"message"}
{"nick":"zsoc","message":"ljharb: where to start.. hmm.. i visited their website/docs 6 times in 2016 and it was either a white screen or down every time :p","date":"2017-07-02T05:13:31.855Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: eh, what `io` would be for you probably","date":"2017-07-02T05:13:39.868Z","type":"message"}
{"nick":"zsoc","message":"i think they fixed that finally tho","date":"2017-07-02T05:13:57.254Z","type":"message"}
{"nick":"nomoney4me","message":"ljharb, I think he meant it's \"popular + cool like mongo\", not \"inflated like mongo\"","date":"2017-07-02T05:13:59.406Z","type":"message"}
{"nick":"kaylined","reason":"\"Leaving\"","date":"2017-07-02T05:14:02.302Z","type":"part"}
{"nick":"nomoney4me","message":"ljharb, I think you got the wrong boat :P","date":"2017-07-02T05:14:21.200Z","type":"message"}
{"nick":"zsoc","message":"engine.io falling back to not-websockets is confusing to some people as they don't know what long-polling is or why their application might sometimes do it","date":"2017-07-02T05:14:28.351Z","type":"message"}
{"nick":"nomoney4me","message":"zsoc, I am the perfect example","date":"2017-07-02T05:14:45.067Z","type":"message"}
{"nick":"nomoney4me","message":"^","date":"2017-07-02T05:14:47.412Z","type":"message"}
{"nick":"shadowboxer","message":"I'm so lost","date":"2017-07-02T05:14:55.388Z","type":"message"}
{"nick":"neoncontrails","reason":"Ping timeout: 276 seconds","date":"2017-07-02T05:14:55.684Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T05:14:59.693Z","type":"join"}
{"nick":"zsoc","message":"and you have to use their specific client vs the built in WebSocket Web API which is supported everywhere but IE < 10 and opera mobile :p","date":"2017-07-02T05:15:07.038Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: no worries, stay with socket.io if you already have it up and running, otherwise ditch it for `ws` and `express-ws` since you only need 1 function on 1 page","date":"2017-07-02T05:15:40.953Z","type":"message"}
{"nick":"zsoc","message":"if you're in deep with mongo.. i'm very sorry lol","date":"2017-07-02T05:15:48.723Z","type":"message"}
{"nick":"shadowboxer","message":"is it really that baD?","date":"2017-07-02T05:16:09.434Z","type":"message"}
{"nick":"goodenough","reason":"Read error: Connection reset by peer","date":"2017-07-02T05:16:12.631Z","type":"quit"}
{"nick":"zsoc","message":"mongo? yes","date":"2017-07-02T05:16:13.324Z","type":"message"}
{"nick":"nomoney4me","message":"zsoc, no mentioning of primus?","date":"2017-07-02T05:16:18.812Z","type":"message"}
{"nick":"shadowboxer","message":"what should i use then? SQL","date":"2017-07-02T05:16:28.284Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: he needs 1 page to send some data :p","date":"2017-07-02T05:16:30.524Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: yes","date":"2017-07-02T05:16:32.203Z","type":"message"}
{"nick":"zsoc","message":"postgres imo","date":"2017-07-02T05:16:37.069Z","type":"message"}
{"nick":"shadowboxer","message":"yeah well that's what I was going to use but I thought I'd learn something new","date":"2017-07-02T05:16:48.531Z","type":"message"}
{"nick":"zsoc","message":"even if you have 0 relational data, you can just keep a JSON field","date":"2017-07-02T05:16:50.317Z","type":"message"}
{"nick":"zsoc","message":"and when you *do* suddenly have relational data.. now you don't have to gouge your eyes out with mongooses 'populate'","date":"2017-07-02T05:17:08.165Z","type":"message"}
{"nick":"shadowboxer","message":"oh yeah, that kinda makes sens actually","date":"2017-07-02T05:17:12.646Z","type":"message"}
{"nick":"nomoney4me","message":"I prefer mysql as a basic db if you're not doing alot of db stuff over postgres, those schemas seems too troublesome for a quick storage of simple data","date":"2017-07-02T05:17:22.717Z","type":"message"}
{"nick":"ljharb","message":"zsoc: < IE 10 still covers a lot of people. having the fallback matters","date":"2017-07-02T05:17:24.850Z","type":"message"}
{"nick":"shadowboxer","message":"I'm not using mongoose. just the straight node.js driver","date":"2017-07-02T05:17:31.554Z","type":"message"}
{"nick":"ljharb","message":"(mongoose is great, if you're using mongo - but that's why you shouldn't use mongo in the first place)","date":"2017-07-02T05:17:53.633Z","type":"message"}
{"nick":"zsoc","message":"ljharb: no.. it doesn't, IE < 10 is windows XP only","date":"2017-07-02T05:17:57.734Z","type":"message"}
{"nick":"ljharb","message":"zsoc: that's still a lot of people.","date":"2017-07-02T05:18:02.741Z","type":"message"}
{"nick":"ljharb","message":"zsoc: obv based on your site's demographic and regions. but it's not nothing.","date":"2017-07-02T05:18:16.326Z","type":"message"}
{"nick":"zsoc","message":".. in a government environment maybe?","date":"2017-07-02T05:18:17.414Z","type":"message"}
{"nick":"ljharb","message":"zsoc: most places still have to support IE 8, or IE 9.","date":"2017-07-02T05:18:22.697Z","type":"message"}
{"nick":"ljharb","message":"zsoc: airbnb, for example, would lose multiple countries if we dropped IE 9.","date":"2017-07-02T05:18:31.105Z","type":"message"}
{"nick":"systemfault","message":"That's not true for IE8...","date":"2017-07-02T05:18:37.166Z","type":"message"}
{"nick":"ljharb","message":"zsoc: so no, not government. actual commerce.","date":"2017-07-02T05:18:39.173Z","type":"message"}
{"nick":"zsoc","message":"right, but that is a very rare thing","date":"2017-07-02T05:18:39.343Z","type":"message"}
{"nick":"systemfault","message":"Only \"some places\" still support it.","date":"2017-07-02T05:18:44.307Z","type":"message"}
{"nick":"ljharb","message":"zsoc: i don't think it's as rare as you think","date":"2017-07-02T05:18:47.337Z","type":"message"}
{"nick":"zsoc","message":"there are < 100 sites in the world that deal with as many countries and languages as you","date":"2017-07-02T05:18:50.649Z","type":"message"}
{"nick":"ljharb","message":"systemfault: IE 8 is definitely uncommon","date":"2017-07-02T05:18:52.416Z","type":"message"}
{"nick":"asteele","message":"shadowboxer mongodb works fine for proof of concept level projects and slightly beyond.  for anything beyond that, you need to take a hard look at what data you are storing - most of the time people need a relational db, not a document db","date":"2017-07-02T05:19:09.660Z","type":"message"}
{"nick":"ljharb","message":"zsoc: that doesn't mean that you shouldn't support those users. it just means that it's an untapped market","date":"2017-07-02T05:19:27.779Z","type":"message"}
{"nick":"asteele","message":"if you choose the wrong database, lots of things can go wrong, but at a minimum, you end up writing code to work around the db to do things it wasn't meant to do","date":"2017-07-02T05:19:43.932Z","type":"message"}
{"nick":"zsoc","message":"you're not objectively wrong","date":"2017-07-02T05:19:47.479Z","type":"message"}
{"nick":"shadowboxer","message":"asteele: hmmm, okay thanks","date":"2017-07-02T05:19:49.180Z","type":"message"}
{"nick":"ljharb","message":"zsoc: lol yes, thanks","date":"2017-07-02T05:19:54.719Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 276 seconds","date":"2017-07-02T05:20:08.286Z","type":"quit"}
{"nick":"shadowboxer","message":"so what are the good use cases for mongo? (if any)","date":"2017-07-02T05:20:13.819Z","type":"message"}
{"nick":"ljharb","message":"zsoc: at any rate, having the fallback for pre-websockets is important, and it's not responsible to act as if it's not - even if it's not for you :-)","date":"2017-07-02T05:20:20.202Z","type":"message"}
{"nick":"pilne","reason":"Quit: Quitting!","date":"2017-07-02T05:20:26.097Z","type":"quit"}
{"nick":"ljharb","message":"shadowboxer: if you don't know postgres or mysql exists, it's pretty good","date":"2017-07-02T05:20:31.322Z","type":"message"}
{"nick":"zsoc","message":"ljharb: fine, then i'll just start suggesting SockJS and Primus to keep you happy :p","date":"2017-07-02T05:20:41.173Z","type":"message"}
{"nick":"ljharb","message":":-p","date":"2017-07-02T05:20:43.978Z","type":"message"}
{"nick":"systemfault","message":"Mongo is good for testing if the 'rm' command works properly.","date":"2017-07-02T05:20:46.413Z","type":"message"}
{"nick":"shadowboxer","message":"I'm well versed in transact sql","date":"2017-07-02T05:20:48.637Z","type":"message"}
{"nick":"shadowboxer","message":"and mysql","date":"2017-07-02T05:20:51.681Z","type":"message"}
{"nick":"ljharb","message":"mongo is better than a flat json file!","date":"2017-07-02T05:20:52.892Z","type":"message"}
{"nick":"ljharb","message":"shadowboxer: then in that case, there aren't any good ones afaik","date":"2017-07-02T05:21:08.960Z","type":"message"}
{"nick":"asteele","message":"shadowboxer so you should ask yourself, in what situation does mongo outshine your postgres db?  long story short, almost none","date":"2017-07-02T05:21:25.501Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: so maria is an option.. i mean heck the mssql driver on node is pretty darn good :p if you're into sql server lol","date":"2017-07-02T05:21:26.760Z","type":"message"}
{"nick":"shadowboxer","action":"is depressed","date":"2017-07-02T05:21:57.940Z","type":"action"}
{"nick":"zsoc","message":"i still suggest postgres tho because it's just godly","date":"2017-07-02T05:22:03.594Z","type":"message"}
{"nick":"asteele","message":"dont feel too bad","date":"2017-07-02T05:22:05.259Z","type":"message"}
{"nick":"asteele","message":"i used mongo for my first real business, that went on to be wildly successful, we sold it, and it was a major piece of propoelling me into where i am now (Where i wont use mongo for pretty much any situation)","date":"2017-07-02T05:22:52.860Z","type":"message"}
{"nick":"shadowboxer","message":"asteele: go on...","date":"2017-07-02T05:22:54.451Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: you can go down the current route and continue to build $thing but just with full transparency that it might become a spaghetti mess at some point in the future, extensibility wise","date":"2017-07-02T05:22:57.248Z","type":"message"}
{"nick":"shadowboxer","message":"asteele: hahahah","date":"2017-07-02T05:23:12.245Z","type":"message"}
{"nick":"zsoc","message":"I mean discord used mongo with full understanding that they would have to ditch it at some point in the future and they.. did okay.. mostly lol","date":"2017-07-02T05:23:41.939Z","type":"message"}
{"nick":"nomoney4me","message":"oh really? discord is on mongo?","date":"2017-07-02T05:23:59.472Z","type":"message"}
{"nick":"zsoc","message":"*was","date":"2017-07-02T05:24:04.744Z","type":"message"}
{"nick":"nomoney4me","message":"oh","date":"2017-07-02T05:24:08.067Z","type":"message"}
{"nick":"asteele","message":"not these days","date":"2017-07-02T05:24:10.054Z","type":"message"}
{"nick":"zsoc","message":"there is an awesome blog post about it exploding and how cassandra is amazing :p","date":"2017-07-02T05:24:16.348Z","type":"message"}
{"nick":"shadowboxer","message":"I could probably get off this now","date":"2017-07-02T05:24:35.293Z","type":"message"}
{"nick":"shadowboxer","message":"if I spend the day refactoring","date":"2017-07-02T05:24:42.094Z","type":"message"}
{"nick":"zsoc","message":"ABR","date":"2017-07-02T05:24:48.318Z","type":"message"}
{"nick":"benhalverson","date":"2017-07-02T05:24:49.518Z","type":"join"}
{"nick":"shadowboxer","message":"I'm not that far in","date":"2017-07-02T05:24:54.097Z","type":"message"}
{"nick":"goodenough","date":"2017-07-02T05:25:18.882Z","type":"join"}
{"nick":"asteele","message":"shadowboxer it mostly depends on how long you expect to be working on/maintaining this project","date":"2017-07-02T05:25:32.139Z","type":"message"}
{"nick":"zsoc","message":"is this like a test thing? is it for fun or learning?","date":"2017-07-02T05:25:32.308Z","type":"message"}
{"nick":"zsoc","message":"or is it a serious thing that you're going to expect to grow into the future","date":"2017-07-02T05:25:39.874Z","type":"message"}
{"nick":"zsoc","message":"right","date":"2017-07-02T05:25:40.457Z","type":"message"}
{"nick":"asteele","message":"if you have some real passion for it going somewhere, i would bite the bullet and switch while its possible","date":"2017-07-02T05:25:51.521Z","type":"message"}
{"nick":"shadowboxer","message":"its for a high school. it does active directory login manages assets and jobs coming into our office and I'm processing data from another product with it too","date":"2017-07-02T05:26:18.085Z","type":"message"}
{"nick":"shadowboxer","message":"it could grow quite big","date":"2017-07-02T05:26:21.423Z","type":"message"}
{"nick":"shadowboxer","message":"but it's still small potatoes","date":"2017-07-02T05:26:29.582Z","type":"message"}
{"nick":"zsoc","message":"kill it with fire","date":"2017-07-02T05:26:32.120Z","type":"message"}
{"nick":"dbclk","date":"2017-07-02T05:26:41.705Z","type":"join"}
{"nick":"shadowboxer","message":"zsoc: yeah, god, still?","date":"2017-07-02T05:26:59.443Z","type":"message"}
{"nick":"shadowboxer","message":"i should just use postgres","date":"2017-07-02T05:27:11.687Z","type":"message"}
{"nick":"zsoc","message":"i highly suggest postgres for 100 reasons","date":"2017-07-02T05:27:17.358Z","type":"message"}
{"nick":"wrkrcoop","date":"2017-07-02T05:27:22.867Z","type":"join"}
{"nick":"shadowboxer","message":"I culd probably do this in three to four hours if I roll up my sleeves","date":"2017-07-02T05:27:23.429Z","type":"message"}
{"nick":"xrash","reason":"Read error: Connection reset by peer","date":"2017-07-02T05:27:37.417Z","type":"quit"}
{"nick":"shadowboxer","action":"grabs sweatband","date":"2017-07-02T05:27:43.996Z","type":"action"}
{"nick":"zsoc","message":"and also to use knex as a query builder on top of it (it's not an ORM, just some ergonomics with promises and stuff)","date":"2017-07-02T05:27:47.325Z","type":"message"}
{"nick":"systemfault","message":"As far as I'm concerned, if you don't need a document database... just use SQL, it's futureprood.","date":"2017-07-02T05:27:48.198Z","type":"message"}
{"nick":"systemfault","message":"*futureproof.","date":"2017-07-02T05:27:52.909Z","type":"message"}
{"nick":"zsoc","message":"and if your csv upload stuff really is documenty (no defined schema) just use a JSONB field","date":"2017-07-02T05:28:16.970Z","type":"message"}
{"nick":"systemfault","message":"And if you do need a document database... postgres works fine for that.","date":"2017-07-02T05:28:20.900Z","type":"message"}
{"nick":"zsoc","message":"if your users are logging in.. well now you have a user table and a sessions table and other relational things :p","date":"2017-07-02T05:28:32.541Z","type":"message"}
{"nick":"shadowboxer","message":"which modules should i use for postgres? pg?","date":"2017-07-02T05:28:35.049Z","type":"message"}
{"nick":"charmander","message":"shadowboxer: yep!","date":"2017-07-02T05:28:39.452Z","type":"message"}
{"nick":"nomoney4me","message":"question: my fetch works great with method:post and body:data.  However, now that the endpoint is a get, it doesn't seem to read the data in the body, am I missing something? https://gist.github.com/nomoney4me/e0b547b810a4fd410649af2741a05135","date":"2017-07-02T05:28:54.737Z","type":"message"}
{"nick":"zsoc","message":"yes `pg` is the official whatever, although the documentation leaves something to be desired :p","date":"2017-07-02T05:28:56.970Z","type":"message"}
{"nick":"charmander","message":"nomoney4me: GET requests dont have a body","date":"2017-07-02T05:29:12.527Z","type":"message"}
{"nick":"JenElizabeth","reason":"Read error: Connection reset by peer","date":"2017-07-02T05:29:37.324Z","type":"quit"}
{"nick":"zsoc","message":"shadowboxer: about half of us swear by knex and the other half think it's pointless. I suggest it if for nothing else than sane migrations and the promise interface / automatic pooling / working with postgres/maria/mysql/oracle/etc","date":"2017-07-02T05:29:44.340Z","type":"message"}
{"nick":"nomoney4me","message":"oh?","date":"2017-07-02T05:29:50.296Z","type":"message"}
{"nick":"charmander","message":"nomoney4me: those paremters likely go in the query string","date":"2017-07-02T05:30:02.474Z","type":"message"}
{"nick":"zsoc","message":"nomoney4me: you probably want to append the URLSearchParams to the end of the url","date":"2017-07-02T05:30:03.363Z","type":"message"}
{"nick":"shadowboxer","message":"I've just been using callbacks everywhere no promieses","date":"2017-07-02T05:30:07.519Z","type":"message"}
{"nick":"asteele","message":"nomoney4me indeed.  thats hot HTTP works","date":"2017-07-02T05:30:07.932Z","type":"message"}
{"nick":"Qantas94Heavy","date":"2017-07-02T05:30:12.445Z","type":"join"}
{"nick":"zsoc","message":"shadowboxer: o.OOOOO","date":"2017-07-02T05:30:18.702Z","type":"message"}
{"nick":"asteele","message":"how*","date":"2017-07-02T05:30:18.903Z","type":"message"}
{"nick":"zsoc","message":"i just grew 5 eyes","date":"2017-07-02T05:30:24.659Z","type":"message"}
{"nick":"shadowboxer","message":"I'm very, very new","date":"2017-07-02T05:30:25.462Z","type":"message"}
{"nick":"JenElizabeth","date":"2017-07-02T05:30:26.688Z","type":"join"}
{"nick":"asteele","message":"shadowboxer your mind has yet to be blown","date":"2017-07-02T05:30:30.647Z","type":"message"}
{"nick":"zsoc","message":"hey it's great you get all of this out of the way now before it's too late","date":"2017-07-02T05:30:40.430Z","type":"message"}
{"nick":"shadowboxer","message":"is there a good blog for promises","date":"2017-07-02T05:31:15.307Z","type":"message"}
{"nick":"charmander","message":"zsoc: again, pg has a promise interface and automatic pooling","date":"2017-07-02T05:31:25.545Z","type":"message"}
{"nick":"shadowboxer","message":"I briefly looked at it, did some mental gymnastics and moved on","date":"2017-07-02T05:31:26.446Z","type":"message"}
{"nick":"charmander","message":"list actual differences, like migrations =P","date":"2017-07-02T05:31:47.770Z","type":"message"}
{"nick":"asteele","message":"there are thousands of them at this point, i have a good one i can link but its more for mastering promises, not intro to them","date":"2017-07-02T05:31:51.019Z","type":"message"}
{"nick":"zsoc","message":"charmander: maybe.. but the docs don't explain that very well and every time someone posts snippets of trying to use it it's all sorts of backwards","date":"2017-07-02T05:31:53.770Z","type":"message"}
{"nick":"sysrage","reason":"Ping timeout: 260 seconds","date":"2017-07-02T05:31:56.463Z","type":"quit"}
{"nick":"charmander","message":"zsoc: not sure what the last part means","date":"2017-07-02T05:32:22.682Z","type":"message"}
{"nick":"zsoc","message":"you don't just require `pg` and magically you have a pool and a single stateful object you can start querying from.. at least it's not documented that way","date":"2017-07-02T05:32:24.658Z","type":"message"}
{"nick":"asteele","message":"you need to have a full understanding of how callbcks work though, before going into promises.  you need to understand how js starts processing things in each context, not necessarilly top to bottom, before you can understand promises","date":"2017-07-02T05:32:35.143Z","type":"message"}
{"nick":"charmander","message":"magic is bad","date":"2017-07-02T05:32:37.782Z","type":"message"}
{"nick":"zsoc","message":"in some cases yes","date":"2017-07-02T05:32:56.558Z","type":"message"}
{"nick":"zxc","date":"2017-07-02T05:32:59.490Z","type":"join"}
{"nick":"zsoc","message":"in this case what's bad is someone having a function open a new connection every time it's executed","date":"2017-07-02T05:33:13.154Z","type":"message"}
{"nick":"neoncontrails","date":"2017-07-02T05:33:13.548Z","type":"join"}
{"nick":"danneu","message":"zsoc: pool = new pg.Pool(/* conn info */); result = await pool.query(sql, params)","date":"2017-07-02T05:33:18.735Z","type":"message"}
{"nick":"charmander","message":"^","date":"2017-07-02T05:33:22.253Z","type":"message"}
{"nick":"nomoney4me","message":"ah!! I see, forgot that in GET the params goes in the url while POST it goes in the body","date":"2017-07-02T05:33:31.094Z","type":"message"}
{"nick":"charmander","message":"it takes much more effort to do what youre describing, zsoc","date":"2017-07-02T05:33:37.968Z","type":"message"}
{"nick":"charmander","message":"the pool API is extremely straightforward","date":"2017-07-02T05:33:46.294Z","type":"message"}
{"nick":"nomoney4me","message":"(and also the ? at the end of GET got me there)  :) thanks all!","date":"2017-07-02T05:33:53.599Z","type":"message"}
{"nick":"charmander","message":"const pool = new pg.Pool(), done","date":"2017-07-02T05:33:58.263Z","type":"message"}
{"nick":"shadowboxer","message":"charmander: i'm reading it now","date":"2017-07-02T05:34:01.276Z","type":"message"}
{"nick":"shadowboxer","message":"https://github.com/brianc/node-postgres/wiki/Example","date":"2017-07-02T05:34:09.014Z","type":"message"}
{"nick":"shadowboxer","message":"^^ there","date":"2017-07-02T05:34:24.033Z","type":"message"}
{"nick":"zsoc","message":"it's in the wiki >.>","date":"2017-07-02T05:34:31.079Z","type":"message"}
{"nick":"charmander","message":"zsoc: new documentation is at https://node-postgres.com/","date":"2017-07-02T05:34:58.209Z","type":"message"}
{"nick":"zsoc","message":"look i'm totally cool with it, i'm just describing the references to people's crap i see in here regularly. get them to giant bold that link at the top of the readme somewhere","date":"2017-07-02T05:35:02.822Z","type":"message"}
{"nick":"charmander","message":"shadowboxer ^","date":"2017-07-02T05:35:06.261Z","type":"message"}
{"nick":"charmander","message":"wait, nevermind, dont look at it","date":"2017-07-02T05:35:36.436Z","type":"message"}
{"nick":"charmander","message":"its even worse","date":"2017-07-02T05:35:41.408Z","type":"message"}
{"nick":"charmander","message":"ugh","date":"2017-07-02T05:35:44.754Z","type":"message"}
{"nick":"SourcePhoenix","date":"2017-07-02T05:35:51.638Z","type":"join"}
{"nick":"sysrage","date":"2017-07-02T05:36:02.016Z","type":"join"}
{"nick":"charmander","message":"so heres that problem from earlier zsoc =P","date":"2017-07-02T05:36:47.877Z","type":"message"}
{"nick":"charmander","message":"I cant *really* recommend pg","date":"2017-07-02T05:36:52.684Z","type":"message"}
{"nick":"shadowboxer","message":"installing postgres now","date":"2017-07-02T05:36:58.339Z","type":"message"}
{"nick":"zsoc","message":"charmander: please just build your wrapper and i'll at least throw it out there as another option lol","date":"2017-07-02T05:37:02.289Z","type":"message"}
{"nick":"snowkidind","reason":"Quit: astalaPIZZA Baby!","date":"2017-07-02T05:37:02.630Z","type":"quit"}
{"nick":"charmander","message":"yeah. doing that now.","date":"2017-07-02T05:37:10.722Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: also #postgresql is generally decent, maybe a little rough around the edges but most DBA~ish type are :p","date":"2017-07-02T05:37:27.588Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: rough around the edges?","date":"2017-07-02T05:37:59.782Z","type":"message"}
{"nick":"danneu","message":"to be fair knex has helpers that you'd have to write/find wrappers for. for example, i have a module that introduces pool.withTransaction(async (client) => ...) and other helpers that knex already gives you.","date":"2017-07-02T05:38:06.770Z","type":"message"}
{"nick":"goodenough","reason":"Remote host closed the connection","date":"2017-07-02T05:38:08.243Z","type":"quit"}
{"nick":"shadowboxer","message":"zsoc: it's either that or myseql","date":"2017-07-02T05:38:09.542Z","type":"message"}
{"nick":"zsoc","message":"no no, the people in that room","date":"2017-07-02T05:38:17.381Z","type":"message"}
{"nick":"zsoc","message":"i meant #postgresql as in the freenode irc room :)","date":"2017-07-02T05:38:24.945Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: oh right! yeah got it","date":"2017-07-02T05:38:29.593Z","type":"message"}
{"nick":"goodenough","date":"2017-07-02T05:38:43.581Z","type":"join"}
{"nick":"zsoc","message":"postgresql as an rdbms is just.. there's no thing i can say that would hype it up enough, i already sound like a shill usually","date":"2017-07-02T05:38:52.733Z","type":"message"}
{"nick":"EyePulp","date":"2017-07-02T05:39:20.547Z","type":"join"}
{"nick":"SourcePhoenix","reason":"Ping timeout: 260 seconds","date":"2017-07-02T05:40:48.462Z","type":"quit"}
{"nick":"shadowboxer","message":"haha","date":"2017-07-02T05:41:43.251Z","type":"message"}
{"nick":"shadowboxer","message":"do you guys have an example of a node app structured properly?","date":"2017-07-02T05:42:07.512Z","type":"message"}
{"nick":"charmander","message":"that doesnt exist yet =(","date":"2017-07-02T05:42:17.715Z","type":"message"}
{"nick":"shadowboxer","message":"or a site that lays this out.","date":"2017-07-02T05:42:18.815Z","type":"message"}
{"nick":"zsoc","message":"again, many ways to skin a cat... the nice and not nice parts about such a dynamic language :p","date":"2017-07-02T05:42:37.285Z","type":"message"}
{"nick":"goodenough","reason":"Ping timeout: 248 seconds","date":"2017-07-02T05:42:57.432Z","type":"quit"}
{"nick":"zsoc","message":"and what's good for one project won't necessarily be good for the next","date":"2017-07-02T05:43:15.210Z","type":"message"}
{"nick":"star_prone","date":"2017-07-02T05:43:15.382Z","type":"join"}
{"nick":"zsoc","message":"but almost always, small modules that are easy to reason about","date":"2017-07-02T05:43:25.613Z","type":"message"}
{"nick":"GreenJello","message":"shadowboxer, the basic setup is that you have your routes, which call controller functions, which call database functions","date":"2017-07-02T05:43:41.735Z","type":"message"}
{"nick":"zsoc","message":"some in here preach the \"export one function per module\" mantra, as an example","date":"2017-07-02T05:43:43.544Z","type":"message"}
{"nick":"EyePulp","reason":"Ping timeout: 240 seconds","date":"2017-07-02T05:43:49.292Z","type":"quit"}
{"nick":"shadowboxer","message":"so postgres should have it's own module that I export from a db.js file etc?","date":"2017-07-02T05:44:46.450Z","type":"message"}
{"nick":"nomoney4me","message":"YES! https://sandbox.tn.my/randomeats/search","date":"2017-07-02T05:44:55.693Z","type":"message"}
{"nick":"nomoney4me","message":"first meaningful project!","date":"2017-07-02T05:45:07.763Z","type":"message"}
{"nick":"zsoc","message":"GreenJello: you don't mean... as in router.get('/foo', fooController), right?","date":"2017-07-02T05:45:08.730Z","type":"message"}
{"nick":"zsoc","message":"hooray for random yelp data","date":"2017-07-02T05:45:22.050Z","type":"message"}
{"nick":"GreenJello","message":"zsoc, no, the controller doesn't know about http","date":"2017-07-02T05:45:26.750Z","type":"message"}
{"nick":"zsoc","message":"right okay, just making sure","date":"2017-07-02T05:45:31.945Z","type":"message"}
{"nick":"nomoney4me","message":"not random.  those are the places around your geolocation ;)","date":"2017-07-02T05:45:40.005Z","type":"message"}
{"nick":"zsoc","message":"GreenJello: because when people say 'controllers' often times they export a function that looks like (req, res) and really it's their route doing all their http and non httpy things","date":"2017-07-02T05:46:01.746Z","type":"message"}
{"nick":"zsoc","message":"and then their router just turns into glue between some controller files where their routers actually are and it's a mess","date":"2017-07-02T05:46:20.881Z","type":"message"}
{"nick":"zsoc","message":"But yes, what you're saying is correct :) I just avoid calling those things 'controllers' i guess... keep the http stuff in the routes and the stateless non-http stuff require in from requisite modules","date":"2017-07-02T05:47:31.228Z","type":"message"}
{"nick":"shadowboxer","message":"GreenJello: I sort of thought that was what I was doing","date":"2017-07-02T05:47:32.574Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: it might be, you haven't showed us any code yet :p gist.gisthub.com","date":"2017-07-02T05:47:44.298Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 240 seconds","date":"2017-07-02T05:47:49.300Z","type":"quit"}
{"nick":"shadowboxer","message":"zsoc: okay but don't judge me too harshly haha","date":"2017-07-02T05:48:59.126Z","type":"message"}
{"nick":"GreenJello","action":"picks up the gavel","date":"2017-07-02T05:49:29.661Z","type":"action"}
{"nick":"zsoc","message":"the stuff we see in here...","date":"2017-07-02T05:49:31.744Z","type":"message"}
{"nick":"zsoc","message":"often times from me :p","date":"2017-07-02T05:49:50.016Z","type":"message"}
{"nick":"nomoney4me","message":"shadowboxer, imo, zsoc is the worst out of everyone here","date":"2017-07-02T05:51:29.289Z","type":"message"}
{"nick":"zsoc","message":"^","date":"2017-07-02T05:51:38.938Z","type":"message"}
{"nick":"nomoney4me","message":"he judges everyone so harsh, I lost my thumb because of him","date":"2017-07-02T05:51:51.839Z","type":"message"}
{"nick":"zsoc","message":"well, no really that's just you","date":"2017-07-02T05:52:17.562Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: https://gist.github.com/anonymous/3eef808630c102279d85c8e168a04ed7","date":"2017-07-02T05:52:21.297Z","type":"message"}
{"nick":"zsoc","message":"you should know better by now :3","date":"2017-07-02T05:52:22.201Z","type":"message"}
{"nick":"shadowboxer","message":"hahaha","date":"2017-07-02T05:52:34.734Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: I'm not that far in to what I'm doing really","date":"2017-07-02T05:52:50.754Z","type":"message"}
{"nick":"nomoney4me","message":"it's only been a few months...","date":"2017-07-02T05:53:01.288Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: you can follow instructions on how to paste code, no for loops ... `const`... way ahead of the game :p","date":"2017-07-02T05:53:43.809Z","type":"message"}
{"nick":"nomoney4me","message":"I love github, it saved 1 of my gist from when I first started nodejs 5 months ago: https://gist.github.com/nomoney4me/ebe999a8284e06e6be513cd72c77acd8","date":"2017-07-02T05:54:01.952Z","type":"message"}
{"nick":"marthinal","date":"2017-07-02T05:54:20.672Z","type":"join"}
{"nick":"zsoc","message":"shadowboxer: first thing you need to do is hook up a session store.. express-session without a store doesn't function (in production, but really anywhere at all.. sessions should be persistent). I use `connect-session-knex` but i'm sure there's a `pg` equivalent that someone can should at you","date":"2017-07-02T05:54:52.081Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: then lose cookie-parser, at best it does nothing (express-session handles the cookie parsing/writes) and at worse it can actually interfere if misconfigured","date":"2017-07-02T05:55:26.684Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: that's actually on my todo list from an earlier conversation we had","date":"2017-07-02T05:55:29.481Z","type":"message"}
{"nick":"zsoc","message":"oh, i'm repeating myself.. what an old guy","date":"2017-07-02T05:55:37.460Z","type":"message"}
{"nick":"marthinal","reason":"Client Quit","date":"2017-07-02T05:55:54.914Z","type":"quit"}
{"nick":"soee","date":"2017-07-02T05:56:25.510Z","type":"join"}
{"nick":"zsoc","message":"and i hope you have access to port 80 with `authbind` and not sudo?","date":"2017-07-02T05:57:28.473Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: it's on windows (dont judge) :)","date":"2017-07-02T05:57:56.118Z","type":"message"}
{"nick":"systemfault","reason":"Quit: Bye!","date":"2017-07-02T05:58:05.157Z","type":"quit"}
{"nick":"NeutronStarr","date":"2017-07-02T05:58:09.782Z","type":"join"}
{"nick":"shadowboxer","message":"zsoc: so, doc, is it bad news? ;)","date":"2017-07-02T05:58:26.464Z","type":"message"}
{"nick":"zsoc","message":"eh, it's still a privilege escalation thing :p but i dunno to what extent heh.. or maybe it isn't actually... windows is funny","date":"2017-07-02T05:58:28.386Z","type":"message"}
{"nick":"zsoc","message":"nah most of it seems fine.. there's not much complexity going around really yet... i would start breaking up those routes tho","date":"2017-07-02T05:59:12.767Z","type":"message"}
{"nick":"zsoc","message":"small things, easy to reason about, etc","date":"2017-07-02T05:59:30.736Z","type":"message"}
{"nick":"zsoc","message":"start doing what you said you were doing (the controller~y db~y stuff shouldn't be happening in the routes themselves, etc)","date":"2017-07-02T05:59:53.560Z","type":"message"}
{"nick":"zsoc","message":"but this is the type of thing that gets more important as complexity grows","date":"2017-07-02T06:00:13.151Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: https://gist.github.com/anonymous/3eef808630c102279d85c8e168a04ed7#file-routes-js-L106 <-- this is bad","date":"2017-07-02T06:00:42.820Z","type":"message"}
{"nick":"zsoc","message":"you're running init() again every time /workman is hit","date":"2017-07-02T06:00:52.206Z","type":"message"}
{"nick":"kyle1320","reason":"Quit: Textual IRC Client: www.textualapp.com","date":"2017-07-02T06:00:53.551Z","type":"quit"}
{"nick":"star_prone","date":"2017-07-02T06:01:15.875Z","type":"join"}
{"nick":"shadowboxer","message":"zsoc: that's literally the last line of code i wrote","date":"2017-07-02T06:01:26.332Z","type":"message"}
{"nick":"zsoc","message":"hehe okay","date":"2017-07-02T06:01:32.631Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc so really, should there be a routes file at all?","date":"2017-07-02T06:01:46.511Z","type":"message"}
{"nick":"zsoc","message":"there should be many routes files.. generally in /routes/","date":"2017-07-02T06:02:05.195Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: the /workman route was how I inteded to do things","date":"2017-07-02T06:02:12.536Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: no the /a route sorry","date":"2017-07-02T06:02:37.234Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: keep requires to the top of the file, almost always","date":"2017-07-02T06:03:20.937Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: yeah I thought that might be the case","date":"2017-07-02T06:03:33.415Z","type":"message"}
{"nick":"sbellina","date":"2017-07-02T06:03:36.725Z","type":"join"}
{"nick":"zsoc","message":"that 'works' but it's hard to reason about what is happening the way you're doing it and also you're relying on require cache.. you're not getting some 'new' copy of that controller","date":"2017-07-02T06:03:53.312Z","type":"message"}
{"nick":"shadowboxer","message":"so each routes file should do a  module.exports.router?","date":"2017-07-02T06:04:02.692Z","type":"message"}
{"nick":"zsoc","message":"and it's just better you don't worry about accidentally mutating it or something","date":"2017-07-02T06:04:07.735Z","type":"message"}
{"nick":"zsoc","message":"mhm","date":"2017-07-02T06:04:11.528Z","type":"message"}
{"nick":"\\s","reason":"Ping timeout: 255 seconds","date":"2017-07-02T06:04:19.037Z","type":"quit"}
{"nick":"nomoney4me","message":"hmm, question: caddy serves my static html page, if I decides to also use express (app.use(express.static())) would that come into conflict with caddy's proxy routes?","date":"2017-07-02T06:04:27.719Z","type":"message"}
{"nick":"^^^^","reason":"Remote host closed the connection","date":"2017-07-02T06:04:33.555Z","type":"quit"}
{"nick":"shadowboxer","message":"and then in your app.js you just require all those routes?","date":"2017-07-02T06:04:41.951Z","type":"message"}
{"nick":"^^^^","date":"2017-07-02T06:05:08.010Z","type":"join"}
{"nick":"zsoc","message":"mhm... and if you have those routes export a function that returns the route, you get the bonus of dependency injection :p (as to your original question)","date":"2017-07-02T06:05:15.664Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: https://gist.github.com/jkantr/b3706357a831108579bb0f152b7768cb","date":"2017-07-02T06:05:49.527Z","type":"message"}
{"nick":"star_prone","reason":"Ping timeout: 268 seconds","date":"2017-07-02T06:06:17.841Z","type":"quit"}
{"nick":"milardovich","date":"2017-07-02T06:06:31.314Z","type":"join"}
{"nick":"h12o","date":"2017-07-02T06:07:01.535Z","type":"join"}
{"nick":"zsoc","message":"nomoney4me: if caddy serves something express never sees it, afaik","date":"2017-07-02T06:07:23.755Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: that looks very interesting!","date":"2017-07-02T06:08:01.919Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: you can ofc just have some module in its own file that exports a singleton or keeps some internal state... and require that in every other modules. That \"works\" but 1.) sometimes people run into cyclical deps and unexpected behavior.. this way you're not keeping track of what you're requiring where, and 2.) you don't have to worry about the order you're loading your modules in or which ones set what config (since it's all a reference to the","date":"2017-07-02T06:10:00.183Z","type":"message"}
{"nick":"zsoc","message":"same object)","date":"2017-07-02T06:10:00.390Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: so I would end up with many app.use('/', mainRoute(state)) but with all my different routes","date":"2017-07-02T06:10:08.467Z","type":"message"}
{"nick":"zsoc","message":"so basically.. less bugs, less taxing on the brain, easier to reason about","date":"2017-07-02T06:10:11.919Z","type":"message"}
{"nick":"\\s","date":"2017-07-02T06:10:24.480Z","type":"join"}
{"nick":"zsoc","message":"shadowboxer: yeah, or you can have just 1 route in app.js and have that route bundle up the other ones.. i use a pattern like that in larger projects","date":"2017-07-02T06:10:36.151Z","type":"message"}
{"nick":"zsoc","message":"or have a set of entry point routers each with their own set of routers.. treat them like sub apps basically... just scale with the complexity really","date":"2017-07-02T06:10:55.815Z","type":"message"}
{"nick":"shadowboxer","message":"facinating","date":"2017-07-02T06:11:12.724Z","type":"message"}
{"nick":"milardovich","reason":"Ping timeout: 268 seconds","date":"2017-07-02T06:11:13.851Z","type":"quit"}
{"nick":"shadowboxer","message":"fascinating**","date":"2017-07-02T06:11:30.333Z","type":"message"}
{"nick":"zsoc","message":"the goal is for it to be easy for you to traverse through your project and have it all make sense... not \"hmm now where do I find where X is happening\" or \"where should I start if I want to implement Y...\"","date":"2017-07-02T06:12:09.078Z","type":"message"}
{"nick":"h12o","reason":"Ping timeout: 248 seconds","date":"2017-07-02T06:12:49.507Z","type":"quit"}
{"nick":"zsoc","message":"and when those things start being more taxing on the brain.. that's when you do a little refactoring :p a little refactoring every day... good for the soul","date":"2017-07-02T06:12:56.789Z","type":"message"}
{"nick":"zsoc","message":"more useful than unit tests :3","date":"2017-07-02T06:13:01.741Z","type":"message"}
{"nick":"Lionel_Debroux","reason":"Remote host closed the connection","date":"2017-07-02T06:13:28.171Z","type":"quit"}
{"nick":"shadowboxer","message":"zsoc: thanks so much!","date":"2017-07-02T06:13:43.897Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: this is actually information I've been trying to find","date":"2017-07-02T06:13:59.542Z","type":"message"}
{"nick":"zsoc","message":"it's hard to present it all at once in a sane manner... all of the explanation as you go and understanding what you're trying to accomplish sort of comes with the territory","date":"2017-07-02T06:14:36.107Z","type":"message"}
{"nick":"zsoc","message":"so hopefully it wasn't too verbose lol","date":"2017-07-02T06:14:48.482Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: thi sline --> module.exports = ({ db }) => {    cofuses me a little","date":"2017-07-02T06:14:48.708Z","type":"message"}
{"nick":"Qantas94Heavy","reason":"Ping timeout: 248 seconds","date":"2017-07-02T06:14:57.514Z","type":"quit"}
{"nick":"shadowboxer","message":"in main.js","date":"2017-07-02T06:15:05.722Z","type":"message"}
{"nick":"zsoc","message":"shadowboxer: modules.exports = function(state) { ... return router }","date":"2017-07-02T06:15:20.389Z","type":"message"}
{"nick":"zsoc","message":"so when you require your router you have a function, not a router object. You call that function with your `state` from app.js, that's how you inject it","date":"2017-07-02T06:15:41.848Z","type":"message"}
{"nick":"Cabanossi","reason":"Ping timeout: 264 seconds","date":"2017-07-02T06:15:58.271Z","type":"quit"}
{"nick":"zsoc","message":"then you destructure it on that line in the router so you don't expose more things than you need, that's the { db } syntax","date":"2017-07-02T06:16:03.839Z","type":"message"}
{"nick":"zsoc","message":"it's the same as (state) => { const db = state.db; basically","date":"2017-07-02T06:16:19.331Z","type":"message"}
{"nick":"Jen","date":"2017-07-02T06:16:48.123Z","type":"join"}
{"nick":"shadowboxer","message":"oh wait this: app.use('/', mainRoute(state))","date":"2017-07-02T06:17:13.610Z","type":"message"}
{"nick":"shadowboxer","message":"I see","date":"2017-07-02T06:17:15.767Z","type":"message"}
{"nick":"zsoc","message":"right, mainRoute is the function exported from the router.. it's like a wrapper. You call it with your state, mainRoute(state), now it returns the router as expected, that's what you mount","date":"2017-07-02T06:17:41.270Z","type":"message"}
{"nick":"omnipot","date":"2017-07-02T06:17:53.116Z","type":"join"}
{"nick":"Cabanossi","date":"2017-07-02T06:17:53.915Z","type":"join"}
{"nick":"zsoc","message":"and the advantage over doing someRoute(a, b, c) is then you are adding or taking away args or remember which args or which","date":"2017-07-02T06:18:17.806Z","type":"message"}
{"nick":"zsoc","message":"you just give each route the whole object and let the route destructure what it needs from it.. the decision is made in a more ergonomic location","date":"2017-07-02T06:18:41.063Z","type":"message"}
{"nick":"zsoc","message":"It's really just dependency injection, functional style :p highlights some of the nifty advantages of js","date":"2017-07-02T06:19:27.157Z","type":"message"}
{"nick":"shadowboxer","message":"this is genius","date":"2017-07-02T06:19:33.012Z","type":"message"}
{"nick":"shadowboxer","message":"yeah, this makes total sense with lexical scoping a closure etc","date":"2017-07-02T06:20:12.913Z","type":"message"}
{"nick":"JenElizabeth","reason":"Ping timeout: 276 seconds","date":"2017-07-02T06:20:34.700Z","type":"quit"}
{"nick":"zsoc","message":"it's just stuff yeah, i always toute parameterizing modules that take... anything really, but especially stateful things. It's always been a common pattern in libraries, usually with options","date":"2017-07-02T06:20:45.308Z","type":"message"}
{"nick":"zsoc","message":"more or less a factory function.. takes some options, returns some custom object","date":"2017-07-02T06:20:58.611Z","type":"message"}
{"nick":"zsoc","message":"but since you should be breaking down your own application into easy to reason about modules anyway... it makes sense in the top-level app space too :p","date":"2017-07-02T06:21:36.345Z","type":"message"}
{"nick":"MachinShin","date":"2017-07-02T06:22:11.584Z","type":"join"}
{"nick":"MachinShin","reason":"Changing host","date":"2017-07-02T06:22:11.756Z","type":"quit"}
{"nick":"MachinShin","date":"2017-07-02T06:22:11.757Z","type":"join"}
{"nick":"shadowboxer","message":"I'll give this a go","date":"2017-07-02T06:22:21.419Z","type":"message"}
{"nick":"shadowboxer","message":"then I'll come back to socket.io","date":"2017-07-02T06:22:30.217Z","type":"message"}
{"nick":"shadowboxer","message":"would I pass that in as state too?","date":"2017-07-02T06:22:47.002Z","type":"message"}
{"nick":"zsoc","message":"yeah.. it's a not-static thing.. either the state of your wss itself or a Map or array or connected sockets.. whatever you want to expose","date":"2017-07-02T06:24:01.399Z","type":"message"}
{"nick":"zsoc","message":"you could expose some getter function like ws.getSocket(req.user.user_id) that returns the socket for that user that you can then emit on","date":"2017-07-02T06:25:12.315Z","type":"message"}
{"nick":"QWERTYZZZASDFASD","date":"2017-07-02T06:25:19.124Z","type":"join"}
{"nick":"zsoc","message":"ultimately you'll need that in your controller tho, the one that does the actual streaming/csv parsing if you want to send back individual results","date":"2017-07-02T06:25:35.710Z","type":"message"}
{"nick":"xMopxShell","new_nick":"xmopxshell","date":"2017-07-02T06:25:42.341Z","type":"nick"}
{"nick":"zsoc","message":"so you'll have to reason on the easiest way to accomplish that","date":"2017-07-02T06:25:45.969Z","type":"message"}
{"nick":"xmopxshell","new_nick":"xMopxShell","date":"2017-07-02T06:26:00.278Z","type":"nick"}
{"nick":"shadowboxer","message":"zsoc: okay","date":"2017-07-02T06:26:23.487Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: so no controller directory just do the logic in the routes files? (that's my last question)","date":"2017-07-02T06:26:52.591Z","type":"message"}
{"nick":"zsoc","message":"er.. well no. the http logic should go in the routes, that's what a route is","date":"2017-07-02T06:27:18.961Z","type":"message"}
{"nick":"zsoc","message":"usually the last bastion of the request and the response that represents that http cycle","date":"2017-07-02T06:27:32.180Z","type":"message"}
{"nick":"zsoc","message":"it should be calling some abstracted/declarative function from somewhere else... doTheThing.then((data) => { ... if you want to call the place you get that function from a controller, go for it","date":"2017-07-02T06:28:14.771Z","type":"message"}
{"nick":"shadowboxer","message":"ahh okay. So I wasn't too far off","date":"2017-07-02T06:28:46.190Z","type":"message"}
{"nick":"zsoc","message":"I don't like calling them 'controllers' because then it's like a 1-to-1 feel","date":"2017-07-02T06:28:53.800Z","type":"message"}
{"nick":"wrkrcoop","reason":"Quit: wrkrcoop","date":"2017-07-02T06:29:28.752Z","type":"quit"}
{"nick":"zsoc","message":"where each router has its own controller .. then it's just like you're spliting up two modules of things that really are all 1 module. I prefer to group my modules into common goals.. exporting a single function","date":"2017-07-02T06:29:36.353Z","type":"message"}
{"nick":"zsoc","message":"whether that function is only ever used in 1 router or in a ton of routers just depends on what it is","date":"2017-07-02T06:29:52.512Z","type":"message"}
{"nick":"systemfault","date":"2017-07-02T06:30:14.718Z","type":"join"}
{"nick":"shadowboxer","message":"zsoc: got it","date":"2017-07-02T06:30:51.480Z","type":"message"}
{"nick":"raul782","date":"2017-07-02T06:31:27.567Z","type":"join"}
{"nick":"Lionel_Debroux","date":"2017-07-02T06:32:22.524Z","type":"join"}
{"nick":"zsoc","message":"jeez it's 2:30am here.. i gotta get some z's","date":"2017-07-02T06:32:44.751Z","type":"message"}
{"nick":"zsoc","message":"lata","date":"2017-07-02T06:32:45.460Z","type":"message"}
{"nick":"nomoney4me","message":"hmm question: so I want caddy to proxy all /randomeats except for the initial /randomeats/index.html is that even possible?","date":"2017-07-02T06:33:12.067Z","type":"message"}
{"nick":"nomoney4me","message":"gnite zsoc","date":"2017-07-02T06:33:26.364Z","type":"message"}
{"nick":"shadowboxer","message":"zsoc: bye mate. thanks!","date":"2017-07-02T06:36:13.803Z","type":"message"}
{"nick":"munch_","date":"2017-07-02T06:36:32.043Z","type":"join"}
{"nick":"SourcePhoenix","date":"2017-07-02T06:37:08.527Z","type":"join"}
{"nick":"PaulCapestany","reason":"Read error: Connection reset by peer","date":"2017-07-02T06:38:35.578Z","type":"quit"}
{"nick":"chipping","reason":"Ping timeout: 260 seconds","date":"2017-07-02T06:39:08.599Z","type":"quit"}
{"nick":"PaulCape_","date":"2017-07-02T06:40:00.039Z","type":"join"}
{"nick":"chipping","date":"2017-07-02T06:40:31.445Z","type":"join"}
{"nick":"SourcePhoenix","reason":"Ping timeout: 240 seconds","date":"2017-07-02T06:41:35.536Z","type":"quit"}
{"nick":"fr4nk","date":"2017-07-02T06:44:16.998Z","type":"join"}
{"nick":"fr4nk","reason":"Client Quit","date":"2017-07-02T06:44:22.032Z","type":"quit"}
{"nick":"led1","reason":"Quit: led1","date":"2017-07-02T06:49:00.904Z","type":"quit"}
{"nick":"asamoshkin","date":"2017-07-02T06:53:56.122Z","type":"join"}
{"nick":"led1","date":"2017-07-02T06:57:09.254Z","type":"join"}
{"nick":"Cohedrin_","reason":"Quit: My MacBook has gone to sleep. ZZZzzz","date":"2017-07-02T06:57:22.488Z","type":"quit"}
{"nick":"shadowboxer","reason":"Remote host closed the connection","date":"2017-07-02T06:57:23.418Z","type":"quit"}
{"nick":"cotko","date":"2017-07-02T06:57:28.269Z","type":"join"}
{"nick":"notadeveloper","reason":"Read error: Connection reset by peer","date":"2017-07-02T06:59:56.327Z","type":"quit"}
{"nick":"Jen","reason":"Read error: Connection reset by peer","date":"2017-07-02T07:00:09.012Z","type":"quit"}
{"nick":"JenElizabeth","date":"2017-07-02T07:01:45.262Z","type":"join"}
{"nick":"marthinal","date":"2017-07-02T07:02:15.460Z","type":"join"}
{"nick":"Arcaelyx","date":"2017-07-02T07:04:08.131Z","type":"join"}
{"nick":"marthinal","reason":"Quit: This computer has gone to sleep","date":"2017-07-02T07:07:33.988Z","type":"quit"}
{"nick":"sbellina","reason":"Ping timeout: 268 seconds","date":"2017-07-02T07:10:25.843Z","type":"quit"}
{"nick":"plexigras","date":"2017-07-02T07:10:32.523Z","type":"join"}
{"nick":"sbellina","date":"2017-07-02T07:10:42.688Z","type":"join"}
{"nick":"MachinShin","reason":"Ping timeout: 260 seconds","date":"2017-07-02T07:13:12.469Z","type":"quit"}
{"nick":"justelex","date":"2017-07-02T07:15:28.801Z","type":"join"}
{"nick":"glebihan","date":"2017-07-02T07:15:35.012Z","type":"join"}
{"nick":"glebihan","reason":"Max SendQ exceeded","date":"2017-07-02T07:16:31.562Z","type":"quit"}
{"nick":"glebihan","date":"2017-07-02T07:17:38.435Z","type":"join"}
{"nick":"rendar","date":"2017-07-02T07:18:29.231Z","type":"join"}
{"nick":"indistylo","date":"2017-07-02T07:21:35.518Z","type":"join"}
{"nick":"raul782","date":"2017-07-02T07:22:14.615Z","type":"quit"}
{"nick":"Jen","date":"2017-07-02T07:24:57.531Z","type":"join"}
{"nick":"indistylo","reason":"Max SendQ exceeded","date":"2017-07-02T07:25:05.532Z","type":"quit"}
{"nick":"joshontheweb","reason":"Quit: Computer has gone to sleep.","date":"2017-07-02T07:25:36.954Z","type":"quit"}
{"nick":"indistylo","date":"2017-07-02T07:25:46.517Z","type":"join"}
{"nick":"siba","date":"2017-07-02T07:26:16.439Z","type":"join"}
{"nick":"thunder-ltu","date":"2017-07-02T07:26:29.120Z","type":"join"}
{"nick":"SourcePhoenix","date":"2017-07-02T07:27:13.521Z","type":"join"}
{"nick":"JenElizabeth","reason":"Ping timeout: 240 seconds","date":"2017-07-02T07:27:19.231Z","type":"quit"}
{"nick":"SteffanW","date":"2017-07-02T07:27:21.448Z","type":"join"}
{"nick":"dbclk_","date":"2017-07-02T07:27:25.553Z","type":"join"}
{"nick":"sobersabre","date":"2017-07-02T07:27:58.938Z","type":"join"}
{"nick":"chalker_","date":"2017-07-02T07:29:09.315Z","type":"join"}
{"nick":"dbclk","reason":"Ping timeout: 276 seconds","date":"2017-07-02T07:30:07.686Z","type":"quit"}
{"nick":"asamoshkin","reason":"Quit: Leaving","date":"2017-07-02T07:30:29.786Z","type":"quit"}
{"nick":"Jen","reason":"Ping timeout: 240 seconds","date":"2017-07-02T07:33:05.511Z","type":"quit"}
{"nick":"roelmonnens","date":"2017-07-02T07:34:46.067Z","type":"join"}
{"nick":"psychicist__","date":"2017-07-02T07:36:09.872Z","type":"join"}
{"nick":"stormbytes","date":"2017-07-02T07:40:37.540Z","type":"join"}
{"nick":"Booster2ooo","date":"2017-07-02T07:45:29.040Z","type":"join"}
{"nick":"Keanu73","date":"2017-07-02T07:50:12.605Z","type":"join"}
{"nick":"ilkka_","reason":"Remote host closed the connection","date":"2017-07-02T07:52:08.568Z","type":"quit"}
{"nick":"adempus","reason":"Ping timeout: 248 seconds","date":"2017-07-02T07:54:41.521Z","type":"quit"}
{"nick":"roelmonnens","reason":"Remote host closed the connection","date":"2017-07-02T07:54:42.877Z","type":"quit"}
{"nick":"benhalverson","reason":"Quit: benhalverson","date":"2017-07-02T07:54:49.112Z","type":"quit"}
{"nick":"EyePulp","date":"2017-07-02T07:55:07.303Z","type":"join"}
{"nick":"EyePulp","reason":"Ping timeout: 240 seconds","date":"2017-07-02T07:59:57.798Z","type":"quit"}
