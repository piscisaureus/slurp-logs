{"nick":"ircretary","reason":"Remote host closed the connection","date":"2014-08-26T00:00:01.108Z","type":"quit"}
{"nick":"ircretary","date":"2014-08-26T00:00:10.193Z","type":"join"}
{"nick":"brson","reason":"Quit: leaving","date":"2014-08-26T00:06:15.114Z","type":"quit"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-08-26T00:06:31.904Z","type":"quit"}
{"nick":"cjihrig","date":"2014-08-26T00:12:55.580Z","type":"join"}
{"nick":"EhevuTov","reason":"Quit: This computer has gone to sleep","date":"2014-08-26T00:14:10.608Z","type":"quit"}
{"nick":"quijote","date":"2014-08-26T00:18:30.384Z","type":"join"}
{"nick":"rossk","date":"2014-08-26T00:22:19.952Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-08-26T00:22:58.251Z","type":"quit"}
{"nick":"thlorenz","date":"2014-08-26T00:27:27.189Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2014-08-26T00:27:47.721Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T00:28:23.438Z","type":"join"}
{"nick":"jreyno40","date":"2014-08-26T00:28:30.559Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 240 seconds","date":"2014-08-26T00:32:52.834Z","type":"quit"}
{"nick":"geekintime","reason":"Ping timeout: 264 seconds","date":"2014-08-26T00:34:10.270Z","type":"quit"}
{"nick":"dap_","reason":"Quit: Leaving.","date":"2014-08-26T00:34:19.977Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T00:36:57.282Z","type":"join"}
{"nick":"geekintime","date":"2014-08-26T00:38:20.859Z","type":"join"}
{"nick":"geekintime","date":"2014-08-26T00:39:11.067Z","type":"part"}
{"nick":"petka_","reason":"Quit: Connection closed for inactivity","date":"2014-08-26T00:46:24.124Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-26T00:47:13.265Z","type":"join"}
{"nick":"Left_Turn","reason":"Remote host closed the connection","date":"2014-08-26T00:52:52.621Z","type":"quit"}
{"nick":"qard-home","date":"2014-08-26T01:03:23.906Z","type":"part"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2014-08-26T01:07:03.270Z","type":"quit"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2014-08-26T01:11:51.178Z","type":"quit"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T01:12:12.829Z","type":"quit"}
{"nick":"jgi","reason":"Quit: jgi","date":"2014-08-26T01:12:36.167Z","type":"quit"}
{"nick":"inolen","date":"2014-08-26T01:12:56.708Z","type":"join"}
{"nick":"inolen","reason":"Client Quit","date":"2014-08-26T01:12:57.702Z","type":"quit"}
{"nick":"kazupon","reason":"Read error: Connection reset by peer","date":"2014-08-26T01:13:27.674Z","type":"quit"}
{"nick":"kazupon_","date":"2014-08-26T01:13:33.265Z","type":"join"}
{"nick":"inolen","date":"2014-08-26T01:14:02.245Z","type":"join"}
{"nick":"inolen","reason":"Client Quit","date":"2014-08-26T01:14:02.365Z","type":"quit"}
{"nick":"inolen","date":"2014-08-26T01:15:06.707Z","type":"join"}
{"nick":"inolen","reason":"Client Quit","date":"2014-08-26T01:15:09.104Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T01:15:38.879Z","type":"join"}
{"nick":"rmg_","reason":"Remote host closed the connection","date":"2014-08-26T01:17:22.729Z","type":"quit"}
{"nick":"quijote","date":"2014-08-26T01:19:26.598Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 240 seconds","date":"2014-08-26T01:23:33.558Z","type":"quit"}
{"nick":"rossk","reason":"Remote host closed the connection","date":"2014-08-26T01:26:20.593Z","type":"quit"}
{"nick":"kazupon_","reason":"Remote host closed the connection","date":"2014-08-26T01:36:25.754Z","type":"quit"}
{"nick":"inolen","date":"2014-08-26T01:41:26.249Z","type":"join"}
{"nick":"rmg","date":"2014-08-26T01:44:06.791Z","type":"join"}
{"nick":"kazupon","date":"2014-08-26T01:45:39.471Z","type":"join"}
{"nick":"sh1mmer","date":"2014-08-26T01:48:34.648Z","type":"join"}
{"nick":"jreyno40","reason":"Quit: jreyno40","date":"2014-08-26T01:49:02.744Z","type":"quit"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2014-08-26T01:53:39.518Z","type":"quit"}
{"nick":"rossk","date":"2014-08-26T01:57:28.452Z","type":"join"}
{"nick":"rossk_","date":"2014-08-26T02:00:03.630Z","type":"join"}
{"nick":"rossk","reason":"Ping timeout: 240 seconds","date":"2014-08-26T02:01:57.244Z","type":"quit"}
{"nick":"rossk_","reason":"Ping timeout: 240 seconds","date":"2014-08-26T02:07:09.217Z","type":"quit"}
{"nick":"ambro718","reason":"Ping timeout: 255 seconds","date":"2014-08-26T02:08:22.246Z","type":"quit"}
{"nick":"rmg","reason":"Remote host closed the connection","date":"2014-08-26T02:09:28.319Z","type":"quit"}
{"nick":"quijote","date":"2014-08-26T02:20:02.996Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 255 seconds","date":"2014-08-26T02:24:26.970Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T02:25:27.752Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T02:29:22.687Z","type":"quit"}
{"nick":"abraxas","date":"2014-08-26T02:29:27.229Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 255 seconds","date":"2014-08-26T02:30:25.201Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T02:31:20.395Z","type":"join"}
{"nick":"abraxas","reason":"Ping timeout: 240 seconds","date":"2014-08-26T02:33:52.827Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T02:34:15.687Z","type":"join"}
{"nick":"abraxas","date":"2014-08-26T02:35:16.732Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 246 seconds","date":"2014-08-26T02:36:00.275Z","type":"quit"}
{"nick":"jreyno40","date":"2014-08-26T02:37:41.184Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T02:40:10.125Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T02:41:37.692Z","type":"join"}
{"nick":"wolfeidau","reason":"Remote host closed the connection","date":"2014-08-26T02:46:07.936Z","type":"quit"}
{"nick":"a_le","date":"2014-08-26T02:51:32.258Z","type":"join"}
{"nick":"c4milo","date":"2014-08-26T02:52:10.100Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T02:52:10.220Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T02:53:25.655Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 255 seconds","date":"2014-08-26T02:56:50.979Z","type":"quit"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2014-08-26T02:57:05.007Z","type":"quit"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-08-26T02:57:32.182Z","type":"quit"}
{"nick":"a_le","date":"2014-08-26T03:00:11.069Z","type":"join"}
{"nick":"rossk","date":"2014-08-26T03:04:31.002Z","type":"join"}
{"nick":"rossk","reason":"Ping timeout: 240 seconds","date":"2014-08-26T03:08:45.155Z","type":"quit"}
{"nick":"a_le","reason":"Ping timeout: 255 seconds","date":"2014-08-26T03:09:53.984Z","type":"quit"}
{"nick":"quijote","date":"2014-08-26T03:20:38.307Z","type":"join"}
{"nick":"rossk","date":"2014-08-26T03:22:48.768Z","type":"join"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2014-08-26T03:24:17.699Z","type":"quit"}
{"nick":"quijote","reason":"Ping timeout: 246 seconds","date":"2014-08-26T03:25:00.234Z","type":"quit"}
{"nick":"rossk","reason":"Ping timeout: 240 seconds","date":"2014-08-26T03:27:09.242Z","type":"quit"}
{"nick":"cjihrig","reason":"Quit: Leaving.","date":"2014-08-26T03:29:10.908Z","type":"quit"}
{"nick":"inolen","date":"2014-08-26T03:37:20.356Z","type":"join"}
{"nick":"inolen","reason":"Client Quit","date":"2014-08-26T03:37:29.092Z","type":"quit"}
{"nick":"inolen","date":"2014-08-26T03:39:57.355Z","type":"join"}
{"nick":"sh1mmer","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-26T03:43:42.342Z","type":"quit"}
{"nick":"a_le","date":"2014-08-26T04:01:24.216Z","type":"join"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2014-08-26T04:01:42.567Z","type":"quit"}
{"nick":"a_le","date":"2014-08-26T04:02:21.709Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2014-08-26T04:07:00.623Z","type":"quit"}
{"nick":"sh1mmer","date":"2014-08-26T04:09:59.823Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2014-08-26T04:18:53.606Z","type":"quit"}
{"nick":"quijote","date":"2014-08-26T04:21:32.686Z","type":"join"}
{"nick":"mikeal","date":"2014-08-26T04:24:01.252Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 260 seconds","date":"2014-08-26T04:26:06.645Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T04:30:55.227Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 272 seconds","date":"2014-08-26T04:35:43.708Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-26T04:37:34.372Z","type":"join"}
{"nick":"rossk","date":"2014-08-26T04:42:31.329Z","type":"join"}
{"nick":"rossk","reason":"Remote host closed the connection","date":"2014-08-26T04:42:45.629Z","type":"quit"}
{"nick":"kazupon","reason":"Ping timeout: 250 seconds","date":"2014-08-26T04:42:58.252Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-26T04:44:35.827Z","type":"join"}
{"nick":"toothrot","reason":"Ping timeout: 250 seconds","date":"2014-08-26T04:59:32.230Z","type":"quit"}
{"nick":"sh1mmer","reason":"Ping timeout: 272 seconds","date":"2014-08-26T05:10:33.704Z","type":"quit"}
{"nick":"jreyno40","reason":"Quit: jreyno40","date":"2014-08-26T05:15:12.266Z","type":"quit"}
{"nick":"sh1mmer","date":"2014-08-26T05:17:33.771Z","type":"join"}
{"nick":"quijote","date":"2014-08-26T05:22:29.179Z","type":"join"}
{"nick":"a_le","reason":"Remote host closed the connection","date":"2014-08-26T05:23:00.721Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T05:24:23.645Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 260 seconds","date":"2014-08-26T05:27:00.135Z","type":"quit"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T05:30:24.453Z","type":"quit"}
{"nick":"bajtos","date":"2014-08-26T06:07:11.667Z","type":"join"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2014-08-26T06:08:21.825Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T06:19:12.676Z","type":"join"}
{"nick":"quijote","date":"2014-08-26T06:23:13.978Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 260 seconds","date":"2014-08-26T06:24:01.293Z","type":"quit"}
{"nick":"inolen","date":"2014-08-26T06:26:00.231Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 255 seconds","date":"2014-08-26T06:27:54.025Z","type":"quit"}
{"nick":"janjongboom","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2014-08-26T06:34:52.970Z","type":"quit"}
{"nick":"daviddias","date":"2014-08-26T06:38:48.051Z","type":"join"}
{"nick":"sh1mmer","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-26T06:49:40.196Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T07:01:03.190Z","type":"join"}
{"nick":"quijote","date":"2014-08-26T07:24:00.706Z","type":"join"}
{"nick":"janjongboom","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2014-08-26T07:25:02.030Z","type":"quit"}
{"nick":"quijote","reason":"Ping timeout: 272 seconds","date":"2014-08-26T07:28:37.707Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T07:28:49.544Z","type":"join"}
{"nick":"janjongboom","reason":"Client Quit","date":"2014-08-26T07:30:36.873Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T07:34:58.224Z","type":"join"}
{"nick":"janjongboom","reason":"Quit: My MacBook has gone to sleep. ZZZzzz…","date":"2014-08-26T07:44:53.826Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T08:01:10.916Z","type":"join"}
{"nick":"inolen","reason":"Quit: Leaving.","date":"2014-08-26T08:07:16.498Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T08:07:33.176Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 240 seconds","date":"2014-08-26T08:12:03.587Z","type":"quit"}
{"nick":"txdv","message":"saghul: got sshd running","date":"2014-08-26T08:12:14.685Z","type":"message"}
{"nick":"txdv","message":"now i need to somehow login into it","date":"2014-08-26T08:12:19.500Z","type":"message"}
{"nick":"txdv","message":":D","date":"2014-08-26T08:12:19.909Z","type":"message"}
{"nick":"quijote","date":"2014-08-26T08:14:27.661Z","type":"join"}
{"nick":"petka_","date":"2014-08-26T08:15:26.400Z","type":"join"}
{"nick":"daviddias","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-26T08:16:32.772Z","type":"quit"}
{"nick":"daviddias","date":"2014-08-26T08:16:59.289Z","type":"join"}
{"nick":"Left_Turn","date":"2014-08-26T08:18:31.263Z","type":"join"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T08:22:49.905Z","type":"nick"}
{"nick":"Left_Turn","reason":"Ping timeout: 255 seconds","date":"2014-08-26T08:33:26.892Z","type":"quit"}
{"nick":"daviddias","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-26T08:34:10.567Z","type":"quit"}
{"nick":"seishun","date":"2014-08-26T08:36:38.151Z","type":"join"}
{"nick":"Left_Turn","date":"2014-08-26T08:44:00.238Z","type":"join"}
{"nick":"saghul","message":"txdv: awesome!","date":"2014-08-26T08:44:27.563Z","type":"message"}
{"nick":"txdv","message":"the windows console is so awful","date":"2014-08-26T08:45:14.685Z","type":"message"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-26T08:45:34.329Z","type":"nick"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T08:50:19.772Z","type":"nick"}
{"nick":"txdv","message":"only downside is that the compilations times are so awful","date":"2014-08-26T09:01:11.163Z","type":"message"}
{"nick":"txdv","message":"like super cereal awful","date":"2014-08-26T09:01:16.201Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2014-08-26T09:02:34.158Z","type":"quit"}
{"nick":"ambro718","date":"2014-08-26T09:03:47.304Z","type":"join"}
{"nick":"bajtos","date":"2014-08-26T09:07:02.782Z","type":"join"}
{"nick":"rendar","date":"2014-08-26T09:08:01.701Z","type":"join"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-26T09:12:09.851Z","type":"nick"}
{"nick":"saghul","message":"indeed :-/","date":"2014-08-26T09:12:45.291Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2014-08-26T09:21:05.061Z","type":"quit"}
{"nick":"bajtos","date":"2014-08-26T09:21:57.932Z","type":"join"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T09:27:22.812Z","type":"nick"}
{"nick":"ambro718","message":"saghul: Hey (I'm the one who write the signalfd patch). About the blocking problem I mentioned, the problem is that signal masks/blocking are thread-specific.","date":"2014-08-26T09:37:10.575Z","type":"message"}
{"nick":"ambro718","message":"so if you have two event loops or something, and one wants to handle a certain signal, it will be blocked only in that thread, the other thread may still consume it (and get an EINTR).","date":"2014-08-26T09:38:18.621Z","type":"message"}
{"nick":"ambro718","message":"The workaround is for the application to do all the signal setup in the main thread before starting any other threads. But it's not necessarily possible, consider that the uv_process implementation sets up a SIGCHLD watcher in uv_spawn().","date":"2014-08-26T09:39:21.656Z","type":"message"}
{"nick":"ambro718","message":"I'm thinking that the best solution would be to leave the current implementation in libuv with signal handlers, but add a function which user code can call to block all signals in the calling thread, which can be called at the start of any event loop thread. This assures syscalls in event loops will not get EINTR.  Though we need to ensure that there is any thread to handle the signal at all, so for that I would just have the signal code in ","date":"2014-08-26T09:42:41.241Z","type":"message"}
{"nick":"ambro718","message":"libuv create a dummy thread.","date":"2014-08-26T09:42:42.703Z","type":"message"}
{"nick":"quijote","reason":"Ping timeout: 245 seconds","date":"2014-08-26T09:42:47.547Z","type":"quit"}
{"nick":"ambro718","message":"(a dummy thread with no signals blocked)","date":"2014-08-26T09:43:30.370Z","type":"message"}
{"nick":"ambro718","message":"This info could give some context*. But the important part is that when a signal arrives at the process it may be handled by any thread which has it unblocked. * http://stackoverflow.com/questions/11679568/signal-handling-with-multiple-threads-in-linux","date":"2014-08-26T09:44:32.180Z","type":"message"}
{"nick":"jan____","date":"2014-08-26T09:45:33.904Z","type":"join"}
{"nick":"jan____","reason":"Changing host","date":"2014-08-26T09:45:56.270Z","type":"quit"}
{"nick":"jan____","date":"2014-08-26T09:45:56.383Z","type":"join"}
{"nick":"ambro718","message":"but the user could probably just call this unblock_all_signals() function in main at startup, so all other threads created after that would inherit the signal mask and would have all signals blocked (except the dummy signal handling thread which would explicitly unblock them)","date":"2014-08-26T09:47:55.411Z","type":"message"}
{"nick":"ambro718","message":"*block_all_signals()","date":"2014-08-26T09:48:05.258Z","type":"message"}
{"nick":"janjongboom","reason":"Ping timeout: 255 seconds","date":"2014-08-26T09:51:18.076Z","type":"quit"}
{"nick":"txdv","message":"saghul: I managed that bitch to get running","date":"2014-08-26T09:51:56.286Z","type":"message"}
{"nick":"quijote","date":"2014-08-26T09:52:48.335Z","type":"join"}
{"nick":"janjongboom","date":"2014-08-26T09:53:44.704Z","type":"join"}
{"nick":"c4milo","date":"2014-08-26T09:55:41.616Z","type":"join"}
{"nick":"txdv","message":"youuhooo, ssh into that thing","date":"2014-08-26T09:57:21.643Z","type":"message"}
{"nick":"rendar","message":"ambro718: is signalfd also present in bsd?","date":"2014-08-26T10:00:11.385Z","type":"message"}
{"nick":"c4milo","reason":"Ping timeout: 260 seconds","date":"2014-08-26T10:00:28.203Z","type":"quit"}
{"nick":"ambro718","message":"rendar: is not but a similar mechanism is available via kqueue","date":"2014-08-26T10:00:53.635Z","type":"message"}
{"nick":"rendar","message":"ambro718: oh i see, so signalfd is not working well in libuv?","date":"2014-08-26T10:01:09.413Z","type":"message"}
{"nick":"rendar","message":"sorry, i meant, is it working well?","date":"2014-08-26T10:01:32.765Z","type":"message"}
{"nick":"ambro718","message":"rendar: the problem is that signalfd is not directly useful for libuv, which wants to deliver signals to *all* watchers. In the naive solution (which my patch is not), uv_signal_init() would create a signalfd and set up a fd watcher. Problem is if this is done twice only one of those uv_signal_t things will receive the signal, but libuv specifically tries to ensure all do.","date":"2014-08-26T10:03:10.259Z","type":"message"}
{"nick":"ambro718","message":"my patch instead creates a global thread which uses signalfd to consume signals and (ab)uses the current signal handler function to dispatch them to event loops.","date":"2014-08-26T10:04:07.128Z","type":"message"}
{"nick":"rendar","message":"ambro718: hmm i see","date":"2014-08-26T10:04:58.697Z","type":"message"}
{"nick":"ambro718","message":"as I said, it's not really useful. All you need to achieve the same effect is to create a dummy thread, then you're free to block all signals in any thead you want (so they will not get random EINTR),.","date":"2014-08-26T10:04:59.037Z","type":"message"}
{"nick":"rendar","message":"exactly","date":"2014-08-26T10:05:20.355Z","type":"message"}
{"nick":"rendar","message":"i was just asking that","date":"2014-08-26T10:05:24.083Z","type":"message"}
{"nick":"ambro718","message":"as long as you have a dummy thread running you can block all signals in your event loops, they will be processed by this dummy thread.","date":"2014-08-26T10:06:16.783Z","type":"message"}
{"nick":"ambro718","message":"I'm making a patch now, should be much less code than my last patch :)","date":"2014-08-26T10:06:48.286Z","type":"message"}
{"nick":"rendar","message":"right, but having 1 dummy thread which masks all signals and process them calling the handler, or having a dummy thread whicih listens with signalfd, is basically the same thing...","date":"2014-08-26T10:07:21.161Z","type":"message"}
{"nick":"ambro718","message":"*correction the dummy thread unmasks them not masks","date":"2014-08-26T10:07:49.293Z","type":"message"}
{"nick":"ambro718","message":"but yes","date":"2014-08-26T10:07:52.560Z","type":"message"}
{"nick":"ambro718","message":"and it should work on any unix system","date":"2014-08-26T10:08:14.290Z","type":"message"}
{"nick":"rendar","message":"unmask==thread will able to listen signals?","date":"2014-08-26T10:09:21.335Z","type":"message"}
{"nick":"ambro718","message":"yeah, masked (blocked) signals are not delivered to a thread","date":"2014-08-26T10:09:42.717Z","type":"message"}
{"nick":"rendar","message":"yeah, that's absolutely right","date":"2014-08-26T10:09:52.314Z","type":"message"}
{"nick":"ambro718","message":"I'm just wondering how this interacts with user code like node.js. Maybe the best is to just mask all signals early in main? This way the mask is inherited by all threads created after that.","date":"2014-08-26T10:11:05.783Z","type":"message"}
{"nick":"ambro718","message":"except the dummy thread which unmasks them on start so it can receive them.","date":"2014-08-26T10:11:30.220Z","type":"message"}
{"nick":"ambro718","message":"problem is you can't make it completely transparent to the application","date":"2014-08-26T10:12:26.935Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2014-08-26T10:12:34.366Z","type":"quit"}
{"nick":"rendar","message":"ambro718: good question, but i guess the best solution would still be the dummy thread that there is now there, its also portable across unices","date":"2014-08-26T10:17:28.982Z","type":"message"}
{"nick":"rendar","message":"i mean, i don't know if it will change so much, with other methods","date":"2014-08-26T10:17:41.027Z","type":"message"}
{"nick":"ambro718","message":"I agree.","date":"2014-08-26T10:18:10.994Z","type":"message"}
{"nick":"rendar","message":"ambro718: also because internally, even signalfd would be more o less a dummy thread+a pipe, i guess :)","date":"2014-08-26T10:18:12.363Z","type":"message"}
{"nick":"ambro718","message":"ok off to coding :)","date":"2014-08-26T10:18:34.863Z","type":"message"}
{"nick":"rendar","message":":)","date":"2014-08-26T10:18:41.053Z","type":"message"}
{"nick":"rendar","message":"i see unix signals as a big liability to today's applications","date":"2014-08-26T10:18:52.394Z","type":"message"}
{"nick":"rendar","message":"expecially with multithreaded ones","date":"2014-08-26T10:19:03.285Z","type":"message"}
{"nick":"ambro718","message":"s/signals // ;)","date":"2014-08-26T10:19:06.921Z","type":"message"}
{"nick":"rendar","message":"lol","date":"2014-08-26T10:19:39.252Z","type":"message"}
{"nick":"rendar","message":"yeah, there are much things in unix not suitable for todays stuff","date":"2014-08-26T10:19:58.511Z","type":"message"}
{"nick":"rendar","message":"i totally agree","date":"2014-08-26T10:20:14.036Z","type":"message"}
{"nick":"ambro718","message":"don't forget SIGPIPE and children inheriting fd's by default","date":"2014-08-26T10:20:16.984Z","type":"message"}
{"nick":"rendar","message":"exactly","date":"2014-08-26T10:21:17.183Z","type":"message"}
{"nick":"rendar","message":":)","date":"2014-08-26T10:21:18.026Z","type":"message"}
{"nick":"abraxas","reason":"Remote host closed the connection","date":"2014-08-26T10:25:01.444Z","type":"quit"}
{"nick":"saghul","new_nick":"saghul|afk","date":"2014-08-26T10:25:55.672Z","type":"nick"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-08-26T10:27:54.253Z","type":"quit"}
{"nick":"daviddias","date":"2014-08-26T10:29:43.470Z","type":"join"}
{"nick":"sinclair-work","reason":"Quit: ChatZilla 0.9.90.1 [Firefox 31.0/20140716183446]","date":"2014-08-26T10:32:01.916Z","type":"quit"}
{"nick":"karupa","new_nick":"zz_karupa","date":"2014-08-26T10:39:41.565Z","type":"nick"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-26T10:48:42.966Z","type":"nick"}
{"nick":"janjongboom","reason":"Ping timeout: 272 seconds","date":"2014-08-26T10:51:55.704Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T10:54:18.057Z","type":"join"}
{"nick":"seishun","reason":"Ping timeout: 250 seconds","date":"2014-08-26T11:13:50.251Z","type":"quit"}
{"nick":"quijote","date":"2014-08-26T11:14:31.196Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 240 seconds","date":"2014-08-26T11:18:45.212Z","type":"quit"}
{"nick":"daviddias","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-26T11:25:50.564Z","type":"quit"}
{"nick":"seishun","date":"2014-08-26T11:25:57.870Z","type":"join"}
{"nick":"janjongboom","reason":"Ping timeout: 255 seconds","date":"2014-08-26T11:37:02.932Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T11:37:49.704Z","type":"join"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2014-08-26T11:41:59.787Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T11:44:00.615Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 246 seconds","date":"2014-08-26T11:48:18.189Z","type":"quit"}
{"nick":"janjongboom","reason":"Ping timeout: 272 seconds","date":"2014-08-26T11:52:43.704Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T11:53:52.175Z","type":"join"}
{"nick":"txdv","message":"fucking nginx queue","date":"2014-08-26T12:01:55.554Z","type":"message"}
{"nick":"txdv","message":"why doesnt it work on windows","date":"2014-08-26T12:01:59.483Z","type":"message"}
{"nick":"AvianFlu","date":"2014-08-26T12:10:37.176Z","type":"join"}
{"nick":"AvianFlu","reason":"Client Quit","date":"2014-08-26T12:10:58.427Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T12:11:43.254Z","type":"join"}
{"nick":"ambro718","message":"ok I think I figured out these signals, https://github.com/saghul/pyuv/issues/173#issuecomment-53411235","date":"2014-08-26T12:12:56.461Z","type":"message"}
{"nick":"quijote","date":"2014-08-26T12:15:06.211Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 250 seconds","date":"2014-08-26T12:19:48.191Z","type":"quit"}
{"nick":"rendar","reason":"Ping timeout: 245 seconds","date":"2014-08-26T12:23:32.360Z","type":"quit"}
{"nick":"toothrot","date":"2014-08-26T12:24:58.997Z","type":"join"}
{"nick":"abraxas","date":"2014-08-26T12:25:47.004Z","type":"join"}
{"nick":"saghul|afk","message":"sorry folks, today I'm half on half off... :-S","date":"2014-08-26T12:30:39.407Z","type":"message"}
{"nick":"abraxas","reason":"Ping timeout: 272 seconds","date":"2014-08-26T12:30:43.703Z","type":"quit"}
{"nick":"janjongboom","reason":"Ping timeout: 255 seconds","date":"2014-08-26T12:38:41.970Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T12:39:21.703Z","type":"join"}
{"nick":"rendar","date":"2014-08-26T12:40:18.383Z","type":"join"}
{"nick":"cjihrig","date":"2014-08-26T12:42:40.171Z","type":"join"}
{"nick":"cjihrig","reason":"Quit: Leaving.","date":"2014-08-26T13:11:06.373Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-26T13:13:10.840Z","type":"join"}
{"nick":"bajtos","date":"2014-08-26T13:14:59.816Z","type":"join"}
{"nick":"quijote","date":"2014-08-26T13:16:00.706Z","type":"join"}
{"nick":"toothrot","reason":"Ping timeout: 245 seconds","date":"2014-08-26T13:17:17.380Z","type":"quit"}
{"nick":"AndreasMadsen","date":"2014-08-26T13:17:24.207Z","type":"join"}
{"nick":"guybrush","reason":"Excess Flood","date":"2014-08-26T13:19:15.850Z","type":"quit"}
{"nick":"guybrush","date":"2014-08-26T13:20:03.738Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 272 seconds","date":"2014-08-26T13:20:45.706Z","type":"quit"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T13:21:18.181Z","type":"nick"}
{"nick":"nathan7","message":"saghul|afk: you're half off? I'll have two!","date":"2014-08-26T13:22:17.395Z","type":"message"}
{"nick":"kazupon","reason":"Remote host closed the connection","date":"2014-08-26T13:23:02.596Z","type":"quit"}
{"nick":"kazupon","date":"2014-08-26T13:23:29.942Z","type":"join"}
{"nick":"indutny","message":"txdv: ?","date":"2014-08-26T13:28:43.779Z","type":"message"}
{"nick":"c4milo","date":"2014-08-26T13:32:26.895Z","type":"join"}
{"nick":"txdv","message":"indutny: ?","date":"2014-08-26T13:32:40.058Z","type":"message"}
{"nick":"indutny","message":"what's wrong with nginx queue?","date":"2014-08-26T13:32:50.303Z","type":"message"}
{"nick":"daviddias","date":"2014-08-26T13:33:27.114Z","type":"join"}
{"nick":"txdv","message":"dunno, can't get it to work with windows in my recent patch","date":"2014-08-26T13:34:29.530Z","type":"message"}
{"nick":"c4milo","reason":"Ping timeout: 245 seconds","date":"2014-08-26T13:36:57.558Z","type":"quit"}
{"nick":"txdv","message":"https://github.com/joyent/libuv/pull/1439#issuecomment-53412543","date":"2014-08-26T13:37:02.634Z","type":"message"}
{"nick":"janjongboom","reason":"Ping timeout: 272 seconds","date":"2014-08-26T13:37:51.704Z","type":"quit"}
{"nick":"AndreasMadsen","date":"2014-08-26T13:38:45.207Z","type":"quit"}
{"nick":"janjongboom","date":"2014-08-26T13:39:58.986Z","type":"join"}
{"nick":"thlorenz","date":"2014-08-26T13:40:50.319Z","type":"join"}
{"nick":"cjihrig","date":"2014-08-26T13:41:09.201Z","type":"join"}
{"nick":"cjihrig","reason":"Client Quit","date":"2014-08-26T13:42:23.295Z","type":"quit"}
{"nick":"c4milo","date":"2014-08-26T13:42:36.127Z","type":"join"}
{"nick":"rendar","message":"txdv: is that the queue used by libuv?","date":"2014-08-26T13:56:52.829Z","type":"message"}
{"nick":"txdv","message":"i dont understand the question","date":"2014-08-26T13:58:59.215Z","type":"message"}
{"nick":"txdv","message":"libuv uses the nginx implementation of a queue","date":"2014-08-26T14:04:39.942Z","type":"message"}
{"nick":"txdv","message":"a bunch of macros","date":"2014-08-26T14:04:46.464Z","type":"message"}
{"nick":"txdv","message":"for super cereal speed","date":"2014-08-26T14:04:51.573Z","type":"message"}
{"nick":"rendar","message":"txdv: that was the question, but is it also lock-free?","date":"2014-08-26T14:07:25.352Z","type":"message"}
{"nick":"txdv","message":"yeah, but not thread safe","date":"2014-08-26T14:10:50.559Z","type":"message"}
{"nick":"saghul|afk","message":"it's not the one from nginx anymore, but the principle is the same","date":"2014-08-26T14:11:35.514Z","type":"message"}
{"nick":"rendar","message":"saghul|afk: has that been modified largely, from the original nginx version?","date":"2014-08-26T14:12:19.213Z","type":"message"}
{"nick":"cjihrig","date":"2014-08-26T14:12:48.183Z","type":"join"}
{"nick":"saghul|afk","message":"yes and no, it';s a new implementation, but the idea is the same, also the API is almost 100% equivalent","date":"2014-08-26T14:13:23.690Z","type":"message"}
{"nick":"daviddias","reason":"Quit: My MacBook Pro has gone to sleep. ZZZzzz…","date":"2014-08-26T14:14:02.997Z","type":"quit"}
{"nick":"saghul|afk","message":"rendar: https://github.com/joyent/libuv/commit/0635e297148ae8cd4065013002de4bbaab72449f","date":"2014-08-26T14:14:19.463Z","type":"message"}
{"nick":"rendar","message":"saghul|afk: i see","date":"2014-08-26T14:15:59.435Z","type":"message"}
{"nick":"quijote","date":"2014-08-26T14:16:45.559Z","type":"join"}
{"nick":"rendar","message":"saghul|afk: but how can it be not thread safe?  i mean, aren't several threads created by libuv attempting to insert data into the main thread queue, with that queue implementation?","date":"2014-08-26T14:16:49.292Z","type":"message"}
{"nick":"saghul|afk","message":"rendar: one thread could be running io handle callbacks and another one inserting elements -> boom","date":"2014-08-26T14:18:59.863Z","type":"message"}
{"nick":"cjihrig","reason":"Ping timeout: 250 seconds","date":"2014-08-26T14:19:24.170Z","type":"quit"}
{"nick":"quijote","reason":"Ping timeout: 245 seconds","date":"2014-08-26T14:21:07.555Z","type":"quit"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2014-08-26T14:24:30.076Z","type":"quit"}
{"nick":"rendar","message":"saghul|afk: i see, so how it works? is there a mutex to control that?","date":"2014-08-26T14:26:19.736Z","type":"message"}
{"nick":"bajtos","date":"2014-08-26T14:28:16.640Z","type":"join"}
{"nick":"saghul|afk","message":"rendar: there is no mutex, libuv is not thread safe","date":"2014-08-26T14:35:39.000Z","type":"message"}
{"nick":"quijote","date":"2014-08-26T14:39:27.923Z","type":"join"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T14:39:39.644Z","type":"quit"}
{"nick":"rendar","message":"saghul|afk: i know, but libuv also creates multiple threads to do the async i/o, while the main thread is the only one which calls callbacks, right?","date":"2014-08-26T14:40:58.417Z","type":"message"}
{"nick":"AvianFlu","date":"2014-08-26T14:41:27.393Z","type":"join"}
{"nick":"cjihrig","date":"2014-08-26T14:46:26.132Z","type":"join"}
{"nick":"saghul|afk","message":"rendar: no, libuv doesn't use multiple threads for async i/o, it's single threaded","date":"2014-08-26T14:46:57.764Z","type":"message"}
{"nick":"saghul|afk","message":"the multiple threads are only used for fs operations and thread pool","date":"2014-08-26T14:47:17.752Z","type":"message"}
{"nick":"a_le","date":"2014-08-26T14:49:42.709Z","type":"join"}
{"nick":"rendar","message":"saghul|afk: oh, ok","date":"2014-08-26T14:54:07.617Z","type":"message"}
{"nick":"rendar","message":"saghul|afk: what is the purpose of the threadpool in libuv?","date":"2014-08-26T14:55:14.186Z","type":"message"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-26T14:57:37.560Z","type":"nick"}
{"nick":"thlorenz","reason":"Remote host closed the connection","date":"2014-08-26T14:59:31.390Z","type":"quit"}
{"nick":"thlorenz","date":"2014-08-26T15:04:18.707Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2014-08-26T15:09:24.616Z","type":"quit"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T15:10:20.862Z","type":"nick"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-26T15:14:58.709Z","type":"nick"}
{"nick":"AvianFlu","reason":"Quit: Leaving","date":"2014-08-26T15:14:59.613Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T15:16:07.181Z","type":"join"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T15:16:35.651Z","type":"nick"}
{"nick":"cjihrig","reason":"Quit: Leaving.","date":"2014-08-26T15:16:47.133Z","type":"quit"}
{"nick":"saghul|afk","message":"rendar: run stuff that blocks, like fs operations, getaddrinfo and user code","date":"2014-08-26T15:17:03.743Z","type":"message"}
{"nick":"Soarez","new_nick":"Soarez|afk","date":"2014-08-26T15:18:26.437Z","type":"nick"}
{"nick":"brson","date":"2014-08-26T15:19:14.054Z","type":"join"}
{"nick":"txdv","message":"saghul|afk: shouldn't every handle contain a field of its loop?","date":"2014-08-26T15:19:27.138Z","type":"message"}
{"nick":"txdv","message":"https://github.com/joyent/libuv/blob/master/src/win/req-inl.h#L82-L85","date":"2014-08-26T15:21:37.066Z","type":"message"}
{"nick":"txdv","message":"funny","date":"2014-08-26T15:21:43.418Z","type":"message"}
{"nick":"txdv","message":"provide the loop argument","date":"2014-08-26T15:21:49.250Z","type":"message"}
{"nick":"txdv","message":"and then just dismiss it","date":"2014-08-26T15:21:52.506Z","type":"message"}
{"nick":"bajtos","reason":"Quit: bajtos","date":"2014-08-26T15:22:32.646Z","type":"quit"}
{"nick":"txdv","message":"saghul|afk: i currently have the problem that i don't have a field to save the loop when i issue the write_req and we are still not connected","date":"2014-08-26T15:23:41.321Z","type":"message"}
{"nick":"txdv","message":"this means we will have to add a loop pointer, a buff pointer and a nbufs to the write_req","date":"2014-08-26T15:24:02.924Z","type":"message"}
{"nick":"txdv","message":"it will make the write_req 24 bytes fatter","date":"2014-08-26T15:24:20.609Z","type":"message"}
{"nick":"cjihrig","date":"2014-08-26T15:24:26.252Z","type":"join"}
{"nick":"jgi","date":"2014-08-26T15:28:42.705Z","type":"join"}
{"nick":"quijote","reason":"Ping timeout: 255 seconds","date":"2014-08-26T15:29:15.065Z","type":"quit"}
{"nick":"AvianFlu","reason":"Read error: Connection reset by peer","date":"2014-08-26T15:33:25.600Z","type":"quit"}
{"nick":"AvianFlu","date":"2014-08-26T15:34:42.110Z","type":"join"}
{"nick":"mikeal","date":"2014-08-26T15:38:01.772Z","type":"join"}
{"nick":"bajtos","date":"2014-08-26T15:40:51.709Z","type":"join"}
{"nick":"guybrush","reason":"Excess Flood","date":"2014-08-26T15:41:30.608Z","type":"quit"}
{"nick":"guybrush","date":"2014-08-26T15:42:02.829Z","type":"join"}
{"nick":"Soarez|afk","new_nick":"Soarez","date":"2014-08-26T15:46:59.757Z","type":"nick"}
{"nick":"dap_","date":"2014-08-26T15:53:05.291Z","type":"join"}
{"nick":"quijote","date":"2014-08-26T15:56:59.222Z","type":"join"}
{"nick":"quijote_","date":"2014-08-26T15:58:42.303Z","type":"join"}
{"nick":"quijote","reason":"Read error: Connection reset by peer","date":"2014-08-26T15:58:45.525Z","type":"quit"}
