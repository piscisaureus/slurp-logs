{"nick":"isaacs","message":"usually because of assumptions that you don't even know you have.","date":"2012-06-17T00:00:03.805Z","type":"message"}
{"nick":"isaacs","message":"you can try as hard as possible to be completely honest and reasonable, and still fuck up.","date":"2012-06-17T00:00:13.335Z","type":"message"}
{"nick":"isaacs","message":"in fact, it's almost impossible NOT to fuck up in that case.","date":"2012-06-17T00:00:22.874Z","type":"message"}
{"nick":"einaros","message":"I'll be eagerly awaiting the results all the same, though. regardless of how ws matches up against the others, I'll have good reason to make further improvements.","date":"2012-06-17T00:01:04.561Z","type":"message"}
{"nick":"isaacs","message":"yes","date":"2012-06-17T00:01:22.514Z","type":"message"}
{"nick":"isaacs","message":"benchmarks are not for finding out how fast you are, they're for finding out where yor'e slow","date":"2012-06-17T00:01:32.215Z","type":"message"}
{"nick":"einaros","message":"exactly","date":"2012-06-17T00:01:39.170Z","type":"message"}
{"nick":"isaacs","message":"that's why bad benchmarks are so frustrating! they tell you nothing!","date":"2012-06-17T00:01:40.914Z","type":"message"}
{"nick":"einaros","message":"I've already started rewriting bigger chunks of my websocket code to work against libuv directly .. which should improve memory handling perf","date":"2012-06-17T00:03:10.872Z","type":"message"}
{"nick":"einaros","message":"but overall it feels like a bad idea","date":"2012-06-17T00:03:15.905Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-06-17T00:03:51.283Z","type":"quit"}
{"nick":"isaacs","message":"hm","date":"2012-06-17T00:04:40.171Z","type":"message"}
{"nick":"isaacs","message":"yeah, that sounds kind of suspect to me","date":"2012-06-17T00:04:49.731Z","type":"message"}
{"nick":"isaacs","message":"i mean, unless you wantit to be portable to luvit and julia and whatnot","date":"2012-06-17T00:05:03.266Z","type":"message"}
{"nick":"isaacs","message":"but if you want it to be specifically a node thing, then i usually find doing it in JS is best.","date":"2012-06-17T00:05:18.524Z","type":"message"}
{"nick":"einaros","message":"what's killing websocket perf at the moment is 'new Buffer' and js<->native transition. so I'm just pushing as much as I can over to native to see if it improves anything which would make it be worth the extra work.","date":"2012-06-17T00:06:56.327Z","type":"message"}
{"nick":"isaacs","topic":"4 more! https://github.com/joyent/node/issues?milestone=10&state=open","date":"2012-06-17T00:06:59.813Z","type":"topic"}
{"nick":"einaros","message":"I don't think it will be, but doesn't hurt to give it a go","date":"2012-06-17T00:07:09.951Z","type":"message"}
{"nick":"isaacs","message":"einaros: you're creating these buffers in C or JS?","date":"2012-06-17T00:08:09.459Z","type":"message"}
{"nick":"einaros","message":"right now - js","date":"2012-06-17T00:09:01.520Z","type":"message"}
{"nick":"Raynos","date":"2012-06-17T00:10:14.346Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 246 seconds","date":"2012-06-17T00:11:43.406Z","type":"quit"}
{"nick":"isaacs","message":"i see","date":"2012-06-17T00:11:58.786Z","type":"message"}
{"nick":"isaacs","message":"hm.  that shouldn't be terrible, then","date":"2012-06-17T00:12:04.446Z","type":"message"}
{"nick":"einaros","message":"for a websocket.send(someBuffer) there are a few special cases where I can avoid making a buffer of size someBuffer.length, but in most instances I have to copy that data over to another buffer which is headerLength + someBuffer.length and then mask each byte of the payload by some value","date":"2012-06-17T00:12:36.190Z","type":"message"}
{"nick":"einaros","message":"the masking I hand off to native code, that improves perf for larger payloads","date":"2012-06-17T00:13:04.736Z","type":"message"}
{"nick":"einaros","message":"in cases where I do not have to touch the someBuffer data, I merely create a new buffer big enough to hold the header (typically 2-6 bytes long in that case), then do to separate socket writes of the header and payload","date":"2012-06-17T00:14:09.741Z","type":"message"}
{"nick":"einaros","message":"since the nagle algo is off, that will most often result in two separate packets (with an added tcp header etc as overhead)","date":"2012-06-17T00:14:58.689Z","type":"message"}
{"nick":"ryah","date":"2012-06-17T00:15:09.764Z","type":"join"}
{"nick":"ryah","message":"meh, i really don't want to do this but this benchmark is annoying me","date":"2012-06-17T00:15:22.641Z","type":"message"}
{"nick":"ryah","message":"has anyone gotten his load generator to run?","date":"2012-06-17T00:15:31.668Z","type":"message"}
{"nick":"ryah","message":"i'm getting ","date":"2012-06-17T00:15:40.620Z","type":"message"}
{"nick":"ryah","message":"~/src/wsdemo% erl -pa ebin deps/*/ebin -s wsdemo","date":"2012-06-17T00:15:42.606Z","type":"message"}
{"nick":"ryah","message":"Erlang R14B04 (erts-5.8.5) [source] [64-bit] [smp:4:4] [rq:4] [async-threads:0] [kernel-poll:false]","date":"2012-06-17T00:15:42.811Z","type":"message"}
{"nick":"ryah","message":"{\"init terminating in do_boot\",{undef,[{wsdemo,start,[]},{init,start_it,1},{init,start_em,1}]}}","date":"2012-06-17T00:15:45.620Z","type":"message"}
{"nick":"ryah","message":"init terminating in do_boot ()","date":"2012-06-17T00:15:48.681Z","type":"message"}
{"nick":"einaros","message":"everything runs fine here, but his websocket client is broken","date":"2012-06-17T00:16:02.178Z","type":"message"}
{"nick":"ryah","message":"einaros: have you run the benchmark?","date":"2012-06-17T00:16:02.333Z","type":"message"}
{"nick":"einaros","message":"I haven't bothered fixing it, since it's his thing to deal with","date":"2012-06-17T00:16:26.926Z","type":"message"}
{"nick":"ryah","message":"sure, but i want to see if 'ws' is actually faster than 'websocket' or it's something else entirely","date":"2012-06-17T00:16:50.770Z","type":"message"}
{"nick":"ryah","message":"einaros: have you done benchmarks between the two?","date":"2012-06-17T00:17:03.983Z","type":"message"}
{"nick":"einaros","message":"well at the moment you can't run ws against it, since the benchmark's client code doesn't work with incomplete payloads (https://github.com/Weltschmerz/wsdemo/blob/master/src/websocket_client.erl#L170-190)","date":"2012-06-17T00:17:52.215Z","type":"message"}
{"nick":"einaros","message":"in terms of ws vs websocket-node, ws is faster for all use cases .. how much, however, varies","date":"2012-06-17T00:18:19.624Z","type":"message"}
{"nick":"ryah","message":"einaros: by an order of magnitude?","date":"2012-06-17T00:18:51.035Z","type":"message"}
{"nick":"einaros","message":"added you to a repo at https://github.com/einaros/websocket-benchmark","date":"2012-06-17T00:19:44.305Z","type":"message"}
{"nick":"einaros","message":"I've yet to do latency benchmarks, which would be more interesting here","date":"2012-06-17T00:19:56.989Z","type":"message"}
{"nick":"sh1mmer","date":"2012-06-17T00:21:42.409Z","type":"join"}
{"nick":"sh1mmer","reason":"Client Quit","date":"2012-06-17T00:21:42.409Z","type":"quit"}
{"nick":"isaacs","message":"einaros: yeah, i recall","date":"2012-06-17T00:22:36.351Z","type":"message"}
{"nick":"isaacs","message":"haven't had a chance to play with it yet","date":"2012-06-17T00:22:40.588Z","type":"message"}
{"nick":"ryah","reason":"Quit: bbl","date":"2012-06-17T00:23:33.455Z","type":"quit"}
{"nick":"loladiro","reason":"Ping timeout: 246 seconds","date":"2012-06-17T01:16:40.614Z","type":"quit"}
{"nick":"sh1mmer","date":"2012-06-17T01:50:58.321Z","type":"join"}
{"nick":"dshaw_","date":"2012-06-17T01:52:05.712Z","type":"join"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-06-17T01:57:18.528Z","type":"quit"}
{"nick":"sh1mmer","reason":"Quit: sh1mmer","date":"2012-06-17T02:01:47.235Z","type":"quit"}
{"nick":"sh1mmer","date":"2012-06-17T02:16:09.735Z","type":"join"}
{"nick":"brson","reason":"Ping timeout: 245 seconds","date":"2012-06-17T02:22:20.001Z","type":"quit"}
{"nick":"sh1mmer","reason":"Quit: sh1mmer","date":"2012-06-17T02:23:09.669Z","type":"quit"}
{"nick":"AvianFlu","message":"man, these centOS failures are batshit weird","date":"2012-06-17T03:03:34.180Z","type":"message"}
{"nick":"brson","date":"2012-06-17T03:25:33.105Z","type":"join"}
{"nick":"dshaw_","date":"2012-06-17T03:58:09.813Z","type":"join"}
{"nick":"isaacs","message":"AvianFlu: oh, you're looking at em?","date":"2012-06-17T04:05:16.325Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: which ones, the dgrams?","date":"2012-06-17T04:05:21.875Z","type":"message"}
{"nick":"mmalecki","date":"2012-06-17T04:23:28.099Z","type":"join"}
{"nick":"AvianFlu","message":"isaacs, I got shanghai'd into devops for most of the day, but I've been poking at the dgram ones","date":"2012-06-17T04:24:12.665Z","type":"message"}
{"nick":"AvianFlu","message":"they don't make any sense to me","date":"2012-06-17T04:24:15.922Z","type":"message"}
{"nick":"AvianFlu","message":"the parent's send socket closes quickly, but I don't see a cause","date":"2012-06-17T04:24:52.541Z","type":"message"}
{"nick":"mmalecki","message":"lol, shanghai'd","date":"2012-06-17T04:29:47.519Z","type":"message"}
{"nick":"AvianFlu","message":"mmalecki: trying to statically link an outdated opencv version counts as shanghai'd.","date":"2012-06-17T04:34:32.159Z","type":"message"}
{"nick":"mmalecki","message":"AvianFlu: yeah it does","date":"2012-06-17T04:36:03.651Z","type":"message"}
{"nick":"mmalecki","message":"AvianFlu: also, I recall you telling me about it yesterday","date":"2012-06-17T04:36:13.671Z","type":"message"}
{"nick":"mmalecki","message":"fuck yeah, I remember something from last night!","date":"2012-06-17T04:36:28.170Z","type":"message"}
{"nick":"sh1mmer","date":"2012-06-17T05:16:51.849Z","type":"join"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-06-17T05:29:24.585Z","type":"quit"}
{"nick":"dshaw_","date":"2012-06-17T05:36:12.273Z","type":"join"}
{"nick":"rendar","date":"2012-06-17T05:47:31.051Z","type":"join"}
{"nick":"sh1mmer","reason":"Quit: sh1mmer","date":"2012-06-17T06:31:15.943Z","type":"quit"}
{"nick":"logicalparadox","date":"2012-06-17T06:53:43.840Z","type":"join"}
{"nick":"logicalparadox","reason":"Client Quit","date":"2012-06-17T06:54:16.437Z","type":"quit"}
{"nick":"paddybyers","date":"2012-06-17T07:05:18.134Z","type":"join"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-06-17T07:21:06.785Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-06-17T07:28:22.034Z","type":"quit"}
{"nick":"indutny","message":"isaacs: what stdio[2] stuff were you guys talking about? :)","date":"2012-06-17T07:32:11.630Z","type":"message"}
{"nick":"indutny","message":"isaacs: looks I didn't get that on the call (because I don't seem to get it even now :P )","date":"2012-06-17T07:32:31.681Z","type":"message"}
{"nick":"indutny","message":"isaacs: btw, forks do not have stdin atm","date":"2012-06-17T07:33:46.498Z","type":"message"}
{"nick":"TheJH","date":"2012-06-17T07:44:39.613Z","type":"join"}
{"nick":"bnoordhuis_","date":"2012-06-17T07:50:37.467Z","type":"join"}
{"nick":"bnoordhuis__","date":"2012-06-17T08:11:35.338Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-06-17T08:13:30.870Z","type":"quit"}
{"nick":"bnoordhuis_","reason":"Ping timeout: 265 seconds","date":"2012-06-17T08:15:30.276Z","type":"quit"}
{"nick":"bnoordhuis__","reason":"Ping timeout: 246 seconds","date":"2012-06-17T08:19:16.141Z","type":"quit"}
{"nick":"mraleph","date":"2012-06-17T08:20:12.337Z","type":"join"}
{"nick":"paddybyers","date":"2012-06-17T08:20:55.149Z","type":"join"}
{"nick":"hz","date":"2012-06-17T08:33:55.169Z","type":"join"}
{"nick":"hz","reason":"Client Quit","date":"2012-06-17T08:36:43.967Z","type":"quit"}
{"nick":"hz","date":"2012-06-17T08:37:08.374Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 244 seconds","date":"2012-06-17T08:40:10.545Z","type":"quit"}
{"nick":"mmalecki","date":"2012-06-17T09:06:23.906Z","type":"join"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-06-17T09:09:27.181Z","type":"quit"}
{"nick":"brson","reason":"Remote host closed the connection","date":"2012-06-17T09:19:47.933Z","type":"quit"}
{"nick":"TheJH","reason":"Read error: Connection reset by peer","date":"2012-06-17T10:19:43.424Z","type":"quit"}
{"nick":"loladiro","date":"2012-06-17T10:30:44.307Z","type":"join"}
{"nick":"loladiro_","date":"2012-06-17T10:50:43.213Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 265 seconds","date":"2012-06-17T10:53:04.257Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2012-06-17T10:53:04.455Z","type":"nick"}
{"nick":"hz","message":"hey guys","date":"2012-06-17T11:05:21.327Z","type":"message"}
{"nick":"hz","message":"in generated project for visual studio","date":"2012-06-17T11:05:43.897Z","type":"message"}
{"nick":"hz","message":"in compiler command line i get /TP","date":"2012-06-17T11:06:02.267Z","type":"message"}
{"nick":"hz","message":"it means the code is compiled as c++","date":"2012-06-17T11:06:15.885Z","type":"message"}
{"nick":"hz","message":"is this wanted? or not?","date":"2012-06-17T11:06:35.206Z","type":"message"}
{"nick":"hij1nx","date":"2012-06-17T11:45:26.356Z","type":"join"}
{"nick":"hij1nx","reason":"Remote host closed the connection","date":"2012-06-17T11:45:32.493Z","type":"quit"}
{"nick":"hij1nx","date":"2012-06-17T11:46:05.296Z","type":"join"}
{"nick":"hij1nx","reason":"Client Quit","date":"2012-06-17T11:46:27.559Z","type":"quit"}
{"nick":"mmalecki","message":"where is Ben when you need him.","date":"2012-06-17T12:42:07.350Z","type":"message"}
{"nick":"mmalecki","message":"anyway, is running the same event loop twice safe?","date":"2012-06-17T12:42:46.171Z","type":"message"}
{"nick":"c4milo","date":"2012-06-17T12:43:17.374Z","type":"join"}
{"nick":"hz","reason":"Disconnected by services","date":"2012-06-17T13:50:06.739Z","type":"quit"}
{"nick":"hz","date":"2012-06-17T13:50:10.294Z","type":"join"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-06-17T14:15:35.674Z","type":"quit"}
{"nick":"loladiro","reason":"Quit: loladiro","date":"2012-06-17T14:31:08.027Z","type":"quit"}
{"nick":"indutny","message":"mmalecki: AFAIK no","date":"2012-06-17T14:31:57.829Z","type":"message"}
{"nick":"mmalecki","message":"indutny: thanks","date":"2012-06-17T14:43:52.316Z","type":"message"}
{"nick":"AvianFlu","message":"indutny, wait, you said forks don't have stdin before?","date":"2012-06-17T14:43:56.575Z","type":"message"}
{"nick":"AvianFlu","message":"like, it's broken?","date":"2012-06-17T14:44:27.724Z","type":"message"}
{"nick":"indutny","message":"AvianFlu: em... not sure about before","date":"2012-06-17T14:46:33.729Z","type":"message"}
{"nick":"indutny","message":"AvianFlu: but now they don't AFAIK","date":"2012-06-17T14:46:43.190Z","type":"message"}
{"nick":"AvianFlu","message":"that's probably not a good thing.","date":"2012-06-17T14:47:03.384Z","type":"message"}
{"nick":"AvianFlu","action":"goes to poke it with a stick","date":"2012-06-17T14:47:07.669Z","type":"action"}
{"nick":"indutny","message":"AvianFlu: indeed, stdin is an IPC channel atm","date":"2012-06-17T14:47:31.893Z","type":"message"}
{"nick":"indutny","message":"AvianFlu: but it's like one-line change to fix it","date":"2012-06-17T14:47:41.789Z","type":"message"}
{"nick":"AvianFlu","message":"the best kind :D","date":"2012-06-17T14:48:02.298Z","type":"message"}
{"nick":"loladiro","date":"2012-06-17T14:55:42.726Z","type":"join"}
{"nick":"einaros","message":"that websocket benchmark node took part in should be run against 0.7, not 0.6","date":"2012-06-17T15:01:36.130Z","type":"message"}
{"nick":"AvianFlu","message":"do we even know which node version was used?","date":"2012-06-17T15:04:04.303Z","type":"message"}
{"nick":"AvianFlu","message":"(I agree with you though, lol)","date":"2012-06-17T15:04:31.584Z","type":"message"}
{"nick":"einaros","message":"I haven't seen any mention of it","date":"2012-06-17T15:05:15.236Z","type":"message"}
{"nick":"einaros","message":"but the benchmark is ridiculous: the suite is broken and the data is wrong.","date":"2012-06-17T15:05:40.793Z","type":"message"}
{"nick":"mmalecki","reason":"Ping timeout: 240 seconds","date":"2012-06-17T15:18:54.906Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-06-17T15:23:57.282Z","type":"join"}
{"nick":"mmalecki","date":"2012-06-17T15:30:32.710Z","type":"join"}
{"nick":"mmalecki","reason":"Ping timeout: 246 seconds","date":"2012-06-17T15:36:46.125Z","type":"quit"}
{"nick":"milani","date":"2012-06-17T15:41:13.389Z","type":"join"}
{"nick":"milani","reason":"Quit: Ex-Chat","date":"2012-06-17T15:46:58.275Z","type":"quit"}
{"nick":"isaacs","message":"indutny: yeah, i know, it's fine","date":"2012-06-17T16:17:37.618Z","type":"message"}
{"nick":"isaacs","message":"indutny: we'll address in 0.9","date":"2012-06-17T16:17:42.377Z","type":"message"}
{"nick":"isaacs","message":"indutny: the stdio[2] thing was just that for some reason, i think maybe a first wip, you didn't have that, and both piscisaureus_ and i seemed to have missed that you'd eventually added it.","date":"2012-06-17T16:18:24.857Z","type":"message"}
{"nick":"isaacs","message":"indutny: like how child.stdio[0] === child.stdin, child.stdio[2] == child.stderr, etc","date":"2012-06-17T16:18:45.467Z","type":"message"}
{"nick":"isaacs","message":"indutny: we'll get fork(..).stdin post-0.8","date":"2012-06-17T16:19:27.936Z","type":"message"}
{"nick":"piscisaureus_","message":"for the sake of consistency we should stop lying and just admit that stdin is also readable :-)","date":"2012-06-17T16:19:37.845Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: heretic.","date":"2012-06-17T16:20:41.915Z","type":"message"}
{"nick":"isaacs","message":"(yes, you're right, though)","date":"2012-06-17T16:20:50.355Z","type":"message"}
{"nick":"piscisaureus_","message":"otherwise we would have to add the option \"pipe-wo\" and \"pipe-ro\" :-)","date":"2012-06-17T16:21:15.509Z","type":"message"}
{"nick":"piscisaureus_","message":"it's a very easy fix","date":"2012-06-17T16:21:21.344Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe I do it monday","date":"2012-06-17T16:21:30.958Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: post 0.8!","date":"2012-06-17T16:21:39.225Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: yor'e scaring me :)","date":"2012-06-17T16:21:45.204Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: I am not going to do pipe-wo and pipe-ro, no","date":"2012-06-17T16:22:08.741Z","type":"message"}
{"nick":"einaros","message":"phew, finally got that wsdemo benchmark to run against node without dropping >50% of the connections","date":"2012-06-17T16:29:40.785Z","type":"message"}
{"nick":"indutny","message":"isaacs: ah, ok","date":"2012-06-17T16:33:28.271Z","type":"message"}
{"nick":"einaros","message":"I still think the wsdemo benchmark is silly, but this will hopefully make node.js look less like a fail whale: https://github.com/ericmoritz/wsdemo/pull/23","date":"2012-06-17T16:37:14.880Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: hey, so do you know why node performed so poorly?","date":"2012-06-17T16:45:24.590Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: I've yet to actually run a full benchmark against clustered node and my websocket module, so I don't know how it matches up against the others now","date":"2012-06-17T16:48:33.723Z","type":"message"}
{"nick":"einaros","message":"but websocket-node, which was tested, is kinda slow. also it seems that about half of the connections in the bench against node were dropped.","date":"2012-06-17T16:49:15.004Z","type":"message"}
{"nick":"einaros","message":"running on a single core, I had difficulties getting more than about 4000 clients connected before attempts started timing out","date":"2012-06-17T16:49:36.352Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: so how does ws perform?","date":"2012-06-17T16:50:19.502Z","type":"message"}
{"nick":"piscisaureus_","message":"on a single core?","date":"2012-06-17T16:50:25.628Z","type":"message"}
{"nick":"einaros","message":"under that bench? still no idea. he had a bug in his websocket code which broke against my library. this was fixed in another branch, in which he's also changed the output generator ... and the new generator doesn't seem to be fast enough to dump results to disk before *that* times out :P","date":"2012-06-17T16:52:08.964Z","type":"message"}
{"nick":"einaros","message":"the whole thing is a mess","date":"2012-06-17T16:52:17.378Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: haha","date":"2012-06-17T16:52:25.389Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: btw, so y","date":"2012-06-17T16:53:02.883Z","type":"message"}
{"nick":"piscisaureus_","message":"?","date":"2012-06-17T16:53:50.791Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: btw, I was looking at this bufferutil.cc thing. It seems that the stuff it does should be possible in pure-js with good performance","date":"2012-06-17T16:54:40.556Z","type":"message"}
{"nick":"einaros","message":"yeah, but for big data blocks (1MB+) the perf difference is very noticable","date":"2012-06-17T16:55:38.838Z","type":"message"}
{"nick":"piscisaureus_","message":"we may have better luck with typed arrays","date":"2012-06-17T16:56:54.072Z","type":"message"}
{"nick":"einaros","message":"https://gist.github.com/9e597c4e8a2b9b4cb453","date":"2012-06-17T16:56:57.637Z","type":"message"}
{"nick":"einaros","message":"^-- matched against other node libraries. the difference is partly the native masker, and partly that I avoid reallocations","date":"2012-06-17T16:57:58.308Z","type":"message"}
{"nick":"einaros","message":"I'm sure there's much to optimize even further, though","date":"2012-06-17T16:58:15.429Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-06-17T16:58:23.569Z","type":"message"}
{"nick":"piscisaureus_","message":"the native masker looks like it could be optimized :-)","date":"2012-06-17T16:58:33.951Z","type":"message"}
{"nick":"piscisaureus_","message":"maybe you could mask 4 bytes at a time instead of 1 at a time","date":"2012-06-17T16:59:01.764Z","type":"message"}
{"nick":"einaros","message":"oh I am masking four at a time","date":"2012-06-17T16:59:17.131Z","type":"message"}
{"nick":"einaros","message":"it's just the overflow which is one-at-a-time","date":"2012-06-17T16:59:34.535Z","type":"message"}
{"nick":"einaros","message":"https://github.com/einaros/ws/blob/master/src/bufferutil.cc#L96-103","date":"2012-06-17T16:59:51.078Z","type":"message"}
{"nick":"piscisaureus_","message":"ah, right","date":"2012-06-17T17:00:00.380Z","type":"message"}
{"nick":"einaros","message":"one thing that's bothering me right now, is the way I'm dealing with sends","date":"2012-06-17T17:03:08.948Z","type":"message"}
{"nick":"einaros","message":"given a ws.send(largeBuffer), I avoid creating a new buffer of largeBuffer.length + headerLength bytes, and copying largeBuffer, by doing two distinct socket.send()s","date":"2012-06-17T17:03:59.001Z","type":"message"}
{"nick":"einaros","message":"for small payloads (which most will be), that's pretty silly, as I get an overhead of at least tcp header length","date":"2012-06-17T17:04:32.297Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that's not true","date":"2012-06-17T17:04:57.111Z","type":"message"}
{"nick":"piscisaureus_","message":"(unless you turn off nagle)","date":"2012-06-17T17:05:02.755Z","type":"message"}
{"nick":"einaros","message":"oh, nagle is way off","date":"2012-06-17T17:05:10.502Z","type":"message"}
{"nick":"einaros","message":"otherwise we'd be even slower","date":"2012-06-17T17:05:19.761Z","type":"message"}
{"nick":"piscisaureus_","message":"oh, yes, then that's a problem","date":"2012-06-17T17:05:22.290Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: btw  - would we ?","date":"2012-06-17T17:05:39.540Z","type":"message"}
{"nick":"einaros","message":"higher latency","date":"2012-06-17T17:05:48.895Z","type":"message"}
{"nick":"piscisaureus_","message":"it'd just increase latency right?","date":"2012-06-17T17:05:49.148Z","type":"message"}
{"nick":"piscisaureus_","message":"yea","date":"2012-06-17T17:05:53.759Z","type":"message"}
{"nick":"piscisaureus_","message":"I think there are very few real life scenarios where you'd want to turn nagle off","date":"2012-06-17T17:06:16.456Z","type":"message"}
{"nick":"einaros","message":"since websockets are used for anything from webrtc to games, low latency is key","date":"2012-06-17T17:06:23.008Z","type":"message"}
{"nick":"einaros","message":"for file transfers and such I agree completely","date":"2012-06-17T17:06:37.062Z","type":"message"}
{"nick":"einaros","message":"but websockets have very little going for them as it is (pure http is better for most use cases)","date":"2012-06-17T17:06:54.261Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: actually node could also just support sending a \"list of buffers\" of some sort","date":"2012-06-17T17:08:34.311Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: since libuv fully supports that","date":"2012-06-17T17:08:42.666Z","type":"message"}
{"nick":"piscisaureus_","message":"not in 0.8 tho","date":"2012-06-17T17:09:11.304Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: but for small messages you could just optimize by concat'in into a single buffer","date":"2012-06-17T17:10:00.735Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: yeah, I noticed that uv supports it.. I was considering writing a sender which uses libuv directly, but that feels sort of hairy as well","date":"2012-06-17T17:13:18.156Z","type":"message"}
{"nick":"piscisaureus_","message":"we could just support `socket.write([header_buf, payload_buf, \"some string\"])`","date":"2012-06-17T17:14:22.250Z","type":"message"}
{"nick":"piscisaureus_","message":"although I suspect ryah would turn over in his grave","date":"2012-06-17T17:14:33.183Z","type":"message"}
{"nick":"einaros","message":"I'll have to benchmark this, to have something real to base my decisions on. for anything more than 1400ish bytes long, the current frame split approach can be reasonable (since it'll likely be split on the wire in either case)","date":"2012-06-17T17:14:56.494Z","type":"message"}
{"nick":"loladiro","reason":"Ping timeout: 244 seconds","date":"2012-06-17T17:15:48.539Z","type":"quit"}
{"nick":"indutny","message":"ok, I give up with async ssl stuff","date":"2012-06-17T17:19:31.477Z","type":"message"}
{"nick":"indutny","message":"it breaks every other thing","date":"2012-06-17T17:19:37.035Z","type":"message"}
{"nick":"indutny","message":"and I'm still not sure if it'll get us any benefit at all","date":"2012-06-17T17:19:49.000Z","type":"message"}
{"nick":"einaros","message":"hm. 50k sends of 64 bytes takes 37% longer with noDelay.","date":"2012-06-17T17:21:55.447Z","type":"message"}
{"nick":"einaros","message":"that's beyond me","date":"2012-06-17T17:22:01.433Z","type":"message"}
{"nick":"einaros","message":"oh, buffered","date":"2012-06-17T17:22:10.977Z","type":"message"}
{"nick":"einaros","message":"ok, not beyond me anymore","date":"2012-06-17T17:22:16.970Z","type":"message"}
{"nick":"loladiro","date":"2012-06-17T17:25:33.618Z","type":"join"}
{"nick":"loladiro_","date":"2012-06-17T17:29:20.920Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 260 seconds","date":"2012-06-17T17:30:06.621Z","type":"quit"}
{"nick":"loladiro_","new_nick":"loladiro","date":"2012-06-17T17:30:07.111Z","type":"nick"}
{"nick":"mmalecki","date":"2012-06-17T17:33:23.858Z","type":"join"}
{"nick":"AvianFlu","message":"ircretary: tell isaacs I figured out what's happening with the dgram tests","date":"2012-06-17T17:37:37.883Z","type":"message"}
{"nick":"ircretary","message":"AvianFlu: I'll be sure to tell isaacs","date":"2012-06-17T17:37:38.082Z","type":"message"}
{"nick":"isaacs","topic":"5 more! https://github.com/joyent/node/issues?milestone=10&state=open","date":"2012-06-17T17:40:15.203Z","type":"topic"}
{"nick":"isaacs","message":"AvianFlu: !?","date":"2012-06-17T17:40:20.801Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: what's going on with dgram?","date":"2012-06-17T17:40:29.712Z","type":"message"}
{"nick":"AvianFlu","message":"it's soooo strange, let me link the code","date":"2012-06-17T17:40:38.052Z","type":"message"}
{"nick":"AvianFlu","message":"https://github.com/joyent/node/blob/master/test/simple/test-dgram-broadcast-multi-process.js#L159-162","date":"2012-06-17T17:40:41.002Z","type":"message"}
{"nick":"AvianFlu","message":"so, right above that","date":"2012-06-17T17:40:45.206Z","type":"message"}
{"nick":"AvianFlu","message":"the messages[i++]","date":"2012-06-17T17:40:49.465Z","type":"message"}
{"nick":"AvianFlu","message":"for some reason, only on centOS, i comes into that as 4, the first time","date":"2012-06-17T17:40:58.745Z","type":"message"}
{"nick":"mmalecki","reason":"Quit: leaving","date":"2012-06-17T17:41:10.221Z","type":"quit"}
{"nick":"AvianFlu","message":"and it's not just a stupid global leak, I checked","date":"2012-06-17T17:41:13.872Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: i == 4 the first time?","date":"2012-06-17T17:41:43.341Z","type":"message"}
{"nick":"AvianFlu","message":"yes.","date":"2012-06-17T17:41:53.809Z","type":"message"}
{"nick":"AvianFlu","message":"so the parent send socket just closes","date":"2012-06-17T17:42:02.245Z","type":"message"}
{"nick":"AvianFlu","message":"and then the test times out, with no errors","date":"2012-06-17T17:42:07.959Z","type":"message"}
{"nick":"isaacs","message":"so strange.","date":"2012-06-17T17:42:16.630Z","type":"message"}
{"nick":"AvianFlu","message":"yeah, no fucking clue","date":"2012-06-17T17:42:25.383Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: hm, tha'ts not quite what i'm seeing","date":"2012-06-17T17:43:30.370Z","type":"message"}
{"nick":"isaacs","message":"$ ./node test/simple/test-dgram-broadcast-multi-process.js","date":"2012-06-17T17:43:36.531Z","type":"message"}
{"nick":"isaacs","message":"i=0","date":"2012-06-17T17:43:36.730Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] sent 'First message to send' to 255.255.255.255:12346","date":"2012-06-17T17:43:36.730Z","type":"message"}
{"nick":"isaacs","message":"i=1","date":"2012-06-17T17:43:36.730Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] sent 'Second message to send' to 255.255.255.255:12346","date":"2012-06-17T17:43:36.730Z","type":"message"}
{"nick":"isaacs","message":"i=2","date":"2012-06-17T17:43:39.065Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] sent 'Third message to send' to 255.255.255.255:12346","date":"2012-06-17T17:43:41.560Z","type":"message"}
{"nick":"isaacs","message":"i=3","date":"2012-06-17T17:43:44.127Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] sent 'Fourth message to send' to 255.255.255.255:12346","date":"2012-06-17T17:43:46.619Z","type":"message"}
{"nick":"isaacs","message":"i=4","date":"2012-06-17T17:43:49.138Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] sendSocket closed","date":"2012-06-17T17:43:51.659Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] Responses were not received within 5000 ms.","date":"2012-06-17T17:43:54.211Z","type":"message"}
{"nick":"isaacs","message":"[PARENT] Fail","date":"2012-06-17T17:43:56.705Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: what i'm seeing is that the parent is sending 4 messages, but it looks like none of them are getting to the child","date":"2012-06-17T17:45:25.839Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: https://gist.github.com/d53e8234ac692bcaad75 <-- between two laptops on my lan","date":"2012-06-17T17:45:39.213Z","type":"message"}
{"nick":"AvianFlu","message":"oh, whoops, I read that wrong","date":"2012-06-17T17:45:43.560Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: comparing buffer merge vs. frame split, that is","date":"2012-06-17T17:45:52.857Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: even if you replace the process.nextTick with a setTimeout(fn, 100), it's the same","date":"2012-06-17T17:46:02.546Z","type":"message"}
{"nick":"isaacs","message":"they just never get there","date":"2012-06-17T17:46:05.808Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: the 12ms spent locking while merging the buffers is the interesting part, though","date":"2012-06-17T17:46:17.132Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: locking??","date":"2012-06-17T17:46:28.500Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: see the code","date":"2012-06-17T17:46:38.759Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: this is rather suspicious: https://github.com/joyent/node/blob/master/test/simple/test-dgram-broadcast-multi-process.js#L207-209","date":"2012-06-17T17:46:58.525Z","type":"message"}
{"nick":"AvianFlu","message":"yeah, I'd noticed that","date":"2012-06-17T17:47:17.337Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: creating a new buffer of inputbuffer.length size + doing 2x copy to merge header and input takes around 11ms","date":"2012-06-17T17:47:57.002Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: whereas just smacking two different buffers on to socket.write takes ~0","date":"2012-06-17T17:48:25.281Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that's rather odd","date":"2012-06-17T17:48:33.607Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: 11ms is way too much","date":"2012-06-17T17:48:42.347Z","type":"message"}
{"nick":"einaros","message":"well it's 10 MB on a macbook air, *shrug*","date":"2012-06-17T17:49:09.933Z","type":"message"}
{"nick":"piscisaureus_","message":"alright, the payload is 10MB","date":"2012-06-17T17:49:12.136Z","type":"message"}
{"nick":"piscisaureus_","message":"which means that the new buffer won't be chipped off the slab","date":"2012-06-17T17:49:41.593Z","type":"message"}
{"nick":"piscisaureus_","message":"and the malloc() call will just make a mmap syscall","date":"2012-06-17T17:49:52.941Z","type":"message"}
{"nick":"piscisaureus_","message":"so yeah, it is definitely not the cheapest operation","date":"2012-06-17T17:50:10.027Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: but I think that it might make sense for very small payloads, e.g. when you are sending 50 bytes","date":"2012-06-17T17:50:28.414Z","type":"message"}
{"nick":"einaros","message":"not a very common use case for websockets, though, so this would all be optimizations for the 0.1%","date":"2012-06-17T17:50:46.462Z","type":"message"}
{"nick":"einaros","message":"so yeah","date":"2012-06-17T17:50:53.034Z","type":"message"}
{"nick":"einaros","message":"might as well merge","date":"2012-06-17T17:50:55.806Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: can you not just do either","date":"2012-06-17T17:51:20.254Z","type":"message"}
{"nick":"piscisaureus_","message":"e.g. for small payloads do a merge, for large ones do a split?","date":"2012-06-17T17:51:35.504Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: I think you should benchmark this with small payloads","date":"2012-06-17T17:52:35.983Z","type":"message"}
{"nick":"piscisaureus_","message":"not 10MB ones","date":"2012-06-17T17:52:50.491Z","type":"message"}
{"nick":"einaros","message":"I did both :)","date":"2012-06-17T17:52:55.888Z","type":"message"}
{"nick":"einaros","message":"this was an edge case","date":"2012-06-17T17:53:06.045Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, the listenSocket in the child, after the call to .bind(), has an .fd of -42","date":"2012-06-17T17:53:27.409Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: what were the numbers fora1 64byte payload","date":"2012-06-17T17:53:32.813Z","type":"message"}
{"nick":"AvianFlu","message":"shouldn't that beï¿½ not a negative number?","date":"2012-06-17T17:53:36.378Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: wtf?","date":"2012-06-17T17:53:37.361Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-06-17T17:53:40.652Z","type":"message"}
{"nick":"isaacs","message":"that looks weird.","date":"2012-06-17T17:53:44.951Z","type":"message"}
{"nick":"AvianFlu","message":"I mean, udp is a little out of my element, but still XD","date":"2012-06-17T17:53:52.340Z","type":"message"}
{"nick":"isaacs","message":"also, \"42\" is a magic number in a lot of places in node.","date":"2012-06-17T17:53:53.103Z","type":"message"}
{"nick":"isaacs","message":"because we're nerds.","date":"2012-06-17T17:53:55.514Z","type":"message"}
{"nick":"AvianFlu","message":"yeah, I've noticed","date":"2012-06-17T17:53:58.242Z","type":"message"}
{"nick":"isaacs","message":"that's unfortunate, imo, since {} makes a better sigil, but <shrug>","date":"2012-06-17T17:54:23.032Z","type":"message"}
{"nick":"isaacs","message":"is it always -42?","date":"2012-06-17T17:54:32.022Z","type":"message"}
{"nick":"AvianFlu","message":"well, all three children came up with it as -42","date":"2012-06-17T17:54:42.736Z","type":"message"}
{"nick":"AvianFlu","message":"let me run it a few more times","date":"2012-06-17T17:54:48.171Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: for 128, which is probably a pretty realistic mean, it would be https://gist.github.com/6d1146bb29d6897a2976","date":"2012-06-17T17:54:48.722Z","type":"message"}
{"nick":"AvianFlu","message":"yeah, it's consistently -42","date":"2012-06-17T17:55:11.763Z","type":"message"}
{"nick":"isaacs","message":"super weird","date":"2012-06-17T17:55:19.691Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: merging +1 :-)","date":"2012-06-17T17:55:34.398Z","type":"message"}
{"nick":"einaros","message":"aye","date":"2012-06-17T17:55:44.557Z","type":"message"}
{"nick":"hz","message":"http://scassato.hopto.org/download/shrug.txt","date":"2012-06-17T17:55:55.406Z","type":"message"}
{"nick":"hz","message":"lul","date":"2012-06-17T17:55:56.905Z","type":"message"}
{"nick":"piscisaureus_","message":"isaacs: AvianFlu: UDP sockets always have -42 as their fd. It doesn't mean anything","date":"2012-06-17T17:58:41.160Z","type":"message"}
{"nick":"AvianFlu","message":"oh.","date":"2012-06-17T17:58:48.642Z","type":"message"}
{"nick":"isaacs","message":"ok, kewl","date":"2012-06-17T17:58:52.318Z","type":"message"}
{"nick":"isaacs","message":"see, like i said: magic","date":"2012-06-17T17:58:58.775Z","type":"message"}
{"nick":"isaacs","message":";)","date":"2012-06-17T17:59:00.857Z","type":"message"}
{"nick":"AvianFlu","message":"I should go cook something with all these red herrings XD","date":"2012-06-17T17:59:05.251Z","type":"message"}
{"nick":"piscisaureus_","message":"it's a leftover from the rushed transition to libuv in the last days before 0.6","date":"2012-06-17T17:59:21.114Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: the sins of our past.","date":"2012-06-17T17:59:42.398Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-06-17T17:59:49.191Z","type":"message"}
{"nick":"piscisaureus_","message":"I think we could actually drop it now","date":"2012-06-17T17:59:55.662Z","type":"message"}
{"nick":"perezd","date":"2012-06-17T18:01:28.794Z","type":"join"}
{"nick":"loladiro","reason":"Ping timeout: 245 seconds","date":"2012-06-17T18:01:29.936Z","type":"quit"}
{"nick":"piscisaureus_","message":"http://www.dilbert.com/strips/comic/2012-06-14/","date":"2012-06-17T18:02:39.516Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, it's probably just something like this, at this rate: https://www.centos.org/modules/newbb/viewtopic.php?topic_id=34513","date":"2012-06-17T18:09:41.473Z","type":"message"}
{"nick":"loladiro","date":"2012-06-17T18:10:00.883Z","type":"join"}
{"nick":"AvianFlu","message":"(i.e. we're chasing a centOS config)","date":"2012-06-17T18:10:40.636Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: !!","date":"2012-06-17T18:10:49.927Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: can you try making those changes?  you're a sudoer on centosdrone","date":"2012-06-17T18:11:01.227Z","type":"message"}
{"nick":"isaacs","message":"that would be so awesome.","date":"2012-06-17T18:11:07.159Z","type":"message"}
{"nick":"isaacs","message":":D","date":"2012-06-17T18:11:08.681Z","type":"message"}
{"nick":"AvianFlu","message":"sure, I'll give it a shot","date":"2012-06-17T18:11:09.639Z","type":"message"}
{"nick":"isaacs","message":"lmk if you need to restart (or just do it, whatever, we don't actually use those boxes for anything important except this)","date":"2012-06-17T18:11:27.420Z","type":"message"}
{"nick":"isaacs","action":"is chasing down an npm bug atm","date":"2012-06-17T18:11:42.746Z","type":"action"}
{"nick":"isaacs","message":"AvianFlu: if that does fix it, please do post the exact changes in the issue comments, so that future generations can benefit","date":"2012-06-17T18:12:16.782Z","type":"message"}
{"nick":"einaros","message":"node 0.7 is being slow again","date":"2012-06-17T18:19:57.836Z","type":"message"}
{"nick":"einaros","message":"0.7.11: Running 40000 roundtrips of 64 B binary data: 9.8s..  253.99 kB/s","date":"2012-06-17T18:20:07.566Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, it gives me 'permission denied', even with sudo","date":"2012-06-17T18:20:08.325Z","type":"message"}
{"nick":"c4milo","date":"2012-06-17T18:20:20.070Z","type":"join"}
{"nick":"einaros","message":"0.6.18: Running 40000 roundtrips of 64 B binary data:5.5s..  454.05 kB/s","date":"2012-06-17T18:20:20.601Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, but the configs in question *do* seem to be the opposite of what the post says they should be","date":"2012-06-17T18:21:11.593Z","type":"message"}
{"nick":"AvianFlu","message":"so there's that XD","date":"2012-06-17T18:21:14.025Z","type":"message"}
{"nick":"tjfontaine","message":"if your sudo is on the echo and not the > it won't work","date":"2012-06-17T18:21:59.323Z","type":"message"}
{"nick":"AvianFlu","message":"aha","date":"2012-06-17T18:22:21.790Z","type":"message"}
{"nick":"indutny","message":"ok, time to fix the cake","date":"2012-06-17T18:22:23.858Z","type":"message"}
{"nick":"AvianFlu","message":"nooby me strikes again","date":"2012-06-17T18:22:26.697Z","type":"message"}
{"nick":"tjfontaine","message":"sudo -s so you can just have a shell to work in","date":"2012-06-17T18:22:41.843Z","type":"message"}
{"nick":"AvianFlu","message":"tjfontaine, ++","date":"2012-06-17T18:22:48.416Z","type":"message"}
{"nick":"kohai","message":"tjfontaine has 1 beer","date":"2012-06-17T18:22:49.091Z","type":"message"}
{"nick":"indutny","message":"AvianFlu: ^ just wanted to said :)","date":"2012-06-17T18:22:49.343Z","type":"message"}
{"nick":"indutny","message":"s/said/say","date":"2012-06-17T18:22:58.817Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: sudo bash","date":"2012-06-17T18:23:10.551Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: then do whatevs","date":"2012-06-17T18:23:13.570Z","type":"message"}
{"nick":"isaacs","message":"then exit","date":"2012-06-17T18:23:15.490Z","type":"message"}
{"nick":"tjfontaine","message":"evil evil, -s or -i > $SHELL :)","date":"2012-06-17T18:23:26.230Z","type":"message"}
{"nick":"isaacs","message":"or sudo -s","date":"2012-06-17T18:23:27.874Z","type":"message"}
{"nick":"indutny","message":"isaacs: bash can be replaced","date":"2012-06-17T18:23:31.846Z","type":"message"}
{"nick":"isaacs","message":"not without root access","date":"2012-06-17T18:23:39.760Z","type":"message"}
{"nick":"indutny","message":"isaacs: in you env variables","date":"2012-06-17T18:23:47.051Z","type":"message"}
{"nick":"isaacs","message":"in which case, sudo can be replaced, as well","date":"2012-06-17T18:23:47.245Z","type":"message"}
{"nick":"indutny","message":"or will it lookup in new ENV?","date":"2012-06-17T18:24:00.031Z","type":"message"}
{"nick":"isaacs","message":"indutny: if i can hijack your envs, i can pwn your whole terminal","date":"2012-06-17T18:24:12.051Z","type":"message"}
{"nick":"tjfontaine","message":"-i means use the new users ENV, -s means inherit some of current env","date":"2012-06-17T18:24:17.720Z","type":"message"}
{"nick":"isaacs","message":"i usually just login as root","date":"2012-06-17T18:24:43.899Z","type":"message"}
{"nick":"AvianFlu","message":"likewise!","date":"2012-06-17T18:24:48.685Z","type":"message"}
{"nick":"isaacs","message":"i mean, if i have to do rooty stuff","date":"2012-06-17T18:24:53.010Z","type":"message"}
{"nick":"indutny","message":"isaacs: yep, we're all mined","date":"2012-06-17T18:24:53.349Z","type":"message"}
{"nick":"indutny","message":"uhh, that's disgusting","date":"2012-06-17T18:25:28.185Z","type":"message"}
{"nick":"tjfontaine","message":"depends on the management style, and the number of admins that you share the duties with, and how much auditing you need","date":"2012-06-17T18:25:30.747Z","type":"message"}
{"nick":"isaacs","message":"indutny: whatever.  seriously.","date":"2012-06-17T18:27:23.219Z","type":"message"}
{"nick":"isaacs","message":"if that box gets pwned, i'll just shut it down and make a new one","date":"2012-06-17T18:27:32.118Z","type":"message"}
{"nick":"isaacs","message":"it's not real anyway","date":"2012-06-17T18:27:35.067Z","type":"message"}
{"nick":"isaacs","message":"disposable","date":"2012-06-17T18:27:36.867Z","type":"message"}
{"nick":"indutny","message":"isaacs: what about private keys?","date":"2012-06-17T18:27:56.476Z","type":"message"}
{"nick":"indutny","message":"isaacs: attacker can copy everyone's keys once you typed \"sudo bash\"","date":"2012-06-17T18:28:20.761Z","type":"message"}
{"nick":"isaacs","message":"indutny: you put private keys on machines you can't touch!?!?","date":"2012-06-17T18:28:20.961Z","type":"message"}
{"nick":"indutny","message":"hahaha","date":"2012-06-17T18:28:25.963Z","type":"message"}
{"nick":"indutny","message":"no","date":"2012-06-17T18:28:29.523Z","type":"message"}
{"nick":"isaacs","message":"i don't put private keys on any machines i'm not holding in my hands","date":"2012-06-17T18:28:35.270Z","type":"message"}
{"nick":"isaacs","message":"ssh -A","date":"2012-06-17T18:28:37.833Z","type":"message"}
{"nick":"isaacs","message":"if i need to hop","date":"2012-06-17T18:28:42.826Z","type":"message"}
{"nick":"indutny","message":"yes, it works fine for me too","date":"2012-06-17T18:28:47.969Z","type":"message"}
{"nick":"isaacs","message":"that's the real reason i'm super paranoid about my laptop being stolen","date":"2012-06-17T18:29:03.947Z","type":"message"}
{"nick":"indutny","message":"isaacs: don't you have a password on your key?","date":"2012-06-17T18:29:16.702Z","type":"message"}
{"nick":"isaacs","message":"it'd be such a nightmare","date":"2012-06-17T18:29:20.343Z","type":"message"}
{"nick":"isaacs","message":"indutny: passwords are broken in a matter of minutes","date":"2012-06-17T18:29:28.717Z","type":"message"}
{"nick":"isaacs","message":"even long ones","date":"2012-06-17T18:29:30.906Z","type":"message"}
{"nick":"isaacs","message":"(but yes, i do)","date":"2012-06-17T18:29:35.705Z","type":"message"}
{"nick":"isaacs","message":"i mean, at least that gets me minutes ;)","date":"2012-06-17T18:29:44.036Z","type":"message"}
{"nick":"indutny","message":"isaacs: in hours which is ok if you'll get to another machine and remove public keys from everywhere","date":"2012-06-17T18:29:50.541Z","type":"message"}
{"nick":"tjfontaine","message":"ssh keys are a terrible mechanism, I prefer the patchset to ssh that lets you use standard certificates","date":"2012-06-17T18:29:51.888Z","type":"message"}
{"nick":"isaacs","message":"also, i have 2 different ways to remote wipe this machine as soon as it connects to the internet, if an attacker gets it","date":"2012-06-17T18:30:03.457Z","type":"message"}
{"nick":"indutny","message":"isaacs: hahaha","date":"2012-06-17T18:30:12.909Z","type":"message"}
{"nick":"indutny","message":"isaacs: I won't steal your laptop","date":"2012-06-17T18:30:16.758Z","type":"message"}
{"nick":"indutny","message":"never","date":"2012-06-17T18:30:17.775Z","type":"message"}
{"nick":"isaacs","message":":)","date":"2012-06-17T18:30:21.959Z","type":"message"}
{"nick":"indutny","message":"this reminds me, that I should care more about my private key","date":"2012-06-17T18:30:56.698Z","type":"message"}
{"nick":"piscisaureus_","reason":"Ping timeout: 248 seconds","date":"2012-06-17T18:31:00.073Z","type":"quit"}
{"nick":"indutny","message":"probably create new one","date":"2012-06-17T18:31:00.274Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-06-17T18:31:09.747Z","type":"message"}
{"nick":"indutny","message":"no way it was stolen, but anyway","date":"2012-06-17T18:31:17.086Z","type":"message"}
{"nick":"tjfontaine","message":"with certs you can specify on the server side valid times and delegate control and revoke, there's no way to have that control with standard ssh keys without making your infra to support it","date":"2012-06-17T18:31:42.097Z","type":"message"}
{"nick":"piscisaureus_","date":"2012-06-17T18:32:24.297Z","type":"join"}
{"nick":"isaacs","message":"the nice thing about jpc smartos boxes is that you can just remove the key from your account, and it stops working on all your boxes.","date":"2012-06-17T18:33:07.534Z","type":"message"}
{"nick":"isaacs","message":"but the linuxes use kvm, and it just stashes a /root/.ssh/authorized_keys at the creation time","date":"2012-06-17T18:33:30.502Z","type":"message"}
{"nick":"isaacs","message":"which sucks also because it's never updated.","date":"2012-06-17T18:33:36.813Z","type":"message"}
{"nick":"tjfontaine","message":"http://roumenpetrov.info/openssh/#features","date":"2012-06-17T18:33:47.905Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, this is gonna need a reboot to take effect","date":"2012-06-17T18:34:04.153Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: go for it","date":"2012-06-17T18:34:39.300Z","type":"message"}
{"nick":"isaacs","message":"maybe send a `wall` just in case someone's on there, but i think everyone who would be is in this room right now :)","date":"2012-06-17T18:35:06.853Z","type":"message"}
{"nick":"c4milo","reason":"Remote host closed the connection","date":"2012-06-17T18:35:56.927Z","type":"quit"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-06-17T18:37:05.782Z","type":"quit"}
{"nick":"stephank","date":"2012-06-17T18:37:55.618Z","type":"join"}
{"nick":"einaros","message":"isaacs: do you remember the websocket slowness I mentioned for 0.7, which was fine for a while with .10? it's back again now","date":"2012-06-17T18:38:19.402Z","type":"message"}
{"nick":"isaacs","message":"einaros: oh, i didn't realize it was fine for a while with .10","date":"2012-06-17T18:38:40.329Z","type":"message"}
{"nick":"isaacs","message":"einaros: but that's fascinating","date":"2012-06-17T18:38:45.690Z","type":"message"}
{"nick":"tjfontaine","message":"seems like bouncing back and forth on v8 has something to do with it?","date":"2012-06-17T18:38:47.278Z","type":"message"}
{"nick":"isaacs","message":"einaros: that seems to suggest that V8 3.9 was faster for your usecase than 3.11 is","date":"2012-06-17T18:39:01.880Z","type":"message"}
{"nick":"einaros","message":"isaacs: I'm moving back to 3.9 to check that now","date":"2012-06-17T18:39:24.647Z","type":"message"}
{"nick":"isaacs","message":"einaros: awesome!","date":"2012-06-17T18:39:30.289Z","type":"message"}
{"nick":"isaacs","message":"we should probably have a ws benchmark in node.","date":"2012-06-17T18:39:58.389Z","type":"message"}
{"nick":"isaacs","message":"sort of like http_simple.js, but for web sockets","date":"2012-06-17T18:40:15.119Z","type":"message"}
{"nick":"einaros","message":"the test case is really simple, though. 64 bytes of test data sent to a server and echoed back. repeat 50k times and measure the time taken.","date":"2012-06-17T18:40:26.509Z","type":"message"}
{"nick":"mikeal","date":"2012-06-17T18:40:48.232Z","type":"join"}
{"nick":"einaros","message":"for some reason it's around half the speed on .11 vs 6.19","date":"2012-06-17T18:40:50.503Z","type":"message"}
{"nick":"isaacs","message":"einaros: yeah, all the more reason why we should be tracking it in a benchmark :)","date":"2012-06-17T18:42:34.059Z","type":"message"}
{"nick":"einaros","message":"yeah.. 427662c6e9 (0.7.10 fixed): 482.44 kB/s. 0.7.11: 252.32 kB/s","date":"2012-06-17T18:42:42.746Z","type":"message"}
{"nick":"isaacs","message":"einaros: that HAS to be a V8 perf regression.","date":"2012-06-17T18:48:22.644Z","type":"message"}
{"nick":"isaacs","message":"einaros: can you try doing this in current master?  git checkout v0.7.10-fix -- deps/v8","date":"2012-06-17T18:48:58.405Z","type":"message"}
{"nick":"isaacs","message":"einaros: then build and etc","date":"2012-06-17T18:49:07.016Z","type":"message"}
{"nick":"einaros","message":"will do in a sec, just started compiling 50464cd4f4, which is where v8 was bumped to 3.11.10","date":"2012-06-17T18:53:39.336Z","type":"message"}
{"nick":"indutny","message":"isaacs: I've suspicion that this Diffie-Hellman thing is broken because of utf8","date":"2012-06-17T18:59:52.300Z","type":"message"}
{"nick":"indutny","message":"isaacs: it's quite strong, because we're passing \"binary\" string all the way around","date":"2012-06-17T19:00:37.180Z","type":"message"}
{"nick":"einaros","message":"isaacs: v8 it is","date":"2012-06-17T19:00:56.867Z","type":"message"}
{"nick":"isaacs","message":"indutny: yep, that sounds likely","date":"2012-06-17T19:01:28.654Z","type":"message"}
{"nick":"isaacs","message":"indutny: we really need to be using buffers everywhere internally, and only utf8-ify it at the very ends","date":"2012-06-17T19:01:49.215Z","type":"message"}
{"nick":"isaacs","message":"einaros: great.  can you post your findings to the V8 team?","date":"2012-06-17T19:02:12.143Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_: ^","date":"2012-06-17T19:02:15.982Z","type":"message"}
{"nick":"elijah-mbp","reason":"Remote host closed the connection","date":"2012-06-17T19:02:34.197Z","type":"quit"}
{"nick":"piscisaureus_","message":"isaacs: I will talk to Erik tomorrow","date":"2012-06-17T19:02:35.163Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2012-06-17T19:02:39.036Z","type":"message"}
{"nick":"isaacs","message":"i have confidence that they'll fix it.  it's not a 0.8 blocker.","date":"2012-06-17T19:02:52.323Z","type":"message"}
{"nick":"isaacs","message":"but it is very important that it gets fixed soon.","date":"2012-06-17T19:02:57.772Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: it would help to have a benchmark that is easy to run, with as little components as possible","date":"2012-06-17T19:03:16.830Z","type":"message"}
{"nick":"isaacs","message":"they're easily trolled by reproducible benchmarks, though :)","date":"2012-06-17T19:03:17.028Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: so we can bisect and figure out which commit is responsible","date":"2012-06-17T19:03:40.119Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: https://github.com/einaros/websocket-benchmark","date":"2012-06-17T19:04:19.754Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: is it possible to run it on a single computer, with one command?","date":"2012-06-17T19:04:57.905Z","type":"message"}
{"nick":"einaros","message":"yup","date":"2012-06-17T19:05:04.795Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002b0b707c\u000f \u000310\u000f/ (141 files in 20 dirs)\u0002:\u000f npm: Upgrade to 1.1.27 - http://git.io/6v3CDw","date":"2012-06-17T19:05:47.656Z","type":"message"}
{"nick":"isaacs","message":"this ^","date":"2012-06-17T19:05:55.950Z","type":"message"}
{"nick":"isaacs","message":"npm init is so much more badass now","date":"2012-06-17T19:06:07.960Z","type":"message"}
{"nick":"isaacs","message":"it reads deps, looks at your github url from the .git folder, pulls a description out of the readme, you name it","date":"2012-06-17T19:06:33.773Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: did you reboot the thing and see the fix?","date":"2012-06-17T19:07:07.540Z","type":"message"}
{"nick":"einaros","message":"is anyone familiar with this bailout? Bailout in HGraphBuilder: @\"b\": bad value context for arguments value","date":"2012-06-17T19:07:43.037Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: or should i restart it","date":"2012-06-17T19:07:45.349Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, I did, but it didn't help","date":"2012-06-17T19:08:02.889Z","type":"message"}
{"nick":"isaacs","message":" /o\\","date":"2012-06-17T19:08:15.588Z","type":"message"}
{"nick":"isaacs","message":"ok","date":"2012-06-17T19:08:17.938Z","type":"message"}
{"nick":"AvianFlu","message":"I've also seen test-child-process-fork2 fail a few times","date":"2012-06-17T19:08:34.164Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-06-17T19:08:39.448Z","type":"message"}
{"nick":"AvianFlu","message":"but it's like 1 in 20","date":"2012-06-17T19:08:40.498Z","type":"message"}
{"nick":"isaacs","message":"not at allconsistent, that one","date":"2012-06-17T19:08:45.208Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: I don't know exactly, but apparently you're doing something with the arguments object that confuses crankshaft","date":"2012-06-17T19:13:26.379Z","type":"message"}
{"nick":"loladiro","reason":"Ping timeout: 246 seconds","date":"2012-06-17T19:15:56.328Z","type":"quit"}
{"nick":"hz","date":"2012-06-17T19:20:35.978Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-06-17T19:21:49.402Z","type":"quit"}
{"nick":"piscisaureus_","message":"einaros: with which bench was the difference most striking?","date":"2012-06-17T19:34:00.764Z","type":"message"}
{"nick":"AvianFlu","message":"isaacs, it appears to have been iptables","date":"2012-06-17T19:39:10.696Z","type":"message"}
{"nick":"mikeal","date":"2012-06-17T19:42:23.321Z","type":"join"}
{"nick":"AvianFlu","message":"[02:20|% 100|+ 430|-   0]: Done \\o/","date":"2012-06-17T19:46:53.829Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-06-17T19:52:59.500Z","type":"message"}
{"nick":"indutny","message":"oh, very nice","date":"2012-06-17T19:55:52.739Z","type":"message"}
{"nick":"indutny","message":"isaacs: I think I've found a source of problem","date":"2012-06-17T19:56:03.463Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: !! \\o/","date":"2012-06-17T19:56:20.744Z","type":"message"}
{"nick":"isaacs","message":"indutny: which problem?","date":"2012-06-17T19:56:27.803Z","type":"message"}
{"nick":"indutny","message":"isaacs: Diffie-Hellman","date":"2012-06-17T19:56:53.151Z","type":"message"}
{"nick":"AvianFlu","message":"there was an iptables rule that looks like it rejects forwarding in general - although I'm not that familiar with iptables","date":"2012-06-17T19:56:54.440Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: Can you post teh triumph in https://github.com/joyent/node/issues/3450?","date":"2012-06-17T19:57:22.114Z","type":"message"}
{"nick":"isaacs","message":"indutny: oh? nice!","date":"2012-06-17T19:57:40.055Z","type":"message"}
{"nick":"isaacs","message":"AvianFlu: you have earned a share of the delicious cake :)","date":"2012-06-17T19:57:57.222Z","type":"message"}
{"nick":"AvianFlu","message":"yeah I'm writing it up now","date":"2012-06-17T19:58:07.113Z","type":"message"}
{"nick":"AvianFlu","message":":D","date":"2012-06-17T19:58:09.727Z","type":"message"}
{"nick":"isaacs","message":"anyone have objections to https://github.com/reid/node/commit/ceefc6738dd76eee522d05196fb0b734506550b7?","date":"2012-06-17T19:59:03.622Z","type":"message"}
{"nick":"indutny","message":"isaacs: I don't","date":"2012-06-17T19:59:48.535Z","type":"message"}
{"nick":"indutny","message":"isaacs: the problem is in openssl","date":"2012-06-17T20:00:31.769Z","type":"message"}
{"nick":"indutny","message":":P","date":"2012-06-17T20:00:32.508Z","type":"message"}
{"nick":"indutny","message":"isaacs: BH_size returns bigger size than BH_compute_key","date":"2012-06-17T20:00:46.321Z","type":"message"}
{"nick":"indutny","message":"which is odd to me","date":"2012-06-17T20:00:51.014Z","type":"message"}
{"nick":"isaacs","message":"indutny: so it's lying about how much data we should read?","date":"2012-06-17T20:01:10.490Z","type":"message"}
{"nick":"isaacs","message":"er, should use?","date":"2012-06-17T20:01:13.430Z","type":"message"}
{"nick":"indutny","message":"isaacs: no","date":"2012-06-17T20:01:20.553Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Reid Burke\u000f \u000307master\u000f * r\u000271a2a2c\u000f \u000310\u000f/ (lib/net.js test/simple/test-net-during-close.js)\u0002:\u000f net: Prevent property access throws during close - http://git.io/fXlIWQ","date":"2012-06-17T20:01:28.122Z","type":"message"}
{"nick":"indutny","message":"isaacs: it's like we created 64 bytes of data","date":"2012-06-17T20:01:28.517Z","type":"message"}
{"nick":"indutny","message":"isaacs: but returning 65","date":"2012-06-17T20:01:32.023Z","type":"message"}
{"nick":"indutny","message":"and last one is a junk","date":"2012-06-17T20:01:34.957Z","type":"message"}
{"nick":"isaacs","message":"oh, weird.","date":"2012-06-17T20:01:46.269Z","type":"message"}
{"nick":"isaacs","message":"any way to verify what it tells us?","date":"2012-06-17T20:01:53.109Z","type":"message"}
{"nick":"indutny","message":"isaacs: well, BH_compute_key returns correct one","date":"2012-06-17T20:02:09.193Z","type":"message"}
{"nick":"isaacs","message":"so, can we just use that?","date":"2012-06-17T20:02:24.119Z","type":"message"}
{"nick":"indutny","message":"isaacs: BH_size (which is intended to tell how much data should we allocate for BH_compute_key)","date":"2012-06-17T20:02:27.068Z","type":"message"}
{"nick":"indutny","message":"isaacs: I think we can","date":"2012-06-17T20:02:30.346Z","type":"message"}
{"nick":"isaacs","message":"awesome","date":"2012-06-17T20:02:36.553Z","type":"message"}
{"nick":"indutny","message":"though, I aim to find why openssl is doing that","date":"2012-06-17T20:02:39.644Z","type":"message"}
{"nick":"indutny","message":"I should verify if I'm correct","date":"2012-06-17T20:02:54.322Z","type":"message"}
{"nick":"indutny","message":"s/if/that","date":"2012-06-17T20:02:59.089Z","type":"message"}
{"nick":"isaacs","topic":"4 more! https://github.com/joyent/node/issues?milestone=10&state=open","date":"2012-06-17T20:03:01.056Z","type":"topic"}
{"nick":"indutny","message":"oh","date":"2012-06-17T20:03:50.208Z","type":"message"}
{"nick":"indutny","message":"interesting","date":"2012-06-17T20:03:54.308Z","type":"message"}
{"nick":"indutny","message":"BH_compute_key writes less bytes that it should!","date":"2012-06-17T20:04:05.188Z","type":"message"}
{"nick":"indutny","message":"it returns 31, while it should be 32","date":"2012-06-17T20:04:14.767Z","type":"message"}
{"nick":"indutny","message":"pquerna: yt?","date":"2012-06-17T20:04:44.781Z","type":"message"}
{"nick":"isaacs","message":"i'll be back in a little bit.  gonna go get some lunch","date":"2012-06-17T20:07:04.176Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Maciej MaÅecki\u000f \u000307master\u000f * r\u00023db2e03\u000f \u000310\u000f/ lib/events.js \u0002:\u000f events: cache `domain` module locally - http://git.io/t8mtqA","date":"2012-06-17T20:08:19.002Z","type":"message"}
{"nick":"hz","date":"2012-06-17T20:08:51.305Z","type":"join"}
{"nick":"AvianFlu","message":"https://github.com/joyent/node/issues/3450#issuecomment-6384252","date":"2012-06-17T20:10:05.701Z","type":"message"}
{"nick":"isaacs","topic":"3 more! https://github.com/joyent/node/issues?milestone=10&state=open","date":"2012-06-17T20:16:18.581Z","type":"topic"}
{"nick":"indutny","message":"isaacs: are you ready? :)","date":"2012-06-17T20:17:07.574Z","type":"message"}
{"nick":"indutny","message":"isaacs: https://github.com/indutny/node/commit/6dc998bf7df494f68fb89a0c15cce6ec83574aeb <- review please","date":"2012-06-17T20:17:35.561Z","type":"message"}
{"nick":"indutny","message":"I really want to taste that cake","date":"2012-06-17T20:17:40.722Z","type":"message"}
{"nick":"indutny","message":"isaacs: should I add a pummel test?","date":"2012-06-17T20:17:50.221Z","type":"message"}
{"nick":"mmalecki","date":"2012-06-17T20:18:47.070Z","type":"join"}
{"nick":"indutny","message":"isaacs: hey man! where are ya?","date":"2012-06-17T20:20:34.453Z","type":"message"}
{"nick":"indutny","message":"this cake is a lie","date":"2012-06-17T20:25:41.913Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Andreas Madsen\u000f \u000307master\u000f * r\u00026d70a4a\u000f \u000310\u000f/ (src/node.cc src/node.js)\u0002:\u000f node: change the constructor name of process from EventEmitter to process - http://git.io/bswfKA","date":"2012-06-17T20:37:11.867Z","type":"message"}
{"nick":"mraleph","date":"2012-06-17T20:37:47.116Z","type":"join"}
{"nick":"isaacs","message":"indutny: sure, add a pummel test that runs that other test 10000 times or something","date":"2012-06-17T20:45:50.359Z","type":"message"}
{"nick":"isaacs","message":"indutny: and it's not a lie!","date":"2012-06-17T20:46:04.032Z","type":"message"}
{"nick":"indutny","message":"isaacs: hahaha","date":"2012-06-17T20:46:09.413Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: you still want process.on('beforeExit')?","date":"2012-06-17T20:46:12.319Z","type":"message"}
{"nick":"isaacs","message":"indutny: well, it might not be cake.  but it'll be delicious!","date":"2012-06-17T20:46:13.592Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: sure, but not or 0.8","date":"2012-06-17T20:46:20.607Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: for 0.9, yes, absolutely","date":"2012-06-17T20:46:27.127Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: k. I got it implemented, it's really silly tho","date":"2012-06-17T20:46:33.939Z","type":"message"}
{"nick":"mmalecki","message":"it just runs the event loop once again, no changes in libuv","date":"2012-06-17T20:46:45.602Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: post an issue with a comment that i said to mark it for 0.9","date":"2012-06-17T20:46:57.138Z","type":"message"}
{"nick":"isaacs","message":"mmalecki: or a pull req, whatevers","date":"2012-06-17T20:47:02.597Z","type":"message"}
{"nick":"mmalecki","message":"isaacs: k","date":"2012-06-17T20:47:08.390Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-06-17T20:47:59.167Z","type":"quit"}
{"nick":"indutny","message":"isaacs: https://github.com/indutny/node/commit/44ac34d53d34308d1a5c244646bf87f66843342f","date":"2012-06-17T20:57:28.413Z","type":"message"}
{"nick":"isaacs","message":"indutny: lgtm!","date":"2012-06-17T20:59:30.498Z","type":"message"}
{"nick":"isaacs","message":"nice investigation, and the comment is helpful.","date":"2012-06-17T20:59:41.697Z","type":"message"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Fedor Indutny\u000f \u000307master\u000f * r\u0002ae5b0e1\u000f \u000310\u000f/ (src/node_crypto.cc test/pummel/test-dh-regr.js)\u0002:\u000f crypto: add padding to diffie-hellman key - http://git.io/5Vkusw","date":"2012-06-17T21:00:27.451Z","type":"message"}
{"nick":"indutny","topic":"2 more! https://github.com/joyent/node/issues?milestone=10&state=open","date":"2012-06-17T21:01:21.156Z","type":"topic"}
{"nick":"isaacs","message":"\\o/","date":"2012-06-17T21:03:19.175Z","type":"message"}
{"nick":"indutny","message":"hehe","date":"2012-06-17T21:03:31.078Z","type":"message"}
{"nick":"indutny","message":"what about this https://github.com/joyent/node/issues/3446 ?","date":"2012-06-17T21:03:35.976Z","type":"message"}
{"nick":"indutny","message":"is anyone working on that?","date":"2012-06-17T21:03:40.163Z","type":"message"}
{"nick":"AvianFlu","message":"I'm poking at it a little, but you should definitely take a look too :D","date":"2012-06-17T21:04:37.948Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-06-17T21:04:51.791Z","type":"quit"}
{"nick":"indutny","message":"AvianFlu: ok","date":"2012-06-17T21:05:44.630Z","type":"message"}
{"nick":"indutny","message":"isaacs: is that joyent box still working?","date":"2012-06-17T21:07:50.374Z","type":"message"}
{"nick":"mmalecki","reason":"Ping timeout: 240 seconds","date":"2012-06-17T21:07:58.066Z","type":"quit"}
{"nick":"TheJH","date":"2012-06-17T21:08:38.632Z","type":"join"}
{"nick":"indutny","message":"looks like yes","date":"2012-06-17T21:08:41.886Z","type":"message"}
{"nick":"indutny","message":":)","date":"2012-06-17T21:08:42.611Z","type":"message"}
{"nick":"isaacs","message":"hm, failure on debug: test-zlib-random-byte-pipes","date":"2012-06-17T21:10:31.115Z","type":"message"}
{"nick":"isaacs","message":" /home/isaacs/node/test/simple/test-zlib-random-byte-pipes.js:81","date":"2012-06-17T21:10:42.865Z","type":"message"}
{"nick":"isaacs","message":"    this._hash = this._hasher.digest('hex').toLowerCase().trim();","date":"2012-06-17T21:10:43.060Z","type":"message"}
{"nick":"isaacs","message":"                              ^","date":"2012-06-17T21:10:43.061Z","type":"message"}
{"nick":"isaacs","message":"Error: Not initialized","date":"2012-06-17T21:10:43.953Z","type":"message"}
{"nick":"isaacs","message":"i'll look into that","date":"2012-06-17T21:10:58.124Z","type":"message"}
{"nick":"isaacs","message":"but first!  to tacos!","date":"2012-06-17T21:11:02.286Z","type":"message"}
{"nick":"indutny","message":"oh no","date":"2012-06-17T21:11:26.416Z","type":"message"}
{"nick":"isaacs","message":"indutny: the centos box moved to 165.225.130.68","date":"2012-06-17T21:12:48.284Z","type":"message"}
{"nick":"isaacs","message":"indutny: because i broke the other one","date":"2012-06-17T21:12:54.399Z","type":"message"}
{"nick":"isaacs","message":"and fixing is harder than just rebuildint it ;)","date":"2012-06-17T21:13:07.831Z","type":"message"}
{"nick":"indutny","message":"isaacs: em... and what about smartos?","date":"2012-06-17T21:13:19.800Z","type":"message"}
{"nick":"indutny","message":"isaacs: umcats","date":"2012-06-17T21:13:25.827Z","type":"message"}
{"nick":"isaacs","message":"indutny: umcats is there, but it's weak","date":"2012-06-17T21:13:33.002Z","type":"message"}
{"nick":"isaacs","message":"indutny: use the smartosdrone","date":"2012-06-17T21:13:36.178Z","type":"message"}
{"nick":"indutny","message":"isaacs: what is it?","date":"2012-06-17T21:13:46.872Z","type":"message"}
{"nick":"isaacs","message":"indutny: 165.225.129.189","date":"2012-06-17T21:13:55.682Z","type":"message"}
{"nick":"indutny","message":"isaacs: can you add my public keys to it","date":"2012-06-17T21:14:12.351Z","type":"message"}
{"nick":"isaacs","message":"i keep meaning to set these up as subdomains under nodejs.org, but the dns thing we use si kinda lame","date":"2012-06-17T21:14:17.172Z","type":"message"}
{"nick":"indutny","message":"please","date":"2012-06-17T21:14:20.491Z","type":"message"}
{"nick":"isaacs","message":"indutny: it should let you in as root already","date":"2012-06-17T21:14:21.892Z","type":"message"}
{"nick":"isaacs","message":"indutny: is there a pubkey that it should be allowing?","date":"2012-06-17T21:14:29.502Z","type":"message"}
{"nick":"indutny","message":"ah","date":"2012-06-17T21:14:32.726Z","type":"message"}
{"nick":"indutny","message":"right","date":"2012-06-17T21:14:33.983Z","type":"message"}
{"nick":"indutny","message":"root@ worked fine","date":"2012-06-17T21:14:42.527Z","type":"message"}
{"nick":"indutny","message":"ok, I'll look at that issue tomorrow","date":"2012-06-17T21:15:35.297Z","type":"message"}
{"nick":"indutny","message":"going to sleep now","date":"2012-06-17T21:15:38.267Z","type":"message"}
{"nick":"indutny","message":"ttyl gys","date":"2012-06-17T21:15:40.079Z","type":"message"}
{"nick":"isaacs","message":"indutny: yeah, you have to create your own user account if you wanna log in that way.  but same thing, no keys necessary, though if you set them, we can't log in as you either.","date":"2012-06-17T21:15:40.962Z","type":"message"}
{"nick":"isaacs","message":"g'nite, thanks, indutny! :)","date":"2012-06-17T21:15:49.241Z","type":"message"}
{"nick":"loladiro","date":"2012-06-17T21:23:29.576Z","type":"join"}
{"nick":"isaacs_mobile","date":"2012-06-17T21:32:29.960Z","type":"join"}
{"nick":"isaacs_mobile","reason":"Remote host closed the connection","date":"2012-06-17T21:42:59.885Z","type":"quit"}
{"nick":"isaacs_mobile","date":"2012-06-17T21:44:52.817Z","type":"join"}
{"nick":"piscisaureus_","message":"isaacs: einaros: https://github.com/v8/v8/commit/09c97a6df060a7f8de6ce24457da11d6 <-- baaaad!!","date":"2012-06-17T21:50:56.658Z","type":"message"}
{"nick":"piscisaureus_","message":"cd ..","date":"2012-06-17T21:52:15.147Z","type":"message"}
{"nick":"einaros","message":"that's the commit?","date":"2012-06-17T21:53:59.079Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-06-17T21:54:35.418Z","type":"message"}
{"nick":"piscisaureus_","message":"I can revert it and push to a node branch","date":"2012-06-17T21:54:41.982Z","type":"message"}
{"nick":"piscisaureus_","message":"so you can try without it","date":"2012-06-17T21:54:44.824Z","type":"message"}
{"nick":"einaros","message":"alrighty","date":"2012-06-17T21:54:56.429Z","type":"message"}
{"nick":"isaacs_mobile","reason":"Remote host closed the connection","date":"2012-06-17T21:55:18.710Z","type":"quit"}
{"nick":"einaros","message":"piscisaureus_: is it common for v8 to remove optimizations for Buffer?","date":"2012-06-17T21:57:23.685Z","type":"message"}
{"nick":"philips","reason":"Excess Flood","date":"2012-06-17T21:57:32.868Z","type":"quit"}
{"nick":"CIA-108","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307perf-reg\u000f * r\u000265f6352\u000f \u000310\u000f/ (21 files in 5 dirs)\u0002:\u000f Revert \"Promoting elements transitions to their own field.\" - http://git.io/KYuzag","date":"2012-06-17T21:57:44.212Z","type":"message"}
{"nick":"piscisaureus_","message":"^-- einaros try that","date":"2012-06-17T21:57:52.439Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: I don't really understand what you mean, but I think the answer is no","date":"2012-06-17T21:58:11.088Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: Buffer is a node-only construct. v8 supports \"external byte arrays\" and it is not common for them to remove optimizations for that, no.","date":"2012-06-17T21:58:49.350Z","type":"message"}
{"nick":"philips","date":"2012-06-17T21:59:33.136Z","type":"join"}
{"nick":"einaros","message":"piscisaureus_: I was just checking the output from --trace-bailout and --trace-deopt, and noticed a couple I haven't seen before, including \"[removing optimized code for: Buffer]\" and \"Bailout in HGraphBuilder: @\"b\": bad value context for arguments value\"","date":"2012-06-17T21:59:37.156Z","type":"message"}
{"nick":"piscisaureus_","message":"ah","date":"2012-06-17T21:59:48.688Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that's something else :-)","date":"2012-06-17T21:59:52.986Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that means that there is something in the Buffer constructor that v8 can't optimize","date":"2012-06-17T22:00:12.044Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: but I don't know if it was common to bail out in Buffer() before","date":"2012-06-17T22:00:54.622Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: it would be great if you could check whether that perf-reg branch fixes your performance problem","date":"2012-06-17T22:01:25.619Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: if that's the case, I will contact the v8 team and tell them what's up.","date":"2012-06-17T22:01:38.851Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: btw - do you mind if I share the ws benchmark with them?","date":"2012-06-17T22:01:51.522Z","type":"message"}
{"nick":"einaros","message":"piscisaureus_: I didn't notice either of of the bailouts for 0.6 - and since this benchmark is pretty buffer heavy I figured they could be bad news","date":"2012-06-17T22:02:00.791Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that could be the reason, maybe","date":"2012-06-17T22:02:12.352Z","type":"message"}
{"nick":"einaros","message":"no bailouts or deopts for 0.6, just checked","date":"2012-06-17T22:02:24.812Z","type":"message"}
{"nick":"einaros","message":"during send/receive, that is","date":"2012-06-17T22:02:28.499Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: ok, cool","date":"2012-06-17T22:02:31.308Z","type":"message"}
{"nick":"einaros","message":"I'll check the perf-reg branch now","date":"2012-06-17T22:02:43.740Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: maybe, unless you have a good reason not to, could you open source the websocket-benchmark ?","date":"2012-06-17T22:03:09.573Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that'll give v8 people to take a look","date":"2012-06-17T22:03:18.433Z","type":"message"}
{"nick":"piscisaureus_","message":"(hopefully)","date":"2012-06-17T22:03:26.043Z","type":"message"}
{"nick":"hz","date":"2012-06-17T22:04:06.042Z","type":"quit"}
{"nick":"einaros","message":"yeah, sure.. it's just been seen as somewhat controversial to be battling the other node websocket implementations :)","date":"2012-06-17T22:04:14.857Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: well, just put a notice in the description that this is to compare v8 perf or something","date":"2012-06-17T22:05:02.666Z","type":"message"}
{"nick":"piscisaureus_","message":"it's all in the framing","date":"2012-06-17T22:05:07.364Z","type":"message"}
{"nick":"rendar","date":"2012-06-17T22:05:16.014Z","type":"quit"}
{"nick":"piscisaureus_","message":"einaros: when it gets fixed you can close it again :-)","date":"2012-06-17T22:05:17.142Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: if that's not acceptable, I'll just share a tarball or something","date":"2012-06-17T22:05:32.049Z","type":"message"}
{"nick":"einaros","message":"it's public now","date":"2012-06-17T22:06:45.697Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: cool","date":"2012-06-17T22:06:52.048Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: btw - I also see some other funky behaviour when running with --trace-bailout","date":"2012-06-17T22:08:34.314Z","type":"message"}
{"nick":"einaros","message":"there's a lot of static compared to 3.9","date":"2012-06-17T22:09:20.833Z","type":"message"}
{"nick":"piscisaureus_","message":"yes","date":"2012-06-17T22:09:27.539Z","type":"message"}
{"nick":"piscisaureus_","message":"it seems to be opt'ing and de-opting the same functions over and over again","date":"2012-06-17T22:09:46.197Z","type":"message"}
{"nick":"piscisaureus_","message":"but that could also just be because they changed the verbosity or something","date":"2012-06-17T22:10:12.850Z","type":"message"}
{"nick":"piscisaureus_","message":"I'll have to ask Erik","date":"2012-06-17T22:10:15.635Z","type":"message"}
{"nick":"einaros","message":"one of the deopts I saw could be avoided by switching from .apply(foo, arguments) to a .apply(foo, Array.prototype.slice.call(arguments)) (or for) type construct","date":"2012-06-17T22:12:17.932Z","type":"message"}
{"nick":"einaros","message":"but that seems inefficient as well","date":"2012-06-17T22:12:30.184Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: we take patches for this kind of stuff :-)","date":"2012-06-17T22:12:38.420Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: in my experience these bailouts and deopts give hints about where you can optimize, but nothing more","date":"2012-06-17T22:13:14.659Z","type":"message"}
{"nick":"piscisaureus_","message":"most of the time there is no measureable performance increase","date":"2012-06-17T22:13:32.421Z","type":"message"}
{"nick":"einaros","message":"at least they optimize beyond try/catch blocks now","date":"2012-06-17T22:13:58.898Z","type":"message"}
{"nick":"einaros","message":"but in either case I'd be nice to hear what Erik has to say","date":"2012-06-17T22:14:14.389Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: sure","date":"2012-06-17T22:16:12.880Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: btw - the cluster \"death\" event has been renamed to \"exit\".","date":"2012-06-17T22:17:33.897Z","type":"message"}
{"nick":"piscisaureus_","message":"einaros: that's why ws.js doesn't exit","date":"2012-06-17T22:17:39.553Z","type":"message"}
{"nick":"einaros","message":"ah","date":"2012-06-17T22:17:45.461Z","type":"message"}
{"nick":"einaros","message":"I was too lazy to check up on that ;)","date":"2012-06-17T22:18:05.519Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus_: you can ask me.","date":"2012-06-17T22:19:14.375Z","type":"message"}
{"nick":"mraleph","message":"ask me ask me","date":"2012-06-17T22:19:18.722Z","type":"message"}
{"nick":"einaros","message":":D","date":"2012-06-17T22:19:24.039Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: hello there","date":"2012-06-17T22:19:28.177Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: https://github.com/v8/v8/commit/09c97a6df060a7f8de6ce24457da11d6","date":"2012-06-17T22:19:38.124Z","type":"message"}
{"nick":"mraleph","message":"einaros: don't switch from .apply(obj, arguments) to slicing arguments. THAT IS WORSE.","date":"2012-06-17T22:19:41.451Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus_ and others: https://github.com/joyent/node/issues/3466","date":"2012-06-17T22:19:45.840Z","type":"message"}
{"nick":"isaacs","message":"feelings?  thoughts?","date":"2012-06-17T22:19:48.669Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: that commit makes v8 slow.","date":"2012-06-17T22:19:58.736Z","type":"message"}
{"nick":"isaacs","message":"i don't want to have a bazillion os.*Dir() functions","date":"2012-06-17T22:20:01.012Z","type":"message"}
{"nick":"isaacs","message":"but, it is pretty handy","date":"2012-06-17T22:20:05.856Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus_: I thought it was reverted because of that.","date":"2012-06-17T22:20:13.922Z","type":"message"}
{"nick":"einaros","message":"mraleph: I'm definitely not. I was just acting on bailout messages.","date":"2012-06-17T22:20:58.945Z","type":"message"}
{"nick":"einaros","message":"this is the deopt/bailout log from running against 0.3.11: https://gist.github.com/a15239b1d16f49032805","date":"2012-06-17T22:21:15.704Z","type":"message"}
{"nick":"einaros","message":"wereas 0.3.9 is pretty much dead silent","date":"2012-06-17T22:21:25.168Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: I can't find any reverts of that commit in the v8 repo. Or did you mean the thing I just did?","date":"2012-06-17T22:22:55.413Z","type":"message"}
{"nick":"mraleph","message":"einaros: foo.apply(obj, arguments) is supported context for arguments object, slicing it is not a supported context","date":"2012-06-17T22:23:08.590Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus_: yeah, my bad.","date":"2012-06-17T22:23:13.236Z","type":"message"}
{"nick":"einaros","message":"mraleph: there's no slicing in the original code, so you can disregard that whole comment","date":"2012-06-17T22:23:58.417Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus_: well if it makes V8 slow (you have a repro and you bisected down to this) report it to bug tracker.","date":"2012-06-17T22:24:12.852Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: we were about to, sort of, do that","date":"2012-06-17T22:24:25.417Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: tbh I was just going to email Erik but reporting a bug also works","date":"2012-06-17T22:24:35.564Z","type":"message"}
{"nick":"piscisaureus_","message":"although the latency is much higher","date":"2012-06-17T22:24:49.711Z","type":"message"}
{"nick":"mraleph","message":"einaros: I was reacting at \"deopts I saw could be avoided by switching from .apply(foo, arguments) to a .apply(foo, Array.prototype.slice.call(arguments)) (or for) type construct@","date":"2012-06-17T22:25:00.052Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus_: mailing Erik will probably work as well, but filing bugs leaves visible trail and ensures things do not fall through :-)","date":"2012-06-17T22:25:45.745Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: the other question is related to this --trace-deopt output.","date":"2012-06-17T22:26:37.977Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: in node 0.6 (v8 3.6) I didn't see nearly as much as now","date":"2012-06-17T22:26:38.173Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: it seems to deopt the same function over and over again","date":"2012-06-17T22:26:55.643Z","type":"message"}
{"nick":"mraleph","message":"probably we did not optimize nearly as much","date":"2012-06-17T22:26:57.224Z","type":"message"}
{"nick":"mraleph","message":"sampling profiler might have missed the function","date":"2012-06-17T22:27:19.358Z","type":"message"}
{"nick":"mraleph","message":"counting profiler just optimizes everything that is called frequent enough.","date":"2012-06-17T22:27:34.148Z","type":"message"}
{"nick":"mraleph","message":"we also relaxed some restrictions on reoptimizations.","date":"2012-06-17T22:27:43.835Z","type":"message"}
{"nick":"piscisaureus_","message":"ah, ok","date":"2012-06-17T22:27:58.984Z","type":"message"}
{"nick":"mraleph","message":"if you are seeing constants deopts something might be off either in our assumptions or in your function :-)","date":"2012-06-17T22:28:10.861Z","type":"message"}
{"nick":"piscisaureus_","message":"haha","date":"2012-06-17T22:28:24.133Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: My stance on this: valid ES is valid ES. I cannot be wrong :-p","date":"2012-06-17T22:28:51.220Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: wrt Erik vs bug tracker. I'll be a multi headed dragon >:-)","date":"2012-06-17T22:29:11.843Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus_: https://chromiumcodereview.appspot.com/10554011/","date":"2012-06-17T22:29:58.979Z","type":"message"}
{"nick":"mraleph","message":"here is why I thought it was reverted.","date":"2012-06-17T22:30:08.968Z","type":"message"}
{"nick":"mraleph","message":"there is something that looks like a pending fix.","date":"2012-06-17T22:30:19.703Z","type":"message"}
{"nick":"piscisaureus_","message":"ah, right","date":"2012-06-17T22:30:30.947Z","type":"message"}
{"nick":"piscisaureus_","message":"well, let's try it out","date":"2012-06-17T22:30:41.485Z","type":"message"}
{"nick":"mraleph","message":"sorry my brain tries to track this stuff in background, but it's now too hard to keep up with a project while working on another one :-)","date":"2012-06-17T22:31:27.008Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: np, I won't blame you","date":"2012-06-17T22:32:43.352Z","type":"message"}
{"nick":"mraleph","message":"with respect to your stance.","date":"2012-06-17T22:33:01.837Z","type":"message"}
{"nick":"mraleph","message":"deopt is not \"being wrong\"","date":"2012-06-17T22:33:13.175Z","type":"message"}
{"nick":"mraleph","message":"deopt is more about \"behaving in surprising funky ways\"","date":"2012-06-17T22:33:24.979Z","type":"message"}
{"nick":"mraleph","message":"not predictabily","date":"2012-06-17T22:33:32.788Z","type":"message"}
{"nick":"piscisaureus_","message":"oh, sure, I was just kidding","date":"2012-06-17T22:33:46.572Z","type":"message"}
{"nick":"mraleph","message":"anyways it's worth investigating.","date":"2012-06-17T22:33:59.899Z","type":"message"}
{"nick":"piscisaureus_","message":"but it's all about sweet spot","date":"2012-06-17T22:34:08.072Z","type":"message"}
{"nick":"mraleph","message":"what's the reason for deopt?","date":"2012-06-17T22:34:08.697Z","type":"message"}
{"nick":"piscisaureus_","message":"yeah, that's very difficult to tell from the logs","date":"2012-06-17T22:34:19.587Z","type":"message"}
{"nick":"mraleph","message":"should print LIR instruction if you âtrace-deopt with âcode-comments","date":"2012-06-17T22:34:22.433Z","type":"message"}
{"nick":"mraleph","message":"it's not always accurate, but mostly accurate.","date":"2012-06-17T22:34:36.192Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: I shall try that","date":"2012-06-17T22:36:20.632Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: but right now, I am going to get some food (!!) and sleep","date":"2012-06-17T22:36:41.048Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: btw, thanks for pointing me to \u0002https://chromiumcodereview.appspot.com/10554011/\u0003\u0002","date":"2012-06-17T22:37:08.339Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: it sort of fixes the perf issue","date":"2012-06-17T22:37:16.753Z","type":"message"}
{"nick":"mraleph","message":"sort of?","date":"2012-06-17T22:37:23.534Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: well, it's very difficult to tell, since this benchmark has a very big variance in outputs","date":"2012-06-17T22:37:52.955Z","type":"message"}
{"nick":"mraleph","message":"hmmmmm","date":"2012-06-17T22:38:02.798Z","type":"message"}
{"nick":"mraleph","message":"how did you bisect it then?","date":"2012-06-17T22:38:10.007Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: well, < 3s -> good","date":"2012-06-17T22:38:21.106Z","type":"message"}
{"nick":"mraleph","message":"haha","date":"2012-06-17T22:38:25.994Z","type":"message"}
{"nick":"mraleph","message":"ok","date":"2012-06-17T22:38:28.876Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: > 10s -> bad","date":"2012-06-17T22:38:29.392Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: because the regressions was that big","date":"2012-06-17T22:38:38.958Z","type":"message"}
{"nick":"mraleph","message":"so with this CL it's < 10s?","date":"2012-06-17T22:38:47.202Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: yes, it's like 4, 5","date":"2012-06-17T22:38:57.679Z","type":"message"}
{"nick":"piscisaureus_","message":"or so","date":"2012-06-17T22:38:59.191Z","type":"message"}
{"nick":"mraleph","message":"so it still did not regain full speed.","date":"2012-06-17T22:39:11.571Z","type":"message"}
{"nick":"mraleph","message":"I see.","date":"2012-06-17T22:39:12.826Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: well, it could also be random variation","date":"2012-06-17T22:39:21.170Z","type":"message"}
{"nick":"mraleph","message":"ok, as you say :-)","date":"2012-06-17T22:39:29.781Z","type":"message"}
{"nick":"mraleph","message":"anyways, have a good one, I am also out.","date":"2012-06-17T22:39:42.150Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: but we're definitely wayyyy lower than 10s again","date":"2012-06-17T22:39:45.117Z","type":"message"}
{"nick":"piscisaureus_","message":"mraleph: you too man, take care","date":"2012-06-17T22:39:54.076Z","type":"message"}
{"nick":"piscisaureus_","message":"I am out too.","date":"2012-06-17T22:39:55.934Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-06-17T22:40:38.307Z","type":"quit"}
{"nick":"piscisaureus_","message":"goodbye leute","date":"2012-06-17T22:44:12.988Z","type":"message"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-06-17T22:44:16.217Z","type":"quit"}
{"nick":"loladiro","reason":"Ping timeout: 244 seconds","date":"2012-06-17T22:51:38.547Z","type":"quit"}
{"nick":"bnoordhuis","date":"2012-06-17T22:56:06.253Z","type":"join"}
{"nick":"loladiro","date":"2012-06-17T23:04:19.470Z","type":"join"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-06-17T23:26:00.911Z","type":"quit"}
{"nick":"TheJH","reason":"Ping timeout: 260 seconds","date":"2012-06-17T23:26:31.605Z","type":"quit"}
