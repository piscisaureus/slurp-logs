{"nick":"mjr_","message":"But curiously, it's always in the case where we are telling the client, \"no actual data right now\" tiny little JSON string response.","date":"2012-04-11T00:00:26.516Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: what is config/piii vs config/k8 for?","date":"2012-04-11T00:00:30.349Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: they're ia32 vs x64 configs","date":"2012-04-11T00:01:06.734Z","type":"message"}
{"nick":"bnoordhuis","message":"pii and k8 are openssl nomenclature","date":"2012-04-11T00:01:14.855Z","type":"message"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-04-11T00:01:22.189Z","type":"quit"}
{"nick":"piscisaureus_","message":"bnoordhuis: ah, right","date":"2012-04-11T00:01:22.864Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: k8 is what?","date":"2012-04-11T00:01:28.305Z","type":"message"}
{"nick":"mjr_","message":"isaacs: also about half of those write/alloc stacks don't have any of our code in them at all.","date":"2012-04-11T00:01:34.487Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: x64","date":"2012-04-11T00:01:35.902Z","type":"message"}
{"nick":"piscisaureus_","message":"right","date":"2012-04-11T00:01:40.524Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: i'll look at it tomorrow, have to get up early","date":"2012-04-11T00:01:45.437Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: cool, thanks.","date":"2012-04-11T00:01:57.268Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: btw, the positions in the stacks are incorrect, i think","date":"2012-04-11T00:02:07.492Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: okay, noted","date":"2012-04-11T00:02:29.533Z","type":"message"}
{"nick":"isaacs","message":"but the function names are valid","date":"2012-04-11T00:02:36.994Z","type":"message"}
{"nick":"mjr_","message":"I can supply the source code to where it intersects our code if that helps.","date":"2012-04-11T00:02:46.706Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: v0.6 is the stable branch","date":"2012-04-11T00:02:51.466Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: sure, that would help","date":"2012-04-11T00:02:56.601Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, gotta go","date":"2012-04-11T00:03:00.873Z","type":"message"}
{"nick":"bnoordhuis","message":"sleep tight, guys","date":"2012-04-11T00:03:04.040Z","type":"message"}
{"nick":"isaacs","message":"g'nite ben","date":"2012-04-11T00:03:04.608Z","type":"message"}
{"nick":"mjr_","message":"Is there a way to get V8 to compute line numbers on everything","date":"2012-04-11T00:03:10.236Z","type":"message"}
{"nick":"mjr_","message":"?","date":"2012-04-11T00:03:11.840Z","type":"message"}
{"nick":"mjr_","message":"Because I could just run all processes with that so jsstack would be more useful everywhere.","date":"2012-04-11T00:03:43.473Z","type":"message"}
{"nick":"trondn","message":"bnoordhuis: hmm.. running make test there doesn't look good on my mac? is it supposed to pass all tests?","date":"2012-04-11T00:05:00.051Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 246 seconds","date":"2012-04-11T00:07:29.911Z","type":"quit"}
{"nick":"dap","message":"mjr_: Sorry, just catching up . This is probably too arcane to be very helpful, but if you ever throw an exception whose stack contains a given file and get the stacktrace for it, V8 will compute line numbers for that file and we'll have them forever.","date":"2012-04-11T00:07:32.642Z","type":"message"}
{"nick":"dap","message":"mjr_: For debugging, it would be great to have node tell V8 to compute line numbers on all files when you \"require\" them. I don't know how that would impact start time, or if anyone would care (I wouldn't)","date":"2012-04-11T00:08:09.624Z","type":"message"}
{"nick":"isaacs","message":"dap: if you just do `new Error()` in that file, will it have the same effect?","date":"2012-04-11T00:08:12.068Z","type":"message"}
{"nick":"mjr_","message":"So in each file, just make an Error object?","date":"2012-04-11T00:08:14.009Z","type":"message"}
{"nick":"dap","message":"isaacs: new Error().stack, yes","date":"2012-04-11T00:08:19.768Z","type":"message"}
{"nick":"mjr_","message":"oh wow, OK","date":"2012-04-11T00:08:31.537Z","type":"message"}
{"nick":"TooTallNate","message":"mjr_: you'll need to access .stack","date":"2012-04-11T00:08:33.341Z","type":"message"}
{"nick":"mjr_","message":"Sounds good.  I'll put that in all of our files.","date":"2012-04-11T00:08:52.658Z","type":"message"}
{"nick":"isaacs","message":"mjr_: require.extensions[\".js\"] = function() { new Error().stack; orig.apply(this, arguments) }(require.extensions[\".js\"])","date":"2012-04-11T00:08:56.545Z","type":"message"}
{"nick":"isaacs","message":"mjr_: you could just put that in one place","date":"2012-04-11T00:09:02.200Z","type":"message"}
{"nick":"mjr_","message":"oh, exciting.","date":"2012-04-11T00:09:11.114Z","type":"message"}
{"nick":"isaacs","message":"er, return orig.apply(this, arguments)","date":"2012-04-11T00:09:19.833Z","type":"message"}
{"nick":"isaacs","message":"AOP is actually magic.","date":"2012-04-11T00:09:23.528Z","type":"message"}
{"nick":"isaacs","message":":)","date":"2012-04-11T00:09:25.820Z","type":"message"}
{"nick":"isaacs","message":"oh, actually, that stack trace will dodge your code","date":"2012-04-11T00:10:43.343Z","type":"message"}
{"nick":"dap","message":"yeah, that probably won't quite work because the stacktrace won't include the file you're about to include","date":"2012-04-11T00:11:40.369Z","type":"message"}
{"nick":"mjr_","message":"I can just do new Error().stack at the top of every file.","date":"2012-04-11T00:12:05.279Z","type":"message"}
{"nick":"dap","message":"mjr_: cool. I also write https://raw.github.com/davepacheco/tools/master/bin/filepos, though that's also a little tricky because node wraps with the file before handing it off to V8, so the position will be off by a few chars.","date":"2012-04-11T00:13:00.180Z","type":"message"}
{"nick":"mjr_","message":"Interesting.","date":"2012-04-11T00:14:31.821Z","type":"message"}
{"nick":"mjr_","message":"So on an somewhat related matter, how can I get a usable core file from node when it gets stuck in TLS","date":"2012-04-11T00:14:48.972Z","type":"message"}
{"nick":"mjr_","message":"?","date":"2012-04-11T00:14:50.040Z","type":"message"}
{"nick":"xaq","date":"2012-04-11T00:14:53.830Z","type":"join"}
{"nick":"dap","message":"gcore","date":"2012-04-11T00:14:57.410Z","type":"message"}
{"nick":"mjr_","message":"I tried ggore, but those core files aren't readable by gdb","date":"2012-04-11T00:14:58.466Z","type":"message"}
{"nick":"mjr_","message":"er, gcore.","date":"2012-04-11T00:15:02.738Z","type":"message"}
{"nick":"mjr_","message":"If I kill -SIGABRT, they seem to be readable.","date":"2012-04-11T00:15:18.980Z","type":"message"}
{"nick":"dap","message":"oh.  I don't know anything about GDB's support for SunOS core files","date":"2012-04-11T00:15:20.241Z","type":"message"}
{"nick":"mjr_","message":"So the trick is that neither bnoordhuis nor I speak mdb","date":"2012-04-11T00:15:39.723Z","type":"message"}
{"nick":"mjr_","message":"Even though it seems like mdb is awesome.","date":"2012-04-11T00:15:46.237Z","type":"message"}
{"nick":"dap","message":"I'm honestly not sure what you can get from GDB anyway?","date":"2012-04-11T00:16:02.056Z","type":"message"}
{"nick":"mjr_","message":"And mdb has your jsstack action in it.","date":"2012-04-11T00:16:07.807Z","type":"message"}
{"nick":"dap","message":"right","date":"2012-04-11T00:16:35.689Z","type":"message"}
{"nick":"mjr_","message":"I'm not actually sure either, but bnoordhuis says that this is what he needs to fix this problem.","date":"2012-04-11T00:16:38.614Z","type":"message"}
{"nick":"mjr_","message":"I think he thinks that the badness is somewhere in libuv.","date":"2012-04-11T00:16:51.247Z","type":"message"}
{"nick":"orlandovftw","reason":"Ping timeout: 245 seconds","date":"2012-04-11T00:16:55.929Z","type":"quit"}
{"nick":"dap","message":"But he doesn't know how to get a GDB-usable core file either (without killing the process)?","date":"2012-04-11T00:17:32.497Z","type":"message"}
{"nick":"isaacs","message":"here's the thing you only have to do once:","date":"2012-04-11T00:17:36.841Z","type":"message"}
{"nick":"isaacs","message":"require(\"module\").wrapper[0] += 'new Error().stack;'","date":"2012-04-11T00:17:37.371Z","type":"message"}
{"nick":"dap","message":"(I assume you want to avoid killing the process)","date":"2012-04-11T00:17:37.909Z","type":"message"}
{"nick":"mjr_","message":"dap, the process is stuck and needs to be killed","date":"2012-04-11T00:18:13.289Z","type":"message"}
{"nick":"mjr_","message":"So killing is actually a useful side effect.  :)","date":"2012-04-11T00:18:21.056Z","type":"message"}
{"nick":"dap","message":"oh, so is \"kill -ABORT\" a fine solution then?","date":"2012-04-11T00:18:29.197Z","type":"message"}
{"nick":"mjr_","message":"I guess so.  I'm not sure if that makes a core file that is then less usable somehow in mdb","date":"2012-04-11T00:19:03.224Z","type":"message"}
{"nick":"mjr_","message":"But I'm happy to just abort them if that's the best way to get a core file that everybody can use.","date":"2012-04-11T00:19:42.670Z","type":"message"}
{"nick":"dap","message":"Both core files are fine for MDB.","date":"2012-04-11T00:19:50.462Z","type":"message"}
{"nick":"mjr_","message":"Excellent.","date":"2012-04-11T00:20:17.824Z","type":"message"}
{"nick":"mjr_","message":"Speaking of which, I got one right now","date":"2012-04-11T00:20:36.168Z","type":"message"}
{"nick":"mjr_","message":"So I guess I'll relay this to bnoordhuis tomorrow when our schedules overlap.","date":"2012-04-11T00:22:38.461Z","type":"message"}
{"nick":"rphillips","message":"does libuv have a way to get the current time in milliseconds in a cross platform way?","date":"2012-04-11T00:24:22.314Z","type":"message"}
{"nick":"TooTallNate","message":"rphillips: there's uv_hrtime() but that's nanoseconds, not milli","date":"2012-04-11T00:27:16.810Z","type":"message"}
{"nick":"rphillips","message":"that works. thanks","date":"2012-04-11T00:27:29.921Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: ?","date":"2012-04-11T00:31:07.008Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-04-11T00:31:45.154Z","type":"quit"}
{"nick":"TooTallNate","message":"piscisaureus_: he went to bed already","date":"2012-04-11T00:32:25.473Z","type":"message"}
{"nick":"piscisaureus_","message":"the slacker","date":"2012-04-11T00:32:32.256Z","type":"message"}
{"nick":"TooTallNate","message":"hahaha","date":"2012-04-11T00:32:39.387Z","type":"message"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-04-11T00:32:48.136Z","type":"quit"}
{"nick":"tjfontaine","message":"damn his circadian rhythm","date":"2012-04-11T00:34:21.455Z","type":"message"}
{"nick":"piscisaureus_","message":"I wonder why we are not building opennsl without socket support","date":"2012-04-11T00:35:20.304Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-04-11T00:36:12.395Z","type":"quit"}
{"nick":"piscisaureus_","message":"We could just add -DOPENSSL_NO_SOCK=1","date":"2012-04-11T00:39:10.660Z","type":"message"}
{"nick":"piscisaureus_","message":"Where is pquerna when  you need him :-/","date":"2012-04-11T00:39:26.873Z","type":"message"}
{"nick":"tjfontaine","message":"sounds reasonable to me","date":"2012-04-11T00:39:31.599Z","type":"message"}
{"nick":"TooTallNate","date":"2012-04-11T00:39:52.729Z","type":"join"}
{"nick":"piscisaureus_","message":"ircretary: tell bnoordhuis Why are we not compiling openssl with \u000301-DOPENSSL_NO_SOCK\u0003\u000301 ?","date":"2012-04-11T00:40:13.444Z","type":"message"}
{"nick":"ircretary","message":"piscisaureus_: I'll be sure to tell bnoordhuis","date":"2012-04-11T00:40:13.686Z","type":"message"}
{"nick":"tjfontaine","message":"man trillian hates irc :)","date":"2012-04-11T00:40:48.309Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine: huh why?","date":"2012-04-11T00:43:05.189Z","type":"message"}
{"nick":"pietern","reason":"Quit: pietern","date":"2012-04-11T00:43:38.608Z","type":"quit"}
{"nick":"tjfontaine","message":"piscisaureus_: because your copy/paste always keeps your color, and then trillian sends it as such","date":"2012-04-11T00:44:36.356Z","type":"message"}
{"nick":"piscisaureus_","message":"tjfontaine:, oh, that's not unreasonable is it?","date":"2012-04-11T00:45:01.916Z","type":"message"}
{"nick":"tjfontaine","message":"piscisaureus_: only because my background is black, and your foreground text is black :)","date":"2012-04-11T00:45:27.039Z","type":"message"}
{"nick":"piscisaureus_","message":"ircretary: tell bnoordhuis Also, https://gist.github.com/2356006","date":"2012-04-11T00:50:03.487Z","type":"message"}
{"nick":"ircretary","message":"piscisaureus_: I'll be sure to tell bnoordhuis","date":"2012-04-11T00:50:03.688Z","type":"message"}
{"nick":"orlandovftw","date":"2012-04-11T01:08:34.793Z","type":"join"}
{"nick":"pijewski","reason":"Quit: Leaving.","date":"2012-04-11T01:09:16.899Z","type":"quit"}
{"nick":"trondn","reason":"Quit: Leaving.","date":"2012-04-11T01:11:03.913Z","type":"quit"}
{"nick":"abraxas","date":"2012-04-11T01:12:47.228Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 260 seconds","date":"2012-04-11T01:28:20.601Z","type":"quit"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-04-11T01:29:59.799Z","type":"quit"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307v0.6\u000f * r\u0002d0365fd\u000f \u000310\u000f/ Makefile \u0002:\u000f Makefile: minor nit - http://git.io/Fev3Ig","date":"2012-04-11T01:32:18.966Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307v0.6\u000f * r\u00028b82abb\u000f \u000310\u000f/ (4 files in 3 dirs)\u0002:\u000f Fix #3089 Build changelog.html for website - http://git.io/UhZkNA","date":"2012-04-11T01:32:19.365Z","type":"message"}
{"nick":"trondn","date":"2012-04-11T01:33:45.636Z","type":"join"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u00023ba9519\u000f \u000310\u000f/ Makefile \u0002:\u000f Makefile: minor nit - http://git.io/pg6RZw","date":"2012-04-11T01:35:46.944Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303isaacs\u000f \u000307master\u000f * r\u0002e066074\u000f \u000310\u000f/ (4 files in 3 dirs)\u0002:\u000f Fix #3089 Build changelog.html for website - http://git.io/rqlEhw","date":"2012-04-11T01:35:47.140Z","type":"message"}
{"nick":"xaq","date":"2012-04-11T01:35:56.130Z","type":"join"}
{"nick":"piscisaureus_","reason":"Quit: ~ Trillian Astra - www.trillian.im ~","date":"2012-04-11T01:37:57.668Z","type":"quit"}
{"nick":"perezd","message":"TooTallNate: yt?","date":"2012-04-11T01:39:33.585Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T01:39:51.433Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#711 (v0.6 - 8b82abb : isaacs): The build is still failing.","date":"2012-04-11T01:39:51.635Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/e8067cb...8b82abb","date":"2012-04-11T01:39:51.636Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1062567","date":"2012-04-11T01:39:51.636Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T01:39:51.636Z","type":"part"}
{"nick":"TooTallNate","message":"perezd: ya for a sec","date":"2012-04-11T01:42:13.838Z","type":"message"}
{"nick":"perezd","message":"is it standard practice to create/destroy uv_async whenever calling into a v8 extension?","date":"2012-04-11T01:43:42.934Z","type":"message"}
{"nick":"perezd","message":"ie: per function, is it a lot of overhead?","date":"2012-04-11T01:44:00.632Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: i'm not entirely sure. what are you trying to do exactly?","date":"2012-04-11T01:44:51.704Z","type":"message"}
{"nick":"perezd","message":"basically, we're calling uv_async_init and doing some work, that increments a refcount","date":"2012-04-11T01:45:55.864Z","type":"message"}
{"nick":"perezd","message":"a","date":"2012-04-11T01:45:56.447Z","type":"message"}
{"nick":"perezd","message":"and because that refcount != 0, the node process stays open","date":"2012-04-11T01:46:04.084Z","type":"message"}
{"nick":"perezd","message":"so we can call uv_close and then the process exits","date":"2012-04-11T01:46:27.244Z","type":"message"}
{"nick":"perezd","message":"so, generally, what I am asking is, should it be considered \"cheap","date":"2012-04-11T01:46:45.706Z","type":"message"}
{"nick":"perezd","message":"\"","date":"2012-04-11T01:46:47.186Z","type":"message"}
{"nick":"perezd","message":"to call uv_async_init/uv_close within every function I expose to javascript via v8 extensions","date":"2012-04-11T01:47:02.994Z","type":"message"}
{"nick":"perezd","message":"to do async work?","date":"2012-04-11T01:47:04.967Z","type":"message"}
{"nick":"TooTallNate","message":"well usually that's not needed","date":"2012-04-11T01:47:29.581Z","type":"message"}
{"nick":"TooTallNate","message":"what kind of async work is it? something on another thread?","date":"2012-04-11T01:47:40.717Z","type":"message"}
{"nick":"perezd","message":"yes it is","date":"2012-04-11T01:47:48.196Z","type":"message"}
{"nick":"perezd","message":"we have our own threadpool, and we'd like a one way channel to wake up the main loops from our threads","date":"2012-04-11T01:48:33.363Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T01:49:25.261Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#712 (master - e066074 : isaacs): The build is still failing.","date":"2012-04-11T01:49:25.458Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/7b71fd0...e066074","date":"2012-04-11T01:49:25.458Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1062570","date":"2012-04-11T01:49:25.458Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T01:49:25.458Z","type":"part"}
{"nick":"perezd","message":"whats the proper way to use the API for libuv in that case? ","date":"2012-04-11T01:50:37.724Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: uv_async i think is correct in this case. though i think usually you'd just need 1","date":"2012-04-11T01:52:43.402Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: honestly you'd be better off asking one of the libuv gurus when they're back online :p","date":"2012-04-11T01:53:02.954Z","type":"message"}
{"nick":"perezd","message":"so does it make sense to open/close it many times (ie: once per C call?)","date":"2012-04-11T01:53:13.891Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: not to me, but again, i'm not a guru :p","date":"2012-04-11T01:54:23.501Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: but one per \"action\" is probably ok","date":"2012-04-11T01:55:22.899Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: node-ffi creates one per async function call","date":"2012-04-11T01:55:31.637Z","type":"message"}
{"nick":"perezd","message":"yes we noticed","date":"2012-04-11T01:56:02.470Z","type":"message"}
{"nick":"perezd","message":":)","date":"2012-04-11T01:56:03.898Z","type":"message"}
{"nick":"perezd","message":"thats why we were wondering if it was costly","date":"2012-04-11T01:56:09.082Z","type":"message"}
{"nick":"perezd","message":"who would you consider a libuv guru?","date":"2012-04-11T01:56:33.418Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: piscisaureus and bnoordhuis","date":"2012-04-11T01:57:38.096Z","type":"message"}
{"nick":"ryah","message":"perezd: uv_async_t sounds right","date":"2012-04-11T01:57:48.032Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: i'm curious as well if there's optimizations that node-ffi could do","date":"2012-04-11T01:57:56.628Z","type":"message"}
{"nick":"perezd","message":"ryah: the bigger question is the cost of ","date":"2012-04-11T01:58:02.790Z","type":"message"}
{"nick":"perezd","message":"it","date":"2012-04-11T01:58:04.239Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: frankly that part of the codebase hasn't been touched in ages","date":"2012-04-11T01:58:07.922Z","type":"message"}
{"nick":"ryah","message":"perezd: on unix uv_async is the self-pipe trick","date":"2012-04-11T01:58:34.065Z","type":"message"}
{"nick":"ryah","message":"http://cr.yp.to/docs/selfpipe.html","date":"2012-04-11T01:58:51.711Z","type":"message"}
{"nick":"perezd","message":"ryah: ie: if I have a C function like create_foo that does some async work and should fire a cb in the main thread, is it reasonably \"performant\" to close it, and then reopen it later if I need to do another async thing","date":"2012-04-11T01:58:54.002Z","type":"message"}
{"nick":"perezd","message":"reopen a new one later that is","date":"2012-04-11T01:59:17.457Z","type":"message"}
{"nick":"ryah","message":"close what/","date":"2012-04-11T01:59:29.248Z","type":"message"}
{"nick":"ryah","message":"the uv_async ?","date":"2012-04-11T01:59:40.994Z","type":"message"}
{"nick":"perezd","message":"uv_close","date":"2012-04-11T01:59:41.192Z","type":"message"}
{"nick":"perezd","message":"yeah","date":"2012-04-11T01:59:43.150Z","type":"message"}
{"nick":"ryah","message":"i think you should just leave it open","date":"2012-04-11T01:59:52.524Z","type":"message"}
{"nick":"perezd","message":"that causes the process to hang","date":"2012-04-11T01:59:57.928Z","type":"message"}
{"nick":"perezd","message":"open","date":"2012-04-11T01:59:59.677Z","type":"message"}
{"nick":"ryah","message":"use a single one to wake up the main thread","date":"2012-04-11T01:59:59.872Z","type":"message"}
{"nick":"perezd","message":"even though its not doing anything","date":"2012-04-11T02:00:02.961Z","type":"message"}
{"nick":"perezd","message":"because it incrs the refcount","date":"2012-04-11T02:00:07.782Z","type":"message"}
{"nick":"perezd","message":"should I manually decr refcount?","date":"2012-04-11T02:00:24.406Z","type":"message"}
{"nick":"TooTallNate","message":"perezd: node-ffi deals with the refcount manually","date":"2012-04-11T02:00:41.790Z","type":"message"}
{"nick":"TooTallNate","message":"uv_ref() and uv_unref()","date":"2012-04-11T02:00:50.223Z","type":"message"}
{"nick":"ryah","message":"perezd: i'm not sure the overhead - i believe there is only one pipe","date":"2012-04-11T02:01:03.201Z","type":"message"}
{"nick":"ryah","message":"so it might not be bad to have multiple","date":"2012-04-11T02:01:08.561Z","type":"message"}
{"nick":"perezd","message":"okay, will try it out and report back","date":"2012-04-11T02:01:16.475Z","type":"message"}
{"nick":"TooTallNate","reason":"Quit: Linkinus - http://linkinus.com","date":"2012-04-11T02:01:17.507Z","type":"quit"}
{"nick":"brson","reason":"Quit: leaving","date":"2012-04-11T02:02:26.960Z","type":"quit"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-04-11T02:05:30.358Z","type":"quit"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-11T02:19:16.586Z","type":"quit"}
{"nick":"bradleymeck","date":"2012-04-11T02:27:24.720Z","type":"join"}
{"nick":"orlandovftw","date":"2012-04-11T02:30:21.604Z","type":"join"}
{"nick":"perezd","date":"2012-04-11T02:30:28.523Z","type":"join"}
{"nick":"trondn","reason":"Ping timeout: 260 seconds","date":"2012-04-11T02:40:05.598Z","type":"quit"}
{"nick":"c4milo","date":"2012-04-11T02:44:32.123Z","type":"join"}
{"nick":"trondn","date":"2012-04-11T02:58:06.002Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-04-11T02:59:35.220Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T02:59:55.681Z","type":"quit"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-04-11T03:06:41.093Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T03:12:41.811Z","type":"join"}
{"nick":"dylukes","date":"2012-04-11T03:15:05.753Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T03:21:46.562Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T03:23:06.795Z","type":"join"}
{"nick":"bulatshakirzyano","date":"2012-04-11T03:28:31.732Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 246 seconds","date":"2012-04-11T03:43:37.327Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T03:50:48.162Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T04:00:09.705Z","type":"join"}
{"nick":"orlandovftw","date":"2012-04-11T04:03:21.160Z","type":"join"}
{"nick":"c4milo","reason":"Quit: c4milo","date":"2012-04-11T04:04:46.337Z","type":"quit"}
{"nick":"orlandovftw","reason":"Ping timeout: 252 seconds","date":"2012-04-11T04:16:45.961Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T04:32:11.771Z","type":"quit"}
{"nick":"orlandovftw","date":"2012-04-11T04:32:15.079Z","type":"join"}
{"nick":"mikeal","date":"2012-04-11T04:34:31.442Z","type":"join"}
{"nick":"felixge","date":"2012-04-11T04:52:48.537Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-04-11T04:52:48.737Z","type":"quit"}
{"nick":"felixge","date":"2012-04-11T04:52:48.737Z","type":"join"}
{"nick":"felixge","message":"mikeal: ping","date":"2012-04-11T04:52:58.182Z","type":"message"}
{"nick":"mikeal","message":"pong","date":"2012-04-11T04:54:17.698Z","type":"message"}
{"nick":"xaq","date":"2012-04-11T04:58:34.814Z","type":"join"}
{"nick":"c4milo","date":"2012-04-11T05:21:00.115Z","type":"join"}
{"nick":"dylukes","reason":"Quit: Pipes are broken. Sending packets via Fedex.","date":"2012-04-11T05:54:21.362Z","type":"quit"}
{"nick":"isaacs","date":"2012-04-11T06:15:02.238Z","type":"join"}
{"nick":"stephank","reason":"Quit: *Poof!*","date":"2012-04-11T06:35:22.767Z","type":"quit"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T06:41:26.710Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T06:55:15.622Z","type":"join"}
{"nick":"Marak","date":"2012-04-11T07:01:13.006Z","type":"join"}
{"nick":"rendar","date":"2012-04-11T07:07:29.369Z","type":"join"}
{"nick":"paddybyers","date":"2012-04-11T07:07:51.316Z","type":"join"}
{"nick":"c4milo","reason":"Quit: c4milo","date":"2012-04-11T07:15:59.465Z","type":"quit"}
{"nick":"benvie","date":"2012-04-11T07:17:19.809Z","type":"quit"}
{"nick":"txdv_","date":"2012-04-11T07:17:44.506Z","type":"join"}
{"nick":"txdv","reason":"Ping timeout: 276 seconds","date":"2012-04-11T07:22:17.924Z","type":"quit"}
{"nick":"benvie","date":"2012-04-11T07:26:57.271Z","type":"join"}
{"nick":"orlandovftw","reason":"Ping timeout: 245 seconds","date":"2012-04-11T08:12:14.453Z","type":"quit"}
{"nick":"felixge","message":"mikeal: still there? sorry, didn't see your reply earlier","date":"2012-04-11T08:20:39.796Z","type":"message"}
{"nick":"isaacs","message":"anyone else seeing like almost every test failing in master?","date":"2012-04-11T08:34:07.861Z","type":"message"}
{"nick":"isaacs","message":"on osx","date":"2012-04-11T08:34:22.026Z","type":"message"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-04-11T08:46:24.591Z","type":"quit"}
{"nick":"felixge_","date":"2012-04-11T09:17:28.526Z","type":"join"}
{"nick":"felixge_","reason":"Changing host","date":"2012-04-11T09:17:28.756Z","type":"quit"}
{"nick":"felixge_","date":"2012-04-11T09:17:28.956Z","type":"join"}
{"nick":"felixge","reason":"Read error: Connection reset by peer","date":"2012-04-11T09:18:32.625Z","type":"quit"}
{"nick":"felixge__","date":"2012-04-11T09:18:38.519Z","type":"join"}
{"nick":"felixge__","reason":"Changing host","date":"2012-04-11T09:18:38.734Z","type":"quit"}
{"nick":"felixge__","date":"2012-04-11T09:18:38.937Z","type":"join"}
{"nick":"felixge_","reason":"Read error: Connection reset by peer","date":"2012-04-11T09:19:10.881Z","type":"quit"}
{"nick":"isaacs","reason":"Remote host closed the connection","date":"2012-04-11T09:29:25.246Z","type":"quit"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-04-11T09:45:09.214Z","type":"quit"}
{"nick":"xaq","date":"2012-04-11T09:46:49.656Z","type":"join"}
{"nick":"xaq","reason":"Read error: Connection reset by peer","date":"2012-04-11T10:34:10.546Z","type":"quit"}
{"nick":"xaq","date":"2012-04-11T10:35:27.721Z","type":"join"}
{"nick":"saghul","message":"igorzi i'm getting these: |+ 117|-  16]","date":"2012-04-11T10:58:00.296Z","type":"message"}
{"nick":"bnoordhuis","date":"2012-04-11T11:05:39.173Z","type":"join"}
{"nick":"abraxas","date":"2012-04-11T11:38:48.929Z","type":"quit"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-04-11T11:43:03.424Z","type":"quit"}
{"nick":"piscisaureus_","date":"2012-04-11T11:54:38.209Z","type":"join"}
{"nick":"piscisaureus_","message":"bnoordhuis: yt?","date":"2012-04-11T12:27:00.077Z","type":"message"}
{"nick":"c4milo","date":"2012-04-11T12:28:49.515Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus_: yes","date":"2012-04-11T12:29:00.667Z","type":"message"}
{"nick":"bnoordhuis","message":"have to go soon though","date":"2012-04-11T12:29:06.188Z","type":"message"}
{"nick":"piscisaureus_","message":"bnoordhuis: you seen my openssl comments","date":"2012-04-11T12:29:16.260Z","type":"message"}
{"nick":"piscisaureus_","message":"?","date":"2012-04-11T12:29:17.076Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus_: yep","date":"2012-04-11T12:29:21.764Z","type":"message"}
{"nick":"piscisaureus_","new_nick":"piscisaureus","date":"2012-04-11T12:29:27.136Z","type":"nick"}
{"nick":"bnoordhuis","message":"i'm working on making it compile with OPENSSL_NO_SOCK","date":"2012-04-11T12:29:31.580Z","type":"message"}
{"nick":"bnoordhuis","message":"apparently that doesn't disable bio_dgram on windows :)","date":"2012-04-11T12:29:43.405Z","type":"message"}
{"nick":"bnoordhuis","message":"presumably OPENSSL_NO_DGRAM will fix that","date":"2012-04-11T12:31:48.710Z","type":"message"}
{"nick":"felixge__","reason":"Quit: felixge__","date":"2012-04-11T12:32:46.337Z","type":"quit"}
{"nick":"felixge","date":"2012-04-11T12:33:12.491Z","type":"join"}
{"nick":"felixge","reason":"Changing host","date":"2012-04-11T12:33:12.691Z","type":"quit"}
{"nick":"felixge","date":"2012-04-11T12:33:12.691Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: also, we might be able to turn off tty support","date":"2012-04-11T12:40:19.467Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: afaict it does not work on windows","date":"2012-04-11T12:40:26.693Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so no reason to define TERMIOS or something","date":"2012-04-11T12:40:34.797Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i tried that but it's not possible to compile it out","date":"2012-04-11T12:40:37.021Z","type":"message"}
{"nick":"bnoordhuis","message":"which annoys me no end","date":"2012-04-11T12:40:53.617Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: huh, it compiles fine for me even though none of the tty interfaces is supported.","date":"2012-04-11T12:41:00.852Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes. but if you remove ui_openssl.c from the list, it'll fail to link","date":"2012-04-11T12:41:48.142Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, i'm off to pick up mees from the kinderdagverblijf","date":"2012-04-11T12:43:13.906Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: hmm ok so on windows OPENSSL_SYS_MSDOS is also defined...","date":"2012-04-11T12:43:14.104Z","type":"message"}
{"nick":"pfox___","date":"2012-04-11T12:43:58.039Z","type":"join"}
{"nick":"bradleymeck","date":"2012-04-11T12:45:08.507Z","type":"join"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-04-11T13:00:52.112Z","type":"quit"}
{"nick":"saghul","message":"bnoordhuis I'll go to fix some stuff to a datacenter on friday, no idea of the return time :-S","date":"2012-04-11T13:01:22.710Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: btw - your openssl branch fails many tests","date":"2012-04-11T13:06:31.629Z","type":"message"}
{"nick":"piscisaureus","message":"most of them seem to be unrelated to openssl btw","date":"2012-04-11T13:06:40.470Z","type":"message"}
{"nick":"piscisaureus","message":"but you might want to rebase it","date":"2012-04-11T13:06:45.306Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: it's the libuv upgrade from last night","date":"2012-04-11T13:14:21.308Z","type":"message"}
{"nick":"bnoordhuis","message":"saghul: oh, too bad","date":"2012-04-11T13:14:32.191Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: oh? that's broken then.","date":"2012-04-11T13:14:37.792Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2012-04-11T13:14:39.557Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i think it's mostly refcount errors","date":"2012-04-11T13:15:10.098Z","type":"message"}
{"nick":"bnoordhuis","message":"at least, the couple of tests i checked were refcount < 0 errors","date":"2012-04-11T13:15:31.572Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: did you hack up the windows refcounting?","date":"2012-04-11T13:15:32.639Z","type":"message"}
{"nick":"bnoordhuis","message":"no","date":"2012-04-11T13:15:35.732Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so why do I see so many crashes on windows then? :-/","date":"2012-04-11T13:15:49.500Z","type":"message"}
{"nick":"piscisaureus","message":"will investigate","date":"2012-04-11T13:16:22.335Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: `git rebase -i` away the libuv commit, then run the tests again","date":"2012-04-11T13:16:29.296Z","type":"message"}
{"nick":"piscisaureus","message":"k","date":"2012-04-11T13:16:38.415Z","type":"message"}
{"nick":"bnoordhuis","message":"(rebuild node first, of course)","date":"2012-04-11T13:16:39.581Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: thanks for explaining it to me :-).","date":"2012-04-11T13:17:18.403Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: my pleasure :)","date":"2012-04-11T13:17:27.149Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: now can you explain to me these weird codez in the .c files?","date":"2012-04-11T13:17:39.336Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: in openssl or libuv?","date":"2012-04-11T13:17:56.022Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis:","date":"2012-04-11T13:18:01.987Z","type":"message"}
{"nick":"piscisaureus","message":"for (i = 0; i < 4; i++)","date":"2012-04-11T13:18:13.083Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: what is that supposed to do?","date":"2012-04-11T13:18:21.590Z","type":"message"}
{"nick":"bnoordhuis","message":"haha, yeah right","date":"2012-04-11T13:18:28.543Z","type":"message"}
{"nick":"saghul","message":"bnoordhuis next time! :-)","date":"2012-04-11T13:20:56.634Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the ui stuff seems impossible to hack out","date":"2012-04-11T13:23:53.881Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: or ... not impossible, but it would be invasive","date":"2012-04-11T13:24:03.055Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes, it needs a patch. i may write one","date":"2012-04-11T13:24:03.802Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so, do it anyway","date":"2012-04-11T13:24:08.210Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I can do it (actually I have mostly done it)","date":"2012-04-11T13:24:22.452Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: sure. make sure to forward it upstream :)","date":"2012-04-11T13:24:33.858Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: hide it behind an #ifdef I suppose?","date":"2012-04-11T13:24:46.297Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't want to float too many patches on top of openssl though","date":"2012-04-11T13:24:57.622Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: the convention in openssl is #ifndef OPENSSL_NO_XXX","date":"2012-04-11T13:25:14.685Z","type":"message"}
{"nick":"piscisaureus","message":"OPENSSL_NO_UI","date":"2012-04-11T13:25:22.702Z","type":"message"}
{"nick":"piscisaureus","message":"\\:-)","date":"2012-04-11T13:25:24.279Z","type":"message"}
{"nick":"bnoordhuis","message":"yes","date":"2012-04-11T13:25:24.498Z","type":"message"}
{"nick":"piscisaureus","message":"openssl is such a mess :-(","date":"2012-04-11T13:27:28.820Z","type":"message"}
{"nick":"piscisaureus","message":"the ui stuff is splattered all over the place","date":"2012-04-11T13:27:55.076Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: how receptive are the openssl guys to patches?","date":"2012-04-11T13:28:22.625Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i don't know. i never sent in patches","date":"2012-04-11T13:28:35.078Z","type":"message"}
{"nick":"bnoordhuis","message":"but seeing what a mess openssl is, i'd say they're pretty receptive :)","date":"2012-04-11T13:28:46.885Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so why did you upgrade to 1.0.0f and not 1.0.0h or 1.1.0 ??","date":"2012-04-11T13:30:12.681Z","type":"message"}
{"nick":"piscisaureus","message":"er, 1.0.1","date":"2012-04-11T13:30:20.434Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i stole it from chromium","date":"2012-04-11T13:30:39.751Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, https://github.com/bnoordhuis/node/commit/01bf2d4 <- compiles on windows now","date":"2012-04-11T13:30:46.122Z","type":"message"}
{"nick":"bnoordhuis","message":"without patching any openssl files, that is","date":"2012-04-11T13:30:55.831Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yeah, winsock.h won't be #include'd if you compile without socket support","date":"2012-04-11T13:31:43.245Z","type":"message"}
{"nick":"piscisaureus","message":"so all the fuckups are disabled","date":"2012-04-11T13:31:49.947Z","type":"message"}
{"nick":"bnoordhuis","message":"yay!","date":"2012-04-11T13:31:53.985Z","type":"message"}
{"nick":"piscisaureus","message":"why are camellia and mdc2 off?","date":"2012-04-11T13:32:23.328Z","type":"message"}
{"nick":"trondn","message":"hmm.. which platforms are tested before a release?? I've tried the v0.6 on debian and macosx and both fails running make test?","date":"2012-04-11T13:32:37.653Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: because they're patented :/","date":"2012-04-11T13:33:00.416Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: there are a couple of tests that always fail on unices","date":"2012-04-11T13:33:26.952Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: rc5, idea are not?","date":"2012-04-11T13:33:33.469Z","type":"message"}
{"nick":"bnoordhuis","message":"those too","date":"2012-04-11T13:33:53.336Z","type":"message"}
{"nick":"trondn","message":"bnoordhuis: oh.. why doesn't it just skip them tests if they're not applicable??? I'm trying to figure out if I can have confidence in my build or not ;)","date":"2012-04-11T13:34:11.818Z","type":"message"}
{"nick":"trondn","message":"the fact that I've never been able to run make test makes me a bit scared if I can build stuff on top of it..","date":"2012-04-11T13:34:32.658Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: because they're applicable but impossible to fix :)","date":"2012-04-11T13:34:33.026Z","type":"message"}
{"nick":"bnoordhuis","message":"for example, one test fails because there is no good cross-platform approach to file locking on unices","date":"2012-04-11T13:35:10.881Z","type":"message"}
{"nick":"trondn","message":"where can I find out what I should expect to work or not?","date":"2012-04-11T13:35:12.718Z","type":"message"}
{"nick":"bnoordhuis","message":"here :)","date":"2012-04-11T13:35:18.274Z","type":"message"}
{"nick":"trondn","message":"ok so which tests should I expect to fail on the following platforms: macosx, linux and solaris? that's the 3 platforms I'm currently redesigning a program to use libuv for..","date":"2012-04-11T13:36:43.681Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: which tests are failing for you?","date":"2012-04-11T13:37:42.428Z","type":"message"}
{"nick":"trondn","message":"debian linux: http://pastebin.com/HUa5fmYj","date":"2012-04-11T13:42:10.980Z","type":"message"}
{"nick":"trondn","message":"macosx http://pastebin.com/2Q8ktTHj","date":"2012-04-11T13:42:50.454Z","type":"message"}
{"nick":"piscisaureus","message":"trondn: pipe_bind_addrinuse is probably not fixable on unix","date":"2012-04-11T13:44:59.797Z","type":"message"}
{"nick":"piscisaureus","message":"trondn: the other tests catch very obscure edge cases that you are very unlikely to encounter :-)","date":"2012-04-11T13:45:22.436Z","type":"message"}
{"nick":"piscisaureus","message":"trondn: but they should be fixed, by bnoordhuis :-)","date":"2012-04-11T13:45:45.318Z","type":"message"}
{"nick":"piscisaureus","message":"I am unsure about process_ref btw","date":"2012-04-11T13:46:24.338Z","type":"message"}
{"nick":"trondn","message":"it would be really nice if the test text could print out a note about such thingsâ€¦ given that it's more than a page with \"failing\" tests it makes me curious if I can use it or not...","date":"2012-04-11T13:46:29.533Z","type":"message"}
{"nick":"`3rdEden","date":"2012-04-11T13:46:48.281Z","type":"join"}
{"nick":"bnoordhuis","message":"trondn: is that master or v0.6?","date":"2012-04-11T13:58:37.745Z","type":"message"}
{"nick":"bnoordhuis","message":"the ref tests are expected to fail in master right now","date":"2012-04-11T13:58:47.395Z","type":"message"}
{"nick":"trondn","message":"bnoordhuis: v06","date":"2012-04-11T13:59:18.509Z","type":"message"}
{"nick":"trondn","message":"I'm going to vive it a shot in a prototype and see if it works for me :)","date":"2012-04-11T13:59:46.723Z","type":"message"}
{"nick":"pfox___","reason":"Remote host closed the connection","date":"2012-04-11T13:59:53.473Z","type":"quit"}
{"nick":"bnoordhuis","message":"hmm, seems someone backported those ref tests to v0.6","date":"2012-04-11T13:59:58.336Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: ignore them, they shouldn't really be there","date":"2012-04-11T14:00:25.004Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: you still working on that openssl patch? if not, i'm going to merge the upgrade into master","date":"2012-04-11T14:01:53.591Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I am working on it","date":"2012-04-11T14:02:21.926Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the v0.6 ref tests that fail are genuine failures","date":"2012-04-11T14:02:30.737Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I discovered them and fixed them in uv-win","date":"2012-04-11T14:02:40.615Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: those are not backported tests","date":"2012-04-11T14:02:49.674Z","type":"message"}
{"nick":"bnoordhuis","message":"oh. no one ever tells me anything :(","date":"2012-04-11T14:02:53.373Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I am pretty sure I did :-)","date":"2012-04-11T14:03:04.173Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T14:03:05.839Z","type":"quit"}
{"nick":"bnoordhuis","message":"but was i sober?","date":"2012-04-11T14:03:23.853Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: are you ever?","date":"2012-04-11T14:03:37.240Z","type":"message"}
{"nick":"bnoordhuis","message":"certainly","date":"2012-04-11T14:04:27.910Z","type":"message"}
{"nick":"bnoordhuis","message":"31 august 2006","date":"2012-04-11T14:04:36.174Z","type":"message"}
{"nick":"piscisaureus","message":"ah that was a remarkable day","date":"2012-04-11T14:04:48.280Z","type":"message"}
{"nick":"bnoordhuis","message":"the day i ran out","date":"2012-04-11T14:04:51.748Z","type":"message"}
{"nick":"bnoordhuis","message":"never forget!","date":"2012-04-11T14:04:54.652Z","type":"message"}
{"nick":"bnoordhuis","message":"that reminds me","date":"2012-04-11T14:05:10.626Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki[zzz]: you still coming to appsterdam?","date":"2012-04-11T14:05:23.612Z","type":"message"}
{"nick":"piscisaureus","message":"trondn: you probably want to be coding against master","date":"2012-04-11T14:05:55.748Z","type":"message"}
{"nick":"piscisaureus","message":"btw","date":"2012-04-11T14:05:57.677Z","type":"message"}
{"nick":"piscisaureus","message":"trondn: there are some api changes coming but nothing that will make your life (more) miserable","date":"2012-04-11T14:06:27.197Z","type":"message"}
{"nick":"trondn","message":"piscisaureus: ok :)","date":"2012-04-11T14:06:45.003Z","type":"message"}
{"nick":"pfox___","date":"2012-04-11T14:07:59.569Z","type":"join"}
{"nick":"`3rdEden","reason":"Quit: Leaving...","date":"2012-04-11T14:09:06.471Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T14:09:16.881Z","type":"join"}
{"nick":"mmalecki[zzz]","new_nick":"mmalecki","date":"2012-04-11T14:20:32.636Z","type":"nick"}
{"nick":"bradleymeck","date":"2012-04-11T14:20:33.717Z","type":"join"}
{"nick":"mmalecki","message":"bnoordhuis: amsterdam, yeah","date":"2012-04-11T14:20:39.491Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: good. start practicing already","date":"2012-04-11T14:21:00.958Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: even tho I might get kicked out of my place for doing this. whatever :)","date":"2012-04-11T14:21:01.157Z","type":"message"}
{"nick":"mmalecki","message":"practicing what?","date":"2012-04-11T14:21:09.626Z","type":"message"}
{"nick":"bnoordhuis","message":"drinking beer","date":"2012-04-11T14:21:13.601Z","type":"message"}
{"nick":"bnoordhuis","message":"you'll need it","date":"2012-04-11T14:21:16.561Z","type":"message"}
{"nick":"mmalecki","message":"hahaha, silly Ben, wants to drink more beer than me","date":"2012-04-11T14:21:42.519Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: you know the stats right?","date":"2012-04-11T14:22:01.166Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I don't think I do","date":"2012-04-11T14:22:12.237Z","type":"message"}
{"nick":"bnoordhuis","message":"only the czechs drink more beer than we do","date":"2012-04-11T14:22:20.021Z","type":"message"}
{"nick":"bradleymeck","reason":"Client Quit","date":"2012-04-11T14:22:31.008Z","type":"quit"}
{"nick":"mmalecki","message":"oh, really? will see!","date":"2012-04-11T14:22:32.782Z","type":"message"}
{"nick":"bnoordhuis","message":"and let me remind you that i lived in the czech republic for a while","date":"2012-04-11T14:22:33.851Z","type":"message"}
{"nick":"mmalecki","message":"oh, I believe we should set up some date","date":"2012-04-11T14:23:25.050Z","type":"message"}
{"nick":"mmalecki","message":"[0] should be arriving now","date":"2012-04-11T14:23:53.979Z","type":"message"}
{"nick":"bnoordhuis","message":"date? sorry maciej, i don't swing that way","date":"2012-04-11T14:24:01.275Z","type":"message"}
{"nick":"mmalecki","message":"lol","date":"2012-04-11T14:24:50.502Z","type":"message"}
{"nick":"trondn","message":"bnoordhuis: where are you located?","date":"2012-04-11T14:25:16.186Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: the netherlands","date":"2012-04-11T14:25:24.623Z","type":"message"}
{"nick":"trondn","message":"ah. ok.. ","date":"2012-04-11T14:25:31.610Z","type":"message"}
{"nick":"trondn","message":"we're not that far behind on drinking up in norway ;)","date":"2012-04-11T14:25:43.037Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: Ok I am going to use another approach. The UI is too mixed up with other code.","date":"2012-04-11T14:25:53.825Z","type":"message"}
{"nick":"trondn","message":"but mostly moonshine ;)","date":"2012-04-11T14:25:57.649Z","type":"message"}
{"nick":"bnoordhuis","message":"it's awfully expensive for you guys though","date":"2012-04-11T14:25:59.490Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, exactly","date":"2012-04-11T14:26:04.429Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so I am just going to add a dummy ui instead","date":"2012-04-11T14:26:09.431Z","type":"message"}
{"nick":"trondn","message":"bnoordhuis: _everything_ is fucking expensive for us...","date":"2012-04-11T14:26:28.056Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: okay. but i would like to merge the upgrade today :)","date":"2012-04-11T14:26:33.351Z","type":"message"}
{"nick":"bnoordhuis","message":"trondn: but you get a lot back for it, like... eh...","date":"2012-04-11T14:26:57.319Z","type":"message"}
{"nick":"trondn","message":"exactly ;)","date":"2012-04-11T14:27:11.629Z","type":"message"}
{"nick":"trondn","message":"well, we can make fun of the swedes I guess..","date":"2012-04-11T14:27:31.862Z","type":"message"}
{"nick":"trondn","message":"thats about it","date":"2012-04-11T14:27:38.316Z","type":"message"}
{"nick":"bnoordhuis","message":"and the finnish","date":"2012-04-11T14:27:48.494Z","type":"message"}
{"nick":"bnoordhuis","message":"then again, everyone does","date":"2012-04-11T14:27:56.750Z","type":"message"}
{"nick":"trondn","message":"Why is it so $%^&* boring to make presentations?","date":"2012-04-11T14:28:45.588Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: btw, when I'm back, I might have to live at a hotel ","date":"2012-04-11T14:29:41.084Z","type":"message"}
{"nick":"bnoordhuis","message":"mmalecki: how so?","date":"2012-04-11T14:31:07.192Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: my parents want to kick me out because I don't care about school anymore :)","date":"2012-04-11T14:32:05.016Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T14:32:05.416Z","type":"quit"}
{"nick":"mmalecki","message":"I'm not even mad","date":"2012-04-11T14:32:15.427Z","type":"message"}
{"nick":"bnoordhuis","message":"i thought you already moved out?","date":"2012-04-11T14:33:14.186Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: no, because it didn't pay off. see, I'm leaving to US soon, so I thought these 3 months wouldn't be that bad. also, some crazy law stuff","date":"2012-04-11T14:33:54.296Z","type":"message"}
{"nick":"bnoordhuis","message":"you're moving to the USA? how/why?","date":"2012-04-11T14:34:57.586Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: magic! also, see your PM :)","date":"2012-04-11T14:36:19.670Z","type":"message"}
{"nick":"bnoordhuis","message":"smartos is full of fail...","date":"2012-04-11T14:46:12.682Z","type":"message"}
{"nick":"bnoordhuis","action":"bears his cross stoically","date":"2012-04-11T14:46:27.765Z","type":"action"}
{"nick":"mmalecki","message":"I kind of like it, actually","date":"2012-04-11T14:46:52.005Z","type":"message"}
{"nick":"mmalecki","message":"except zones stuff and chroots","date":"2012-04-11T14:47:06.066Z","type":"message"}
{"nick":"benvie","message":"f school","date":"2012-04-11T14:47:17.927Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u000242d3533\u000f \u000310\u000f/ (src/unix/udp.c test/test-udp-options.c)\u0002:\u000f ","date":"2012-04-11T14:56:33.787Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f unix: fix udp_options test on OS X and Solaris","date":"2012-04-11T14:56:33.986Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f setsockopt(IP_TTL) will happily let you set a TTL > 255 on OS X, cap it.","date":"2012-04-11T14:56:33.986Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f -1 or 0 is a valid TTL on Linux but not portable, deny it. - http://git.io/jW1QZA","date":"2012-04-11T14:56:33.987Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T14:58:43.844Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#184 (master - 42d3533 : Ben Noordhuis): The build is still failing.","date":"2012-04-11T14:58:44.048Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/3c41597...42d3533","date":"2012-04-11T14:58:44.048Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1066871","date":"2012-04-11T14:58:44.048Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T14:58:44.048Z","type":"part"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-04-11T15:19:31.826Z","type":"quit"}
{"nick":"josephg","reason":"Quit: josephg","date":"2012-04-11T15:22:51.258Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus: i want to remove fs_event_close_in_callback","date":"2012-04-11T15:24:52.526Z","type":"message"}
{"nick":"bnoordhuis","message":"that test creates a watcher, generates a couple of file events, then enters the loop","date":"2012-04-11T15:25:30.376Z","type":"message"}
{"nick":"bnoordhuis","message":"but kqueue doesn't report those events","date":"2012-04-11T15:26:00.627Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: why not?","date":"2012-04-11T15:27:55.985Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I want to keep the test, but you can disable it on mac if you want","date":"2012-04-11T15:28:06.772Z","type":"message"}
{"nick":"dap","date":"2012-04-11T15:30:33.482Z","type":"join"}
{"nick":"trondn","reason":"Quit: Leaving.","date":"2012-04-11T15:31:05.905Z","type":"quit"}
{"nick":"felixge","reason":"Quit: felixge","date":"2012-04-11T15:32:26.412Z","type":"quit"}
{"nick":"bnoordhuis","message":"piscisaureus: why not... you ask difficult questions","date":"2012-04-11T15:32:32.132Z","type":"message"}
{"nick":"bnoordhuis","message":"the short answer is \"because it doesn't\"","date":"2012-04-11T15:32:43.027Z","type":"message"}
{"nick":"perezd","date":"2012-04-11T15:35:26.498Z","type":"join"}
{"nick":"felixge","date":"2012-04-11T15:35:29.148Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: seems like the test catches two bugs, then :-)","date":"2012-04-11T15:37:49.152Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: usleep(5e5) before uv_run doesn't fix it?","date":"2012-04-11T15:38:16.159Z","type":"message"}
{"nick":"elijah-mbp","date":"2012-04-11T15:40:28.780Z","type":"join"}
{"nick":"bradleymeck","date":"2012-04-11T15:40:57.716Z","type":"join"}
{"nick":"mikeal","date":"2012-04-11T15:42:34.997Z","type":"join"}
{"nick":"mikeal","reason":"Ping timeout: 246 seconds","date":"2012-04-11T15:46:53.772Z","type":"quit"}
{"nick":"isaacs","date":"2012-04-11T15:59:55.521Z","type":"join"}
{"nick":"bulatshakirzyano","date":"2012-04-11T16:05:01.748Z","type":"join"}
{"nick":"orlandovftw","date":"2012-04-11T16:09:44.244Z","type":"join"}
{"nick":"pijewski","date":"2012-04-11T16:18:14.148Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: does openssl ever report any error strings or can we also set OPENSSL_NO_ERR ?","date":"2012-04-11T16:20:11.358Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://gist.github.com/2360332","date":"2012-04-11T16:24:15.012Z","type":"message"}
{"nick":"trondn","date":"2012-04-11T16:31:18.933Z","type":"join"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-04-11T16:31:59.781Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus, bnoordhuis: any idea on this? https://github.com/joyent/node/commit/0db4dc0024eaa538bf4913d6bf256a18126de2ba#commitcomment-1196660","date":"2012-04-11T16:43:07.145Z","type":"message"}
{"nick":"isaacs","message":"i can bisect through the libuv commits if necessary, it's just a bit tedious.  if you have a clue that would help, please share.","date":"2012-04-11T16:43:50.624Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I have no clue, but I am also seeing random crashes on windows after the last libuv update","date":"2012-04-11T16:45:04.598Z","type":"message"}
{"nick":"isaacs","message":"seems like it was good on ab8c3b8","date":"2012-04-11T16:46:56.698Z","type":"message"}
{"nick":"isaacs","message":"(the last libuv update before this one)","date":"2012-04-11T16:47:02.607Z","type":"message"}
{"nick":"isaacs","message":"i'll bisect","date":"2012-04-11T16:47:04.188Z","type":"message"}
{"nick":"isaacs","message":"is there a way to just clean uv and build a new node on top of it, without having to do distclean?","date":"2012-04-11T17:00:17.495Z","type":"message"}
{"nick":"isaacs","message":"rebuilding v8 all the time is awful","date":"2012-04-11T17:00:23.206Z","type":"message"}
{"nick":"tjfontaine","message":"that's a gyp question, but you could probably help yourself some using ccache","date":"2012-04-11T17:00:53.609Z","type":"message"}
{"nick":"mikeal","date":"2012-04-11T17:00:56.793Z","type":"join"}
{"nick":"mikeal","reason":"Client Quit","date":"2012-04-11T17:03:38.135Z","type":"quit"}
{"nick":"dap","reason":"Quit: Leaving.","date":"2012-04-11T17:04:30.499Z","type":"quit"}
{"nick":"dap","date":"2012-04-11T17:05:17.532Z","type":"join"}
{"nick":"dap","reason":"Client Quit","date":"2012-04-11T17:05:35.203Z","type":"quit"}
{"nick":"dap","date":"2012-04-11T17:06:06.654Z","type":"join"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-04-11T17:07:21.002Z","type":"quit"}
{"nick":"stephank","date":"2012-04-11T17:09:09.806Z","type":"join"}
{"nick":"isaacs","message":"ed395e0619ab50d86c960e839525a0a5e8259b66 is the first bad commit","date":"2012-04-11T17:09:22.155Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, piscisaureus ^","date":"2012-04-11T17:09:25.497Z","type":"message"}
{"nick":"mikeal","date":"2012-04-11T17:09:51.676Z","type":"join"}
{"nick":"isaacs","message":"at least, on os x.  if you're seeing random crashes on win32, then that's a bit odd, since this only appears to touch unix","date":"2012-04-11T17:11:53.869Z","type":"message"}
{"nick":"TooTallNate","date":"2012-04-11T17:13:52.683Z","type":"join"}
{"nick":"piscisaureus","message":"isaacs: I think git be","date":"2012-04-11T17:15:44.061Z","type":"message"}
{"nick":"piscisaureus","message":"er","date":"2012-04-11T17:15:46.010Z","type":"message"}
{"nick":"piscisaureus","message":"git bisect has an option to check out only a particular folder","date":"2012-04-11T17:15:56.981Z","type":"message"}
{"nick":"piscisaureus","message":"and there should be no need to do a distclean, just git clean -fdX deps/uv","date":"2012-04-11T17:16:15.157Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: when i just remove out/**/*uv* it doesn't rebuild those things","date":"2012-04-11T17:18:32.418Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: it just tries to rebuild node and fails","date":"2012-04-11T17:18:41.723Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: and i'm testing by replacing the uv in node-master","date":"2012-04-11T17:19:01.123Z","type":"message"}
{"nick":"piscisaureus","message":"ircretary: tell bnoordhuis \u000301https://gist.github.com/2360332\u0003\u000301","date":"2012-04-11T17:25:57.506Z","type":"message"}
{"nick":"ircretary","message":"piscisaureus: I'll be sure to tell bnoordhuis","date":"2012-04-11T17:25:57.708Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I will bisect the windows issues myself","date":"2012-04-11T17:26:11.091Z","type":"message"}
{"nick":"orlandovftw","reason":"Ping timeout: 246 seconds","date":"2012-04-11T17:32:35.848Z","type":"quit"}
{"nick":"bradleymeck","reason":"Quit: bradleymeck","date":"2012-04-11T17:33:12.212Z","type":"quit"}
{"nick":"xaq","date":"2012-04-11T17:35:01.760Z","type":"join"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T17:48:25.401Z","type":"quit"}
{"nick":"toothr","reason":"Ping timeout: 240 seconds","date":"2012-04-11T17:53:10.002Z","type":"quit"}
{"nick":"mraleph","date":"2012-04-11T17:54:02.480Z","type":"join"}
{"nick":"mikeal","date":"2012-04-11T17:54:23.966Z","type":"join"}
{"nick":"mraleph","message":"piscisaureus: zomg y u spread links to highly questionable patches on twitter :-(","date":"2012-04-11T18:02:02.706Z","type":"message"}
{"nick":"orlandovftw","date":"2012-04-11T18:07:22.853Z","type":"join"}
{"nick":"piscisaureus","message":"mraleph: it looked reasonable to me. what's wrong with it?","date":"2012-04-11T18:08:02.157Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus: V8_MAX_SEMISPACE_SIZE=536870912","date":"2012-04-11T18:08:55.986Z","type":"message"}
{"nick":"mraleph","message":"this is the wrongest part.","date":"2012-04-11T18:08:58.104Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: so what should that be?","date":"2012-04-11T18:09:08.458Z","type":"message"}
{"nick":"mraleph","message":"nothing","date":"2012-04-11T18:09:12.787Z","type":"message"}
{"nick":"mraleph","message":"it should be left as it is","date":"2012-04-11T18:09:34.997Z","type":"message"}
{"nick":"mraleph","message":"giving 500mb to semispace is a very strange choince","date":"2012-04-11T18:09:44.036Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: well, tweet that.","date":"2012-04-11T18:09:47.349Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: I will retweet it","date":"2012-04-11T18:09:53.365Z","type":"message"}
{"nick":"piscisaureus","message":":-)","date":"2012-04-11T18:09:54.768Z","type":"message"}
{"nick":"piscisaureus","message":"damage control mode","date":"2012-04-11T18:10:01.669Z","type":"message"}
{"nick":"mraleph","message":"we are on it in the comments","date":"2012-04-11T18:10:04.380Z","type":"message"}
{"nick":"piscisaureus","message":"oh yeah if the article gets updated then that would be even better","date":"2012-04-11T18:10:22.671Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T18:12:32.873Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T18:14:52.984Z","type":"join"}
{"nick":"TooTallNate","message":"does anybody have any objections to either of these tweaks?","date":"2012-04-11T18:18:05.688Z","type":"message"}
{"nick":"TooTallNate","message":"https://github.com/TooTallNate/node/compare/configure-tweak","date":"2012-04-11T18:18:06.206Z","type":"message"}
{"nick":"mikeal","reason":"Client Quit","date":"2012-04-11T18:19:07.883Z","type":"quit"}
{"nick":"mikeal","date":"2012-04-11T18:20:10.621Z","type":"join"}
{"nick":"TooTallNate","message":"isaacs: piscisaureus: bnoordhuis: ^","date":"2012-04-11T18:20:20.328Z","type":"message"}
{"nick":"tjfontaine","message":"the first is to support 2.5?","date":"2012-04-11T18:21:19.818Z","type":"message"}
{"nick":"tjfontaine","message":"ah yes I see the message","date":"2012-04-11T18:21:27.051Z","type":"message"}
{"nick":"tjfontaine","message":"ok","date":"2012-04-11T18:21:27.790Z","type":"message"}
{"nick":"tjfontaine","message":"the first one has an awesome sha1","date":"2012-04-11T18:21:39.841Z","type":"message"}
{"nick":"isaacs","message":"TooTallNate: lgtm","date":"2012-04-11T18:22:57.581Z","type":"message"}
{"nick":"isaacs","message":"supporting python 2.5 is not a goal, though","date":"2012-04-11T18:23:07.052Z","type":"message"}
{"nick":"isaacs","message":"if it's easy, sure.","date":"2012-04-11T18:23:10.828Z","type":"message"}
{"nick":"TooTallNate","message":"isaacs: ok understood, it was easy in this case. i think gyp has some problems of it own though :D","date":"2012-04-11T18:23:42.760Z","type":"message"}
{"nick":"isaacs","message":"yeah","date":"2012-04-11T18:23:47.695Z","type":"message"}
{"nick":"isaacs","message":"python 2.5 will crash in many other places, i believe","date":"2012-04-11T18:23:57.387Z","type":"message"}
{"nick":"dshaw_","date":"2012-04-11T18:24:03.927Z","type":"join"}
{"nick":"isaacs","message":"iirc scons and waf are boht either broken or weird with it","date":"2012-04-11T18:24:11.209Z","type":"message"}
{"nick":"TooTallNate","message":"gyp actually seems to work fine, i just have to tweak the ./gyp-mac-tool file that gets generated to use \"0666\" instead of \"0o666\"","date":"2012-04-11T18:24:36.478Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Nathan Rajlich\u000f \u000307master\u000f * r\u0002fdeeabb\u000f \u000310\u000f/ configure \u0002:\u000f configure: don't use \"with\" for Python 2.5 and older - http://git.io/Sr615Q","date":"2012-04-11T18:25:04.880Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Nathan Rajlich\u000f \u000307master\u000f * r\u00029b7a6c5\u000f \u000310\u000f/ configure \u0002:\u000f configure: output a newline at the end of config.gypi - http://git.io/J-5Fow","date":"2012-04-11T18:25:05.278Z","type":"message"}
{"nick":"piscisaureus","message":"TooTallNate: will look","date":"2012-04-11T18:29:00.065Z","type":"message"}
{"nick":"avalanche123","reason":"Ping timeout: 276 seconds","date":"2012-04-11T18:29:11.901Z","type":"quit"}
{"nick":"piscisaureus","message":"bnoordhuis: the slab allocator seems broken on windows","date":"2012-04-11T18:29:15.433Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://gist.github.com/2361188","date":"2012-04-11T18:30:01.783Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: thoughts?","date":"2012-04-11T18:30:05.505Z","type":"message"}
{"nick":"avalanche123","date":"2012-04-11T18:30:57.762Z","type":"join"}
{"nick":"travis-ci","date":"2012-04-11T18:40:08.760Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#713 (master - 9b7a6c5 : Nathan Rajlich): The build is still failing.","date":"2012-04-11T18:40:08.960Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/e066074...9b7a6c5","date":"2012-04-11T18:40:08.960Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1068333","date":"2012-04-11T18:40:08.961Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T18:40:08.961Z","type":"part"}
{"nick":"TooTallNate","message":"lol wtf","date":"2012-04-11T18:40:53.331Z","type":"message"}
{"nick":"TooTallNate","message":"88 failures","date":"2012-04-11T18:40:55.465Z","type":"message"}
{"nick":"piscisaureus","message":"Yeah the latest uv upgrade fucked it up sincerely","date":"2012-04-11T18:41:49.233Z","type":"message"}
{"nick":"bradleymeck","date":"2012-04-11T18:53:16.670Z","type":"join"}
{"nick":"txdv_","message":"damn","date":"2012-04-11T18:56:05.923Z","type":"message"}
{"nick":"txdv_","message":"and I wanted to fetch master today","date":"2012-04-11T18:56:10.089Z","type":"message"}
{"nick":"txdv_","message":"you make me cry","date":"2012-04-11T18:56:13.188Z","type":"message"}
{"nick":"isaacs","message":"txdv_: you can just temporarily `git revert ec521e5` on your local checkout","date":"2012-04-11T19:01:20.016Z","type":"message"}
{"nick":"creationix","action":"makes note to not pull in libuv changes in luv* projects today","date":"2012-04-11T19:02:33.851Z","type":"action"}
{"nick":"wankdanker","message":"is there any documentation on the libeio which is included with node 0.7.7? eio_custom has an additional parameter `eio_channel *channel` which breaks my module.","date":"2012-04-11T19:02:49.525Z","type":"message"}
{"nick":"TooTallNate","message":"wankdanker: you should be using uv_queue_work() instead","date":"2012-04-11T19:03:12.358Z","type":"message"}
{"nick":"creationix","message":"wankdanker, I think eio_custom is deprecated in libuv...","date":"2012-04-11T19:03:31.525Z","type":"message"}
{"nick":"creationix","message":"yeah what TooTallNate said","date":"2012-04-11T19:03:34.758Z","type":"message"}
{"nick":"wankdanker","message":"TooTallNate:  eeek. is that backwards compatible with 0.6?","date":"2012-04-11T19:03:41.006Z","type":"message"}
{"nick":"TooTallNate","message":"wankdanker: it's part of libuv","date":"2012-04-11T19:03:51.608Z","type":"message"}
{"nick":"TooTallNate","message":"wankdanker: so yes","date":"2012-04-11T19:03:54.618Z","type":"message"}
{"nick":"creationix","message":"it was added sometime on 0.5.x right?","date":"2012-04-11T19:04:08.795Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I'd say, just revert the commit in libuv and upgrade again.","date":"2012-04-11T19:04:14.431Z","type":"message"}
{"nick":"TooTallNate","message":"wankdanker: libuv calls eio_custom() on unix platforms, and does the proper Windows equivalent there","date":"2012-04-11T19:04:27.692Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I am trying to get the slab allocator fixed but if I cannot get it done the it is also going out","date":"2012-04-11T19:04:34.141Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: ok.","date":"2012-04-11T19:04:39.813Z","type":"message"}
{"nick":"dshaw_","reason":"Quit: Leaving.","date":"2012-04-11T19:04:45.728Z","type":"quit"}
{"nick":"wankdanker","message":"TooTallNate creationix: cool, thanks I'll get on that then.","date":"2012-04-11T19:04:51.578Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: want me to push to libuv/master as well?","date":"2012-04-11T19:04:53.071Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: btw - send bnoordhuis an email if you do :-)","date":"2012-04-11T19:04:54.595Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: well I am mostly concerned about node - the current state of brokenness is not acceptable, not even in master","date":"2012-04-11T19:05:18.229Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: yeah, going to.  he'd said something about having to get up early today, i assume he's got some business he's attending to.","date":"2012-04-11T19:05:28.104Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I don't know","date":"2012-04-11T19:05:40.080Z","type":"message"}
{"nick":"isaacs","message":"yep.  this needs to be fixed now-ish.","date":"2012-04-11T19:05:47.194Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: testing in master with the libuv reversion","date":"2012-04-11T19:09:11.178Z","type":"message"}
{"nick":"dylukes_","date":"2012-04-11T19:12:55.768Z","type":"join"}
{"nick":"dylukes_","new_nick":"dylukes","date":"2012-04-11T19:13:34.277Z","type":"nick"}
{"nick":"txdv_","reason":"Ping timeout: 245 seconds","date":"2012-04-11T19:13:54.591Z","type":"quit"}
{"nick":"`3rdEden","date":"2012-04-11T19:14:30.314Z","type":"join"}
{"nick":"isaacs","message":"piscisaureus: hm.  this doesn't revert cleanly.","date":"2012-04-11T19:18:10.868Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: you mean, in node?","date":"2012-04-11T19:18:29.208Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: no, i mean in libuv.","date":"2012-04-11T19:18:37.048Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i can revert the libuv upgrade easily enough","date":"2012-04-11T19:18:49.957Z","type":"message"}
{"nick":"xaq","reason":"Remote host closed the connection","date":"2012-04-11T19:18:51.269Z","type":"quit"}
{"nick":"piscisaureus","message":"isaacs: ok, I can take a look if you want","date":"2012-04-11T19:18:52.098Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: the windows bustage is easy enough to fix","date":"2012-04-11T19:19:01.468Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: but i'd rather not, if we can fix it a bit more surgically","date":"2012-04-11T19:19:10.871Z","type":"message"}
{"nick":"`3rdEden","reason":"Quit: Zzzz","date":"2012-04-11T19:20:55.005Z","type":"quit"}
{"nick":"isaacs","message":"piscisaureus: oh, i think i see what happened.","date":"2012-04-11T19:21:29.983Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: unix/core.c had something added in v0.6, and something else added in master, so the reversion couldn't figure it out","date":"2012-04-11T19:21:51.987Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: trying with a \"keep both\" approach now","date":"2012-04-11T19:21:59.553Z","type":"message"}
{"nick":"isaacs","message":"nope","date":"2012-04-11T19:22:06.069Z","type":"message"}
{"nick":"isaacs","message":"../deps/uv/src/unix/core.c:190: error: â€˜uv_loop_tâ€™ has no member named â€˜endgame_handlesâ€™","date":"2012-04-11T19:22:08.771Z","type":"message"}
{"nick":"isaacs","message":"../deps/uv/src/unix/core.c:191: error: â€˜uv_loop_tâ€™ has no member named â€˜endgame_handlesâ€™","date":"2012-04-11T19:22:08.982Z","type":"message"}
{"nick":"isaacs","message":"wait a minute, that makes no sense...","date":"2012-04-11T19:22:20.462Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: ah that's the work ben has done for libuv-linux","date":"2012-04-11T19:22:28.429Z","type":"message"}
{"nick":"isaacs","message":"right","date":"2012-04-11T19:22:44.896Z","type":"message"}
{"nick":"isaacs","message":"i'm assuming that this works in linux.","date":"2012-04-11T19:22:56.741Z","type":"message"}
{"nick":"isaacs","message":"but it's super busted in os x","date":"2012-04-11T19:22:59.765Z","type":"message"}
{"nick":"isaacs","message":"yeah, ok, looks like ed395e0 was the first bad commit, but not the last one :)","date":"2012-04-11T19:24:17.973Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: do you feel like poking around in there, or should i just roll back libuv?","date":"2012-04-11T19:27:49.038Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: I will poke in there","date":"2012-04-11T19:28:02.095Z","type":"message"}
{"nick":"isaacs","message":"k.  i'm going to run an errand and get some lunch.  i'll be back in a bit.  feel free to revert node@0db4dc0 if you can't figure it out easily.  that's why we upgrade our deps atomically :)","date":"2012-04-11T19:29:23.136Z","type":"message"}
{"nick":"toothr","date":"2012-04-11T19:31:40.580Z","type":"join"}
{"nick":"dshaw_","date":"2012-04-11T19:38:05.274Z","type":"join"}
{"nick":"piscisaureus","message":"igorzi: are you doing anything node related atm?","date":"2012-04-11T19:40:47.835Z","type":"message"}
{"nick":"piscisaureus","message":"saghul: the test is passing for me","date":"2012-04-11T19:42:59.096Z","type":"message"}
{"nick":"piscisaureus","message":"saghul: could be a mingw issue. could be your windows version. What windows are you using?","date":"2012-04-11T19:43:19.242Z","type":"message"}
{"nick":"saghul","message":"Windows 7 (32 bit)","date":"2012-04-11T19:43:28.772Z","type":"message"}
{"nick":"saghul","message":"using minnow, with gcc 4.6.2","date":"2012-04-11T19:43:58.343Z","type":"message"}
{"nick":"saghul","message":"*mingw","date":"2012-04-11T19:44:12.667Z","type":"message"}
{"nick":"saghul","message":"i'll test msvc in a while","date":"2012-04-11T19:44:46.842Z","type":"message"}
{"nick":"piscisaureus","message":"saghul: can you get a backtrace out of gdb?","date":"2012-04-11T19:44:50.195Z","type":"message"}
{"nick":"dylukes","reason":"Quit: Computer has gone to sleep.","date":"2012-04-11T19:47:12.838Z","type":"quit"}
{"nick":"bnoordhuis","message":"reverting the libuv upgrade is not a real solution, of course","date":"2012-04-11T19:51:54.172Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: re endgame_handles: i wager you have stale files somewhere","date":"2012-04-11T19:52:58.243Z","type":"message"}
{"nick":"dylukes","date":"2012-04-11T19:53:43.777Z","type":"join"}
{"nick":"dylukes","reason":"Client Quit","date":"2012-04-11T19:53:48.538Z","type":"quit"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307reviewme\u000f * r\u000239cc2a4\u000f \u000310\u000f/ (src/slab_allocator.cc src/stream_wrap.cc)\u0002:\u000f Slab allocator: don't attempt to shrink a non-buffer - http://git.io/YsK6wQ","date":"2012-04-11T19:55:27.453Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ^-- review. Fixes windows","date":"2012-04-11T19:55:38.974Z","type":"message"}
{"nick":"isaacs_mobile","date":"2012-04-11T19:56:52.121Z","type":"join"}
{"nick":"saghul","message":"piscisaureus I have msvc 2008 and it's missing student.h, I'll get the 2010 version and test","date":"2012-04-11T19:58:11.093Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: reviewed","date":"2012-04-11T19:58:23.054Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i would move that buf.base != NULL check out of the nread < 0 branch","date":"2012-04-11T19:59:13.600Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that would get awkward","date":"2012-04-11T20:00:22.615Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: because","date":"2012-04-11T20:00:28.275Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: okay. then change it to -> if (buf.base) slab_allocator.Shrink(wrap->object_, buf.base, 0)","date":"2012-04-11T20:00:59.257Z","type":"message"}
{"nick":"piscisaureus","message":"*either*:","date":"2012-04-11T20:01:54.318Z","type":"message"}
{"nick":"piscisaureus","message":"if (...) {","date":"2012-04-11T20:01:54.519Z","type":"message"}
{"nick":"piscisaureus","message":"  Local<Object> slab = ...","date":"2012-04-11T20:01:54.519Z","type":"message"}
{"nick":"piscisaureus","message":"} // slab out of scope","date":"2012-04-11T20:01:54.519Z","type":"message"}
{"nick":"piscisaureus","message":"*or*:","date":"2012-04-11T20:01:54.846Z","type":"message"}
{"nick":"piscisaureus","message":"Local<Object> slab;","date":"2012-04-11T20:01:55.049Z","type":"message"}
{"nick":"piscisaureus","message":"if (...) {","date":"2012-04-11T20:01:55.917Z","type":"message"}
{"nick":"piscisaureus","message":"  slab = ...","date":"2012-04-11T20:01:56.119Z","type":"message"}
{"nick":"piscisaureus","message":"} // slab could be undefined","date":"2012-04-11T20:01:56.823Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ^","date":"2012-04-11T20:02:08.804Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00023ec84a1\u000f \u000310\u000f/ (src/slab_allocator.cc src/stream_wrap.cc)\u0002:\u000f Slab allocator: don't attempt to shrink a non-buffer - http://git.io/wPRoyQ","date":"2012-04-11T20:03:00.061Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: you'd find out soon enough - it'd crash :)","date":"2012-04-11T20:03:06.929Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: new commit lgtm but Local<Object> slab = slab_allocator.Shrink(wrap->object_, buf.base, nread) fits on one line","date":"2012-04-11T20:04:51.843Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: alright.","date":"2012-04-11T20:05:17.754Z","type":"message"}
{"nick":"bnoordhuis","message":"anyway, doesn't matter","date":"2012-04-11T20:05:19.113Z","type":"message"}
{"nick":"isaacs_mobile","reason":"Remote host closed the connection","date":"2012-04-11T20:07:18.127Z","type":"quit"}
{"nick":"piscisaureus","message":"bnoordhuis: so what about the endgame_handles crashes?","date":"2012-04-11T20:08:26.581Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you said something about stray files but I am surprised that it would cause libuv to abort","date":"2012-04-11T20:08:53.528Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: crash or build failure?","date":"2012-04-11T20:09:29.862Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: crash","date":"2012-04-11T20:09:34.890Z","type":"message"}
{"nick":"bnoordhuis","message":"what isaacs posted is a build failure","date":"2012-04-11T20:09:43.487Z","type":"message"}
{"nick":"bnoordhuis","message":"i mean this: ../deps/uv/src/unix/core.c:191: error: â€˜uv_loop_tâ€™ has no member named â€˜endgame_handlesâ€™","date":"2012-04-11T20:09:55.249Z","type":"message"}
{"nick":"tjfontaine","message":"he was trying to revert inside libuv, I think he was saying it was larger than one commit","date":"2012-04-11T20:10:47.226Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: that's after a revert of one of your patches. The real problem is this: https://gist.github.com/2358108 - \u0003https://github.com/joyent/node/commit/0db4dc0024eaa538bf4913d6bf256a18126de2ba#commitcomment-1196660","date":"2012-04-11T20:11:10.824Z","type":"message"}
{"nick":"piscisaureus","message":"saghul: it's cool that you can try with msvc - but if you can extract anything meaningful\u0003 out of gdb (stack trace?) that's more helpful, since it would actually help us fix the issue :-)","date":"2012-04-11T20:11:11.021Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, that i don't doubt - it's been a while since the last upgrade","date":"2012-04-11T20:11:12.567Z","type":"message"}
{"nick":"bnoordhuis","message":"the upgrade commit was rather massive","date":"2012-04-11T20:11:20.847Z","type":"message"}
{"nick":"dylukes","date":"2012-04-11T20:11:55.702Z","type":"join"}
{"nick":"isaacs","message":"bnoordhuis: yeah, of course, reverting the libuv upgrade is only a stopgap.  we need to fix it properly.","date":"2012-04-11T20:12:20.459Z","type":"message"}
{"nick":"bnoordhuis","message":"it's kind of odd that ed395e0 breaks node but not the tests","date":"2012-04-11T20:12:34.081Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: it's just that \"fix it properly\" is more than reverting one bad commit in libuv out of context","date":"2012-04-11T20:12:43.485Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: and yes, it would be nice if the libuv tests caught this :)","date":"2012-04-11T20:12:52.362Z","type":"message"}
{"nick":"brson","date":"2012-04-11T20:14:37.916Z","type":"join"}
{"nick":"bnoordhuis","message":"isaacs: anyway, no worries, i'll fix it","date":"2012-04-11T20:15:00.261Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: awesome.  if it's going to take a long time (ie, more than a day), please revert the libuv upgrade in the meantime.","date":"2012-04-11T20:15:41.324Z","type":"message"}
{"nick":"isaacs","message":"thanks","date":"2012-04-11T20:15:45.073Z","type":"message"}
{"nick":"isaacs","action":"off to put food in the neighbor's cat.","date":"2012-04-11T20:15:55.165Z","type":"action"}
{"nick":"bnoordhuis","message":"better that than the other way around","date":"2012-04-11T20:16:28.575Z","type":"message"}
{"nick":"bnoordhuis","message":"by which i mean put a cat in the neighbor's food","date":"2012-04-11T20:16:37.042Z","type":"message"}
{"nick":"saghul","message":"piscisaureus gdb says nothing o_O I'll create a 2 line standalone test to see","date":"2012-04-11T20:17:41.603Z","type":"message"}
{"nick":"bnoordhuis","message":"[02:00|% 100|+ 379|-   0]: Done <- who the man?","date":"2012-04-11T20:18:16.306Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: ++","date":"2012-04-11T20:18:53.149Z","type":"message"}
{"nick":"kohai","message":"bnoordhuis has 12 beers","date":"2012-04-11T20:18:53.353Z","type":"message"}
{"nick":"mmalecki","message":"bah, only 12 beers Ben?","date":"2012-04-11T20:19:15.636Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:19:33.263Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#714 (reviewme - 39cc2a4 : Bert Belder): The build is still failing.","date":"2012-04-11T20:19:33.463Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/commit/39cc2a4","date":"2012-04-11T20:19:33.463Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1069092","date":"2012-04-11T20:19:33.463Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:19:33.463Z","type":"part"}
{"nick":"bnoordhuis","message":"mmalecki: i reset the counter hourly","date":"2012-04-11T20:21:10.494Z","type":"message"}
{"nick":"mmalecki","message":"bnoordhuis: I think that counts as alcoholism!","date":"2012-04-11T20:21:58.408Z","type":"message"}
{"nick":"txdv","date":"2012-04-11T20:27:10.253Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: where the commit, then?","date":"2012-04-11T20:30:51.716Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis, I mean: \u000307 \u000301[02:00|% 100|+ 478|- -99]\u0003\u000301 <-- who the man now?","date":"2012-04-11T20:31:29.329Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: i'm trying to fix it properly","date":"2012-04-11T20:31:37.612Z","type":"message"}
{"nick":"bnoordhuis","message":"the easy way is to remove if (activecnt < 0) abort(); from ev.","date":"2012-04-11T20:31:54.510Z","type":"message"}
{"nick":"bnoordhuis","message":"*ev.c","date":"2012-04-11T20:31:55.962Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: wrong!","date":"2012-04-11T20:32:10.131Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: -99 failures?","date":"2012-04-11T20:32:15.046Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: awesome, innit?","date":"2012-04-11T20:32:30.996Z","type":"message"}
{"nick":"isaacs","message":"piscisaureus: i didn't know you could pass `make test` that hard.  i'm impressed.","date":"2012-04-11T20:32:44.574Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:32:49.996Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#715 (master - 3ec84a1 : Bert Belder): The build is still failing.","date":"2012-04-11T20:32:50.201Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/9b7a6c5...3ec84a1","date":"2012-04-11T20:32:50.201Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1069145","date":"2012-04-11T20:32:50.201Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:32:50.201Z","type":"part"}
{"nick":"isaacs","new_nick":"isaacs_away","date":"2012-04-11T20:35:53.410Z","type":"nick"}
{"nick":"igorzi","message":"piscisaureus: hey","date":"2012-04-11T20:39:59.182Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: hey","date":"2012-04-11T20:40:15.126Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: i'm finally looking at why that send tcp connections patch doesn't work for andreasmadsen","date":"2012-04-11T20:40:27.741Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: ah, ok","date":"2012-04-11T20:40:39.397Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: does it for you?","date":"2012-04-11T20:40:42.928Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: nope.. don't know why yet.. just started looking at it","date":"2012-04-11T20:41:04.334Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: ah, ok","date":"2012-04-11T20:41:19.475Z","type":"message"}
{"nick":"c4milo_","date":"2012-04-11T20:47:23.940Z","type":"join"}
{"nick":"c4milo","reason":"Quit: me fui","date":"2012-04-11T20:49:02.210Z","type":"quit"}
{"nick":"c4milo_","new_nick":"c4milo","date":"2012-04-11T20:49:12.934Z","type":"nick"}
{"nick":"saghul","message":"piscisaureus got some gdb trace: https://gist.github.com/2362471","date":"2012-04-11T20:50:28.110Z","type":"message"}
{"nick":"piscisaureus","message":"saghul: aha, thanks, very helpful","date":"2012-04-11T20:51:50.966Z","type":"message"}
{"nick":"saghul","message":"piscisaureus any time :-)","date":"2012-04-11T20:52:28.867Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307reviewme\u000f * r\u00022e5e116\u000f \u000310\u000f/ (test/test-get-memory.c test/test-platform-output.c)\u0002:\u000f ","date":"2012-04-11T20:54:59.396Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f Tests: don't use %zu placeholder in printf statements","date":"2012-04-11T20:54:59.601Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f It's not supported by msvcrt. - http://git.io/sW3qyA","date":"2012-04-11T20:54:59.601Z","type":"message"}
{"nick":"piscisaureus","message":"^-- igorzi bnoordhuis - anyone cares to review?","date":"2012-04-11T20:55:11.538Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: can you verify that this patch makes node's test suite pass? https://gist.github.com/bb78bfa02e5d14471619","date":"2012-04-11T20:55:20.333Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you mean, on unix?","date":"2012-04-11T20:55:40.743Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: no, on windows","date":"2012-04-11T20:55:46.277Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: on windows it already passes","date":"2012-04-11T20:55:52.378Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, good","date":"2012-04-11T20:55:57.808Z","type":"message"}
{"nick":"bnoordhuis","message":"btw, unsigned long long isn't available in c89 mode","date":"2012-04-11T20:56:04.366Z","type":"message"}
{"nick":"piscisaureus","message":"sigh","date":"2012-04-11T20:56:12.031Z","type":"message"}
{"nick":"bnoordhuis","message":"it will probably compile but with warnings","date":"2012-04-11T20:56:24.054Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so what can we use instead","date":"2012-04-11T20:56:33.954Z","type":"message"}
{"nick":"piscisaureus","message":"\"long\" is 32 bit on windows: -/","date":"2012-04-11T20:56:44.949Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: lgtm","date":"2012-04-11T20:56:51.029Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:57:00.260Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#185 (reviewme - 2e5e116 : Bert Belder): The build is still failing.","date":"2012-04-11T20:57:00.463Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/commit/2e5e116","date":"2012-04-11T20:57:00.464Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1069632","date":"2012-04-11T20:57:00.464Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:57:00.464Z","type":"part"}
{"nick":"isaacs_mobile","date":"2012-04-11T20:57:01.003Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus: nothing. it's one of the great unsolved mysteries :/","date":"2012-04-11T20:57:06.697Z","type":"message"}
{"nick":"piscisaureus","message":"OMG","date":"2012-04-11T20:57:21.573Z","type":"message"}
{"nick":"bnoordhuis","message":"land it, i'll clean it up if need be","date":"2012-04-11T20:57:22.783Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok, as long as you don't resort to %zu :-)","date":"2012-04-11T20:57:36.654Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00022e5e116\u000f \u000310\u000f/ (test/test-get-memory.c test/test-platform-output.c)\u0002:\u000f ","date":"2012-04-11T20:57:48.510Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f Tests: don't use %zu placeholder in printf statements","date":"2012-04-11T20:57:48.715Z","type":"message"}
{"nick":"CIA-99","message":"\u0002libuv:\u000f It's not supported by msvcrt. - http://git.io/sW3qyA","date":"2012-04-11T20:57:48.715Z","type":"message"}
{"nick":"isaacs_mobile","reason":"Client Quit","date":"2012-04-11T20:58:01.492Z","type":"quit"}
{"nick":"piscisaureus","message":"bnoordhuis: we can do something terrible like, cast to a double","date":"2012-04-11T20:58:12.530Z","type":"message"}
{"nick":"isaacs_mobile","date":"2012-04-11T20:58:17.955Z","type":"join"}
{"nick":"bnoordhuis","message":"piscisaureus: i would like to keep libuv as float free as possible","date":"2012-04-11T20:58:39.982Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: or","date":"2012-04-11T20:58:57.224Z","type":"message"}
{"nick":"piscisaureus","message":"#define BI_P \"%zu\"","date":"2012-04-11T20:58:57.426Z","type":"message"}
{"nick":"piscisaureus","message":"#define BI_T size_t","date":"2012-04-11T20:58:57.427Z","type":"message"}
{"nick":"piscisaureus","action":"kills a puppy","date":"2012-04-11T20:59:07.454Z","type":"action"}
{"nick":"bnoordhuis","message":"yes, that's how most projects do it","date":"2012-04-11T20:59:07.656Z","type":"message"}
{"nick":"indutny","reason":"Ping timeout: 252 seconds","date":"2012-04-11T20:59:21.049Z","type":"quit"}
{"nick":"travis-ci","date":"2012-04-11T20:59:59.422Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/libuv#186 (master - 2e5e116 : Bert Belder): The build is still failing.","date":"2012-04-11T20:59:59.617Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/libuv/compare/42d3533...2e5e116","date":"2012-04-11T20:59:59.618Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/libuv/builds/1069655","date":"2012-04-11T20:59:59.618Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T20:59:59.618Z","type":"part"}
{"nick":"bnoordhuis","message":"piscisaureus: might be worthwhile to test that patch i just posted","date":"2012-04-11T21:00:33.802Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok, if you want","date":"2012-04-11T21:00:45.163Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm pretty sure it's not a bug in node, not in libuv","date":"2012-04-11T21:00:49.433Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so where is it?","date":"2012-04-11T21:01:03.015Z","type":"message"}
{"nick":"bnoordhuis","message":"err, bug *in* node, *not* in libuv","date":"2012-04-11T21:01:04.033Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: the moon?","date":"2012-04-11T21:01:07.597Z","type":"message"}
{"nick":"piscisaureus","message":"ah","date":"2012-04-11T21:01:09.366Z","type":"message"}
{"nick":"bnoordhuis","message":"test/simple/test-http-get-pipeline-problem.js seems pretty broken on os x...","date":"2012-04-11T21:03:22.762Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ok I am testing it","date":"2012-04-11T21:03:30.850Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, it tries to run ab","date":"2012-04-11T21:04:12.685Z","type":"message"}
{"nick":"bnoordhuis","message":"bad test, no cookie","date":"2012-04-11T21:04:17.360Z","type":"message"}
{"nick":"txdv","message":"have you got macs to test it on?","date":"2012-04-11T21:05:16.579Z","type":"message"}
{"nick":"isaacs_away","new_nick":"isaacs","date":"2012-04-11T21:06:50.759Z","type":"nick"}
{"nick":"isaacs_mobile","reason":"Remote host closed the connection","date":"2012-04-11T21:08:32.330Z","type":"quit"}
{"nick":"bnoordhuis","message":"txdv: yes. why?","date":"2012-04-11T21:10:05.790Z","type":"message"}
{"nick":"txdv","message":"I wonder how many different OSes you are testing on","date":"2012-04-11T21:10:27.260Z","type":"message"}
{"nick":"perezd","reason":"Ping timeout: 246 seconds","date":"2012-04-11T21:11:52.330Z","type":"quit"}
{"nick":"bnoordhuis","message":"linux, solaris, os x, windows, sometimes freebsd","date":"2012-04-11T21:11:53.624Z","type":"message"}
{"nick":"bnoordhuis","message":"still working on the plan9 port","date":"2012-04-11T21:12:07.241Z","type":"message"}
{"nick":"indutny","date":"2012-04-11T21:12:12.061Z","type":"join"}
{"nick":"isaacs","message":"plan9 is planed for version 9","date":"2012-04-11T21:12:26.867Z","type":"message"}
{"nick":"isaacs","message":"along with multics","date":"2012-04-11T21:12:36.825Z","type":"message"}
{"nick":"perezd","date":"2012-04-11T21:12:39.015Z","type":"join"}
{"nick":"txdv","message":"support all the operating systems!","date":"2012-04-11T21:12:55.945Z","type":"message"}
{"nick":"txdv","reason":"Ping timeout: 250 seconds","date":"2012-04-11T21:20:20.246Z","type":"quit"}
{"nick":"perezd_","date":"2012-04-11T21:20:57.216Z","type":"join"}
{"nick":"piscisaureus","message":"bnoordhuis: also on windows","date":"2012-04-11T21:21:02.534Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: btw - most tests pass with the timer reffing patch","date":"2012-04-11T21:21:21.577Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: right, thanks. now the small matter of fixing timer_wrap.cc","date":"2012-04-11T21:22:11.706Z","type":"message"}
{"nick":"perezd","reason":"Ping timeout: 276 seconds","date":"2012-04-11T21:23:23.854Z","type":"quit"}
{"nick":"perezd_","new_nick":"perezd","date":"2012-04-11T21:23:24.101Z","type":"nick"}
{"nick":"bulatshakirzyano","date":"2012-04-11T21:25:27.222Z","type":"join"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-04-11T21:33:09.701Z","type":"quit"}
{"nick":"txdv","date":"2012-04-11T21:36:51.234Z","type":"join"}
{"nick":"dylukes","reason":"Quit: Computer has gone to sleep.","date":"2012-04-11T21:38:24.421Z","type":"quit"}
{"nick":"creationix","message":"piscisaureus, bnoordhuis which one of you is working on the uv_ref refactor?","date":"2012-04-11T21:40:19.291Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix: i am","date":"2012-04-11T21:40:38.349Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: ben","date":"2012-04-11T21:40:42.665Z","type":"message"}
{"nick":"bnoordhuis","message":"if you want it done right, you need to do it yourself","date":"2012-04-11T21:40:57.019Z","type":"message"}
{"nick":"creationix","message":"bnoordhuis, I need an API to know when a uv_handle_* is no longer holding the event loop open","date":"2012-04-11T21:41:15.308Z","type":"message"}
{"nick":"creationix","message":"so I can release any GC reference to it at the VM layer","date":"2012-04-11T21:41:27.145Z","type":"message"}
{"nick":"creationix","message":"and probably another API to know when it does have a pending callback or event","date":"2012-04-11T21:41:43.618Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix: you can keep track of that yourself, can't you?","date":"2012-04-11T21:41:48.324Z","type":"message"}
{"nick":"creationix","message":"I can, but it's complicated","date":"2012-04-11T21:41:57.376Z","type":"message"}
{"nick":"creationix","message":"and since libuv has to do that counting anyway","date":"2012-04-11T21:42:03.554Z","type":"message"}
{"nick":"creationix","message":"why not reuse the logic","date":"2012-04-11T21:42:08.780Z","type":"message"}
{"nick":"bnoordhuis","message":"once the refactor is done, handles will only ref the loop when active","date":"2012-04-11T21:42:14.399Z","type":"message"}
{"nick":"creationix","message":"ok, what makes a handle active?","date":"2012-04-11T21:42:28.945Z","type":"message"}
{"nick":"bnoordhuis","message":"depends on the handle type","date":"2012-04-11T21:42:34.957Z","type":"message"}
{"nick":"bnoordhuis","message":"sockets, when they're reading or writing","date":"2012-04-11T21:42:42.269Z","type":"message"}
{"nick":"bnoordhuis","message":"timers, when they're started","date":"2012-04-11T21:42:50.021Z","type":"message"}
{"nick":"creationix","message":"ok, so then I want a way to register handle_on_active and handle_on_unactive","date":"2012-04-11T21:43:09.872Z","type":"message"}
{"nick":"creationix","message":"or something like that","date":"2012-04-11T21:43:12.341Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't understand why","date":"2012-04-11T21:43:38.486Z","type":"message"}
{"nick":"bnoordhuis","message":"you can check if a handle is active with uv_is_active()","date":"2012-04-11T21:43:46.940Z","type":"message"}
{"nick":"bnoordhuis","message":"if you need something more / different, please explain why :)","date":"2012-04-11T21:44:10.977Z","type":"message"}
{"nick":"creationix","message":"I'","date":"2012-04-11T21:44:14.824Z","type":"message"}
{"nick":"creationix","message":"I'd rather not have to poll the object on every interaction","date":"2012-04-11T21:44:24.673Z","type":"message"}
{"nick":"creationix","message":"s/object/struct/","date":"2012-04-11T21:44:51.381Z","type":"message"}
{"nick":"bnoordhuis","message":"i still don't understand","date":"2012-04-11T21:45:11.469Z","type":"message"}
{"nick":"bnoordhuis","message":"when you call e.g. uv_timer_start(), you *know* that the handle is active","date":"2012-04-11T21:45:28.648Z","type":"message"}
{"nick":"bnoordhuis","message":"and when you call uv_timer_stop(), that it's inactive","date":"2012-04-11T21:45:38.423Z","type":"message"}
{"nick":"creationix","message":"bnoordhuis, yes, but I don't want to have to know all that logic","date":"2012-04-11T21:45:50.535Z","type":"message"}
{"nick":"creationix","message":"as you say, it depends on the type","date":"2012-04-11T21:45:54.459Z","type":"message"}
{"nick":"creationix","message":"what about repeating timers","date":"2012-04-11T21:46:09.968Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, think of it like this","date":"2012-04-11T21:46:10.528Z","type":"message"}
{"nick":"bnoordhuis","message":"when you create the handle, it's inactive","date":"2012-04-11T21:46:17.178Z","type":"message"}
{"nick":"creationix","message":"what if you take a non-repeating timer and make it repeating","date":"2012-04-11T21:46:18.240Z","type":"message"}
{"nick":"bnoordhuis","message":"as soon as it starts doing something, it becomes active","date":"2012-04-11T21:46:24.136Z","type":"message"}
{"nick":"bnoordhuis","message":"until stopped or closed","date":"2012-04-11T21:46:26.720Z","type":"message"}
{"nick":"dylukes","date":"2012-04-11T21:46:51.801Z","type":"join"}
{"nick":"bnoordhuis","message":"that non-repeating timer that you turn into a repeating timer is doing something, hence it's active","date":"2012-04-11T21:47:03.963Z","type":"message"}
{"nick":"creationix","message":"right, but my point is that it's complicated","date":"2012-04-11T21:47:16.025Z","type":"message"}
{"nick":"creationix","message":"and that's just timers","date":"2012-04-11T21:47:18.616Z","type":"message"}
{"nick":"creationix","message":"I'd rather just have a generic on_active and on_not_active","date":"2012-04-11T21:47:28.901Z","type":"message"}
{"nick":"creationix","message":"since libuv has to do something already internally","date":"2012-04-11T21:47:43.870Z","type":"message"}
{"nick":"bnoordhuis","message":"i really don't see the need","date":"2012-04-11T21:47:54.736Z","type":"message"}
{"nick":"creationix","message":"I don't want to duplicate complex logic","date":"2012-04-11T21:48:14.240Z","type":"message"}
{"nick":"bnoordhuis","message":"i also don't think it's complicated :)","date":"2012-04-11T21:48:42.494Z","type":"message"}
{"nick":"creationix","message":"besides being more work, the duplicated logic has to be kept in sync or bugs appear","date":"2012-04-11T21:48:47.803Z","type":"message"}
{"nick":"creationix","message":"is there a performance issue with allowing me to register a C callback?","date":"2012-04-11T21:49:14.534Z","type":"message"}
{"nick":"creationix","message":"memory I guess","date":"2012-04-11T21:49:23.423Z","type":"message"}
{"nick":"creationix","message":"it would mean two more function pointers on the struct","date":"2012-04-11T21:49:34.842Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, but it's not too worrisome","date":"2012-04-11T21:49:54.833Z","type":"message"}
{"nick":"bnoordhuis","message":"it's just that i don't see a pressing need to add something that you can track yourself","date":"2012-04-11T21:50:16.175Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: I don't really understand","date":"2012-04-11T21:50:22.011Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: what is the problem you need to solve?","date":"2012-04-11T21:50:31.492Z","type":"message"}
{"nick":"creationix","message":"I have been tracking it myself, but I'm constantly finding bugs because I assume things wrong about libuv internaly","date":"2012-04-11T21:50:45.294Z","type":"message"}
{"nick":"bnoordhuis","message":"the idea behind the refactor is to make it simpler","date":"2012-04-11T21:51:03.027Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2012-04-11T21:51:08.455Z","type":"message"}
{"nick":"bnoordhuis","message":"because the reference counting scheme is kind of wtf-y now","date":"2012-04-11T21:51:13.875Z","type":"message"}
{"nick":"creationix","message":"I want to leverage this simple and solid logic you're writing for the refactor, not duplicate it","date":"2012-04-11T21:51:36.420Z","type":"message"}
{"nick":"creationix","message":"that way I know it's in sync","date":"2012-04-11T21:51:44.895Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2012-04-11T21:51:48.062Z","type":"quit"}
{"nick":"piscisaureus","message":"creationix: so what is the problem you need to solve?","date":"2012-04-11T21:52:13.219Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: e.g. you need to keep *what* in sync with libuv?","date":"2012-04-11T21:52:24.858Z","type":"message"}
{"nick":"creationix","message":"I have to ref and unref objects from the GC's point of view","date":"2012-04-11T21:52:42.444Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: why?","date":"2012-04-11T21:53:01.168Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: you can't just GC a stopped object away","date":"2012-04-11T21:53:16.565Z","type":"message"}
{"nick":"creationix","message":"ok, so suppose I have a timer object with a callback as a property","date":"2012-04-11T21:53:22.317Z","type":"message"}
{"nick":"piscisaureus","message":"because you would need to uv_close it","date":"2012-04-11T21:53:24.442Z","type":"message"}
{"nick":"creationix","message":"the timer object is actually the uv_timer_t","date":"2012-04-11T21:53:32.367Z","type":"message"}
{"nick":"creationix","message":"it's in the lua vm heap","date":"2012-04-11T21:53:42.326Z","type":"message"}
{"nick":"creationix","message":"it's possible that there is no reference to the object, but the callback is still pending","date":"2012-04-11T21:54:02.878Z","type":"message"}
{"nick":"creationix","message":"if I don't insert an extra gc ref to the object then it will segfault when on_timer happens","date":"2012-04-11T21:54:18.657Z","type":"message"}
{"nick":"creationix","message":"so basically I want to sync strong references in the scripting vm with the active state of the uv handle","date":"2012-04-11T21:54:55.282Z","type":"message"}
{"nick":"creationix","message":"make them strong refs when active and weak refs when inactive","date":"2012-04-11T21:55:12.344Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: so does lua have this concept of weak refs?","date":"2012-04-11T21:55:24.188Z","type":"message"}
{"nick":"creationix","message":"yes","date":"2012-04-11T21:55:33.032Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: or rather, weak ref callbacks","date":"2012-04-11T21:55:36.911Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix: make them strong refs when active and weak refs when inactive <- that won't work","date":"2012-04-11T21:55:46.318Z","type":"message"}
{"nick":"bnoordhuis","message":"it's not safe to free the memory of a handle until it's closed","date":"2012-04-11T21:55:57.408Z","type":"message"}
{"nick":"piscisaureus","message":"what ben said","date":"2012-04-11T21:56:06.054Z","type":"message"}
{"nick":"creationix","message":"with candor, for example, there is no callback when the vm is about to collect something","date":"2012-04-11T21:56:09.436Z","type":"message"}
{"nick":"creationix","message":"bnoordhuis, exactly, that's why it needs to be a strong ref while it's active","date":"2012-04-11T21:56:36.493Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: well, in that case you're screwed...","date":"2012-04-11T21:56:38.727Z","type":"message"}
{"nick":"creationix","message":"but in candor I can make a ref strong or weak","date":"2012-04-11T21:56:53.335Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: yes, and that is why it *also* needs to be a strong ref when it's inactive","date":"2012-04-11T21:56:54.442Z","type":"message"}
{"nick":"bnoordhuis","message":"creationix: it also needs to be a strong ref when it's inactive","date":"2012-04-11T21:56:57.510Z","type":"message"}
{"nick":"bnoordhuis","message":"hah :)","date":"2012-04-11T21:57:02.798Z","type":"message"}
{"nick":"creationix","message":"if I had an event from libuv to change this state, it would be safe","date":"2012-04-11T21:57:03.695Z","type":"message"}
{"nick":"bnoordhuis","message":"no, it would not","date":"2012-04-11T21:57:19.295Z","type":"message"}
{"nick":"creationix","message":"no, it doesn't need to be a strong ref when it's inactive","date":"2012-04-11T21:57:20.970Z","type":"message"}
{"nick":"bnoordhuis","message":"let me repeat: you *cannot* free the memory until after uv_close ","date":"2012-04-11T21:57:32.890Z","type":"message"}
{"nick":"mraleph","date":"2012-04-11T21:57:33.685Z","type":"join"}
{"nick":"creationix","message":"if there is no natural ref to it, it might as well be dead","date":"2012-04-11T21:57:35.533Z","type":"message"}
{"nick":"creationix","message":"I can call uv_close on gc","date":"2012-04-11T21:57:43.588Z","type":"message"}
{"nick":"creationix","message":"just so it doesn't leak mem","date":"2012-04-11T21:57:50.124Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: but if candor doesn't give you a weak ref callback, how will you know when to call uv_close?","date":"2012-04-11T21:58:13.832Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: any eta on the fix in node?  or anything i can do to help?  i want to verify that this domains thing isn't making performance terrible or breaking things badly","date":"2012-04-11T21:58:20.493Z","type":"message"}
{"nick":"creationix","message":"ok, I mispoke","date":"2012-04-11T21:58:27.941Z","type":"message"}
{"nick":"creationix","message":"it does give a callback when it's about to be gced","date":"2012-04-11T21:58:36.407Z","type":"message"}
{"nick":"creationix","message":"what it doesn't do it let you cancel the gc","date":"2012-04-11T21:58:42.513Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: if you want a quick fix, try this: https://gist.github.com/bb78bfa02e5d14471619","date":"2012-04-11T21:58:47.794Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: well, then you are also screwed","date":"2012-04-11T21:58:49.201Z","type":"message"}
{"nick":"creationix","message":"so I can't check the active state and cancel the gc","date":"2012-04-11T21:58:53.867Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: because you need to keep the memory allocated until you make the close callback ...","date":"2012-04-11T21:59:11.813Z","type":"message"}
{"nick":"creationix","message":"hmm, good point","date":"2012-04-11T21:59:33.843Z","type":"message"}
{"nick":"creationix","message":"and libuv counts it as inactive during close?","date":"2012-04-11T21:59:42.197Z","type":"message"}
{"nick":"txdv","message":"creationix: what VM are you talking about?","date":"2012-04-11T21:59:50.158Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: well the \"limbo\" state is kind of special","date":"2012-04-11T21:59:55.264Z","type":"message"}
{"nick":"creationix","message":"candor, luajit and smjs","date":"2012-04-11T21:59:56.881Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: I don't know yet how we will count that. But it will reference the event loop for sure.","date":"2012-04-11T22:00:08.955Z","type":"message"}
{"nick":"creationix","message":"txdv, candor is a new one","date":"2012-04-11T22:00:12.226Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: we have uv_is_closing() for that","date":"2012-04-11T22:00:19.630Z","type":"message"}
{"nick":"creationix","message":"piscisaureus, right, so the same logic that counts as holding the event loop open is the exact same logic I want to toggle the references","date":"2012-04-11T22:00:48.902Z","type":"message"}
{"nick":"creationix","message":"and it can be complicated and has edge cases","date":"2012-04-11T22:00:59.653Z","type":"message"}
{"nick":"txdv","message":"this is madness","date":"2012-04-11T22:01:02.493Z","type":"message"}
{"nick":"creationix","message":"so I don't want to repeat it","date":"2012-04-11T22:01:04.045Z","type":"message"}
{"nick":"TooTallNate","message":"txdv == C3PO","date":"2012-04-11T22:01:23.032Z","type":"message"}
{"nick":"mraleph","reason":"Client Quit","date":"2012-04-11T22:01:38.214Z","type":"quit"}
{"nick":"txdv","message":"TooTallNate: ?","date":"2012-04-11T22:01:41.607Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: that seems somewhat like an incomplete fix. ;)","date":"2012-04-11T22:01:50.287Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: ok so I get the point.","date":"2012-04-11T22:02:10.058Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: yes, but it's enough to demonstrate that the bug is in node and not in libuv","date":"2012-04-11T22:02:10.563Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm working on tracking it down","date":"2012-04-11T22:02:14.819Z","type":"message"}
{"nick":"bnoordhuis","message":"also, it makes the tests pass :)","date":"2012-04-11T22:02:22.449Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: ok, cool.","date":"2012-04-11T22:02:25.520Z","type":"message"}
{"nick":"isaacs","message":"yes, it does","date":"2012-04-11T22:02:26.953Z","type":"message"}
{"nick":"isaacs","message":"MUST BE GOOD","date":"2012-04-11T22:02:28.807Z","type":"message"}
{"nick":"isaacs","message":"SHIP IT!","date":"2012-04-11T22:02:34.271Z","type":"message"}
{"nick":"bnoordhuis","message":"damn right!","date":"2012-04-11T22:02:35.426Z","type":"message"}
{"nick":"TooTallNate","message":"txdv: http://www.youtube.com/watch?v=ZFDaqCUfrwo&feature=player_detailpage#t=5s","date":"2012-04-11T22:02:43.806Z","type":"message"}
{"nick":"isaacs","message":"that's test driven development, right?","date":"2012-04-11T22:02:44.002Z","type":"message"}
{"nick":"txdv","message":"i named my windows computer c3po","date":"2012-04-11T22:03:18.386Z","type":"message"}
{"nick":"txdv","message":"so i was a little bit confused","date":"2012-04-11T22:03:22.559Z","type":"message"}
{"nick":"TooTallNate","message":"wow","date":"2012-04-11T22:03:31.480Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: `node-gyp configure build` doesn't work","date":"2012-04-11T22:04:01.067Z","type":"message"}
{"nick":"bnoordhuis","message":"IOError: [Errno 21] Is a directory: 'build'","date":"2012-04-11T22:04:08.172Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: what version of node-gyp?","date":"2012-04-11T22:04:14.820Z","type":"message"}
{"nick":"bnoordhuis","message":"what's in master","date":"2012-04-11T22:04:19.090Z","type":"message"}
{"nick":"txdv","message":"I don't understand why the need for yet another virtual machine ... especially since it is just slimmed down javascript","date":"2012-04-11T22:04:24.763Z","type":"message"}
{"nick":"bnoordhuis","message":"running configure and build separately does work btw","date":"2012-04-11T22:04:26.948Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: unfortunately the activity thing also won't fix your problem","date":"2012-04-11T22:04:28.942Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: ya, isaacs needs to update to v0.4.1","date":"2012-04-11T22:04:32.998Z","type":"message"}
{"nick":"creationix","message":"piscisaureus, who not?","date":"2012-04-11T22:04:38.395Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: i just recently added that","date":"2012-04-11T22:04:39.532Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: oh, okay. nvm then :)","date":"2012-04-11T22:04:44.621Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: because the plan was that uv_write would not make the the handle itself active","date":"2012-04-11T22:05:04.899Z","type":"message"}
{"nick":"bulatshakirzyano","date":"2012-04-11T22:05:25.966Z","type":"join"}
{"nick":"piscisaureus","message":"creationix: (the existence of a pending write request would keep the loop alive by itself)","date":"2012-04-11T22:05:33.860Z","type":"message"}
{"nick":"creationix","message":"piscisaureus, ok, so if there are more states than just \"active\" that holds the process open then I need all","date":"2012-04-11T22:05:39.014Z","type":"message"}
{"nick":"creationix","message":"I don't care what it's called","date":"2012-04-11T22:05:46.206Z","type":"message"}
{"nick":"creationix","message":"I just need to know if this handle is holding the event loop open or not","date":"2012-04-11T22:05:57.524Z","type":"message"}
{"nick":"creationix","message":"and preferably be notified when it changes instead having to poll","date":"2012-04-11T22:06:06.661Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: no, that's not what you care about :-)","date":"2012-04-11T22:06:15.021Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: what you really care about is, \"can a pointer to this object suddenly show up somewhere?\"","date":"2012-04-11T22:06:34.544Z","type":"message"}
{"nick":"creationix","message":"right, except I'll always have a reference via the vm for everything except the type of things that hold the event loop open","date":"2012-04-11T22:07:21.301Z","type":"message"}
{"nick":"creationix","message":"so it will already be safe from the GC in all other cases","date":"2012-04-11T22:07:37.538Z","type":"message"}
{"nick":"creationix","message":"if there is nothing holding the event loop open and nothing referencing it in the script, it's impossible to ever need the pointer","date":"2012-04-11T22:08:15.387Z","type":"message"}
{"nick":"creationix","message":"hmm, but close is tricky","date":"2012-04-11T22:09:42.618Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: well, that depends on whether you expose the close callback + the object pointer to the user","date":"2012-04-11T22:10:08.415Z","type":"message"}
{"nick":"creationix","message":"right","date":"2012-04-11T22:10:20.906Z","type":"message"}
{"nick":"creationix","message":"in luvit, there is a lua callback that's a property on the cdata (which is the uv_timer_t as a lua object)","date":"2012-04-11T22:11:05.323Z","type":"message"}
{"nick":"creationix","message":"lua can only access the wrapped struct if it's not GCed","date":"2012-04-11T22:11:21.772Z","type":"message"}
{"nick":"creationix","message":"and lua can never access the C callback","date":"2012-04-11T22:11:27.042Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: I think you will have to \"duplicate\" the logic","date":"2012-04-11T22:11:56.634Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: (which is not really duplicate since the logic doesn't exist in libuv)","date":"2012-04-11T22:12:21.925Z","type":"message"}
{"nick":"creationix","message":"is that because it's slightly different that what uv needs?","date":"2012-04-11T22:12:30.985Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: but the rules are quite simple","date":"2012-04-11T22:12:31.988Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: libuv is only concerned with \"will anything happen or should we fall out of uv_run\" and \"is it safe to free the memory of handle xx\"","date":"2012-04-11T22:13:31.194Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: you are concerned with \"did the user forget to call uv_close, or is something still going on that might revive it\" :-)","date":"2012-04-11T22:14:15.741Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: but the logic is not very difficult (I think timers in fact have the most edge cases)","date":"2012-04-11T22:14:56.741Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: there are two types of objects that you need to deal with:","date":"2012-04-11T22:15:41.015Z","type":"message"}
{"nick":"piscisaureus","message":"* handles","date":"2012-04-11T22:15:41.220Z","type":"message"}
{"nick":"piscisaureus","message":"* requests that operate on handles","date":"2012-04-11T22:15:41.220Z","type":"message"}
{"nick":"rendar","reason":"Quit: good night","date":"2012-04-11T22:16:31.527Z","type":"quit"}
{"nick":"creationix","message":"how about libuv just document clearly what can hold the loop open?","date":"2012-04-11T22:16:40.608Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: that is the purpose of the refcount refactor","date":"2012-04-11T22:16:51.359Z","type":"message"}
{"nick":"piscisaureus","message":"but it won't fix your problem","date":"2012-04-11T22:17:10.794Z","type":"message"}
{"nick":"creationix","message":"does node leak memory if you forget to call close?","date":"2012-04-11T22:17:52.953Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: yes","date":"2012-04-11T22:18:04.155Z","type":"message"}
{"nick":"dylukes","reason":"Read error: Connection reset by peer","date":"2012-04-11T22:18:09.138Z","type":"quit"}
{"nick":"mjr_","message":"bnoordhuis: I have a core file for you that shows the TLS hang.","date":"2012-04-11T22:18:09.630Z","type":"message"}
{"nick":"creationix","message":"ahh, that's the easy way out","date":"2012-04-11T22:18:14.994Z","type":"message"}
{"nick":"dylukes","date":"2012-04-11T22:18:15.789Z","type":"join"}
{"nick":"piscisaureus","message":"creationix: although most of it is hidden in the internal api","date":"2012-04-11T22:18:27.303Z","type":"message"}
{"nick":"creationix","message":"ideally I'd like it to not hang and auto-close if the handle it otherwise inactive and inaccessable","date":"2012-04-11T22:18:57.649Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: in that sense - we make sure that uv_close is called","date":"2012-04-11T22:19:00.110Z","type":"message"}
{"nick":"creationix","message":"but I feel less bad if node didn't solve this problem","date":"2012-04-11T22:19:20.491Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: but in node you can easily leak:","date":"2012-04-11T22:20:05.787Z","type":"message"}
{"nick":"piscisaureus","message":"net.createConnection(80, \"this.server.never.hangs.up.com\", function(){});","date":"2012-04-11T22:20:05.986Z","type":"message"}
{"nick":"piscisaureus","message":"^-- creationix: easy leak :-)","date":"2012-04-11T22:20:15.592Z","type":"message"}
{"nick":"creationix","message":"ok, I'll think more about it later","date":"2012-04-11T22:20:36.306Z","type":"message"}
{"nick":"creationix","message":"I still think some sort of callback in libuv can help me","date":"2012-04-11T22:20:44.230Z","type":"message"}
{"nick":"creationix","message":"time to go eat supper","date":"2012-04-11T22:20:50.897Z","type":"message"}
{"nick":"piscisaureus","message":"super","date":"2012-04-11T22:20:57.462Z","type":"message"}
{"nick":"saghul","message":"creationix hi there :-) for pyuv I call uv_close (in case nobody called it before) if the Python object is not held by anybody, so GCing an object causes uv_cloce","date":"2012-04-11T22:21:14.929Z","type":"message"}
{"nick":"creationix","message":"saghul, right, that solved the forgot to gc issue","date":"2012-04-11T22:21:31.974Z","type":"message"}
{"nick":"creationix","message":"but the harder issue is to hold the object safe in the gc just enough, but not too much","date":"2012-04-11T22:21:47.424Z","type":"message"}
{"nick":"saghul","message":"also, when calling a callback in the Python world I increment the python refcount so the object is still alive when we get back to C","date":"2012-04-11T22:22:06.654Z","type":"message"}
{"nick":"creationix","message":"everything I do seems to be either too string (never can be GCed automatically) or too weak (segfaults)","date":"2012-04-11T22:22:17.625Z","type":"message"}
{"nick":"creationix","message":"right, so you implemented refcounts in your code","date":"2012-04-11T22:22:31.449Z","type":"message"}
{"nick":"creationix","message":"I'd like to not have to do that","date":"2012-04-11T22:22:36.150Z","type":"message"}
{"nick":"creationix","message":"*too strong","date":"2012-04-11T22:22:44.249Z","type":"message"}
{"nick":"saghul","message":"well, you must, since it's Python :-)","date":"2012-04-11T22:22:46.528Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: node also kind of has that","date":"2012-04-11T22:22:50.249Z","type":"message"}
{"nick":"creationix","message":"right, as do I","date":"2012-04-11T22:22:57.768Z","type":"message"}
{"nick":"creationix","message":"but I think libuv can solve it once","date":"2012-04-11T22:23:04.293Z","type":"message"}
{"nick":"creationix","message":"I'm more sensitive to this since I have multiple libuv binding projects","date":"2012-04-11T22:23:28.932Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: well, if you can come up with a solid proposal I'm probably fine with it","date":"2012-04-11T22:23:39.964Z","type":"message"}
{"nick":"creationix","message":"ok, so two extra function pointers in uv_handle_t isn't unresonable?","date":"2012-04-11T22:23:58.985Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: but, to be honest, Ben and I will probably just shoot holes in your logic","date":"2012-04-11T22:24:02.052Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: depending on how big the problem is that it solves, no","date":"2012-04-11T22:24:13.794Z","type":"message"}
{"nick":"creationix","message":"faulty logic needs holes in it","date":"2012-04-11T22:24:14.769Z","type":"message"}
{"nick":"creationix","message":":)","date":"2012-04-11T22:24:22.906Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: can you send it my way? i probably won't have time to look at it tonight though","date":"2012-04-11T22:24:23.210Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: I think you should go more for a double indirection scheme","date":"2012-04-11T22:24:46.769Z","type":"message"}
{"nick":"mjr_","message":"bnoordhuis: sure, I'll start up another server on the machine, just wanted to do it when you were around so I could shut it down right away","date":"2012-04-11T22:25:00.102Z","type":"message"}
{"nick":"creationix","message":"piscisaureus, I've already got like 5 levels of indirection to get at the struct in most Vms","date":"2012-04-11T22:25:23.967Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: well maybe you can repurpose one level then :-)","date":"2012-04-11T22:25:39.017Z","type":"message"}
{"nick":"saghul","message":"is that the \"Inception VM\"? :-)","date":"2012-04-11T22:26:06.905Z","type":"message"}
{"nick":"creationix","message":"lol, no","date":"2012-04-11T22:26:18.231Z","type":"message"}
{"nick":"creationix","message":"maybe not 5, but more than 2 at least","date":"2012-04-11T22:27:03.083Z","type":"message"}
{"nick":"mjr_","message":"bnoordhuis: (or anybody else who cares)  http://prod-2131.voxer.com:3000/","date":"2012-04-11T22:27:04.136Z","type":"message"}
{"nick":"bnoordhuis","action":"starts wget --mirror","date":"2012-04-11T22:27:40.732Z","type":"action"}
{"nick":"piscisaureus","message":"creationix: so what you should probably do is keep track of the \"active state\" yourself, with the following rules","date":"2012-04-11T22:27:55.957Z","type":"message"}
{"nick":"piscisaureus","message":"* expecting_callbacks = pending_reqs_on_handle || handle_is_active","date":"2012-04-11T22:27:56.156Z","type":"message"}
{"nick":"piscisaureus","message":"if (!expecting_callbacks) make_weak(); else make_strong();","date":"2012-04-11T22:28:27.199Z","type":"message"}
{"nick":"creationix","message":"right, I need to consider requests","date":"2012-04-11T22:28:51.791Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: yes","date":"2012-04-11T22:28:58.498Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: handles become active when you call read_start, read2_start, listen, timer_start","date":"2012-04-11T22:29:31.566Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: they become inactive when you call read_stop(*), uv_close","date":"2012-04-11T22:29:54.505Z","type":"message"}
{"nick":"creationix","message":"so what is a request anyway, I'm not super clear on why some functions work on the handle directly and others need requests","date":"2012-04-11T22:30:01.269Z","type":"message"}
{"nick":"creationix","message":"I know one use is things that need specific callbacks","date":"2012-04-11T22:30:37.440Z","type":"message"}
{"nick":"creationix","message":"like uv_write callbacks","date":"2012-04-11T22:30:46.156Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: a handle is similar to EventEmitter (e.g. it could emit 0 to many events) and needs to be closed explicitly","date":"2012-04-11T22:30:59.614Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: yay, works!","date":"2012-04-11T22:31:14.081Z","type":"message"}
{"nick":"bnoordhuis","message":"by which i mean that i now have an actual backtrace :)","date":"2012-04-11T22:31:31.528Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: a req is similar to an async function in node (like readFile) -> something that happens in the background and generates exactly one callback","date":"2012-04-11T22:31:32.806Z","type":"message"}
{"nick":"mjr_","message":"bnoordhuis: our Solaris friends insist that we learn mdb for this kind of thing.  It will also let us use dap's awesome jsstack work.","date":"2012-04-11T22:31:45.276Z","type":"message"}
{"nick":"mjr_","message":"bnoordhuis: but I already know gdb, so I'm resistant.","date":"2012-04-11T22:31:58.386Z","type":"message"}
{"nick":"creationix","message":"piscisaureus, ok, that's what I thought.  I seem to remember cases not matching with that, but can't think of specifics right now","date":"2012-04-11T22:32:04.904Z","type":"message"}
{"nick":"creationix","message":"anyway, I need to go, talk later","date":"2012-04-11T22:32:13.462Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: yeah... mdb feels like a step back when you're used to gdb","date":"2012-04-11T22:32:16.190Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: libuv guarantees that requests that operate on a handle always are flushed out before the handle itself makes its close callback","date":"2012-04-11T22:32:28.920Z","type":"message"}
{"nick":"bnoordhuis","message":"though it's true that it'll let you do things that gdb won't","date":"2012-04-11T22:32:34.069Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: if you find any inconsistencies, please tell.","date":"2012-04-11T22:32:38.153Z","type":"message"}
{"nick":"creationix","message":"ok","date":"2012-04-11T22:32:47.769Z","type":"message"}
{"nick":"piscisaureus","message":"creationix: afaict only c-ares stuff is messy, but it;s going away","date":"2012-04-11T22:33:03.973Z","type":"message"}
{"nick":"mmalecki","new_nick":"mmalecki[zzz]","date":"2012-04-11T22:35:13.417Z","type":"nick"}
{"nick":"sj26","reason":"Ping timeout: 246 seconds","date":"2012-04-11T22:40:46.333Z","type":"quit"}
{"nick":"sj26","date":"2012-04-11T22:42:54.957Z","type":"join"}
{"nick":"bulatshakirzyano","reason":"Quit: Computer has gone to sleep.","date":"2012-04-11T22:53:17.845Z","type":"quit"}
{"nick":"mjr_","message":"bnoordhuis: you get those files?","date":"2012-04-11T22:57:14.086Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: yep","date":"2012-04-11T22:58:22.168Z","type":"message"}
{"nick":"perezd","reason":"Quit: perezd","date":"2012-04-11T22:59:04.019Z","type":"quit"}
{"nick":"bnoordhuis","message":"okay, i'm going to revert the libuv upgrade","date":"2012-04-11T22:59:18.585Z","type":"message"}
{"nick":"bnoordhuis","message":"don't want to spend hours on something that'll be thrown out a week or two anyway","date":"2012-04-11T22:59:35.723Z","type":"message"}
{"nick":"perezd","date":"2012-04-11T22:59:47.500Z","type":"join"}
{"nick":"mjr_","message":"bnoordhuis: did you also hear about our exciting dtrace discovery that TLS seems to be responsible for our memory growth on SmartOS?","date":"2012-04-11T23:01:00.356Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Ben Noordhuis\u000f \u000307master\u000f * r\u0002e9dcfd4\u000f \u000310\u000f/ (41 files in 9 dirs)\u0002:\u000f ","date":"2012-04-11T23:05:35.118Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f Revert \"deps: upgrade libuv to 3c41597\"","date":"2012-04-11T23:05:35.118Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f This reverts commit 0db4dc0024eaa538bf4913d6bf256a18126de2ba.","date":"2012-04-11T23:05:35.118Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f This commit makes a lot of tests fail due to reference counting errors. It's","date":"2012-04-11T23:05:35.118Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f not worth it to debug because the reference counting scheme is due to change","date":"2012-04-11T23:05:35.118Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f soon anyway. - http://git.io/McURDg","date":"2012-04-11T23:05:35.118Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: you may need to revert 70a5b53 again :/","date":"2012-04-11T23:05:55.519Z","type":"message"}
{"nick":"bnoordhuis","message":"couldn't get the kqueue fix to apply to the old libuv","date":"2012-04-11T23:06:10.172Z","type":"message"}
{"nick":"bnoordhuis","message":"mjr_: no. how/what did you find out?","date":"2012-04-11T23:06:27.014Z","type":"message"}
{"nick":"bnoordhuis","message":"is this about the flame graph?","date":"2012-04-11T23:06:42.195Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: how's that openssl patch coming along?","date":"2012-04-11T23:07:47.568Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I sent it :-/","date":"2012-04-11T23:07:59.065Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: send it again :)","date":"2012-04-11T23:08:20.606Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: looking it up again... I had to back off quite bit because the ui crap is all over the place","date":"2012-04-11T23:09:03.265Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: https://gist.github.com/2360332","date":"2012-04-11T23:09:05.733Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, the horror!","date":"2012-04-11T23:09:43.840Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: jsut fixed some style issues in the patch btw","date":"2012-04-11T23:10:59.377Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: it doesn't apply","date":"2012-04-11T23:11:16.730Z","type":"message"}
{"nick":"bnoordhuis","message":"error: patch failed: deps/openssl/openssl.gyp:17","date":"2012-04-11T23:11:17.212Z","type":"message"}
{"nick":"bnoordhuis","message":"error: deps/openssl/openssl.gyp: patch does not apply","date":"2012-04-11T23:11:17.415Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: huh it is based on top of your stuff","date":"2012-04-11T23:11:42.323Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait, it does","date":"2012-04-11T23:11:48.509Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: try","date":"2012-04-11T23:11:54.699Z","type":"message"}
{"nick":"piscisaureus","message":"curl https://raw.github.com/gist/2360332/b32671dde0e03062c7e870eceb88fbd94fd258de/0001-Disable-OpenSSL-UI.patch | git am -3","date":"2012-04-11T23:11:54.896Z","type":"message"}
{"nick":"bnoordhuis","message":"nvm, fixed it :)","date":"2012-04-11T23:12:02.788Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: can we also enable OPENSSL_NO_ERR ?","date":"2012-04-11T23:12:23.338Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: or do we use error strings out of openssl in node?","date":"2012-04-11T23:12:32.559Z","type":"message"}
{"nick":"bnoordhuis","message":"we use them","date":"2012-04-11T23:12:42.776Z","type":"message"}
{"nick":"piscisaureus","message":"ok","date":"2012-04-11T23:12:46.925Z","type":"message"}
{"nick":"bnoordhuis","message":"okay, rebuilding everything one last time...","date":"2012-04-11T23:13:26.255Z","type":"message"}
{"nick":"bnoordhuis","message":"i'm buying a 16 core machine one of these days","date":"2012-04-11T23:13:38.709Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: what'd you find?","date":"2012-04-11T23:13:53.563Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: (saw the revert)","date":"2012-04-11T23:13:58.301Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so your windows fix patch still includes WIN32_LEAN_AND_MEAN and MF1MF_BUILD (or whatever that was)","date":"2012-04-11T23:14:13.026Z","type":"message"}
{"nick":"piscisaureus","message":"?","date":"2012-04-11T23:14:15.494Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes","date":"2012-04-11T23:14:20.083Z","type":"message"}
{"nick":"piscisaureus","message":"good","date":"2012-04-11T23:14:24.515Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: that it's complicated :)","date":"2012-04-11T23:14:27.170Z","type":"message"}
{"nick":"piscisaureus","message":"the winsock2 stuff can be letft out but not those","date":"2012-04-11T23:14:37.463Z","type":"message"}
{"nick":"bnoordhuis","message":"and i didn't want to hack up half of node to fix it","date":"2012-04-11T23:14:46.555Z","type":"message"}
{"nick":"isaacs","message":"kewl","date":"2012-04-11T23:14:53.002Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so what's the issue?","date":"2012-04-11T23:15:05.134Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: can you write up an issue and attach it to the v0.8 milestone?  or is it like a day or two thing?","date":"2012-04-11T23:15:22.659Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: must be an unix issue because on windows it passes :-)","date":"2012-04-11T23:15:25.458Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: or, do what isaacs says","date":"2012-04-11T23:15:37.498Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: it's kind of suspect. the loop refcount drops below zero and it's always a timer handle that causes it","date":"2012-04-11T23:15:59.757Z","type":"message"}
{"nick":"bnoordhuis","message":"isaacs: will do. this problem should go away once the refcount refactor is done","date":"2012-04-11T23:16:28.757Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: doesn't happen on windows afaict","date":"2012-04-11T23:16:32.942Z","type":"message"}
{"nick":"bnoordhuis","message":"of course that will introduce a slew of other bugs :)","date":"2012-04-11T23:16:41.005Z","type":"message"}
{"nick":"isaacs","message":"sure","date":"2012-04-11T23:16:52.887Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: do you have a assert(loop->refcount >= 0) in there?","date":"2012-04-11T23:17:01.077Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: yes","date":"2012-04-11T23:17:06.173Z","type":"message"}
{"nick":"bnoordhuis","message":"then it should be in src/unix/timer.c","date":"2012-04-11T23:17:20.853Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis, piscisaureus: we've got the status call tomorrow.  if you could take a few minutes to think of what is outstanding from v0.8 FC status in your opinion, that'd be helpful","date":"2012-04-11T23:17:47.657Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: I think uv_is_active for timers might be faulty, or you are overcompensating somewhere","date":"2012-04-11T23:17:48.645Z","type":"message"}
{"nick":"piscisaureus","message":"isaacs: FC ?","date":"2012-04-11T23:18:05.452Z","type":"message"}
{"nick":"piscisaureus","message":"RC>","date":"2012-04-11T23:18:10.038Z","type":"message"}
{"nick":"isaacs","message":"feature complete","date":"2012-04-11T23:18:10.434Z","type":"message"}
{"nick":"piscisaureus","message":"ah","date":"2012-04-11T23:18:13.223Z","type":"message"}
{"nick":"isaacs","message":"i think we should aim for FC by May 1, release by June 1","date":"2012-04-11T23:18:32.784Z","type":"message"}
{"nick":"isaacs","message":"we're close already","date":"2012-04-11T23:19:15.854Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T23:20:52.976Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#716 (master - e9dcfd4 : Ben Noordhuis): The build is still failing.","date":"2012-04-11T23:20:53.178Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/3ec84a1...e9dcfd4","date":"2012-04-11T23:20:53.178Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1070634","date":"2012-04-11T23:20:53.178Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T23:20:53.178Z","type":"part"}
{"nick":"bnoordhuis","message":"[02:04|% 100|+ 378|-   0]: Done <- huzzah!","date":"2012-04-11T23:25:21.182Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis++","date":"2012-04-11T23:25:28.522Z","type":"message"}
{"nick":"kohai","message":"bnoordhuis has 13 beers","date":"2012-04-11T23:25:28.724Z","type":"message"}
{"nick":"isaacs","message":"thanks","date":"2012-04-11T23:25:30.874Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u0002c1f52a1\u000f \u000310\u000f/ (3 files in 2 dirs)\u0002:\u000f Disable OpenSSL UI (+7 more commits...) - http://git.io/EIejrA","date":"2012-04-11T23:25:54.110Z","type":"message"}
{"nick":"bnoordhuis","message":"start your compilers, gentlemen","date":"2012-04-11T23:26:00.711Z","type":"message"}
{"nick":"bnoordhuis","message":"for some reason gyp insists on rebuilding the whole tree","date":"2012-04-11T23:26:08.747Z","type":"message"}
{"nick":"TooTallNate","message":"bnoordhuis: you mean this patch? https://github.com/joyent/node/commit/2bb197c3f93f9d6682304c6cc4b2cdb2474885a5","date":"2012-04-11T23:26:34.590Z","type":"message"}
{"nick":"bnoordhuis","message":"TooTallNate: no, 3c41597","date":"2012-04-11T23:27:02.764Z","type":"message"}
{"nick":"bnoordhuis","message":"sorry, that's https://github.com/joyent/libuv/commit/3c41597","date":"2012-04-11T23:27:21.980Z","type":"message"}
{"nick":"TooTallNate","message":"oh right","date":"2012-04-11T23:27:38.843Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you forgot the windows fixes :-/","date":"2012-04-11T23:31:36.856Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: no, i merged those into ea55a9f","date":"2012-04-11T23:32:40.792Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: no they are not there","date":"2012-04-11T23:32:59.535Z","type":"message"}
{"nick":"mikeal","reason":"Quit: Leaving.","date":"2012-04-11T23:33:01.950Z","type":"quit"}
{"nick":"bnoordhuis","message":"wtf","date":"2012-04-11T23:33:04.879Z","type":"message"}
{"nick":"bnoordhuis","message":"that's an old commit...","date":"2012-04-11T23:33:17.535Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: push it out!","date":"2012-04-11T23:33:28.628Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: there's also no need for TERMIOS no more I think btw","date":"2012-04-11T23:33:44.448Z","type":"message"}
{"nick":"bnoordhuis","message":"force-push coming up","date":"2012-04-11T23:35:07.613Z","type":"message"}
{"nick":"bnoordhuis","message":"i'll look into the TERMIOS thing later","date":"2012-04-11T23:35:15.593Z","type":"message"}
{"nick":"CIA-99","message":"\u0002node:\u000f \u000303Bert Belder\u000f \u000307master\u000f * r\u00021c88c3b\u000f \u000310\u000f/ (3 files in 2 dirs)\u0002:\u000f Disable OpenSSL UI (+7 more commits...) - http://git.io/pWgspA","date":"2012-04-11T23:35:52.202Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: 2639566 contains the windows changes","date":"2012-04-11T23:36:08.869Z","type":"message"}
{"nick":"isaacs","message":"bnoordhuis: why does `make test` rebuild the whole tree now?","date":"2012-04-11T23:37:48.686Z","type":"message"}
{"nick":"isaacs","message":"i just did `make distclean` and `make`, and then `make test` is rebuilding it yet again","date":"2012-04-11T23:38:00.896Z","type":"message"}
{"nick":"pfox___","reason":"Ping timeout: 252 seconds","date":"2012-04-11T23:39:00.107Z","type":"quit"}
{"nick":"bnoordhuis","message":"isaacs: blame gyp","date":"2012-04-11T23:39:19.486Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T23:39:20.825Z","type":"join"}
{"nick":"travis-ci","message":"[travis-ci] joyent/node#717 (master - c1f52a1 : Bert Belder): The build is still failing.","date":"2012-04-11T23:39:21.023Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Change view : https://github.com/joyent/node/compare/e9dcfd4...c1f52a1","date":"2012-04-11T23:39:21.023Z","type":"message"}
{"nick":"travis-ci","message":"[travis-ci] Build details : http://travis-ci.org/joyent/node/builds/1070809","date":"2012-04-11T23:39:21.023Z","type":"message"}
{"nick":"travis-ci","date":"2012-04-11T23:39:21.023Z","type":"part"}
{"nick":"isaacs","message":"wth","date":"2012-04-11T23:39:29.336Z","type":"message"}
{"nick":"bnoordhuis","message":"there's a check on common.gypi in the makefile that makes it run configure","date":"2012-04-11T23:40:23.077Z","type":"message"}
{"nick":"bnoordhuis","message":"that's what forcing the rebuild","date":"2012-04-11T23:40:37.038Z","type":"message"}
{"nick":"isaacs","message":"are we touching config.gypi in the test?","date":"2012-04-11T23:41:27.632Z","type":"message"}
{"nick":"isaacs","message":"that doesn't make sense","date":"2012-04-11T23:41:30.343Z","type":"message"}
{"nick":"paddybyers","reason":"Quit: paddybyers","date":"2012-04-11T23:42:07.444Z","type":"quit"}
{"nick":"dylukes","reason":"Quit: Pipes are broken. Sending packets via Fedex.","date":"2012-04-11T23:42:50.714Z","type":"quit"}
{"nick":"bnoordhuis","message":"it probably seemed like a good idea at the time","date":"2012-04-11T23:42:52.454Z","type":"message"}
{"nick":"josephg","date":"2012-04-11T23:43:17.648Z","type":"join"}
{"nick":"pfox___","date":"2012-04-11T23:45:17.382Z","type":"join"}
{"nick":"c4milo","reason":"Ping timeout: 250 seconds","date":"2012-04-11T23:54:09.427Z","type":"quit"}
