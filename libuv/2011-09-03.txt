{"nick":"piscisaureus","message":"https://gist.github.com/1190244","date":"2011-09-03T00:00:23.885Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: ^","date":"2011-09-03T00:00:29.782Z","type":"message"}
{"nick":"igorzi","message":"[17:33|% 100|+ 214|-  63]: Done","date":"2011-09-03T00:03:22.921Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: i'm trying to run some benchmarks on linux, and i think i'm running into ephemeral port problem..","date":"2011-09-03T00:07:10.102Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: what's the error you're getting?","date":"2011-09-03T00:07:25.578Z","type":"message"}
{"nick":"bnoordhuis","message":"[12:03|% 100|+ 502|-  52]: Done <- btw, that's what `make test-all` does on linux right now :(","date":"2011-09-03T00:07:46.041Z","type":"message"}
{"nick":"igorzi","message":"i keep pounding the (node) server, and then after a while the server is not accepting any more connections","date":"2011-09-03T00:07:46.832Z","type":"message"}
{"nick":"igorzi","message":"at that point netstat -t shows many TIME_WAIT connections","date":"2011-09-03T00:08:06.471Z","type":"message"}
{"nick":"bnoordhuis","message":"right, you can shorten the time_wait period","date":"2011-09-03T00:08:28.395Z","type":"message"}
{"nick":"igorzi","message":"how?","date":"2011-09-03T00:08:32.327Z","type":"message"}
{"nick":"bnoordhuis","message":"let me check that","date":"2011-09-03T00:09:25.965Z","type":"message"}
{"nick":"bnoordhuis","message":"sysctl net.ipv4.tcp_tw_recycle=1","date":"2011-09-03T00:10:31.309Z","type":"message"}
{"nick":"bnoordhuis","message":"but now that i think about it","date":"2011-09-03T00:11:33.978Z","type":"message"}
{"nick":"bnoordhuis","message":"you're probably hitting the accept backlog limit","date":"2011-09-03T00:11:49.485Z","type":"message"}
{"nick":"igorzi","message":"how to change that?","date":"2011-09-03T00:13:04.130Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: it's hard-coded in net_uv.js now","date":"2011-09-03T00:13:34.450Z","type":"message"}
{"nick":"bnoordhuis","message":"r = self._handle.listen(self._backlog || 128);","date":"2011-09-03T00:13:35.596Z","type":"message"}
{"nick":"bnoordhuis","message":"you should be able to set server._backlog = 1024","date":"2011-09-03T00:13:59.116Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: what benchmark are you testing it with? http_simple?","date":"2011-09-03T00:14:48.125Z","type":"message"}
{"nick":"igorzi","message":"yep","date":"2011-09-03T00:15:08.070Z","type":"message"}
{"nick":"igorzi","message":"(over the network)","date":"2011-09-03T00:15:34.757Z","type":"message"}
{"nick":"bnoordhuis","message":"hmm, i can't test that here","date":"2011-09-03T00:16:23.277Z","type":"message"}
{"nick":"bnoordhuis","message":"my wireless won't pull 1 gbit/s :(","date":"2011-09-03T00:16:38.096Z","type":"message"}
{"nick":"piscisaureus","message":"oh really?","date":"2011-09-03T00:17:07.884Z","type":"message"}
{"nick":"igorzi","message":"still seeing the problem.. (with server._backlog and sysctl net.ipv4.tcp_tw_recycle=1)","date":"2011-09-03T00:18:30.750Z","type":"message"}
{"nick":"igorzi","message":"netstat -t still giving a lot of TIME_WAIT connections","date":"2011-09-03T00:19:00.208Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: what do you see in `top`?","date":"2011-09-03T00:19:20.248Z","type":"message"}
{"nick":"bnoordhuis","message":"node at the top of the list at 100% cpu?","date":"2011-09-03T00:19:30.868Z","type":"message"}
{"nick":"igorzi","message":"yes, while it's accepting connections.. no, after it stops accepting connections","date":"2011-09-03T00:22:01.588Z","type":"message"}
{"nick":"igorzi","message":"btw, is it interesting or not to run http_simple with keep-alive?","date":"2011-09-03T00:23:51.556Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, it's interesting","date":"2011-09-03T00:24:05.756Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: i'm not sure what's causing it","date":"2011-09-03T00:24:23.455Z","type":"message"}
{"nick":"bnoordhuis","message":"is the system you're testing on reachable by me?","date":"2011-09-03T00:24:33.999Z","type":"message"}
{"nick":"piscisaureus","topic":"osx fails https://gist.github.com/1187315 | windows fails https://gist.github.com/1190244 | v0.5.6 issues https://github.com/joyent/node/issues?state=open&milestone=2","date":"2011-09-03T00:24:41.276Z","type":"topic"}
{"nick":"igorzi","message":"bnoordhuis: let me see if i can make it reachable.. i'll let you know","date":"2011-09-03T00:25:49.690Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: cool","date":"2011-09-03T00:25:57.589Z","type":"message"}
{"nick":"igorzi","message":"bnoordhuis: thanks","date":"2011-09-03T00:26:04.968Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: want me to gist the results for `make test-all` on linux?","date":"2011-09-03T00:26:12.451Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: sure","date":"2011-09-03T00:26:32.978Z","type":"message"}
{"nick":"igorzi","message":"what's more interesting?  connection:close or connection:keep-alive?","date":"2011-09-03T00:26:43.696Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 scunningham: Support ssl session get/set in tls.  Useful for client side session resume. - https://github.com/joyent/node/issues/1606","date":"2011-09-03T00:26:48.205Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: both are","date":"2011-09-03T00:26:53.646Z","type":"message"}
{"nick":"igorzi","message":"k","date":"2011-09-03T00:27:02.333Z","type":"message"}
{"nick":"bnoordhuis","message":"but keep-alive makes a server work harder","date":"2011-09-03T00:27:06.207Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: wouldn't SO_REUSEADDR help?","date":"2011-09-03T00:27:27.344Z","type":"message"}
{"nick":"DrPizza","message":"so_reuseaddr is a disaster though","date":"2011-09-03T00:27:44.095Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: we set SO_REUSEADDR","date":"2011-09-03T00:27:45.748Z","type":"message"}
{"nick":"ryah","message":"connection:close","date":"2011-09-03T00:27:47.173Z","type":"message"}
{"nick":"ryah","message":"is more interesting","date":"2011-09-03T00:27:50.830Z","type":"message"}
{"nick":"igorzi","message":"keep-alive it hides the cost of accepting new connections","date":"2011-09-03T00:27:51.821Z","type":"message"}
{"nick":"ryah","message":"imo","date":"2011-09-03T00:27:56.649Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: https://gist.github.com/1190280","date":"2011-09-03T00:29:07.452Z","type":"message"}
{"nick":"bnoordhuis","message":"wow, 9100 watchers already","date":"2011-09-03T00:30:59.474Z","type":"message"}
{"nick":"isaacs","message":"https://img.skitch.com/20110903-prhbg15sb8ia8fhc11ek25j2t7.png","date":"2011-09-03T00:39:48.651Z","type":"message"}
{"nick":"ryah","message":"isaacs joining the battle","date":"2011-09-03T00:45:42.450Z","type":"message"}
{"nick":"isaacs","message":"reading configs doesn't work, so it doesn't get any further than showing the usage banner","date":"2011-09-03T00:48:13.990Z","type":"message"}
{"nick":"ryah","message":"what's it need?","date":"2011-09-03T00:50:51.385Z","type":"message"}
{"nick":"ryah","message":"also - getting npm running on master osx would be nice too :)","date":"2011-09-03T00:51:23.554Z","type":"message"}
{"nick":"isaacs","message":"i'm not sure what's breaking yet","date":"2011-09-03T00:51:38.492Z","type":"message"}
{"nick":"ryah","message":"i think readlink is not working right now and breaking a whole bunch of stuff","date":"2011-09-03T00:51:54.896Z","type":"message"}
{"nick":"isaacs","message":"yeah, i'm getting about an issue every 2 hours about npm not working on node master","date":"2011-09-03T00:51:56.297Z","type":"message"}
{"nick":"isaacs","message":"it was readdir last i checked","date":"2011-09-03T00:52:03.017Z","type":"message"}
{"nick":"isaacs","message":"has about half the files, a bunch of \"\" entries, and some garbage.","date":"2011-09-03T00:52:20.040Z","type":"message"}
{"nick":"igorzi","message":"ryah: is there a test for readdir in node?","date":"2011-09-03T00:53:42.291Z","type":"message"}
{"nick":"ryah","message":"igorzi: test/simple/test-readdir.js","date":"2011-09-03T00:54:58.770Z","type":"message"}
{"nick":"igorzi","message":"it fails.. i'll get it fixed","date":"2011-09-03T00:56:59.986Z","type":"message"}
{"nick":"ryah","message":"fails here too","date":"2011-09-03T00:59:21.213Z","type":"message"}
{"nick":"ryah","message":":)","date":"2011-09-03T00:59:23.178Z","type":"message"}
{"nick":"ryah","message":"i should fix that","date":"2011-09-03T00:59:26.459Z","type":"message"}
{"nick":"ryah","action":"anticipates a long weekend","date":"2011-09-03T00:59:56.822Z","type":"action"}
{"nick":"ryah","message":"at the moment though im going out for food- see you guys later.","date":"2011-09-03T01:00:15.794Z","type":"message"}
{"nick":"brson","reason":"Ping timeout: 246 seconds","date":"2011-09-03T01:05:24.285Z","type":"quit"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 coolaj86: explained how url.format works (`search` trumps `query`, etc) (rev 2) - https://github.com/joyent/node/issues/1636","date":"2011-09-03T01:21:48.334Z","type":"message"}
{"nick":"isaacs","reason":"Quit: isaacs","date":"2011-09-03T01:25:11.668Z","type":"quit"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T01:26:33.179Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303AJ ONeal\u000f \u000307master\u000f * r\u0002087d210\u000f \u000310\u000f/ doc/api/url.markdown \u0002:\u000f docs: explain how url.format works (`search` trumps `query`, etc) - http://git.io/TNmG_w","date":"2011-09-03T01:30:59.520Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: hey","date":"2011-09-03T01:38:22.541Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: ho","date":"2011-09-03T01:38:41.227Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: ha!","date":"2011-09-03T01:38:46.650Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 scunningham: Support ssl session get/set in tls.  Useful for client side session resume. - https://github.com/joyent/node/issues/1606","date":"2011-09-03T01:39:03.091Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: are getsockname / getpeername useful and meaniningful on unix sockets?","date":"2011-09-03T01:39:12.336Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes and we need them","date":"2011-09-03T01:39:24.256Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait, unix sockets","date":"2011-09-03T01:39:31.821Z","type":"message"}
{"nick":"bnoordhuis","message":"god, it's getting late","date":"2011-09-03T01:39:35.956Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-03T01:39:36.114Z","type":"message"}
{"nick":"bnoordhuis","message":"yes, they work but they both return the path of the unix socket","date":"2011-09-03T01:39:51.766Z","type":"message"}
{"nick":"bnoordhuis","message":"so not that useful perhaps but still","date":"2011-09-03T01:40:00.133Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: what is the maximum length of a unix socket name?","date":"2011-09-03T01:40:17.017Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: does that fit in sockaddr_un???","date":"2011-09-03T01:40:29.100Z","type":"message"}
{"nick":"piscisaureus","message":"is sockaddr_un like 1kb in size?","date":"2011-09-03T01:40:39.794Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: implementation dependent but yes, it always fits in sockaddr_un","date":"2011-09-03T01:40:44.422Z","type":"message"}
{"nick":"bnoordhuis","message":"on most systems it's about 110 bytes","date":"2011-09-03T01:40:58.773Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: so you can't have /tmp/my/very/long/path/where/i/happen/to/want/to/locate/my/thing.sock?","date":"2011-09-03T01:41:20.069Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: that's only 69 characters","date":"2011-09-03T01:42:01.450Z","type":"message"}
{"nick":"piscisaureus","message":"right ok","date":"2011-09-03T01:42:22.225Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: suppose I want to do it for pipes","date":"2011-09-03T01:43:12.132Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: yes?","date":"2011-09-03T01:43:31.566Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: \u0003int uv_pipe_name(uv_pipe_t*, \u0003char* buf, size_t* len) ?","date":"2011-09-03T01:43:38.568Z","type":"message"}
{"nick":"bnoordhuis","message":"that'd work","date":"2011-09-03T01:43:56.564Z","type":"message"}
{"nick":"piscisaureus","message":"and define UV_MAX_PIPE_NAME ?","date":"2011-09-03T01:43:58.073Z","type":"message"}
{"nick":"piscisaureus","message":"On windows the name could be longer","date":"2011-09-03T01:44:08.865Z","type":"message"}
{"nick":"piscisaureus","message":"32k even but I think MAX_PATH is reasonable","date":"2011-09-03T01:44:39.423Z","type":"message"}
{"nick":"bnoordhuis","message":"UV_MAX_PIPE_NAME would have to be sizeof(((struct sockaddr_un*)0)->sun_path)","date":"2011-09-03T01:44:50.640Z","type":"message"}
{"nick":"bnoordhuis","message":"kind of gnarly because you'd need to include sys/un.h somewhere","date":"2011-09-03T01:45:03.906Z","type":"message"}
{"nick":"piscisaureus","message":"you don't already?","date":"2011-09-03T01:45:18.799Z","type":"message"}
{"nick":"piscisaureus","message":"oh","date":"2011-09-03T01:45:32.920Z","type":"message"}
{"nick":"piscisaureus","message":"The pipename part of the name can include any character other than a backslash, including numbers and special characters. The entire pipe name string can be up to 256 characters long. Pipe names are not case sensitive.","date":"2011-09-03T01:45:33.596Z","type":"message"}
{"nick":"piscisaureus","message":"but what if the user uses unicode gheh","date":"2011-09-03T01:46:00.709Z","type":"message"}
{"nick":"bnoordhuis","message":"hah, windows","date":"2011-09-03T01:46:08.556Z","type":"message"}
{"nick":"bnoordhuis","message":"i don't think there's any platform we support where sizeof(sun_path) > 108","date":"2011-09-03T01:46:27.620Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: UNIX_PATH_MAX?","date":"2011-09-03T01:46:55.015Z","type":"message"}
{"nick":"bnoordhuis","message":"no, but there's SUN_LEN","date":"2011-09-03T01:47:33.173Z","type":"message"}
{"nick":"piscisaureus","message":"man unix(7) says UNIX_MAX_PATH","date":"2011-09-03T01:47:50.158Z","type":"message"}
{"nick":"bnoordhuis","message":"yeah, that's not actually defined anywhere","date":"2011-09-03T01:48:39.244Z","type":"message"}
{"nick":"piscisaureus","message":"unix *sigh*","date":"2011-09-03T01:49:06.085Z","type":"message"}
{"nick":"bnoordhuis","message":"haha, okay - i grant you this point","date":"2011-09-03T01:49:16.750Z","type":"message"}
{"nick":"bnoordhuis","message":"oh wait, i lie","date":"2011-09-03T01:49:24.516Z","type":"message"}
{"nick":"bnoordhuis","message":"linux has UNIX_MAX_PATH but sunos doesn't","date":"2011-09-03T01:49:31.615Z","type":"message"}
{"nick":"piscisaureus","message":"we should have a unix vs windows score board","date":"2011-09-03T01:49:36.607Z","type":"message"}
{"nick":"bnoordhuis","message":"the linux vs windows cripple fight","date":"2011-09-03T01:49:55.539Z","type":"message"}
{"nick":"bnoordhuis","message":"i'd pay to see that","date":"2011-09-03T01:49:59.408Z","type":"message"}
{"nick":"piscisaureus","message":"In generally I'd say that unix loses on it wicked apis and windows loses on implementation","date":"2011-09-03T02:01:44.609Z","type":"message"}
{"nick":"bnoordhuis","message":"wicked? most of posix is pretty simple","date":"2011-09-03T02:03:09.254Z","type":"message"}
{"nick":"piscisaureus","message":"fork-exec -1","date":"2011-09-03T02:04:50.158Z","type":"message"}
{"nick":"piscisaureus","message":"socket files -4","date":"2011-09-03T02:04:50.318Z","type":"message"}
{"nick":"piscisaureus","message":"flock -20","date":"2011-09-03T02:04:50.318Z","type":"message"}
{"nick":"bnoordhuis","message":"flock/fcntl/lockf is where posix truly fucked up","date":"2011-09-03T02:05:46.137Z","type":"message"}
{"nick":"bnoordhuis","message":"but i like fork/exec and i don't see the issue with socket files (unix sockets?)","date":"2011-09-03T02:06:03.160Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: you've forgotten the addrinuse problem already?","date":"2011-09-03T02:06:25.838Z","type":"message"}
{"nick":"bnoordhuis","message":"oh, if you mean stale unix sockets - yes, that's pretty damn annoying","date":"2011-09-03T02:06:26.141Z","type":"message"}
{"nick":"bnoordhuis","message":"i still plan to go back and fix it in linux :)","date":"2011-09-03T02:06:45.358Z","type":"message"}
{"nick":"piscisaureus","message":"fork-exec is so backwards","date":"2011-09-03T02:07:06.297Z","type":"message"}
{"nick":"piscisaureus","message":"and let's not forget the dangers that some child process inherits your handles accidentally","date":"2011-09-03T02:07:28.913Z","type":"message"}
{"nick":"bnoordhuis","message":"well, okay","date":"2011-09-03T02:09:11.404Z","type":"message"}
{"nick":"bnoordhuis","message":"-1 for fork/exec","date":"2011-09-03T02:09:14.479Z","type":"message"}
{"nick":"DrPizza","message":"the entire premise of fork is just weird","date":"2011-09-03T02:09:23.209Z","type":"message"}
{"nick":"bnoordhuis","message":"or at least for not making file descriptors cloexec by default","date":"2011-09-03T02:09:32.899Z","type":"message"}
{"nick":"piscisaureus","message":"I like fork in itself","date":"2011-09-03T02:09:34.307Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: did you address this in the uv_fs_stat? https://github.com/joyent/node/issues/1565","date":"2011-09-03T02:15:09.968Z","type":"message"}
{"nick":"piscisaureus","message":"I'm checking out for today","date":"2011-09-03T02:31:43.283Z","type":"message"}
{"nick":"piscisaureus","message":"bnoordhuis: work on your bugs!","date":"2011-09-03T02:31:52.647Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T02:35:18.286Z","type":"message"}
{"nick":"bnoordhuis","message":"piscisaureus: no worries, my bugs are getting better every day","date":"2011-09-03T02:35:58.006Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 tshinnic: unguarded fs.watchFile cache statWatchers checking fixed - https://github.com/joyent/node/issues/1637","date":"2011-09-03T02:38:18.272Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 koichik: Buffer.write() should always set Buffer._charsWritten - https://github.com/joyent/node/issues/1633","date":"2011-09-03T02:39:33.300Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T02:47:03.113Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f \u000303koichik\u000f \u000307v0.4\u000f * r\u00023e853e6\u000f \u000310\u000f/ (src/node_buffer.cc test/simple/test-buffer.js)\u0002:\u000f ","date":"2011-09-03T02:50:39.905Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f buffer: write() should always set _charsWritten.","date":"2011-09-03T02:50:40.068Z","type":"message"}
{"nick":"CIA-52","message":"\u0002node:\u000f Refs #1633. - http://git.io/_3JVxA","date":"2011-09-03T02:50:40.068Z","type":"message"}
{"nick":"bnoordhuis","reason":"Ping timeout: 264 seconds","date":"2011-09-03T03:00:04.322Z","type":"quit"}
{"nick":"piscisaureus","reason":"Ping timeout: 258 seconds","date":"2011-09-03T04:20:16.185Z","type":"quit"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 chowey: http.js parser uses \"this\" and fails - https://github.com/joyent/node/issues/1614","date":"2011-09-03T05:19:33.072Z","type":"message"}
{"nick":"koichik","date":"2011-09-03T05:38:34.503Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 juandopazo: paths ending in \\ on Windows - https://github.com/joyent/node/issues/1565","date":"2011-09-03T05:54:48.071Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 ajclarke: Socket write encoding case sensitivity - https://github.com/joyent/node/issues/1586","date":"2011-09-03T06:47:32.975Z","type":"message"}
{"nick":"igorzi","message":"ryah: https://github.com/igorzi/node/commit/dcc2dc7c0b9bde99189c68a82ce0a3201a3a44d6","date":"2011-09-03T06:56:45.853Z","type":"message"}
{"nick":"igorzi","message":"fixes test/simple/test-readdir.js  ---^","date":"2011-09-03T06:57:02.328Z","type":"message"}
{"nick":"ryah","message":"igorzi: thanks","date":"2011-09-03T07:08:04.307Z","type":"message"}
{"nick":"ryah","message":"oh - i think i took that out","date":"2011-09-03T07:08:23.178Z","type":"message"}
{"nick":"ryah","message":"hm - ","date":"2011-09-03T07:08:36.978Z","type":"message"}
{"nick":"ryah","message":"i seem to remember dealing with this code","date":"2011-09-03T07:08:52.985Z","type":"message"}
{"nick":"igorzi","message":"it's still there in the sync version (which is why sync readdir still worked)","date":"2011-09-03T07:16:25.970Z","type":"message"}
{"nick":"ryah","message":"unix is still broken :|","date":"2011-09-03T07:23:15.353Z","type":"message"}
{"nick":"ryah","message":"unix readdir sync that is","date":"2011-09-03T07:23:24.979Z","type":"message"}
{"nick":"ryah","message":"your patch fixed async","date":"2011-09-03T07:23:30.494Z","type":"message"}
{"nick":"ryah","message":"we're in bad shape. i hope we make some progress on these bugs the next few days - otherwise we might need to bring back the original node_file.cc","date":"2011-09-03T07:24:19.814Z","type":"message"}
{"nick":"ryah","message":"under a command-line switch","date":"2011-09-03T07:24:26.263Z","type":"message"}
{"nick":"ryah","message":"that wouldn't be the end of the world","date":"2011-09-03T07:24:53.677Z","type":"message"}
{"nick":"igorzi","message":"do we know what all the issues/broken tests are (that resulted from this)?","date":"2011-09-03T07:40:12.889Z","type":"message"}
{"nick":"igorzi","message":"ryah: --^","date":"2011-09-03T07:40:22.900Z","type":"message"}
{"nick":"dmkbot","reason":"Ping timeout: 260 seconds","date":"2011-09-03T08:15:58.304Z","type":"quit"}
{"nick":"mraleph","date":"2011-09-03T09:40:22.910Z","type":"join"}
{"nick":"dmkbot","date":"2011-09-03T09:55:41.271Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kilianc: Assertion failed: (0 && \"implement me\"), function uv_fs_readlink, file src/unix/fs.c, line 500. Abort trap: 6 - https://github.com/joyent/node/issues/1638","date":"2011-09-03T11:00:38.377Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-09-03T11:54:31.860Z","type":"quit"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: node rev 0.5.5 can not build with Mingw & XP SP3 - https://github.com/joyent/node/issues/1639","date":"2011-09-03T12:20:23.156Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/libuv:\u0002 japj: test_fs fails compilation on windows - https://github.com/joyent/libuv/issues/175","date":"2011-09-03T12:28:53.187Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: node rev 0.5.5 can not build with Mingw & XP SP3 - https://github.com/joyent/node/issues/1639","date":"2011-09-03T12:31:35.551Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-03T12:32:31.898Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-03T12:32:47.636Z","type":"join"}
{"nick":"mraleph","date":"2011-09-03T12:33:16.909Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T12:51:59.837Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/libuv:\u0002 bnoordhuis: uv.h should not leak implementation details - https://github.com/joyent/libuv/issues/104","date":"2011-09-03T12:53:29.839Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: New assertions and util checks - https://github.com/joyent/node/issues/1629","date":"2011-09-03T13:49:14.737Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 fengmk2: node0.5.4: req.socket.setTimeout will fire req \"error\" event - https://github.com/joyent/node/issues/1575","date":"2011-09-03T14:20:29.778Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: v.0.5.5 deps/uv/config-mingw.mk need to update for mingw32 - https://github.com/joyent/node/issues/1640","date":"2011-09-03T14:24:14.786Z","type":"message"}
{"nick":"piscisaureus","date":"2011-09-03T14:28:45.175Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: v.0.5.5 deps/uv/config-mingw.mk need to update for mingw32 - https://github.com/joyent/node/issues/1640","date":"2011-09-03T14:32:59.809Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: v.0.5.5 deps/uv/config-mingw.mk need to update for mingw32 - https://github.com/joyent/node/issues/1640","date":"2011-09-03T14:35:29.761Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: v.0.5.5 deps/uv/config-mingw.mk need to update for mingw32 - https://github.com/joyent/node/issues/1640","date":"2011-09-03T14:39:29.799Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: error: declaration of 'ares_channeldata* uv_loop_s::ares_channel' error: changes meaning of 'ares_channel' from 'typedef struct ares_channeldata* ares_channel' - https://github.com/joyent/node/issues/1641","date":"2011-09-03T14:49:44.818Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: v.0.5.5+mingw error: declaration of 'ares_channeldata* uv_loop_s::ares_channel' error: changes meaning of 'ares_channel' from 'typedef struct ares_channeldata* ares_channel' - https://github.com/joyent/node/issues/1641","date":"2011-09-03T14:51:29.870Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 jetlan: v.0.5.5+mingw error: declaration of 'ares_channeldata* uv_loop_s::ares_channel' error: changes meaning of 'ares_channel' from 'typedef struct ares_channeldata* ares_channel' - https://github.com/joyent/node/issues/1641","date":"2011-09-03T14:53:14.923Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kilianc: Assertion failed: (0 && \"implement me\"), function uv_fs_readlink, file src/unix/fs.c, line 500. Abort trap: 6 - https://github.com/joyent/node/issues/1638","date":"2011-09-03T15:43:44.764Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T16:13:44.706Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/libuv:\u0002 erickt: Fix uv_getaddrinfo to accept custom data. - https://github.com/joyent/libuv/issues/156","date":"2011-09-03T16:14:29.697Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-03T16:35:44.784Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-03T16:35:59.600Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/libuv:\u0002 erickt: Fix uv_getaddrinfo to accept custom data. - https://github.com/joyent/libuv/issues/156","date":"2011-09-03T16:47:26.291Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 cjavapro: Improve start-up time for high-performance integration via CGI - https://github.com/joyent/node/issues/1642","date":"2011-09-03T16:47:41.288Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T17:09:41.223Z","type":"message"}
{"nick":"igorzi","message":"ryah: https://gist.github.com/1191551","date":"2011-09-03T18:08:21.117Z","type":"message"}
{"nick":"igorzi","message":"are you ok with these test changes?","date":"2011-09-03T18:08:32.840Z","type":"message"}
{"nick":"igorzi","message":"for chown - it just verifies that it no-ops; for chmod - i left write-only part of the test for unix only.. not sure if you want to keep tha","date":"2011-09-03T18:10:36.794Z","type":"message"}
{"nick":"igorzi","message":"*that","date":"2011-09-03T18:10:39.735Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T18:15:56.096Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: you here?","date":"2011-09-03T18:18:40.356Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes","date":"2011-09-03T18:25:54.723Z","type":"message"}
{"nick":"igorzi","message":"ryah: and here's the corresponding change in node: https://github.com/igorzi/node/commit/de3a29f4dec1296e846990d742279f3126c4d15f","date":"2011-09-03T18:26:00.821Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: i started looking at link and symlink.. i remember that you mentioned that we need extra attributes on windows","date":"2011-09-03T18:26:42.571Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes","date":"2011-09-03T18:27:23.271Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: for symlink, that is","date":"2011-09-03T18:27:30.715Z","type":"message"}
{"nick":"igorzi","message":"to identify junction points vs symbolic links?","date":"2011-09-03T18:27:42.571Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: also to distinguish directory symlinks from file symlinks","date":"2011-09-03T18:28:00.993Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: can't we do that implicitly (without attributes)?","date":"2011-09-03T18:28:37.311Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: I don't think so","date":"2011-09-03T18:28:45.789Z","type":"message"}
{"nick":"piscisaureus","message":"we might for symlink targets that do exist","date":"2011-09-03T18:28:56.528Z","type":"message"}
{"nick":"igorzi","message":"i see","date":"2011-09-03T18:29:05.166Z","type":"message"}
{"nick":"piscisaureus","message":"SYMBOLIC_LINK_FLAG_DIRECTORY :-/","date":"2011-09-03T18:29:41.370Z","type":"message"}
{"nick":"igorzi","message":"junction points only work with directories, right?","date":"2011-09-03T18:29:55.827Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-03T18:30:00.544Z","type":"message"}
{"nick":"igorzi","message":"do we even want to create junction points on vista+?","date":"2011-09-03T18:30:15.775Z","type":"message"}
{"nick":"piscisaureus","message":"they're useful because they work on xp","date":"2011-09-03T18:30:21.056Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: the downside of symlinks is that you need to be admin to create them","date":"2011-09-03T18:30:33.411Z","type":"message"}
{"nick":"piscisaureus","message":"but you can always create junctions","date":"2011-09-03T18:30:38.829Z","type":"message"}
{"nick":"piscisaureus","message":"But I'd suggest you start with creating normal symlinks","date":"2011-09-03T18:31:05.376Z","type":"message"}
{"nick":"igorzi","message":"normal symlinks - you mean vista+, right?","date":"2011-09-03T18:31:29.608Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-03T18:31:33.101Z","type":"message"}
{"nick":"igorzi","message":"ok, it'll just fail on xp for now, and then we can put in the functionality for junction points","date":"2011-09-03T18:32:17.192Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-03T18:32:24.557Z","type":"message"}
{"nick":"igorzi","message":"and link is just CreateHardLink, right?","date":"2011-09-03T18:32:50.858Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: yes","date":"2011-09-03T18:33:28.432Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: we should also take care that stat/lstat has correct semantics wrt symlinks","date":"2011-09-03T18:33:28.543Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: stat resolves the link, lstat stats the symlink itself","date":"2011-09-03T18:33:28.704Z","type":"message"}
{"nick":"piscisaureus","message":"(nothing is ever easy)","date":"2011-09-03T18:33:44.343Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: https://github.com/piscisaureus/node/blob/abbc52482809081c01ed06d08ba2c8d50bc65d5d/src/platform_win32_fs.cc#L24-174","date":"2011-09-03T18:33:51.237Z","type":"message"}
{"nick":"igorzi","message":"yep, i have that as a todo.. btw can you review this please? https://gist.github.com/1191551","date":"2011-09-03T18:34:14.836Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: so, as far as the api for symlink, for now we can just add target_is_dir arg","date":"2011-09-03T18:37:10.280Z","type":"message"}
{"nick":"igorzi","message":"int uv_fs_symlink(uv_loop_t* loop, uv_fs_t* req, const char* path, const char* new_path, int target_is_dir, uv_fs_cb cb);","date":"2011-09-03T18:37:28.269Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: make room for junctions already","date":"2011-09-03T18:37:31.942Z","type":"message"}
{"nick":"piscisaureus","message":"mabe have enum uv_symlink_type {","date":"2011-09-03T18:38:09.731Z","type":"message"}
{"nick":"piscisaureus","message":"  UV_SYMLINK_FILE,","date":"2011-09-03T18:38:09.890Z","type":"message"}
{"nick":"piscisaureus","message":"  UV_SYMLINK_DIR","date":"2011-09-03T18:38:09.890Z","type":"message"}
{"nick":"piscisaureus","message":"}","date":"2011-09-03T18:38:09.890Z","type":"message"}
{"nick":"piscisaureus","message":"but yeah whatever","date":"2011-09-03T18:38:37.223Z","type":"message"}
{"nick":"piscisaureus","message":"it's going to be an easy change if needed","date":"2011-09-03T18:38:44.804Z","type":"message"}
{"nick":"igorzi","message":"int uv_fs_symlink(uv_loop_t* loop, uv_fs_t* req, const char* path, const char* new_path, int flags, uv_fs_cb cb);","date":"2011-09-03T18:40:29.588Z","type":"message"}
{"nick":"igorzi","message":"#define UV_SYMLINK_DIR      0x0001","date":"2011-09-03T18:40:33.463Z","type":"message"}
{"nick":"igorzi","message":"#define UV_SYMLINK_JUNCTION 0x0002","date":"2011-09-03T18:40:38.152Z","type":"message"}
{"nick":"igorzi","message":"?","date":"2011-09-03T18:40:39.487Z","type":"message"}
{"nick":"piscisaureus","message":"also fine :-)","date":"2011-09-03T18:40:50.077Z","type":"message"}
{"nick":"igorzi","message":"ok, since ryah is the benevolent dictator here, i'll just wait for what he says :)","date":"2011-09-03T18:41:32.531Z","type":"message"}
{"nick":"igorzi","message":"ryah : ---^","date":"2011-09-03T18:41:36.431Z","type":"message"}
{"nick":"piscisaureus","message":"it's a common misconception to think he's benevolent","date":"2011-09-03T18:41:58.267Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: gtg for 15 mins. your patch looks ok, haven't really dug out the tests yet. nit: extranious -> extraneous","date":"2011-09-03T18:42:33.111Z","type":"message"}
{"nick":"ryah","message":"hm","date":"2011-09-03T18:46:41.191Z","type":"message"}
{"nick":"ryah","message":"what's a junction?","date":"2011-09-03T18:46:51.865Z","type":"message"}
{"nick":"igorzi","message":"it's a pre-vista symbolic link, which only works with directories","date":"2011-09-03T18:47:29.779Z","type":"message"}
{"nick":"igorzi","message":"http://en.wikipedia.org/wiki/NTFS_junction_point","date":"2011-09-03T18:47:30.015Z","type":"message"}
{"nick":"igorzi","message":"i'll first implement vista+ symlinks, and then we can evaluate if we want junction points for vista-","date":"2011-09-03T18:48:30.508Z","type":"message"}
{"nick":"ryah","message":"igorzi: https://gist.github.com/1191551 can you add a comment at ASSERT((s->st_mode & 0777) & mode);","date":"2011-09-03T18:48:46.727Z","type":"message"}
{"nick":"ryah","message":"about why you're doing it this way (presumably because the other, group sections don't matter for windows)","date":"2011-09-03T18:49:19.397Z","type":"message"}
{"nick":"ryah","message":"just so unix people aren't confused with they see it","date":"2011-09-03T18:49:53.813Z","type":"message"}
{"nick":"igorzi","message":"ok","date":"2011-09-03T18:50:43.504Z","type":"message"}
{"nick":"ryah","message":"what do -1 arguments to uv_fs_chown mean?","date":"2011-09-03T18:51:01.353Z","type":"message"}
{"nick":"igorzi","message":"ryah: i can #ifdef _WIN32 that if you want (and leave unix ASSERT as it was)","date":"2011-09-03T18:51:27.861Z","type":"message"}
{"nick":"ryah","message":"igorzi: or that - i guess that makes it clear","date":"2011-09-03T18:51:50.476Z","type":"message"}
{"nick":"ryah","message":"regarding the symlink API - do we need to expose UV_SYMLINK_JUNCTION and UV_SYMLINK_DIR ?","date":"2011-09-03T18:53:35.840Z","type":"message"}
{"nick":"ryah","message":"can't it figure out what to use automatically?","date":"2011-09-03T18:53:50.608Z","type":"message"}
{"nick":"igorzi","message":"ryah: UV_SYMLINK_DIR is needed if we're creating a symlink for a target that doesn't exist yet","date":"2011-09-03T18:54:50.414Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus says that having UV_SYMLINK_JUNCTION is useful on vista+ because vista+ symlinks require running elevated","date":"2011-09-03T18:56:13.692Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: it's easy to verify this :-)","date":"2011-09-03T18:56:32.554Z","type":"message"}
{"nick":"igorzi","message":"but i don't know.. maybe we can punt on junction points altogether?","date":"2011-09-03T18:56:54.456Z","type":"message"}
{"nick":"ryah","action":"likes punting","date":"2011-09-03T18:57:07.374Z","type":"action"}
{"nick":"piscisaureus","message":"igorzi: try `mklink foo bar` and `mklink /d foo bar` when not elevated","date":"2011-09-03T18:57:20.804Z","type":"message"}
{"nick":"piscisaureus","message":"but I'm all in for punting on junctions","date":"2011-09-03T18:57:46.657Z","type":"message"}
{"nick":"piscisaureus","message":"but it would be nice if the api was flexible enough so we can add it later","date":"2011-09-03T18:58:00.132Z","type":"message"}
{"nick":"ryah","message":"igorzi: the patch looks good to me after you add the comment. i'll upgrade libuv in node and apply https://github.com/igorzi/node/commit/de3a29f4dec1296e846990d742279f3126c4d15f after","date":"2011-09-03T18:58:35.058Z","type":"message"}
{"nick":"ryah","message":"removing those ifdefs is awesome","date":"2011-09-03T18:58:50.933Z","type":"message"}
{"nick":"ryah","message":"makes me feel good :)","date":"2011-09-03T18:59:00.657Z","type":"message"}
{"nick":"igorzi","message":"if we include flags with just UV_SYMLINK_DIR for now.. we can always add more later","date":"2011-09-03T18:59:04.865Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: _S_IWRITE - is that \"binary compatible\" with unix mode flags?","date":"2011-09-03T18:59:15.052Z","type":"message"}
{"nick":"igorzi","message":"it corresponds to S_IWUSR","date":"2011-09-03T19:03:37.440Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 kuebk: Unexpected behavior of console.log under certain condition - https://github.com/joyent/node/issues/1634","date":"2011-09-03T19:09:11.270Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: https-large-response","date":"2011-09-03T19:16:07.795Z","type":"message"}
{"nick":"piscisaureus","message":"real     0m3.107s \\ user     0m2.676s \\ sys     0m0.608s <-- use-legacy","date":"2011-09-03T19:16:07.950Z","type":"message"}
{"nick":"piscisaureus","message":"real     0m10.395s \\ user     0m10.305s \\ sys     0m0.672s <-- use-uv","date":"2011-09-03T19:16:07.950Z","type":"message"}
{"nick":"piscisaureus","message":"That conforms what koichi sees","date":"2011-09-03T19:16:28.023Z","type":"message"}
{"nick":"piscisaureus","message":"I can confirm that it's not a gc issue","date":"2011-09-03T19:17:31.163Z","type":"message"}
{"nick":"ryah","message":"piscisaureus: on windows?","date":"2011-09-03T19:20:53.006Z","type":"message"}
{"nick":"ryah","message":"or is that linux?","date":"2011-09-03T19:20:59.589Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: linux","date":"2011-09-03T19:21:15.718Z","type":"message"}
{"nick":"piscisaureus","action":"can't get used to linux fonts","date":"2011-09-03T19:22:28.194Z","type":"action"}
{"nick":"ryah","action":"opens up inspector","date":"2011-09-03T19:24:24.145Z","type":"action"}
{"nick":"CIA-52","message":"\u0002libuv:\u000f \u000303Igor Zinkovsky\u000f \u000307master\u000f * r\u0002cf5ed86\u000f \u000310\u000f/ (5 files in 2 dirs)\u0002:\u000f windows: implement missing fs functions - http://git.io/kyflcw","date":"2011-09-03T19:24:48.210Z","type":"message"}
{"nick":"ryah","message":"it seems we're doing more memcpy in libuv","date":"2011-09-03T19:28:26.920Z","type":"message"}
{"nick":"ryah","message":"hmm","date":"2011-09-03T19:32:24.819Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-03T19:32:33.314Z","type":"message"}
{"nick":"piscisaureus","message":"I can't imagine where that happens","date":"2011-09-03T19:32:39.864Z","type":"message"}
{"nick":"piscisaureus","message":"that test doesn't even work on windows","date":"2011-09-03T19:33:44.465Z","type":"message"}
{"nick":"ryah","message":"hmm","date":"2011-09-03T19:33:54.832Z","type":"message"}
{"nick":"ryah","message":"my profiling is not bringing up interesting info...","date":"2011-09-03T19:34:07.035Z","type":"message"}
{"nick":"piscisaureus","message":"works for debug but not release :-/","date":"2011-09-03T19:34:28.196Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-03T19:35:33.664Z","type":"message"}
{"nick":"piscisaureus","message":"eventually it works for release","date":"2011-09-03T19:35:38.788Z","type":"message"}
{"nick":"piscisaureus","message":"but after idling for 10s or so","date":"2011-09-03T19:35:44.163Z","type":"message"}
{"nick":"piscisaureus","message":"I'm going to prof this on win","date":"2011-09-03T19:36:25.050Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: hey. gyp still doesn't add proper /subsystem:console flag for me","date":"2011-09-03T19:38:14.940Z","type":"message"}
{"nick":"piscisaureus","message":"... pushing through unknown jungles everyday","date":"2011-09-03T19:39:03.203Z","type":"message"}
{"nick":"piscisaureus","message":"ouch","date":"2011-09-03T19:42:25.688Z","type":"message"}
{"nick":"ryah","message":"i suspect this is related to the slabs..","date":"2011-09-03T19:42:39.529Z","type":"message"}
{"nick":"piscisaureus","message":"v8::internal::ConsStringReadBlock(vlass v8::internal::String::ReadBlockBuffer*, unsigned int*, unsigned int*)","date":"2011-09-03T19:43:19.371Z","type":"message"}
{"nick":"piscisaureus","message":"^-- very hot on windows","date":"2011-09-03T19:43:26.955Z","type":"message"}
{"nick":"piscisaureus","message":"takes 93% of the time","date":"2011-09-03T19:43:44.449Z","type":"message"}
{"nick":"ryah","message":"i dont see that at all","date":"2011-09-03T19:44:26.628Z","type":"message"}
{"nick":"piscisaureus","message":"called by node::Buffer::Utf8Write","date":"2011-09-03T19:44:29.620Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: on windows it looks very different","date":"2011-09-03T19:45:04.683Z","type":"message"}
{"nick":"piscisaureus","message":"on linux I see the dots appear very slowly at first, then at 2/3 progress they start to come fast","date":"2011-09-03T19:45:25.523Z","type":"message"}
{"nick":"piscisaureus","message":"on windows I don't see dots coming at all for > 10 s, but when they start coming they come fast","date":"2011-09-03T19:45:52.124Z","type":"message"}
{"nick":"ryah","message":"http://tinyclouds.org/https-large-response-uv.png","date":"2011-09-03T19:47:22.779Z","type":"message"}
{"nick":"ryah","message":"http://tinyclouds.org/https-large-response-legacy.png","date":"2011-09-03T19:47:26.160Z","type":"message"}
{"nick":"ryah","message":"oh shit - it's scrolled down","date":"2011-09-03T19:47:57.069Z","type":"message"}
{"nick":"ryah","message":"updated http://tinyclouds.org/https-large-response-legacy.png","date":"2011-09-03T19:48:49.860Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: http://twitpic.com/6fkbyy","date":"2011-09-03T19:50:52.207Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: I think I need to force v8 to flatten the body","date":"2011-09-03T19:52:12.780Z","type":"message"}
{"nick":"piscisaureus","message":"instead of using a cons string","date":"2011-09-03T19:52:18.323Z","type":"message"}
{"nick":"ryah","message":"that's what the String::HINT_MANY_WRITES_EXPECTED","date":"2011-09-03T19:53:42.946Z","type":"message"}
{"nick":"ryah","message":"does in src/node_buffer.cc","date":"2011-09-03T19:53:50.379Z","type":"message"}
{"nick":"ryah","message":":/","date":"2011-09-03T20:06:25.104Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-03T20:20:47.143Z","type":"message"}
{"nick":"piscisaureus","message":"v8 broke the mingw build once more","date":"2011-09-03T20:20:53.463Z","type":"message"}
{"nick":"piscisaureus","message":"or - the d8 build anyway","date":"2011-09-03T20:21:07.562Z","type":"message"}
{"nick":"piscisaureus","message":"var body = '';","date":"2011-09-03T20:34:15.523Z","type":"message"}
{"nick":"piscisaureus","message":"process.stdout.write('build body...');","date":"2011-09-03T20:34:15.682Z","type":"message"}
{"nick":"piscisaureus","message":"for (var i = 0; i < 1024*1024; i++) {","date":"2011-09-03T20:34:15.682Z","type":"message"}
{"nick":"piscisaureus","message":"  body += 'hello world\\n';","date":"2011-09-03T20:34:15.682Z","type":"message"}
{"nick":"piscisaureus","message":"}","date":"2011-09-03T20:34:15.682Z","type":"message"}
{"nick":"piscisaureus","message":"process.stdout.write('converting buffer to body\\n');","date":"2011-09-03T20:34:16.134Z","type":"message"}
{"nick":"piscisaureus","message":"/* This line takes > 10 s on windows */","date":"2011-09-03T20:34:16.292Z","type":"message"}
{"nick":"piscisaureus","message":"body = new Buffer(body, \"utf-8\");","date":"2011-09-03T20:34:17.081Z","type":"message"}
{"nick":"piscisaureus","message":"ryah: ^-- looks like a v8 bug","date":"2011-09-03T20:34:27.940Z","type":"message"}
{"nick":"piscisaureus","message":"the even weirder news","date":"2011-09-03T20:35:34.611Z","type":"message"}
{"nick":"piscisaureus","message":"without optimizing it doesn't","date":"2011-09-03T20:35:48.579Z","type":"message"}
{"nick":"piscisaureus","message":"---","date":"2011-09-03T20:38:50.793Z","type":"message"}
{"nick":"piscisaureus","message":"process.stdout.write('build body...');","date":"2011-09-03T20:38:58.708Z","type":"message"}
{"nick":"piscisaureus","message":"for (var i = 0; i < 1024*1024; i++) {","date":"2011-09-03T20:38:58.868Z","type":"message"}
{"nick":"piscisaureus","message":"  body.push('hello world\\n');","date":"2011-09-03T20:38:58.868Z","type":"message"}
{"nick":"piscisaureus","message":"}","date":"2011-09-03T20:38:58.868Z","type":"message"}
{"nick":"piscisaureus","message":"process.stdout.write('converting body to buffer\\n');","date":"2011-09-03T20:38:58.868Z","type":"message"}
{"nick":"piscisaureus","message":"body = new Buffer(body.join(''), \"utf-8\");","date":"2011-09-03T20:38:59.121Z","type":"message"}
{"nick":"piscisaureus","message":"process.stdout.write('done\\n');","date":"2011-09-03T20:38:59.278Z","type":"message"}
{"nick":"piscisaureus","message":"^-- very fast now","date":"2011-09-03T20:39:00.097Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: hey","date":"2011-09-03T20:49:04.260Z","type":"message"}
{"nick":"piscisaureus","message":"(ignore me if you feel like watching tv or drinking now)","date":"2011-09-03T20:49:22.752Z","type":"message"}
{"nick":"mraleph","message":"piscisaureus: \\o/","date":"2011-09-03T20:50:29.798Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: I'm seeing very weird perf from v8 in windows/msvc","date":"2011-09-03T20:51:19.979Z","type":"message"}
{"nick":"mraleph","message":"details?","date":"2011-09-03T20:51:52.749Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: I'm writing a test case as we speak. But it boils down to this:","date":"2011-09-03T20:52:43.831Z","type":"message"}
{"nick":"piscisaureus","message":"writing a long cons string to a buffer is very slow in windows when optimizations are on","date":"2011-09-03T20:52:43.986Z","type":"message"}
{"nick":"piscisaureus","message":"in debug mode perf is acceptable","date":"2011-09-03T20:52:50.599Z","type":"message"}
{"nick":"mraleph","message":"hmm","date":"2011-09-03T20:53:00.265Z","type":"message"}
{"nick":"piscisaureus","message":"and using Array.join is even faster","date":"2011-09-03T20:53:10.100Z","type":"message"}
{"nick":"mraleph","message":"well join is a special beast","date":"2011-09-03T20:53:25.102Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: see http://piscisaureus.no.de/ (the part just before you joined) for a sneak peek","date":"2011-09-03T20:53:54.316Z","type":"message"}
{"nick":"mraleph","message":"can you reduce it to some sample?","date":"2011-09-03T20:53:55.797Z","type":"message"}
{"nick":"piscisaureus","message":"yes, doing it now","date":"2011-09-03T20:54:01.723Z","type":"message"}
{"nick":"mraleph","message":"k","date":"2011-09-03T20:54:08.845Z","type":"message"}
{"nick":"mraleph","message":"I can see it in the log","date":"2011-09-03T20:54:36.075Z","type":"message"}
{"nick":"mraleph","message":"but better to have like a clear v8 repro without node.js stuff","date":"2011-09-03T20:55:04.585Z","type":"message"}
{"nick":"mraleph","message":"I'll take a look on monday on my win7 box","date":"2011-09-03T20:55:25.543Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: but how can I trigger writeUt8 without node?","date":"2011-09-03T20:55:33.894Z","type":"message"}
{"nick":"piscisaureus","message":"*writeUtf8","date":"2011-09-03T20:55:50.820Z","type":"message"}
{"nick":"mraleph","message":"add a small function to shell.cc sample that take a string and calls writeutf?","date":"2011-09-03T20:56:29.438Z","type":"message"}
{"nick":"mraleph","message":"but that's pretty interesting.","date":"2011-09-03T20:56:54.305Z","type":"message"}
{"nick":"piscisaureus","message":"if it's true it's gonna be important for you","date":"2011-09-03T20:57:10.193Z","type":"message"}
{"nick":"piscisaureus","message":"since this is not unlikely to affect chrome","date":"2011-09-03T20:57:26.476Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: hmm, it's more complicated","date":"2011-09-03T21:00:25.048Z","type":"message"}
{"nick":"piscisaureus","message":"it doesn't happen if I remove the `https = require('https')` statement","date":"2011-09-03T21:00:48.100Z","type":"message"}
{"nick":"mraleph","message":"hehehe","date":"2011-09-03T21:00:54.186Z","type":"message"}
{"nick":"piscisaureus","message":"but that's very weird","date":"2011-09-03T21:01:03.547Z","type":"message"}
{"nick":"mraleph","message":"things are getting complicated","date":"2011-09-03T21:01:06.673Z","type":"message"}
{"nick":"mraleph","message":"have you tried profiling?","date":"2011-09-03T21:01:13.305Z","type":"message"}
{"nick":"piscisaureus","message":"since that does nothing but export a few functions :-/","date":"2011-09-03T21:01:14.110Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: yes","date":"2011-09-03T21:01:20.896Z","type":"message"}
{"nick":"mraleph","message":"what does it show?","date":"2011-09-03T21:01:27.671Z","type":"message"}
{"nick":"piscisaureus","message":"hmm","date":"2011-09-03T21:01:33.444Z","type":"message"}
{"nick":"piscisaureus","message":"let me run it again","date":"2011-09-03T21:01:36.772Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: https://gist.github.com/1191789","date":"2011-09-03T21:03:00.077Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: also \u0003\u000301http://twitpic.com/6fkbyy\u0003\u000301","date":"2011-09-03T21:03:13.201Z","type":"message"}
{"nick":"mraleph","message":"I understand that it might affect Chrome, but I can't do anything right know because I don't have a win box that at home.","date":"2011-09-03T21:03:21.594Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: I don't blame you","date":"2011-09-03T21:03:32.189Z","type":"message"}
{"nick":"piscisaureus","message":"after all it's saturday night","date":"2011-09-03T21:03:36.207Z","type":"message"}
{"nick":"piscisaureus","message":"I wasn't trying to feed you with guilt :-)","date":"2011-09-03T21:03:56.972Z","type":"message"}
{"nick":"mraleph","message":"is this debug version or release version?","date":"2011-09-03T21:03:59.846Z","type":"message"}
{"nick":"piscisaureus","message":"release","date":"2011-09-03T21:04:03.452Z","type":"message"}
{"nick":"piscisaureus","message":"both","date":"2011-09-03T21:04:04.544Z","type":"message"}
{"nick":"mraleph","message":"can you also profile debug?","date":"2011-09-03T21:04:30.274Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: https://gist.github.com/1191795","date":"2011-09-03T21:05:04.719Z","type":"message"}
{"nick":"piscisaureus","message":"^-- debug","date":"2011-09-03T21:05:11.284Z","type":"message"}
{"nick":"mraleph","message":"nice C++ picture is more informative ;-)","date":"2011-09-03T21:05:35.560Z","type":"message"}
{"nick":"piscisaureus","message":"ok","date":"2011-09-03T21:05:45.370Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: but the test runs very short, doesn't profile well with msvc","date":"2011-09-03T21:06:10.457Z","type":"message"}
{"nick":"piscisaureus","message":"let's try","date":"2011-09-03T21:06:11.748Z","type":"message"}
{"nick":"piscisaureus","message":"(it runs short in debug mode)","date":"2011-09-03T21:06:25.452Z","type":"message"}
{"nick":"mraleph","message":"spooky","date":"2011-09-03T21:06:35.920Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: debug -- http://twitpic.com/6fle8h","date":"2011-09-03T21:07:28.380Z","type":"message"}
{"nick":"mraleph","message":"I would say that the string is flat for some reason","date":"2011-09-03T21:08:29.921Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: maybe","date":"2011-09-03T21:08:40.796Z","type":"message"}
{"nick":"piscisaureus","message":"but it is several mb in size","date":"2011-09-03T21:08:46.048Z","type":"message"}
{"nick":"piscisaureus","message":"and flattening a string once shouldn't be much slower than concetenating it 1M times right?","date":"2011-09-03T21:09:40.986Z","type":"message"}
{"nick":"piscisaureus","message":"I'm gonna try find the offending statement in https.js","date":"2011-09-03T21:10:51.118Z","type":"message"}
{"nick":"mraleph","message":"i don't think it the offending statement.","date":"2011-09-03T21:11:06.580Z","type":"message"}
{"nick":"mraleph","message":"I guess it's just luck","date":"2011-09-03T21:11:14.379Z","type":"message"}
{"nick":"mraleph","message":"I mean GC timing and stuff","date":"2011-09-03T21:11:27.001Z","type":"message"}
{"nick":"mraleph","message":"let me look at the code of WriteUTF it probably uses TryFlatten","date":"2011-09-03T21:11:41.177Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: if I remove 2 other require statements the debug build becomes slow too","date":"2011-09-03T21:12:47.425Z","type":"message"}
{"nick":"piscisaureus","message":"var common = require('../common'); var assert = require('assert');","date":"2011-09-03T21:12:58.865Z","type":"message"}
{"nick":"mraleph","message":"it's just tryflatten which succeds of fails","date":"2011-09-03T21:13:39.026Z","type":"message"}
{"nick":"piscisaureus","message":"what is better? succeed or fail?","date":"2011-09-03T21:14:09.658Z","type":"message"}
{"nick":"mraleph","message":"succeed I think","date":"2011-09-03T21:14:17.342Z","type":"message"}
{"nick":"mraleph","message":"the question is: why writing a consstring is so much less effecient than flattening and then writing it.","date":"2011-09-03T21:14:51.342Z","type":"message"}
{"nick":"mraleph","message":"maybe recursion kills it","date":"2011-09-03T21:15:21.004Z","type":"message"}
{"nick":"mraleph","message":"http://code.google.com/p/v8/source/browse/trunk/src/api.cc#3635","date":"2011-09-03T21:15:32.193Z","type":"message"}
{"nick":"piscisaureus","message":"How can tryFlatten fail?","date":"2011-09-03T21:16:54.443Z","type":"message"}
{"nick":"piscisaureus","message":"(side question)","date":"2011-09-03T21:17:10.945Z","type":"message"}
{"nick":"mraleph","message":"when V8 failed to allocate result without GC","date":"2011-09-03T21:18:15.401Z","type":"message"}
{"nick":"mraleph","message":"ok I can clearly see it know","date":"2011-09-03T21:20:54.555Z","type":"message"}
{"nick":"mraleph","message":"so the string is 1mb large","date":"2011-09-03T21:21:03.214Z","type":"message"}
{"nick":"piscisaureus","message":"more","date":"2011-09-03T21:21:07.999Z","type":"message"}
{"nick":"piscisaureus","message":"10mb or so","date":"2011-09-03T21:21:11.696Z","type":"message"}
{"nick":"mraleph","message":"or more","date":"2011-09-03T21:21:12.124Z","type":"message"}
{"nick":"mraleph","message":"ah yeah","date":"2011-09-03T21:21:18.284Z","type":"message"}
{"nick":"mraleph","message":"so it will hit the limit of old space allocation immediately in most cases.","date":"2011-09-03T21:21:49.709Z","type":"message"}
{"nick":"mraleph","message":"unless there was a full collection","date":"2011-09-03T21:22:00.366Z","type":"message"}
{"nick":"mraleph","message":"which tweaked the old space limit ","date":"2011-09-03T21:22:12.544Z","type":"message"}
{"nick":"mraleph","reason":"Quit: Leaving.","date":"2011-09-03T21:38:27.165Z","type":"quit"}
{"nick":"piscisaureus","message":"ConsStringReadBlock is really very hot","date":"2011-09-03T21:51:15.372Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: I'm pretty sure there's a real bug in v8","date":"2011-09-03T22:09:28.414Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: this practically busyloops: https://github.com/joyent/node/blob/master/deps/v8/src/objects.cc#L5260-5276","date":"2011-09-03T22:10:48.127Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: aha!","date":"2011-09-03T22:14:41.490Z","type":"message"}
{"nick":"piscisaureus","message":"mraleph: it iterates over all cons blocks, but then only writes 1k bytes","date":"2011-09-03T22:15:01.954Z","type":"message"}
{"nick":"DrPizza","message":"piscisaureus: that's really odd, I will take another look at it then","date":"2011-09-03T22:16:10.019Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-03T22:17:38.457Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-03T22:18:01.264Z","type":"join"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-03T22:19:33.627Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-03T22:19:51.305Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Pita: Can't do process.on('SIGINT' with 0.5.4 on windows - https://github.com/joyent/node/issues/1553","date":"2011-09-03T22:20:48.193Z","type":"message"}
{"nick":"dmkbot","reason":"Remote host closed the connection","date":"2011-09-03T22:22:30.281Z","type":"quit"}
{"nick":"dmkbot","date":"2011-09-03T22:22:50.606Z","type":"join"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Pita: Can't do process.on('SIGINT' with 0.5.4 on windows - https://github.com/joyent/node/issues/1553","date":"2011-09-03T22:24:32.630Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Pita: Can't do process.on('SIGINT' with 0.5.4 on windows - https://github.com/joyent/node/issues/1553","date":"2011-09-03T22:35:02.612Z","type":"message"}
{"nick":"dmkbot","message":"\u0002joyent/node:\u0002 Pita: Can't do process.on('SIGINT' with 0.5.4 on windows - https://github.com/joyent/node/issues/1553","date":"2011-09-03T22:36:32.674Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: Windows has literally no equivalent to UNIX signals. The function you link to is a complete fake: sending a signal to the function directly executes the associated signal handler in the calling thread.","date":"2011-09-03T22:37:40.834Z","type":"message"}
{"nick":"piscisaureus","message":"I don't grok","date":"2011-09-03T22:37:43.244Z","type":"message"}
{"nick":"DrPizza","message":"take a look at CRT's code","date":"2011-09-03T22:38:53.053Z","type":"message"}
{"nick":"DrPizza","message":"the raise signal function just runs the callback directly","date":"2011-09-03T22:39:05.527Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: we're not talking about raise and signal","date":"2011-09-03T22:39:17.166Z","type":"message"}
{"nick":"DrPizza","message":"rather than finding a thread with a suitable signal mask and delivering the signal to that thread","date":"2011-09-03T22:39:21.440Z","type":"message"}
{"nick":"DrPizza","message":"SIGINT is delivered to a thread with a suitable mask, no?","date":"2011-09-03T22:39:36.666Z","type":"message"}
{"nick":"piscisaureus","message":"We're talking SetConsoleCtrlHandler and GenerateConsoleCtrlEvent","date":"2011-09-03T22:39:36.820Z","type":"message"}
{"nick":"DrPizza","message":"right","date":"2011-09-03T22:39:41.215Z","type":"message"}
{"nick":"DrPizza","message":"that's what I'm saying","date":"2011-09-03T22:39:44.019Z","type":"message"}
{"nick":"DrPizza","message":"there is literally no equivalent to unix signals","date":"2011-09-03T22:39:50.461Z","type":"message"}
{"nick":"DrPizza","message":"the mechanism is totally different","date":"2011-09-03T22:39:53.860Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: it's not","date":"2011-09-03T22:39:59.161Z","type":"message"}
{"nick":"DrPizza","message":"it really is","date":"2011-09-03T22:40:04.261Z","type":"message"}
{"nick":"piscisaureus","message":"the mechanism is very similar :-)","date":"2011-09-03T22:40:07.795Z","type":"message"}
{"nick":"DrPizza","message":"no it isn't.","date":"2011-09-03T22:40:11.564Z","type":"message"}
{"nick":"piscisaureus","message":"but less advanced","date":"2011-09-03T22:40:12.590Z","type":"message"}
{"nick":"DrPizza","message":"for ctrl-c, CSRSS creates a thread inside your process","date":"2011-09-03T22:40:17.947Z","type":"message"}
{"nick":"DrPizza","message":"and runs the callback in that thread","date":"2011-09-03T22:40:22.320Z","type":"message"}
{"nick":"piscisaureus","message":"Yes, I that could be true","date":"2011-09-03T22:41:08.593Z","type":"message"}
{"nick":"piscisaureus","message":"but the effect is very similar","date":"2011-09-03T22:41:13.944Z","type":"message"}
{"nick":"DrPizza","message":"no  it's very different","date":"2011-09-03T22:41:22.864Z","type":"message"}
{"nick":"DrPizza","message":"it has huge implications for safety","date":"2011-09-03T22:41:26.727Z","type":"message"}
{"nick":"DrPizza","message":"thread safety, that is","date":"2011-09-03T22:41:30.629Z","type":"message"}
{"nick":"DrPizza","message":"for POSIX signals you can force signals to be routed into a thread of your choosing","date":"2011-09-03T22:41:41.030Z","type":"message"}
{"nick":"piscisaureus","message":"for us it doesn't matter much","date":"2011-09-03T22:42:26.203Z","type":"message"}
{"nick":"piscisaureus","message":"we just need to call uv_async_send or something","date":"2011-09-03T22:42:36.388Z","type":"message"}
{"nick":"DrPizza","message":"you can use signals as a generalized notification mechanism","date":"2011-09-03T22:42:39.801Z","type":"message"}
{"nick":"piscisaureus","message":"yes, that's true","date":"2011-09-03T22:42:47.279Z","type":"message"}
{"nick":"DrPizza","message":"for us we can support SIGINT and SIGINT *alone*","date":"2011-09-03T22:42:51.899Z","type":"message"}
{"nick":"piscisaureus","message":"as I said, windows is less advanced","date":"2011-09-03T22:42:59.003Z","type":"message"}
{"nick":"piscisaureus","message":"+ SIGTERM","date":"2011-09-03T22:43:03.205Z","type":"message"}
{"nick":"DrPizza","message":"how do we get SIGTERM?","date":"2011-09-03T22:43:23.941Z","type":"message"}
{"nick":"piscisaureus","message":"its CTRL_CLOSE_EVENT","date":"2011-09-03T22:43:32.594Z","type":"message"}
{"nick":"piscisaureus","message":"iow, the console window is being closed","date":"2011-09-03T22:43:45.354Z","type":"message"}
{"nick":"DrPizza","message":"hm, probably close enough ","date":"2011-09-03T22:43:56.410Z","type":"message"}
{"nick":"piscisaureus","message":"DrPizza: there are not so many useful signals for node users","date":"2011-09-03T22:44:49.985Z","type":"message"}
{"nick":"piscisaureus","message":"SIGTERM, SIGINT, SIGWINCH","date":"2011-09-03T22:44:57.440Z","type":"message"}
{"nick":"DrPizza","message":"WINCH?","date":"2011-09-03T22:45:06.705Z","type":"message"}
{"nick":"piscisaureus","message":"we can do SIGWINCH by reading the console input stream","date":"2011-09-03T22:45:07.861Z","type":"message"}
{"nick":"piscisaureus","message":"WINCH == the console window got resized","date":"2011-09-03T22:45:20.792Z","type":"message"}
{"nick":"piscisaureus","message":"SIGCHLD is handled by libuv internally","date":"2011-09-03T22:45:37.129Z","type":"message"}
{"nick":"piscisaureus","message":"SIGPIPE too","date":"2011-09-03T22:46:05.938Z","type":"message"}
{"nick":"piscisaureus","message":"there's not much more useful signals","date":"2011-09-03T22:46:58.494Z","type":"message"}
{"nick":"piscisaureus","message":"SIGUSR is missing, that's a pita","date":"2011-09-03T22:47:11.188Z","type":"message"}
{"nick":"DrPizza","message":"might people use SIGUSR","date":"2011-09-03T22:47:15.659Z","type":"message"}
{"nick":"DrPizza","message":"heh","date":"2011-09-03T22:47:18.445Z","type":"message"}
{"nick":"DrPizza","message":"yeah","date":"2011-09-03T22:47:18.983Z","type":"message"}
{"nick":"piscisaureus","message":"because it is very useful for triggering the debugger","date":"2011-09-03T22:47:20.541Z","type":"message"}
{"nick":"DrPizza","message":"SIGALRM?","date":"2011-09-03T22:47:21.615Z","type":"message"}
{"nick":"piscisaureus","message":"and that kind of stuff","date":"2011-09-03T22:47:25.394Z","type":"message"}
{"nick":"piscisaureus","message":"SIGALRM and friends are used for timers","date":"2011-09-03T22:47:33.814Z","type":"message"}
{"nick":"piscisaureus","message":"we have better ways of doing that","date":"2011-09-03T22:47:42.762Z","type":"message"}
{"nick":"DrPizza","message":"I guess node users would prefer setinterval/settimeout","date":"2011-09-03T22:47:48.991Z","type":"message"}
{"nick":"piscisaureus","message":"exactly","date":"2011-09-03T22:47:55.807Z","type":"message"}
{"nick":"piscisaureus","message":"the situation is not so grim heh :-)","date":"2011-09-03T22:48:02.158Z","type":"message"}
{"nick":"DrPizza","message":"which signals might other processes want to send","date":"2011-09-03T22:48:12.470Z","type":"message"}
{"nick":"piscisaureus","message":"SKIGKILL, SIGUSRx, SIGTERM","date":"2011-09-03T22:49:16.045Z","type":"message"}
{"nick":"piscisaureus","message":"I think CTRL_CLOSE_EVENT is closer to SIGHUP btw","date":"2011-09-03T22:49:24.740Z","type":"message"}
{"nick":"DrPizza","message":"yes, that's what I was thinking","date":"2011-09-03T22:49:33.370Z","type":"message"}
{"nick":"piscisaureus","message":"maybe stop and resume as well","date":"2011-09-03T22:49:36.558Z","type":"message"}
{"nick":"DrPizza","message":"term is terminate isn't it?","date":"2011-09-03T22:49:38.202Z","type":"message"}
{"nick":"DrPizza","message":"hup is just lost your console","date":"2011-09-03T22:49:42.011Z","type":"message"}
{"nick":"piscisaureus","message":"(don't recall the signal names)","date":"2011-09-03T22:49:44.051Z","type":"message"}
{"nick":"DrPizza","message":"but windows has no real equivalent","date":"2011-09-03T22:49:46.488Z","type":"message"}
{"nick":"DrPizza","message":"I would guess that it would be more expected for closing the window to close the program","date":"2011-09-03T22:50:09.635Z","type":"message"}
{"nick":"DrPizza","message":"so I think mapping clos eevent to SIGTERM would be reasonable","date":"2011-09-03T22:50:16.286Z","type":"message"}
{"nick":"piscisaureus","message":"Yes I think so too","date":"2011-09-03T22:51:17.208Z","type":"message"}
{"nick":"piscisaureus","message":"CTRL_CLOSE_EVENT - A signal that the system sends to all processes attached to a console when the user closes the console (either by clicking Close on the console window's window menu, or by clicking the End Task button command from Task Manager).","date":"2011-09-03T22:51:33.660Z","type":"message"}
{"nick":"DrPizza","message":"so like WM_QUIT but for console processes","date":"2011-09-03T22:51:52.649Z","type":"message"}
{"nick":"piscisaureus","message":"yes, exactly","date":"2011-09-03T22:52:01.387Z","type":"message"}
{"nick":"bnoordhuis","date":"2011-09-03T23:03:50.192Z","type":"join"}
{"nick":"igorzi","message":"piscisaureus: is readlink on unix the same as open+read?","date":"2011-09-03T23:07:03.245Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: afaik readlink returns the link target","date":"2011-09-03T23:07:26.379Z","type":"message"}
{"nick":"piscisaureus","message":"so if `foo` is a reference to `../bar` then readlink(`foo`) == `../bar`","date":"2011-09-03T23:07:45.600Z","type":"message"}
{"nick":"piscisaureus","message":"so it is more similar to CreateFile + GetFinalPathNameByHandle but this resolves symlinks recursively while readlink just returns the link target","date":"2011-09-03T23:09:21.788Z","type":"message"}
{"nick":"igorzi","message":"piscisaureus: and open('foo') would also get ../bar, right?","date":"2011-09-03T23:09:41.056Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: well...","date":"2011-09-03T23:09:53.681Z","type":"message"}
{"nick":"igorzi","message":"(on unix)","date":"2011-09-03T23:10:04.947Z","type":"message"}
{"nick":"piscisaureus","message":"suppose you have","date":"2011-09-03T23:10:06.975Z","type":"message"}
{"nick":"piscisaureus","message":"foo -> ../bar","date":"2011-09-03T23:10:07.130Z","type":"message"}
{"nick":"piscisaureus","message":"../bar -> baz","date":"2011-09-03T23:10:07.130Z","type":"message"}
{"nick":"piscisaureus","message":"then open(foo) would get ../baz","date":"2011-09-03T23:10:16.971Z","type":"message"}
{"nick":"piscisaureus","message":"but readlink just returns ../bar","date":"2011-09-03T23:10:25.004Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: but yes - open() resolves the symlink, it does not open the link itself","date":"2011-09-03T23:10:59.403Z","type":"message"}
{"nick":"igorzi","message":"so, if i did open(foo), and then read would i not get contents of baz?","date":"2011-09-03T23:11:48.941Z","type":"message"}
{"nick":"piscisaureus","message":"igorzi: with open you would get the contents of baz","date":"2011-09-03T23:12:12.071Z","type":"message"}
{"nick":"piscisaureus","message":"but not readlink","date":"2011-09-03T23:12:16.075Z","type":"message"}
{"nick":"piscisaureus","message":"that would just return `../bar`","date":"2011-09-03T23:12:25.858Z","type":"message"}
{"nick":"igorzi","message":"ok, got it","date":"2011-09-03T23:12:31.990Z","type":"message"}
{"nick":"igorzi","message":"it basically gives you path argument that you passed into symlink?","date":"2011-09-03T23:13:24.921Z","type":"message"}
{"nick":"piscisaureus","message":"yes","date":"2011-09-03T23:13:31.486Z","type":"message"}
{"nick":"bnoordhuis","message":"igorzi: you working on uv_fs_readlink?","date":"2011-09-03T23:30:40.800Z","type":"message"}
